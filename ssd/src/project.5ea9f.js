window.__require=function t(e,i,n){function o(r,s){if(!i[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var h=i[r]={exports:{}};e[r][0].call(h.exports,function(t){return o(e[r][1][t]||t)},h,h.exports,t,e,i,n)}return i[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)o(n[r]);return o}({AuthSignatureInfo:[function(t,e,i){"use strict";cc._RF.push(e,"518e8ixa2VMGaRcPmgFxyZp","AuthSignatureInfo");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../GameLibs/ByteBuffer/bytebuffer"),a=t("./InfoBase"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.encode=function(t){var e=new o;e.writeString(this.token),this.tokenLength=e.offset,t.writeInt(this.tokenLength),t.writeString(this.token)},e}(a.InfoBase);i.RequestAuthSignature=r;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){this.resultID=t.readShort(),this.uin=t.readInt(),0==this.resultID&&(this.account=t.readString(t.readShort()),this.errorMsg=t.readString(t.readShort()))},e}(a.InfoBase);i.AuthSignatureInfo=s,cc._RF.pop()},{"../../../GameLibs/ByteBuffer/bytebuffer":"bytebuffer","./InfoBase":"InfoBase"}],AvatarBoxLayout:[function(t,e,i){"use strict";cc._RF.push(e,"e65a5qzE7JJoY4WgmoOi3Aw","AvatarBoxLayout");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../../../../GameCompents/Layout"),r=cc._decorator,s=r.ccclass,c=r.property,l=r.executeInEditMode,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatarbox=null,e.nameNode=null,e.huangGuang=null,e.goldInfo=null,e.actualFontSize=0,e}return n(e,t),e.prototype.onLoad=function(){this.label=this.nameNode.getComponent(cc.Label)},e.prototype.update=function(){this.Layout()},e.prototype.Layout=function(){if(this.actualFontSize!=this.label.actualFontSize){var t=0;1==this.huangGuang.active&&(t=2);var e=this.nameNode.getComponent(cc.Label).actualFontSize,i=this.avatarbox.height/2+e/3*2+t,n=new cc.Vec3(0,i,0);this.nameNode.setPosition(n),this.nameNode.width=this.node.width+this.node.width/2,this.goldInfo.height=this.avatarbox.height/2.5,this.goldInfo.width=1.4*this.avatarbox.width,n=new cc.Vec3(0,-this.avatarbox.height/2-this.goldInfo.height/2,0),this.goldInfo.setPosition(n),this.huangGuang.width=this.avatarbox.width/4,this.huangGuang.height=this.avatarbox.width/5,n=new cc.Vec3(0,this.avatarbox.height/2,0),this.huangGuang.setPosition(n)}},o([c(cc.Node)],e.prototype,"avatarbox",void 0),o([c(cc.Node)],e.prototype,"nameNode",void 0),o([c(cc.Node)],e.prototype,"huangGuang",void 0),o([c(cc.Node)],e.prototype,"goldInfo",void 0),e=o([s,l],e)}(a.default);i.default=h,cc._RF.pop()},{"../../../../../../GameCompents/Layout":"Layout"}],BMFont:[function(t,e,i){"use strict";cc._RF.push(e,"a24417ipSlLR6YwGf0dSSr6","BMFont");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./Layout"),r=t("../GameLibs/Collections/Dictionary"),s=cc._decorator,c=s.ccclass,l=s.property,h=s.executeInEditMode,u=function(){function t(){this.charSpriteName="",this.char="",this.baseLineOffset=0,this.leftToCenterDist=.5,this.rightToCenterDist=.5}return o([l()],t.prototype,"charSpriteName",void 0),o([l()],t.prototype,"char",void 0),o([l()],t.prototype,"baseLineOffset",void 0),o([l()],t.prototype,"leftToCenterDist",void 0),o([l()],t.prototype,"rightToCenterDist",void 0),t=o([c("BMFontElemInfo")],t)}();i.BMFontElemInfo=u;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text="",e.atlas=null,e.color=cc.Color.WHITE,e.fontSize=25,e.bmFontElemInfos=[],e.fontElemInfoDict=new r.Dictionary,e}return n(e,t),e.prototype.update=function(){0},e.prototype.Layout=function(){if(null==this.text||0==this.text.length)return this.node.destroyAllChildren(),this.node.width=0,void(this.node.height=0);this.CreateFrontElemInfoDict();for(var t=0,e=this.text.length-this.node.children.length,i=0;i<e;i++)this.CreateElemSpriteNode();for(i=0;i<this.text.length;i++){var n=this.fontElemInfoDict.getValue(this.text[i]),o=this.node.children[i].getComponent(cc.Sprite);o.spriteFrame=this.atlas.getSpriteFrame(n.charSpriteName),o.sizeMode=cc.Sprite.SizeMode.RAW,o.trim=!1;var a=o.node.height/o.node.width;o.node.height=this.fontSize,o.node.width=o.node.height/a,o.node.x=t+n.leftToCenterDist*o.node.width,o.node.y=n.baseLineOffset*o.node.height,t=o.node.x+n.rightToCenterDist*o.node.width}var r=this.node.children[0].position.x-this.node.children[0].width/2,s=this.node.children[this.text.length-1].position.x+this.node.children[this.text.length-1].width/2-r;for(i=0;i<this.text.length;i++){this.node.children[i].x+=-s/2-r}this.node.width=s,this.node.height=this.fontSize;var c=this.node.childrenCount-this.text.length;for(i=0;i<c;i++){this.node.children[this.node.children.length-i-1].destroy()}},e.prototype.CreateElemSpriteNode=function(){var t=new cc.Node;t.setParent(this.node);var e=t.addComponent(cc.Sprite);return e.sizeMode=cc.Sprite.SizeMode.RAW,e.trim=!1,e},e.prototype.CreateFrontElemInfoDict=function(){this.fontElemInfoDict.clear();for(var t=0;t<this.bmFontElemInfos.length;t++)this.fontElemInfoDict.setValue(this.bmFontElemInfos[t].char,this.bmFontElemInfos[t])},o([l],e.prototype,"text",void 0),o([l(cc.SpriteAtlas)],e.prototype,"atlas",void 0),o([l(cc.Color)],e.prototype,"color",void 0),o([l()],e.prototype,"fontSize",void 0),o([l({type:[u]})],e.prototype,"bmFontElemInfos",void 0),e=o([c,h],e)}(a.default);i.default=d,cc._RF.pop()},{"../GameLibs/Collections/Dictionary":"Dictionary","./Layout":"Layout"}],BSTreeKV:[function(t,e,i){"use strict";cc._RF.push(e,"e4435ij0jpMyJkaDs2NHZHx","BSTreeKV"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./util"),o=t("./Queue"),a=function(){function t(t){this.root=null,this.compare=t||n.defaultCompare,this.nElements=0}return t.prototype.add=function(t){return!n.isUndefined(t)&&(null!==this.insertNode(this.createNode(t))&&(this.nElements++,!0))},t.prototype.clear=function(){this.root=null,this.nElements=0},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.size=function(){return this.nElements},t.prototype.contains=function(t){return!n.isUndefined(t)&&null!==this.searchNode(this.root,t)},t.prototype.search=function(t){var e=this.searchNode(this.root,t);if(null!==e)return e.element},t.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null!==e&&(this.removeNode(e),this.nElements--,!0)},t.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},t.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},t.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},t.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},t.prototype.minimum=function(){if(!this.isEmpty()&&null!==this.root)return this.minimumAux(this.root).element},t.prototype.maximum=function(){if(!this.isEmpty()&&null!==this.root)return this.maximumAux(this.root).element},t.prototype.forEach=function(t){this.inorderTraversal(t)},t.prototype.toArray=function(){var t=[];return this.inorderTraversal(function(e){return t.push(e),!0}),t},t.prototype.height=function(){return this.heightAux(this.root)},t.prototype.searchNode=function(t,e){for(var i=1;null!==t&&0!==i;)(i=this.compare(e,t.element))<0?t=t.leftCh:i>0&&(t=t.rightCh);return t},t.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},t.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},t.prototype.inorderTraversalAux=function(t,e,i){null===t||i.stop||(this.inorderTraversalAux(t.leftCh,e,i),i.stop||(i.stop=!1===e(t.element),i.stop||this.inorderTraversalAux(t.rightCh,e,i)))},t.prototype.levelTraversalAux=function(t,e){var i=new o.default;for(null!==t&&i.enqueue(t),t=i.dequeue()||null;null!=t;){if(!1===e(t.element))return;null!==t.leftCh&&i.enqueue(t.leftCh),null!==t.rightCh&&i.enqueue(t.rightCh),t=i.dequeue()||null}},t.prototype.preorderTraversalAux=function(t,e,i){null===t||i.stop||(i.stop=!1===e(t.element),i.stop||(this.preorderTraversalAux(t.leftCh,e,i),i.stop||this.preorderTraversalAux(t.rightCh,e,i)))},t.prototype.postorderTraversalAux=function(t,e,i){null===t||i.stop||(this.postorderTraversalAux(t.leftCh,e,i),i.stop||(this.postorderTraversalAux(t.rightCh,e,i),i.stop||(i.stop=!1===e(t.element))))},t.prototype.minimumAux=function(t){for(;null!=t&&null!==t.leftCh;)t=t.leftCh;return t},t.prototype.maximumAux=function(t){for(;null!=t&&null!==t.rightCh;)t=t.rightCh;return t},t.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},t.prototype.insertNode=function(t){for(var e=null,i=this.root;null!==i;){var n=this.compare(t.element,i.element);if(0===n)return null;n<0?(e=i,i=i.leftCh):(e=i,i=i.rightCh)}return t.parent=e,null===e?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},t.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},t}();i.default=a,cc._RF.pop()},{"./Queue":"Queue","./util":"util"}],BSTree:[function(t,e,i){"use strict";cc._RF.push(e,"7b293f0sKFKBbyJkPwP8P+4","BSTree");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(t("./BSTreeKV").default);i.default=o,cc._RF.pop()},{"./BSTreeKV":"BSTreeKV"}],Bag:[function(t,e,i){"use strict";cc._RF.push(e,"037acnUa2pOlqjuObx3kOOj","Bag"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./util"),o=t("./Set"),a=t("./Dictionary"),r=function(){function t(t){this.toStrF=t||n.defaultToString,this.dictionary=new a.Dictionary(this.toStrF),this.nElements=0}return t.prototype.add=function(t,e){if(void 0===e&&(e=1),n.isUndefined(t)||e<=0)return!1;if(this.contains(t))this.dictionary.getValue(t).copies+=e;else{var i={value:t,copies:e};this.dictionary.setValue(t,i)}return this.nElements+=e,!0},t.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.remove=function(t,e){if(void 0===e&&(e=1),n.isUndefined(t)||e<=0)return!1;if(this.contains(t)){var i=this.dictionary.getValue(t);return e>i.copies?this.nElements-=i.copies:this.nElements-=e,i.copies-=e,i.copies<=0&&this.dictionary.remove(t),!0}return!1},t.prototype.toArray=function(){for(var t=[],e=0,i=this.dictionary.values();e<i.length;e++)for(var n=i[e],o=n.value,a=n.copies,r=0;r<a;r++)t.push(o);return t},t.prototype.toSet=function(){for(var t=new o.default(this.toStrF),e=0,i=this.dictionary.values();e<i.length;e++){var n=i[e].value;t.add(n)}return t},t.prototype.forEach=function(t){this.dictionary.forEach(function(e,i){for(var n=i.value,o=i.copies,a=0;a<o;a++)if(!1===t(n))return!1;return!0})},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},t}();i.default=r,cc._RF.pop()},{"./Dictionary":"Dictionary","./Set":"Set","./util":"util"}],BeFireAction:[function(t,e,i){"use strict";cc._RF.push(e,"c2eb8nqmxREMo8H6TBb61/z","BeFireAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../../GameLibs/ScUtils/ScUtils"),r=t("../../../../../../GameLibs/ScTweener/ScTweenerRun"),s=t("../../../../../../GameLibs/ScTweener/ScTweenerTypes"),c=function(t){function e(){var e=t.call(this)||this;return e.beFireCount=1,e.isShowKong=!0,e.cardOffsetScale=1,e.isAutoInstallAndUninstall=!0,e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,2),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e.AddStateChildAction(2,e.State2.bind(e)),e}return n(e,t),e.prototype._BundleData=function(){return[this.timeScale,this.beFireCount,this.isShowKong,this.cardOffsetScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.timeScale=t[0],this.beFireCount=t[1],this.isShowKong=t[2],this.cardOffsetScale=t[3])},e.prototype.State0=function(){for(var t=0;t<this.beFireCount;t++){for(var e=this.data.cardsViewers,i=void 0,n=0;n<e.length;n++){e[n].StopWobble();for(var o=e[n].GetAllCards(),c=0;c<o.length;c++){i=o[c].node.position;var l=o[c].node.width/4*o[c].node.scaleX*this.cardOffsetScale,h=a.RandomFloat(-l,0),u=a.RandomFloat(-l,0);i=i.add(new cc.Vec3(h,u,0)),r.ScTweenerRun.DoLocalMove(o[c].node,i,.5*this.timeScale).SetEast(s.ScEasingType.EaseOutQuint)}}this.isShowKong&&this.ExecuteFireHoleAction()}this.data.beFireShakeAction.timeScale=this.timeScale,this.data.beFireShakeAction.Execute(),this.GotoState(1,.5)},e.prototype.ExecuteFireHoleAction=function(){for(var t,e,i=0;e=a.RandomInt(0,this.data.cardsViewers.length-1),1==(t=this.data.cardsViewers[e].GetAllCards())[i=a.RandomInt(0,t.length-1)].holeSprite.node.active;);t[i].holeSprite.node.active=!0;var n=t[i].DoHoleColor(cc.Color.RED,0),o=t[i].DoHoleColor(cc.Color.WHITE,.3*this.timeScale);r.ScTweenerRun.DoTweenerSeq([n,o]);var c=this.data.cardsViewers[e].GetCardScale(),l=c.mul(1.4);n=r.ScTweenerRun.DoLocalScale(t[i].node,l,.15*this.timeScale,!1).SetEast(s.ScEasingType.EaseInOutBack),o=r.ScTweenerRun.DoLocalScale(t[i].node,c,.5*this.timeScale,!1),r.ScTweenerRun.DoTweenerSeq([n,o])},e.prototype.State1=function(){for(var t=this.data.cardsViewers,e=0;e<t.length;e++)for(var i=t[e].GetAllCards(),n=0;n<i.length;n++){var o=this.data.orgCardPosDict.getValue(i[n].node.uuid);null!=o&&r.ScTweenerRun.DoLocalMove(i[n].node,o,5*this.timeScale)}this.GotoState(2,5)},e.prototype.State2=function(){for(var t=this.data.cardsViewers,e=0;e<t.length;e++)t[e].Wobble();this.GotoState(this.IdleState())},e}(o.ScDesginAction);i.BeFireAction=c,cc._RF.pop()},{"../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes","../../../../../../GameLibs/ScUtils/ScUtils":"ScUtils"}],BeFireShakeAction:[function(t,e,i){"use strict";cc._RF.push(e,"500671hVvpOl6TCO2wO0kWh","BeFireShakeAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../../GameLibs/ScUtils/ScUtils"),r=t("../../../../../../GameLibs/ScStateMachine/ScStateMachineTypes"),s=function(t){function e(){var e=t.call(this,!0)||this;return e.orgPos=cc.Vec3.ZERO,e.shake=2,e.shakeAmp=2,e.shakeFeq=1.06,e.isAutoInstallAndUninstall=!0,e.stateMachine.ExeMode=r.StateMachineExeMode.Mutex,e.ActionEndedProcesser=e.ActionEnded.bind(e),e.SetStateLifeRange(0,1),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e}return n(e,t),e.prototype.ActionEnded=function(t){this.data.cardsViewerGroupNode.setPosition(this.orgPos)},e.prototype.State0=function(){this.shake=this.shakeAmp,this.data.cardsViewerGroupNode.getPosition(this.orgPos),this.GotoState(1,0)},e.prototype.State1=function(){this.shake=this.shake/this.shakeFeq;var t=new cc.Vec3(a.RandomFloat(0,2*this.shake)-this.shake,a.RandomFloat(0,1*this.shake)-this.shake,this.orgPos.z);this.data.cardsViewerGroupNode.setPosition(this.orgPos.add(t)),this.shake<.002?(this.data.cardsViewerGroupNode.setPosition(this.orgPos),this.GotoState(this.IdleState())):this.GotoState(1,.026*this.timeScale)},e}(o.ScDesginAction);i.BeFireShakeAction=s,cc._RF.pop()},{"../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../../../../GameLibs/ScUtils/ScUtils":"ScUtils"}],BgMask:[function(t,e,i){"use strict";cc._RF.push(e,"e060eKT779EIop7FFU8VgGt","BgMask"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("../ResMgr/Pool/PrefabPool"),o=t("../../GameTypes"),a=t("../../../GameLibs/ScTweener/ScTweenerUtils"),r=t("../../../GameLibs/ScTweener/ScTweenerRun"),s=function(){function t(){}return t.Show=function(t){var e=this.CreateBgMask(t);return r.ScTweenerRun.DoAlpha(e,0,0),r.ScTweenerRun.DoAlpha(e,.5,.1),e},t.ShowAtBottom=function(t){var e=this.CreateBgMask(t.parent),i=t.getSiblingIndex();return e.setSiblingIndex(i),r.ScTweenerRun.DoAlpha(e,0,0),r.ScTweenerRun.DoAlpha(e,.5,.1),e},t.Hide=function(e){r.ScTweenerRun.DoAlpha(e,0,.1).SetCallBackFunc(t.TweenerAnimEnded,e)},t.TweenerAnimEnded=function(t){n.PrefabPool.Instance().Push(t,o.PrefabIdx.BgMask)},t.CreateBgMask=function(t){var e=n.PrefabPool.Instance().Pop(o.PrefabIdx.BgMask);return a.SetNodeParent(e,t),e.setPosition(cc.Vec3.ZERO),e.active=!0,e},t}();i.BgMask=s,cc._RF.pop()},{"../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../GameTypes":"GameTypes","../ResMgr/Pool/PrefabPool":"PrefabPool"}],CardAlgoTypes:[function(t,e,i){"use strict";cc._RF.push(e,"afee4AK3ypBebfig7AuHJCU","CardAlgoTypes"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.None=-1]="None",t[t.Diamond=0]="Diamond",t[t.Club=1]="Club",t[t.Heart=2]="Heart",t[t.Spade=3]="Spade",t[t.BlackJoker=4]="BlackJoker",t[t.RedJoker=5]="RedJoker"}(i.Suit||(i.Suit={})),function(t){t[t.Diamond_A=0]="Diamond_A",t[t.Diamond_2=1]="Diamond_2",t[t.Diamond_3=2]="Diamond_3",t[t.Diamond_4=3]="Diamond_4",t[t.Diamond_5=4]="Diamond_5",t[t.Diamond_6=5]="Diamond_6",t[t.Diamond_7=6]="Diamond_7",t[t.Diamond_8=7]="Diamond_8",t[t.Diamond_9=8]="Diamond_9",t[t.Diamond_10=9]="Diamond_10",t[t.Diamond_J=10]="Diamond_J",t[t.Diamond_Q=11]="Diamond_Q",t[t.Diamond_K=12]="Diamond_K",t[t.Club_A=13]="Club_A",t[t.Club_2=14]="Club_2",t[t.Club_3=15]="Club_3",t[t.Club_4=16]="Club_4",t[t.Club_5=17]="Club_5",t[t.Club_6=18]="Club_6",t[t.Club_7=19]="Club_7",t[t.Club_8=20]="Club_8",t[t.Club_9=21]="Club_9",t[t.Club_10=22]="Club_10",t[t.Club_J=23]="Club_J",t[t.Club_Q=24]="Club_Q",t[t.Club_K=25]="Club_K",t[t.Heart_A=26]="Heart_A",t[t.Heart_2=27]="Heart_2",t[t.Heart_3=28]="Heart_3",t[t.Heart_4=29]="Heart_4",t[t.Heart_5=30]="Heart_5",t[t.Heart_6=31]="Heart_6",t[t.Heart_7=32]="Heart_7",t[t.Heart_8=33]="Heart_8",t[t.Heart_9=34]="Heart_9",t[t.Heart_10=35]="Heart_10",t[t.Heart_J=36]="Heart_J",t[t.Heart_Q=37]="Heart_Q",t[t.Heart_K=38]="Heart_K",t[t.Spade_A=39]="Spade_A",t[t.Spade_2=40]="Spade_2",t[t.Spade_3=41]="Spade_3",t[t.Spade_4=42]="Spade_4",t[t.Spade_5=43]="Spade_5",t[t.Spade_6=44]="Spade_6",t[t.Spade_7=45]="Spade_7",t[t.Spade_8=46]="Spade_8",t[t.Spade_9=47]="Spade_9",t[t.Spade_10=48]="Spade_10",t[t.Spade_J=49]="Spade_J",t[t.Spade_Q=50]="Spade_Q",t[t.Spade_K=51]="Spade_K",t[t.BlackJoker=52]="BlackJoker",t[t.RedJoker=53]="RedJoker",t[t.Laizi=54]="Laizi",t[t.Count=55]="Count"}(i.CardFace||(i.CardFace={})),function(t){t[t.None=0]="None",t[t.Single=1]="Single",t[t.DuiZi=2]="DuiZi",t[t.TwoDui=3]="TwoDui",t[t.SanTiao=4]="SanTiao",t[t.ShunZi=5]="ShunZi",t[t.TongHua=6]="TongHua",t[t.HuLu=7]="HuLu",t[t.Bomb=8]="Bomb",t[t.TongHuaShun=9]="TongHuaShun",t[t.WuTong=10]="WuTong",t[t.Normal=11]="Normal",t[t.LiuDuiBan=12]="LiuDuiBan",t[t.SiTaoSan=13]="SiTaoSan",t[t.SanTongHua=14]="SanTongHua",t[t.SanShunZi=15]="SanShunZi",t[t.SixBomb=16]="SixBomb",t[t.SevenBomb=17]="SevenBomb",t[t.EightBomb=18]="EightBomb",t[t.ZhiZunLei66=19]="ZhiZunLei66",t[t.ZhiZunLei76=20]="ZhiZunLei76",t[t.YiTiaoLong=21]="YiTiaoLong",t[t.ZhiZunQinLong=22]="ZhiZunQinLong",t[t.Count=23]="Count"}(i.CardsType||(i.CardsType={}));var n=function(){return function(){}}();i.CardInfo=n,cc._RF.pop()},{}],CardEffectAction:[function(t,e,i){"use strict";cc._RF.push(e,"79606pXNmdPE442D73/TP0s","CardEffectAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../GameLibs/ScTweener/ScTweenerTypes"),r=function(t){function e(){var e=t.call(this,!0)||this;return e.DefineIdleState(4),e.SetStateLifeRange(0,3),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e.AddStateChildAction(2,e.State2.bind(e)),e.AddStateChildAction(3,e.State3.bind(e)),e}return n(e,t),e.prototype.State0=function(){this.data.DoWhiteSmallFireEffects(.1),this.GotoState(1,.2)},e.prototype.State1=function(){this.data.DoWhiteFireEffects(.1),this.GotoState(2,.1)},e.prototype.State2=function(){this.data.DoYellowLargeFireEffects(2,a.ScEasingType.EaseOutQuint),this.GotoState(3,1.5)},e.prototype.State3=function(){this.data.DoYellowFireEffects(1),this.GotoState(this.IdleState(),1)},e}(o.ScDesginAction);i.CardEffectAction=r,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes"}],CardPool:[function(t,e,i){"use strict";cc._RF.push(e,"75620bsS+xHNoaMWJNahrpt","CardPool"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("../GameRes"),o=t("../../../GameTypes"),a=t("../../CardsProcesser/CardsAlgorithm/CardAlgoTypes"),r=t("../../CardsProcesser/CardsAlgorithm/CardsTransform"),s=t("../../../../GameLibs/ScTweener/ScTweenerUtils"),c=t("../../../../GameLibs/ScPool/ScPoolMgr"),l=t("../../CardsProcesser/Card"),h=function(){function t(){this.cardSpriteNameList=new Array}return t.Instance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.CreatePool=function(){this.CreateCardSpriteNameList(),this.spriteAtlas=n.GameRes.Instance().LoadSpriteAltas(o.SpriteAtlasIdx.Cards);var t="CardPool_"+o.PrefabIdx.Card;this.cardPrefab=n.GameRes.Instance().LoadPrefab(o.PrefabIdx.Card),this.CardPoolRoot=new cc.Node(t),this.CardPoolRoot.parent=null,cc.game.addPersistRootNode(this.CardPoolRoot),this.cardPoolDict=c.ScPoolMgr.Instance().CreatePoolDict(),this.cardPoolDict.NewMethod=this.NewCardMethod.bind(this),this.cardPoolDict.DestroyCB=this.DestoryNode.bind(this),this.cardPoolDict.createObjSize=5;for(var e=0;e<a.CardFace.Count-1;e++)this.cardPoolDict.CreatePool(e)},t.prototype.NewCardMethod=function(t){var e=cc.instantiate(this.cardPrefab);s.SetNodeParent(e,this.CardPoolRoot),e.active=!1,e.name=this.cardSpriteNameList[t];var i=e.getComponent(l.default);return i.cardFace=t,i.cardFaceSprite.spriteFrame=this.spriteAtlas.getSpriteFrame(this.cardSpriteNameList[t]),i.backFaceSprite.spriteFrame=this.spriteAtlas.getSpriteFrame("BackFace0"),i.laziMarkSprite.spriteFrame=this.spriteAtlas.getSpriteFrame("LaiziMark"),i.horseMarkSprite.spriteFrame=this.spriteAtlas.getSpriteFrame("HorseMark"),i.shadowSprite.spriteFrame=this.spriteAtlas.getSpriteFrame("CardShadow"),i.shadowBackSprite.spriteFrame=this.spriteAtlas.getSpriteFrame("CardShadow"),i.holeSprite.spriteFrame=this.spriteAtlas.getSpriteFrame("hole"),i.mapaiMark.active=!1,i.laiziMark.active=!1,i.shadow.active=!0,i.shadowBack.active=!0,e},t.prototype.DestoryNode=function(t){for(var e=0;e<t.length;e++)t[e].destroy()},t.prototype.GetCardFaceSprite=function(t){return this.spriteAtlas.getSpriteFrame(this.cardSpriteNameList[t])},t.prototype.CreateCardSpriteNameList=function(){for(var t,e=0;e<a.CardFace.Count-1;e++)t=this.CreateCardSpriteName(e),this.cardSpriteNameList.push(t)},t.prototype.CreateCardSpriteName=function(t){var e=r.CardsTransform.Instance().GetSuit(t),i=r.CardsTransform.Instance().GetValue(t);if(14==i)return"BlackJoker";if(15==i)return"RedJoker";var n=void 0;switch(n=1==i?"A":11==i?"J":12==i?"Q":13==i?"K":i.toString(),e){case a.Suit.Diamond:return"Diamond_"+n;case a.Suit.Heart:return"Heart_"+n;case a.Suit.Club:return"Club_"+n;case a.Suit.Spade:return"Spade_"+n}return"RedJoker"},t.prototype.Destory=function(){this.cardPoolDict.Destory(),this.CardPoolRoot.destroy()},t.prototype.Pop=function(t){var e;return(e=this.cardPoolDict.Pop(t)).is3DNode=!0,e.setPosition(cc.Vec3.ZERO),e.setScale(cc.Vec3.ONE),e.eulerAngles=cc.Vec3.ZERO,e},t.prototype.Push=function(t){s.SetNodeParent(t,this.CardPoolRoot),t.active=!1;var e=t.getComponent(l.default);e.Clear(),null!=this.cardPoolDict&&this.cardPoolDict.Push(t,e.cardFace)},t.instance=null,t}();i.CardPool=h,cc._RF.pop()},{"../../../../GameLibs/ScPool/ScPoolMgr":"ScPoolMgr","../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../GameTypes":"GameTypes","../../CardsProcesser/Card":"Card","../../CardsProcesser/CardsAlgorithm/CardAlgoTypes":"CardAlgoTypes","../../CardsProcesser/CardsAlgorithm/CardsTransform":"CardsTransform","../GameRes":"GameRes"}],CardShakeAction:[function(t,e,i){"use strict";cc._RF.push(e,"05716ff+rFODZ0FHpUa8cSq","CardShakeAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../GameLibs/ScUtils/ScUtils"),r=function(t){function e(){var e=t.call(this,!0)||this;return e.orgPos=cc.Vec3.ZERO,e.shake=1,e.shakeAmp=.02,e.shakeFeq=1.06,e.ActionEndedProcesser=e.ActionEnded.bind(e),e.SetStateLifeRange(0,1),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e}return n(e,t),e.prototype.ActionEnded=function(t){this.data.node.setPosition(this.orgPos)},e.prototype.State0=function(){this.shake=this.shakeAmp,this.data.node.getPosition(this.orgPos),this.GotoState(1,0)},e.prototype.State1=function(){this.shake=this.shake/this.shakeFeq;var t=new cc.Vec3(a.RandomFloat(0,2*this.shake)-this.shake,a.RandomFloat(0,1*this.shake)-this.shake,this.orgPos.z);this.data.node.setPosition(this.orgPos.add(t)),this.shake<.002?(this.data.node.setPosition(this.orgPos),this.GotoState(this.IdleState(),0)):this.GotoState(1,.026)},e}(o.ScDesginAction);i.CardShakeAction=r,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScUtils/ScUtils":"ScUtils"}],CardWobbleAction:[function(t,e,i){"use strict";cc._RF.push(e,"09e5a8XOcxHVbyBgOkNUFN+","CardWobbleAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../GameLibs/ScTweener/ScTweenerRun"),r=function(t){function e(){var e=t.call(this,!0)||this;return e.duration=2,e.movDist=13,e.DefineIdleState(3),e.SetStateLifeRange(0,2),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.ToDstPosState.bind(e)),e.AddStateChildAction(2,e.ToOrgPosState.bind(e)),e}return n(e,t),e.prototype.State0=function(){this.selectedStateMovDir=this.data.unSelectedLocalPos.sub(this.data.selectedLocalPos),this.selectedStateMovDir.normalizeSelf(),this.selectedStateDstPos=this.selectedStateMovDir.mul(this.movDist).add(this.data.selectedLocalPos),this.unSelectedStateMovDir=this.data.selectedLocalPos.sub(this.data.unSelectedLocalPos),this.unSelectedStateMovDir.normalizeSelf(),this.unSelectedStateDstPos=this.unSelectedStateMovDir.mul(this.movDist).add(this.data.unSelectedLocalPos),this.GotoState(1,0)},e.prototype.ToDstPosState=function(){this.data.IsSelected()?a.ScTweenerRun.DoLocalMove(this.data.node,this.selectedStateDstPos,this.duration):a.ScTweenerRun.DoLocalMove(this.data.node,this.unSelectedStateDstPos,this.duration),this.GotoState(2,this.duration)},e.prototype.ToOrgPosState=function(){this.data.IsSelected()?a.ScTweenerRun.DoLocalMove(this.data.node,this.data.selectedLocalPos,this.duration):a.ScTweenerRun.DoLocalMove(this.data.node,this.data.unSelectedLocalPos,this.duration),this.GotoState(1,this.duration)},e}(o.ScDesginAction);i.CardWobbleAction=r,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun"}],CardsAndCardsBind:[function(t,e,i){"use strict";cc._RF.push(e,"0f97bsLL6lJMZ8QCbpKHJqq","CardsAndCardsBind");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../ResMgr/GameAudios"),a=t("../../GameTypes"),r=t("./CardsProcesserTypes"),s=t("../../../GameLibs/ScTypes/ScObject"),c=t("../../../GameCompents/MouseEvents"),l=function(t){function e(){var e=t.call(this)||this;return e.bindMode=r.BindMode.AtoB_And_BtoA,e.isBinded=!1,e.isBinded=!1,e}return n(e,t),e.prototype.Destory=function(){null!=this.cardsViewerA&&null!=this.cardsViewerB&&(this.UnBind(),this.cardsViewerA._RemoveCardsBind_SYS(this),this.cardsViewerB._RemoveCardsBind_SYS(this),this.cardsViewerA=null,this.cardsViewerB=null)},e.prototype.SetBindMode=function(t){this.bindMode=t},e.prototype.SetCardsAreaNodes=function(t){this.cardsAreaNodes=t},e.prototype.GetCardsViewerA=function(){return this.cardsViewerA},e.prototype.GetCardsViewerB=function(){return this.cardsViewerB},e.prototype.Bind=function(t,e){this.cardsViewerA=t,this.cardsViewerB=e,t.AddCardsBind(this),e.AddCardsBind(this),t.IsRuning()&&e.IsRuning()&&this._Bind_SYS()},e.prototype._Bind_SYS=function(){if(!this.isBinded&&null!=this.cardsViewerA&&null!=this.cardsViewerB&&0!=this.cardsViewerA.IsRuning()&&0!=this.cardsViewerB.IsRuning()){if(this.SetCardsViewerA(this.cardsViewerA),this.SetCardsViewerB(this.cardsViewerB),null!=this.cardsAreaNodes&&this.cardsAreaNodes.length>0){this.mouseCardsAreaEvents=new Array(this.cardsAreaNodes.length);for(var t=0;t<this.cardsAreaNodes.length;t++)null!=this.mouseCardsAreaEvents[t]&&this.mouseCardsAreaEvents[t].destroy(),null!=this.cardsAreaNodes[t]&&(this.mouseCardsAreaEvents[t]=this.cardsAreaNodes[t].addComponent(c.default),this.mouseCardsAreaEvents[t].MouseClickEvent=0==t?this.ClickedCardsAreaA.bind(this):this.ClickedCardsAreaB.bind(this))}this.isBinded=!0}},e.prototype.UnBind=function(){if(0!=this.isBinded){if(this.cardsViewerA.RemoveClickCardEvent(this.UUID()),this.cardsViewerA.RemoveFaPaiEndEvent(this.UUID()),this.cardsViewerB.RemoveClickCardEvent(this.UUID()),this.cardsViewerB.RemoveFaPaiEndEvent(this.UUID()),null!=this.mouseCardsAreaEvents){for(var t=0;t<this.mouseCardsAreaEvents.length;t++)null!=this.mouseCardsAreaEvents[t]&&this.mouseCardsAreaEvents[t].destroy();this.mouseCardsAreaEvents=null}this.isBinded=!1}},e.prototype.SetCardsViewerA=function(t){this.cardsViewerA=t,this.cardsViewerA.AddClickCardEvent(this.UUID(),this.ClickedHandCardA.bind(this))},e.prototype.SetCardsViewerB=function(t){this.cardsViewerB=t,this.cardsViewerB.AddClickCardEvent(this.UUID(),this.ClickedHandCardB.bind(this))},e.prototype.ClickedHandCardA=function(t){if(this.bindMode==r.BindMode.AtoB_And_BtoA||this.bindMode==r.BindMode.BtoA){var e=this.cardsViewerB.GetSelectedCardIdxs();if(null!=e){null!=t&&t.Unselect(!1);var i=this.cardsViewerB.DisconnectCards(e);this.cardsViewerA.CardsFlyToHand(i,null,!0,1),o.GameAudios.Instance().PlayEffect(a.AudioClipIdx.Fly,.5)}}},e.prototype.ClickedHandCardB=function(t){if(this.bindMode==r.BindMode.AtoB_And_BtoA||this.bindMode==r.BindMode.AtoB){var e=this.cardsViewerA.GetSelectedCardIdxs();if(null!=e){null!=t&&t.Unselect(!1);var i=this.cardsViewerA.DisconnectCards(e);this.cardsViewerB.CardsFlyToHand(i,null,!0,1),o.GameAudios.Instance().PlayEffect(a.AudioClipIdx.Fly,.5)}}},e.prototype.ClickedCardsAreaA=function(){(this.bindMode==r.BindMode.AtoB_And_BtoA||this.bindMode==r.BindMode.BtoA)&&this.cardsViewerB.HavSelectedCard()?this.ClickedHandCardA():this.cardsViewerA.UnSelectAllCard()},e.prototype.ClickedCardsAreaB=function(){(this.bindMode==r.BindMode.AtoB_And_BtoA||this.bindMode==r.BindMode.AtoB)&&this.cardsViewerA.HavSelectedCard()?this.ClickedHandCardB():this.cardsViewerB.UnSelectAllCard()},e}(s.ScObject);i.CardsAndCardsBind=l,cc._RF.pop()},{"../../../GameCompents/MouseEvents":"MouseEvents","../../../GameLibs/ScTypes/ScObject":"ScObject","../../GameTypes":"GameTypes","../ResMgr/GameAudios":"GameAudios","./CardsProcesserTypes":"CardsProcesserTypes"}],CardsAndSlotsBind:[function(t,e,i){"use strict";cc._RF.push(e,"a984ed+/6FKnLIfxQ6fxhjX","CardsAndSlotsBind");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./CardsProcesserTypes"),a=t("./CardsAlgorithm/CardsTransform"),r=t("./CardsAlgorithm/CardsTypeMatch"),s=t("../ResMgr/GameAudios"),c=t("../../GameTypes"),l=t("../../../GameLibs/ScTweener/ScTweenerUtils"),h=t("../../../GameLibs/ScTypes/ScObject"),u=t("../../../GameCompents/MouseEvents"),d=function(t){function e(){var e=t.call(this)||this;return e.match=new r.CardsTypeMatch,e.SoundScale=.8,e.isValidUpdateSlotCards=!1,e.IsOpenedSelectCardMode=!1,e.isBinded=!1,e.isBinded=!1,e}return n(e,t),e.prototype.Destory=function(){null!=this.cardsViewer&&null!=this.slotsViewer&&(this.UnBind(),this.cardsViewer._RemoveSlotsBind_SYS(this),this.cardsViewer=null,this.slotsViewer=null)},e.prototype.GetCardsViewer=function(){return this.cardsViewer},e.prototype.GetSlotsViewer=function(){return this.slotsViewer},e.prototype.SetFlyCardsNode=function(t){this.flyCardsNode=t},e.prototype.SetCardsAreaNode=function(t){this.cardsAreaNode=t},e.prototype.SetHostCardsViewer=function(t){this.hostCardsViewer=t},e.prototype.Bind=function(t,e){this.cardsViewer=t,this.slotsViewer=e,t.AddSlotsBind(this),t.IsRuning()&&this._Bind_SYS()},e.prototype._Bind_SYS=function(){this.isBinded||null==this.cardsViewer||null==this.slotsViewer||(this.SetCardsViewer(this.cardsViewer),this.SetSlotsViewer(this.slotsViewer),null==this.flyCardsNode&&(this.flyCardsNode=this.cardsViewer.GetCardsParent().parent),null!=this.cardsAreaNode&&(null!=this.mouseCardsAreaEvents&&this.mouseCardsAreaEvents.destroy(),this.mouseCardsAreaEvents=this.cardsAreaNode.addComponent(u.default),this.mouseCardsAreaEvents.MouseClickEvent=this.ClickedHandCardsArea.bind(this)),this.isBinded=!0)},e.prototype.UnBind=function(){0!=this.isBinded&&(this.cardsViewer.RemoveFaPaiEndEvent(this.UUID()),this.slotsViewer.RemoveSlotClickAction(this.UUID()),this.slotsViewer.RemoveSlotDoubleClickAction(this.UUID()),this.slotsViewer.RemoveSlotDragAction(this.UUID()),null!=this.mouseCardsAreaEvents&&this.mouseCardsAreaEvents.destroy(),this.isBinded=!1)},e.prototype.SetCardsViewer=function(t){null!=t&&(this.cardsViewer=t,this.cardsViewer.AddClickCardEvent(this.UUID(),this.ClickedHandCard.bind(this)))},e.prototype.SetSlotsViewer=function(t){null!=t&&(this.slotsViewer=t,this.slots=this.slotsViewer.slots,this.slotsViewer.AddSlotClickAction(this.UUID(),this.SlotClicked.bind(this)),this.slotsViewer.AddSlotDoubleClickAction(this.UUID(),this.SlotDoubleClicked.bind(this)),this.slotsViewer.AddSlotDragAction(this.UUID(),this.SlotDragOver.bind(this)))},e.prototype.IsHavCardsFlyingToHandOrSlots=function(){var t=this.cardsViewer.IsHavFlyingToHandCards(),e=this.slotsViewer.IsHavCardFlyingToSlots();return t||e},e.prototype.SlotDragOver=function(t,e){return this.slotsViewer.HideAllSlotsCardsEffects(.5),this.slotsViewer.CancelFlyingCardsSelectedState(),this.slotsViewer.MltipleSelectSlotCard(t,e),!0},e.prototype.SlotClicked=function(t,e){this.slotsViewer.HideAllSlotsCardsEffects(.5);var i=this.cardsViewer.GetSelectedCardFaces();if(0==i.length){if(this.slotsViewer.IsCardSelected(t,e))return this.slotsViewer.CancelFlyingCardsSelectedState(),void this.slotsViewer.UnSelectAllCard();this.SwapSlotAndSlotCards(t,e)}else this.SwapSlotAndHandCards(i,t,e)},e.prototype.SlotDoubleClicked=function(t,e){if(0!=this.slotsViewer.IsCardSelected(t,e)){var i=this.slotsViewer.GetSelectedIdxs(t);null!=i&&this.SlotCardsFlyToHand(t,i)}else this.slotsViewer.SingleSelectSlotCard(t,e)&&this.SlotCardsFlyToHand(t,[e])},e.prototype.ClickedHandCard=function(t){var e=this.slotsViewer.GetSelectedCardsSlotPosIdxInfo();if(null!=e){t.Unselect(!1);var i=e.slotIdx;this.SlotCardsFlyToHand(i,e.posIdxs)}else this.slotsViewer.UnSelectAllCard();return!1},e.prototype.ClickedHandCardsArea=function(){var t=this.slotsViewer.GetSelectedCardsSlotPosIdxInfo();null==t?this.cardsViewer.UnSelectAllCard():this.SlotCardsFlyToHand(t.slotIdx,t.posIdxs)},e.prototype.OnClickSlotCheckBtn=function(t){var e=this.slotsViewer.GetSelectedIdxs(t);if(null!=e)this.SlotCardsFlyToHand(t,e);else{if(this.slotsViewer.IsEmptyedFull(t))return 0;this.SlotAllCardsFlyToHand(t)}return s.GameAudios.Instance().PlayEffect(c.AudioClipIdx.Fly,.5*this.SoundScale),0},e.prototype.SwapSlotAndSlotCards=function(t,e,i){void 0===i&&(i=.2);var n=this.slotsViewer.GetSelectedCardsSlotPosIdxInfo();if(null!=n){var o=this.slotsViewer.GetSwapSlotAndSlotCards(n.slotIdx,n.posIdxs,t,e),a=!0;if(this.IsOpenedSelectCardMode||(a=this.IsMatchRules(o)),a)this.slotsViewer.SingleSelectSlotCard(t,e),this.slotsViewer.SwapSlotAndSlotCards(o,i);else this.slotsViewer.ShakeSlotCards(n.slotIdx,n.posIdxs)&&s.GameAudios.Instance().PlayEffect(c.AudioClipIdx.CardShake,.5)}else this.slotsViewer.SingleSelectSlotCard(t,e)},e.prototype.SwapSlotAndHandCards=function(t,e,i){var n,o=[!1,!1,!1,!1,!1];if(t.length==this.slotsViewer.GetSlotMaxCardCount(e)){n=new Array(t.length);for(var a=0;a<t.length;a++)n[a]=a,o[a]=!0,i=0}else n=[i],o[i]=!0;var r=this.GetHandCardsFlyToSlotInfo(t,e,i,o,!0),l=!0;if(this.IsOpenedSelectCardMode||(l=this.IsMatchRules(r,e,i)),l)this.SlotCardsFlyToHand(e,n),this.HandCardsFlyToSlotByFlyInfo(r),s.GameAudios.Instance().PlayEffect(c.AudioClipIdx.FallDown,this.SoundScale);else{var h=this.cardsViewer.GetSelectedCardIdxs();this.cardsViewer.Shake(h)&&s.GameAudios.Instance().PlayEffect(c.AudioClipIdx.CardShake,.5)}},e.prototype.SlotAllCardsFlyToHand=function(t,e){void 0===e&&(e=1);var i=this.slotsViewer.GetSlotAllCardIdxs(t);this.SlotCardsFlyToHand(t,i,e)},e.prototype.SlotCardsFlyToHand=function(t,e,i){void 0===i&&(i=1);var n=this.slotsViewer.DisconnectSlotCards(t,e);if(null!=n&&n.length>0){var o=this.cardsViewer;null!=this.hostCardsViewer&&(o=this.hostCardsViewer),o.CardsFlyToHand(n,null,!0,i)}},e.prototype.HandCardsFlyToSlotByFlyInfo=function(t,e){if(void 0===e&&(e=!0),null!=t){for(var i=new Array(t.length),n=0;n<t.length;n++)i[n]=t[n].card;this.cardsViewer.DisconnectCards(i,!0,e);for(n=0;n<i.length;n++)l.SetNodeParent(i[n].node,this.flyCardsNode),i[n].DisableOp();for(n=0;n<t.length;n++)this.slotsViewer.CardFlyToSlot(t[n].card,t[n].slotIdx,t[n].slotPosIdx)}},e.prototype.HandCardsFlyToSlot=function(t,e,i,n,o,a){void 0===n&&(n=!0),void 0===o&&(o=!1),void 0===a&&(a=!0);var r=this.GetHandCardsFlyToSlotInfo(t,e,i,null,o,a);if(null!=r){for(var s=new Array(r.length),c=0;c<r.length;c++)s[c]=r[c].card;this.cardsViewer.DisconnectCards(s,!0,n);for(c=0;c<s.length;c++)l.SetNodeParent(s[c].node,this.flyCardsNode),s[c].DisableOp();for(c=0;c<r.length;c++)this.slotsViewer.CardFlyToSlot(r[c].card,r[c].slotIdx,r[c].slotPosIdx)}},e.prototype.GetHandCardsFlyToSlotInfo=function(t,e,i,n,r,s){if(void 0===n&&(n=null),void 0===r&&(r=!1),void 0===s&&(s=!0),null==t||0==t.length)return null;var c,l,h=this.slotsViewer.ComputeSlotUsePosIdxGroup(t.length,e,i,n,r),u=new Array,d=a.CardsTransform.Instance().ConvertToCardInfos(t);s?(c=this.cardsViewer.GetSelectedCardFaces(),l=this.cardsViewer.GetSelectedCards()):(c=this.cardsViewer.GetAllCardFaces(),l=this.cardsViewer.GetAllCards());for(var p=a.CardsTransform.Instance().ConvertToCardInfos(c),f=0;f<h.length;f++)for(var S=0;S<c.length;S++)if(null!=l[S]&&d[f].value==p[S].value&&d[f].suit==p[S].suit){if(this.slotsViewer.IsHavCardFlyingToSlot(e,h[f])){this.cardsViewer.UnSelectedCard(t[f]);continue}u.push(l[S]),l[S]=null;break}var y=new Array;if(3==u.length||5==u.length){var m=new Array(u.length);for(f=0;f<u.length;f++)m[f]=u[f].cardFace;var g=this.match.ComputeMatchCardFacesInfo(m);if(null==g||null==g.laiziCardFaces){var C=Math.min(h.length,u.length);for(f=0;f<C;f++){(v=new o.HandCardFlySlotInfo).card=u[f],v.slotIdx=e,v.slotPosIdx=h[f],y.push(v)}return y}h.sort();var T=g.laiziCardFaces;for(f=0;f<T.length;f++)for(S=0;S<u.length;S++)if(null!=u[S]&&u[S].cardFace==T[f]){(v=new o.HandCardFlySlotInfo).card=u[S],v.slotIdx=e,v.slotPosIdx=h[f],u[S]=null,y.push(v);break}}else for(C=Math.min(h.length,u.length),f=0;f<C;f++){var v;(v=new o.HandCardFlySlotInfo).card=u[f],v.slotIdx=e,v.slotPosIdx=h[f],y.push(v)}return y},e.prototype.UpdateSlotCardsType=function(){for(var t=0;t<3;t++){var e=this.slotsViewer.ComputeSlotState(t);this.slotsViewer.ChangeSlotState(t,e),e==o.SlotState.FillFull&&(this.isValidUpdateSlotCards=!0)}},e.prototype.UpdateLastSlotCards=function(){if(0!=this.isValidUpdateSlotCards&&!this.slotsViewer.IsHavCardFlyingToAllSlot()&&!this.cardsViewer.IsHavFlyingToHandCards()){for(var t=0,e=0,i=0;i<3;i++)this.slots[i].IsFilledFull()||(e++,t=i);if(0!=e){if(1==e){this.isValidUpdateSlotCards=!1;var n=this.cardsViewer.GetAllCardFaces();null!=n&&0!=n.length&&(0==t&&n.length>3||0!=t&&n.length>5||0!=this.CanAddCardsToSlotByRules(t,n)&&(this.cardsViewer.SelectCardsByCardFaces(n),this.HandCardsFlyToSlot(n,t,0),s.GameAudios.Instance().PlayEffect(c.AudioClipIdx.FallDown,this.SoundScale)))}}else this.isValidUpdateSlotCards=!1}},e.prototype.Update=function(){null!=this.cardsViewer&&0!=this.cardsViewer.IsRuning()&&this.UpdateLastSlotCards()},e.prototype.IsMatchRules=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length,!0},e.prototype.CanAddCardsToSlotByRules=function(t,e){return!0},e}(h.ScObject);i.CardsAndSlotsBind=d,cc._RF.pop()},{"../../../GameCompents/MouseEvents":"MouseEvents","../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../GameLibs/ScTypes/ScObject":"ScObject","../../GameTypes":"GameTypes","../ResMgr/GameAudios":"GameAudios","./CardsAlgorithm/CardsTransform":"CardsTransform","./CardsAlgorithm/CardsTypeMatch":"CardsTypeMatch","./CardsProcesserTypes":"CardsProcesserTypes"}],CardsProcesserTypes:[function(t,e,i){"use strict";cc._RF.push(e,"9f035lItSJOi7IezvLMj0Ew","CardsProcesserTypes"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.NullState=-1]="NullState",t[t.EmptyFull=0]="EmptyFull",t[t.FillFull=1]="FillFull",t[t.NonEmpty=2]="NonEmpty",t[t.NonChangedFillFull=3]="NonChangedFillFull"}(i.SlotState||(i.SlotState={})),function(t){t[t.Shadow=0]="Shadow",t[t.LightEffect=1]="LightEffect",t[t.ShadowLightEffectComb=2]="ShadowLightEffectComb"}(i.CardSelectMode||(i.CardSelectMode={})),function(t){t[t.Left=0]="Left",t[t.Center=1]="Center"}(i.CardLayoutAlginMode||(i.CardLayoutAlginMode={})),function(t){t[t.AtoB=0]="AtoB",t[t.BtoA=1]="BtoA",t[t.AtoB_And_BtoA=2]="AtoB_And_BtoA"}(i.BindMode||(i.BindMode={}));var n=function(){return function(){}}();i.CardEffectGroupInfo=n;var o=function(){return function(){}}();i.CardEffectInfo=o;var a=function(){return function(){}}();i.SlotPosIdxInfo=a;var r=function(){return function(){}}();i.SlotCardsSwapInfo=r;var s=function(){return function(){}}();i.HandCardFlySlotInfo=s;var c=function(){return function(){}}();i.SelectedSlotPosIdxInfo=c,cc._RF.pop()},{}],CardsTransform:[function(t,e,i){"use strict";cc._RF.push(e,"5c420/d+ANDmqJ9JZU9OVKd","CardsTransform"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./CardAlgoTypes"),o=function(){function t(){this.cardInfoList=new Array,this.cmp=function(e,i){var n=t.Instance().ConvertToCardInfo(e.cardFace),o=t.Instance().ConvertToCardInfo(i.cardFace),a=n.value,r=o.value;return 1==n.value?a=14:14==n.value?a=15:15==n.value&&(a=16),1==o.value?r=14:14==o.value?r=15:15==o.value&&(r=16),a>r?-1:a<r?1:n.suit>o.suit?-1:n.suit<o.suit?1:0},this.CreatePukeInfoList()}return t.Instance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.GetCardFace=function(t,e){return 14==t?n.CardFace.BlackJoker:15==t?n.CardFace.RedJoker:13*e+t-1},t.prototype.GetValue=function(t){return this.cardInfoList[t].value},t.prototype.GetSuit=function(t){return this.cardInfoList[t].suit},t.prototype.CreatePukeInfoList=function(){for(var t,e=0;e<n.CardFace.Count;e++)t=this._ConvertToCardInfo(e),this.cardInfoList.push(t)},t.prototype.ConvertToCardFace=function(t){return this.GetCardFace(t.point,t.suit)},t.prototype.ConvertToCardFaces=function(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=this.ConvertToCardFace(t[i]);return e},t.prototype.ConvertToCardInfos=function(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=this.cardInfoList[t[i]];return e},t.prototype.ConvertToCardInfo=function(t){return this.cardInfoList[t]},t.prototype._ConvertToCardInfo=function(t){var e=new n.CardInfo;if(t==n.CardFace.BlackJoker)return e.suit=0,e.value=14,e;if(t==n.CardFace.RedJoker)return e.suit=2,e.value=15,e;if(t==n.CardFace.Laizi)return e.suit=0,e.value=16,e;var i=t,o=Math.floor(i/13),a=i%13+1;return e.suit=o,e.value=a,e},t.prototype.FindCardFace=function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return i;return-1},t.instance=null,t}();i.CardsTransform=o,cc._RF.pop()},{"./CardAlgoTypes":"CardAlgoTypes"}],CardsTypeMatch:[function(t,e,i){"use strict";cc._RF.push(e,"1882a6+BHdBQqY5RfGb0Mih","CardsTypeMatch"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./CardAlgoTypes"),o=function(){return function(){}}();i.MatchCardFacesInfo=o;var a=function(){function t(){}return t.prototype.ComputeMatchCardFacesInfo=function(t,e){return void 0===e&&(e=n.CardsType.None),null},t}();i.CardsTypeMatch=a,cc._RF.pop()},{"./CardAlgoTypes":"CardAlgoTypes"}],CardsTypeSpriteAsset:[function(t,e,i){"use strict";cc._RF.push(e,"6f4b1aJx8hAUasrJA3tWKXu","CardsTypeSpriteAsset"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./GameRes"),o=t("../../GameTypes"),a=t("../CardsProcesser/CardsAlgorithm/CardAlgoTypes"),r=function(){function t(){this.cardsTypeNameList=new Array(a.CardsType.Count),this.spriteAtlas=n.GameRes.Instance().LoadSpriteAltas(o.SpriteAtlasIdx.Cards),this.cardsTypeNameList[a.CardsType.Single]="wulong",this.cardsTypeNameList[a.CardsType.DuiZi]="duzi",this.cardsTypeNameList[a.CardsType.TwoDui]="liangdui",this.cardsTypeNameList[a.CardsType.SanTiao]="santiao",this.cardsTypeNameList[a.CardsType.ShunZi]="shunzi",this.cardsTypeNameList[a.CardsType.TongHua]="tonghua",this.cardsTypeNameList[a.CardsType.HuLu]="hulu",this.cardsTypeNameList[a.CardsType.Bomb]="tiezi",this.cardsTypeNameList[a.CardsType.TongHuaShun]="tonghuashun",this.cardsTypeNameList[a.CardsType.WuTong]="wutong",this.cardsTypeNameList[a.CardsType.LiuDuiBan]="liuduiban",this.cardsTypeNameList[a.CardsType.SiTaoSan]="sitaosan",this.cardsTypeNameList[a.CardsType.SanTongHua]="santonghua",this.cardsTypeNameList[a.CardsType.SanShunZi]="sanshunzi",this.cardsTypeNameList[a.CardsType.SixBomb]="6zai",this.cardsTypeNameList[a.CardsType.SevenBomb]="7zai",this.cardsTypeNameList[a.CardsType.EightBomb]="8zai",this.cardsTypeNameList[a.CardsType.ZhiZunLei66]="zizunlei",this.cardsTypeNameList[a.CardsType.ZhiZunLei76]="zizunlei",this.cardsTypeNameList[a.CardsType.YiTiaoLong]="yitiaolong",this.cardsTypeNameList[a.CardsType.ZhiZunQinLong]="zizunqinlong"}return t.Instance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.GetSpriteFrame=function(t){if(t<0&&t>=a.CardsType.Count)return null;var e=this.cardsTypeNameList[t];return null==e?null:this.spriteAtlas.getSpriteFrame(e)},t.instance=null,t}();i.CardsTypeSpriteAsset=r,cc._RF.pop()},{"../../GameTypes":"GameTypes","../CardsProcesser/CardsAlgorithm/CardAlgoTypes":"CardAlgoTypes","./GameRes":"GameRes"}],CardsViewer:[function(t,e,i){"use strict";cc._RF.push(e,"25dd9ijDjZJsJTlXvK6FAiQ","CardsViewer");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./CardsProcesserTypes"),a=t("./Card"),r=t("../../../GameLibs/ScStateMachine/ScStateMachine"),s=t("../../../GameLibs/ScTypes/ScObject"),c=t("../../../GameLibs/ScAction/ScActionMgr"),l=t("./CardsAlgorithm/CardAlgoTypes"),h=t("./CardsAlgorithm/CardsTransform"),u=t("../../../GameLibs/ScTweener/ScTweenerRun"),d=t("../../GameTypes"),p=t("../ResMgr/GameAudios"),f=t("../../../GameLibs/ScTweener/ScTweenerTypes"),S=t("./Action/CardsViewerAction/XiPaiAction"),y=t("./Action/CardsViewerAction/XiPaiDstPosAction"),m=t("./Action/CardsViewerAction/FilpPaiAction"),g=t("./Action/CardsViewerAction/SoundAction"),C=t("../../../GameLibs/ScStateMachine/ScStateMachineTypes"),T=t("../ResMgr/Pool/CardPool"),v=t("../../../GameLibs/ScTweener/ScTweenerUtils"),w=t("./CardsAndSlotsBind"),A=t("./CardsAndCardsBind"),b=t("../../../GameLibs/Collections/Dictionary"),_=t("../../../GameLibs/ScMath/ScMath"),P=t("../../../GameCompents/MouseEvents"),I=t("../../../GameLibs/ScUtils/UniqueSingleMachineID"),E=t("../../../GameLibs/ScTweener/ScTweenerPreset"),R=t("../../../GameCompents/ScreenTouchEvents"),L=function(t){function e(e){var i=t.call(this)||this;return i.defaultCardScale=new cc.Vec3(1,1,1),i.cardSelectMode=o.CardSelectMode.ShadowLightEffectComb,i.IsMergeSideLightEffect=!0,i.IsResponseMouseOp=!0,i.IsOpenFaPaiAction=!0,i.IsOpenDragCards=!0,i.IsFaPaiLeftMove=!0,i.IsFaPaiPreRightMove=!0,i.RowMaxCardCount=16,i.IsFaPaiFrontFace=!1,i.IsOpenFaPaiSound=!0,i.IsFaPaiEndFilpCard=!0,i.IsOpenCardWobble=!0,i.IsSortCards=!0,i.CardSortCmpCB=h.CardsTransform.Instance().cmp,i.IsReverseSelectCard=!1,i.UseMoveToDstMode=!1,i.SelectCardHeightScale=1/3,i.UseFlyCardScale=!0,i.CardFlyScaleMul=1.6,i.CardAlginMode=o.CardLayoutAlginMode.Center,i.IsDynamicCardLayoutPosition=!0,i.layoutWidth=400,i.LayoutWidthScale=-1,i.ArcLayoutHeight=100,i.ArcLayoutHeightScale=.5,i.ArcLayoutAbsEluerAngleZ=72,i.LayoutCardCount=13,i.animScale=1,i.fapaiAnimScale=1,i.paiDuiShowTime=.4,i.faPaiPreMoveTime=.2,i.faPaiRightMoveTime=.9,i.faPaiRightMoveDealy=.025,i.DelayFilpCardTime=1,i.FilpCardTime=.5,i.FilpCardDelay=.07,i.PaiDuiPosOffset=new cc.Vec2(-.003,.003),i.SortPaiOffset=new cc.Vec2(0,0),i.CardBackShadowAlpha=1,i.CardAlpha=1,i.maPai=l.CardFace.Count,i.DragCardPosOffsetScale=-.25,i.DragCardAngle=10,i.DragCardArc=.03,i.DragCardMoveSpeedScale=.45,i.DragOutCardsDistScale=1.2,i.DelayFapaiTime=0,i.UsePrespViewMode=!1,i.prespCamreaRectOffsetX=403e-6,i.prespCamreaRectOffsetY=7e-4,i.handCardUICaches=new Array,i.flyingCards=new Array,i.filppingCards=new Array,i.cardDstPosList=new Array,i.cardDstEluerAngleList=new Array,i.adjustCards=new Array,i.centerPos=cc.Vec3.ZERO,i.arcLayoutRotWidth=-1e4,i.SoundScale=.8,i.soundState=-1,i.soundPlayCount=0,i.isRuning=!1,i.isStopWobble=!1,i.cacheFapaiAnimScale=0,i.cacheDelayFilpCardTime=0,i.cacheFilpCardTime=0,i.cacheFilpCardDelay=0,i.clickedCardEventList=new b.Dictionary,i.filpCardsEndEventList=new b.Dictionary,i.faPaiEndAndNoFilpCardsEventList=new b.Dictionary,i.faPaiEndEventList=new b.Dictionary,i.slotsBindList=new Array,i.cardsBindList=new Array,i.isHavNewSlotsBind=!1,i.isHavNewCardsBind=!1,i.isDragging=!1,i.cardsDragOrgQuat=null,i.parent=e,i.wobbleActionUUID=I.UniqueSingleMachineID.Instance().gen().toString(),i.wobbleActionMgr=c.ScActionMgr.Instance().GetGobalScAction(),i.actionStateMachine=new r.ScStateMachine,i.actionStateMachine.ExeMode=C.StateMachineExeMode.Mutex,i.actionStateMachine.SetData(i),i.xiPaiAction=new S.XiPaiAction,i.xiPaiAction.isAutoInstallAndUninstall=!0,i.xiPaiAction.SetStateBaseValue(0),i.actionStateMachine.Install(i.xiPaiAction),i.actionStateMachine.UnInstall(i.xiPaiAction),i.xiPaiDstPosAction=new y.XiPaiDstPosAction,i.xiPaiDstPosAction.isAutoInstallAndUninstall=!0,i.xiPaiDstPosAction.SetStateBaseValue(100),i.actionStateMachine.Install(i.xiPaiDstPosAction),i.actionStateMachine.UnInstall(i.xiPaiDstPosAction),i.filpPaiAction=new m.FilpPaiAction,i.filpPaiAction.SetStateBaseValue(200),i.filpPaiAction.isAutoInstallAndUninstall=!0,i.actionStateMachine.Install(i.filpPaiAction),i.actionStateMachine.UnInstall(i.filpPaiAction),i.actionStateMachine.DefineStateValueEnded(),i.soundAction=new g.SoundAction,i.soundAction.isAutoInstallAndUninstall=!0,i.soundAction.SetData(i),i.CacheFaPaiAnimation(),i.Layout(),i}return n(e,t),e.prototype.GetCardSelectMode=function(){return this.cardSelectMode},e.prototype.SetCardSelectMode=function(t){this.cardSelectMode=t;for(var e=0;e<this.handCardUICaches.length;e++)this.handCardUICaches[e].SetSelectMode(this.cardSelectMode)},e.prototype.LayoutWidth=function(){return this.layoutWidth},e.prototype.SetLayoutWidth=function(t){this.layoutWidth=t,this.arcLayoutRotWidth=-1e4},e.prototype.Show=function(){this.parent.active=!0},e.prototype.Hide=function(){this.parent.active=!1},e.prototype.SetCards=function(t,e){1!=this.isRuning&&(this.cardFaces=t,this.isLaiziReplaceCards=e)},e.prototype.OffFaPaiAnimation=function(){this.fapaiAnimScale=0,this.DelayFilpCardTime=0,this.FilpCardTime=0,this.FilpCardDelay=0},e.prototype.OnFaPaiAnimation=function(){this.fapaiAnimScale=this.cacheFapaiAnimScale,this.fapaiAnimScale=this.cacheFapaiAnimScale,this.DelayFilpCardTime=this.cacheDelayFilpCardTime,this.FilpCardTime=this.cacheFilpCardTime,this.FilpCardDelay=this.cacheFilpCardDelay},e.prototype.CacheFaPaiAnimation=function(){this.cacheFapaiAnimScale=this.fapaiAnimScale,this.cacheDelayFilpCardTime=this.DelayFilpCardTime,this.cacheFilpCardTime=this.FilpCardTime,this.cacheFilpCardDelay=this.FilpCardDelay},e.prototype.Run=function(t){void 0===t&&(t=!0),t&&this.Stop(),1!=this.IsRuning()&&(0!=this.parent.width&&0!=this.parent.height||cc.log("\u8b66\u544a:\u5361\u724c\u7236\u8282\u70b9\u5bbd\u9ad8\u4e3a0\uff0c\u5c06\u9020\u6210\u5361\u724c\u4e0d\u53ef\u89c1."),null==this.mouseUnSelectNodeEvents&&null!=this.UnSelectedAllCardNode&&(this.mouseUnSelectNodeEvents=this.UnSelectedAllCardNode.addComponent(P.default),this.mouseUnSelectNodeEvents.MouseClickEvent=this.MouseDownUnSelectCardsNode.bind(this)),this.IsOpenFaPaiAction&&null!=this.cardFaces&&this.cardFaces.length>0?(1==this.UseMoveToDstMode&&null!=this.SetHandCardsStartPos?(this.faPaiTotalCostTime=this.paiDuiShowTime+this.faPaiRightMoveTime,this.actionStateMachine.Install(this.xiPaiDstPosAction),this.xiPaiDstPosAction.Execute(this.DelayFapaiTime)):(this.faPaiTotalCostTime=this.paiDuiShowTime+2*this.faPaiPreMoveTime+this.faPaiRightMoveTime+this.faPaiRightMoveDealy*(this.cardFaces.length-1),this.actionStateMachine.Install(this.xiPaiAction),this.xiPaiAction.Execute(this.DelayFapaiTime)),this.IsOpenFaPaiSound&&(this.soundAction.Install(),this.soundAction.Execute(this.DelayFapaiTime))):1==this.IsOpenCardWobble&&this.Wobble(),this.UsePrespViewMode&&null==this.cardsPerspCamera&&(this.cardsPerspCamera=this.CreateCardsPerspCamera("CardsPerspCamera"),v.SetNodeParent(this.cardsPerspCamera.node,this.parent),this.SetPerspCameraRenderFocusPos(this.parent.position)),this.isRuning=!0,this.ExetureSlotsBind(),this.ExetureCardsBind())},e.prototype.CreateCardsPerspCamera=function(t){var e=new cc.Node(t);e.position=cc.Vec3.ZERO;var i=e.addComponent(cc.Camera);return i.ortho=!1,i.alignWithScreen=!0,i.depth=1,i.cullingMask=2,i},e.prototype.SetParentPos=function(t){this.parent.setPosition(t),this.SetPerspCameraRenderFocusPos(t)},e.prototype.SetPerspCameraRenderFocusPos=function(t){if(null!=this.cardsPerspCamera){var e=t.x/cc.visibleRect.width,i=t.y/cc.visibleRect.height;e>=0?e+=this.prespCamreaRectOffsetX:e-=this.prespCamreaRectOffsetX,i>=0?i+=this.prespCamreaRectOffsetY:i-=this.prespCamreaRectOffsetY,this.cardsPerspCamera.rect=cc.rect(e,i,1,1)}},e.prototype.IsFaPaiEnded=function(){return this.xiPaiAction.ExeState()==C.ActionExeState.EndExecuted&&this.xiPaiDstPosAction.ExeState()==C.ActionExeState.EndExecuted&&this.filpPaiAction.ExeState()==C.ActionExeState.EndExecuted},e.prototype._FaPaiEnded_Processer_SYS=function(){if(0!=this.UsePrespViewMode){for(var t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].SetGroup("default");this.cardsPerspCamera.node.active=!1}},e.prototype.IsRuning=function(){return this.isRuning},e.prototype.Stop=function(){0!=this.IsRuning()&&(this.UnSlotsBinds(),this.UnCardsBinds(),this.StopShake(),this.StopWobble(),this.actionStateMachine.StopAllActions(),this.RemoveAllCard(),this.filppingCards.length=0,this.cardDstPosList.length=0,this.mouseUnSelectNodeEvents&&(this.mouseUnSelectNodeEvents.destroy(),this.mouseUnSelectNodeEvents=null),null!=this.cardsDragOrgQuat&&(this.cardsDragOrgQuat.length=0),null!=this.dragCardsViewer&&this.dragCardsViewer.Stop(),null!=this.dragCardsViewerBind&&this.dragCardsViewerBind.UnBind(),this.isDragging=!1,this.isRuning=!1)},e.prototype.Destory=function(){this.Stop(),this.soundAction.UnInstall(),this.actionStateMachine.UnInstall(),this.IsResponseMouseOp=!0,this.clickedCardEventList.clear(),this.filpCardsEndEventList.clear(),this.faPaiEndAndNoFilpCardsEventList.clear(),this.faPaiEndEventList.clear(),this.actionStateMachine.Destroy(),this.soundAction.Destroy(),this.DestoryCardsBinds(),this.DestorySlotsBinds(),this.DestoryDragCardsAndSlotsBinds(),this.DestoryDragCardsAndCardsBinds(),null!=this.dragCardsViewer&&(this.dragCardsViewer.Destory(),this.dragCardsViewer=null),null!=this.dragParent&&(this.dragParent.destroy(),this.dragParent=null)},e.prototype.AddSlotsBind=function(t){this.slotsBindList.push(t),this.isHavNewSlotsBind=!0},e.prototype.ExetureSlotsBind=function(){for(var t=0;t<this.slotsBindList.length;t++)this.slotsBindList[t]._Bind_SYS();this.isHavNewSlotsBind=!1},e.prototype.UnSlotsBinds=function(){for(var t=0;t<this.slotsBindList.length;t++)this.slotsBindList[t].UnBind()},e.prototype.DestorySlotsBinds=function(){for(var t=new Array,e=0;e<this.slotsBindList.length;e++)t.push(this.slotsBindList[e]);for(e=0;e<t.length;e++)t[e].Destory()},e.prototype._RemoveSlotsBind_SYS=function(t){for(var e=0;e<this.slotsBindList.length;e++)this.slotsBindList[e]==t&&this.slotsBindList.splice(e,1)},e.prototype.AddCardsBind=function(t){this.cardsBindList.push(t),this.isHavNewCardsBind=!0},e.prototype.ExetureCardsBind=function(){for(var t=0;t<this.cardsBindList.length;t++)this.cardsBindList[t]._Bind_SYS();this.isHavNewCardsBind=!1},e.prototype.UnCardsBinds=function(){for(var t=0;t<this.cardsBindList.length;t++)this.cardsBindList[t].UnBind()},e.prototype.DestoryCardsBinds=function(){for(var t=new Array,e=0;e<this.cardsBindList.length;e++)t.push(this.cardsBindList[e]);for(e=0;e<t.length;e++)t[e].Destory()},e.prototype._RemoveCardsBind_SYS=function(t){for(var e=0;e<this.cardsBindList.length;e++)if(this.cardsBindList[e]==t){this.cardsBindList.splice(e,1);break}},e.prototype.Layout=function(){this.ComputeCardParentLocalSize(),this.ComputedCardSize(),this.ResetCardScale(),null!=this.SetHandCardsParentPos&&this.SetHandCardsParentPos()},e.prototype.ComputeCardParentLocalSize=function(){this.cardParentPixelSize=new cc.Vec2(this.parent.width,this.parent.height)},e.prototype.ResetCardScale=function(){var t=this.cardParentPixelSize.y;this.cardScale=new cc.Vec3(this.defaultCardScale.x,this.defaultCardScale.y,1),this.cardPixelSize.y>t&&(this.cardScale.y=t/this.cardPixelSize.y,this.cardScale.x=this.cardScale.y)},e.prototype.ComputedCardSize=function(){if(null!=this.handCardUICaches&&this.handCardUICaches.length>0)this.cardPixelSize=this.handCardUICaches[0].GetPixelSize();else{var t=T.CardPool.Instance().Pop(l.CardFace.Club_K);v.SetNodeParent(t,this.parent),t.setScale(this.defaultCardScale);var e=t.getComponent(a.default);this.cardPixelSize=e.GetPixelSize(),T.CardPool.Instance().Push(t)}},e.prototype.GetCardPixelSize=function(){return this.cardPixelSize},e.prototype.GetCardScale=function(){return this.cardScale},e.prototype.GetHandCardsCenterWorldPos=function(){var t=new cc.Vec3;return this.parent.getPosition(t),t},e.prototype.SetAnimScale=function(t,e){this.animScale=t,this.fapaiAnimScale=e},e.prototype.GetCardsParent=function(){return this.parent},e.prototype.MouseDownUnSelectCardsNode=function(){this.UnSelectAllCard()},e.prototype.AddClickCardEvent=function(t,e){this.clickedCardEventList.setValue(t,e)},e.prototype.RemoveClickCardEvent=function(t){this.clickedCardEventList.remove(t)},e.prototype.SetCardMouseEvents=function(t){t.OnMouseDownCB=this.MouseDownCard.bind(this),t.OnMouseDragCB=this.MouseDropSelectCard.bind(this),t.OnClickCB=this.ClickCard.bind(this)},e.prototype.UnsetCardMouseEvents=function(t){t.OnMouseDownCB=null,t.OnClickCB=null,t.OnMouseDragCB=null},e.prototype.ClickCard=function(t){0!=this.IsOpenDragCards&&0!=t.IsSelected()&&(this.mousePressSelectedCard!=t?this.FilpSelect(t):this.mousePressSelectedCard=null)},e.prototype.MouseDownCard=function(t){if(this.mousePressSelectedCard=null,this.IsResponseMouseOp){var e=t.getComponent(P.default);if(this.mouseDownPos=e.eventMouse.getLocation(),this.OpenCardsDragControler(),this.IsOpenDragCards){if(t.IsSelected())return;this.mousePressSelectedCard=t,this.lastPressCardNode=t.node}this.FilpSelect(t)}},e.prototype.MouseDropSelectCard=function(t){if(0!=this.IsOpenDragCards&&null!=this.mouseMovePos){var e=this.mouseMovePos.sub(this.mouseDownPos);if(e.len()<2)return this.FilpSelect(t),void(this.mouseDownPos=this.mouseMovePos);var i=new cc.Vec3(e.x,e.y,0),n=v.NodeUpInParentSpace(t.node),o=v.WorldDirectionInNodeSpace(this.parent,i).angle(n);(o*=180/Math.PI)>60&&o<120&&this.FilpSelect(t),this.lastPressCardNode=t.node,this.mouseDownPos=this.mouseMovePos}else this.FilpSelect(t)},e.prototype.FilpSelect=function(t){t.FilpSelect(),p.GameAudios.Instance().PlayEffect(d.AudioClipIdx.Select,this.SoundScale),this.ProcessClickedCardEventCB(t);var e=this.adjustCards.indexOf(t);-1!=e&&this.adjustCards.splice(e,1),this.ResetLightEffectsRenderSort()},e.prototype.OpenCardsDragControler=function(){this.IsOpenDragCards&&!this.isDragging&&(R.ScreenTouchEventsMgr.Instance().RegTouchEvent(cc.Node.EventType.TOUCH_MOVE,this.MouseDragMove,this),R.ScreenTouchEventsMgr.Instance().RegTouchEvent(cc.Node.EventType.TOUCH_END,this.MouseDragUp,this),R.ScreenTouchEventsMgr.Instance().RegTouchEvent(cc.Node.EventType.TOUCH_CANCEL,this.MouseDragUp,this),R.ScreenTouchEventsMgr.Instance().SetIsOnlyScreenTouchEvents(!0))},e.prototype.MouseDragUp=function(t){if(this.isDragging=!1,null!=this.cardsDragOrgQuat&&(this.cardsDragOrgQuat.length=0),this.dragCardsViewer&&this.dragCardsViewer.IsRuning()){for(var e=this.dragCardsViewer.GetAllCards(),i=0;i<e.length;i++)e[i].SetGroup("default"),E.ScTweenerPreset.StopDragWobble(e[i].node);var n=void 0;if(this.dragCardsViewer.SelectAllCard(),null!=t.respEventNode){if(null!=this.dragCardsAndCardsBinds)for(i=0;i<this.dragCardsAndCardsBinds.length;i++){if(this.dragCardsAndCardsBinds[i].GetCardsViewerB().parent==t.respEventNode.parent){this.dragCardsAndCardsBinds[i].ClickedCardsAreaB();break}}if(null!=this.dragCardsAndSlotsBinds)for(i=0;i<this.dragCardsAndSlotsBinds.length;i++)for(var o=(n=this.dragCardsAndSlotsBinds[i].GetSlotsViewer()).GetSeriesCardSlots(),a=o.length-1;a>=0;a--)if(o[a]==t.respEventNode){var r=n.GetSlotPosKey(a);this.dragCardsAndSlotsBinds[i].SlotClicked(r>>12,4095&r);break}}this.dragCardsViewerBind.ClickedCardsAreaA(),this.dragCardsViewer.Stop(),this.dragCardsViewer.Hide(),this.dragParent.active=!1}R.ScreenTouchEventsMgr.Instance().UnRegTouchEvent(cc.Node.EventType.TOUCH_MOVE,this.MouseDragMove,this),R.ScreenTouchEventsMgr.Instance().UnRegTouchEvent(cc.Node.EventType.TOUCH_END,this.MouseDragUp,this),R.ScreenTouchEventsMgr.Instance().UnRegTouchEvent(cc.Node.EventType.TOUCH_CANCEL,this.MouseDragUp,this),R.ScreenTouchEventsMgr.Instance().SetIsOnlyScreenTouchEvents(!1)},e.prototype.MouseDragMove=function(t){var e=t.eventMouse.getLocation();if(this.mouseMovePos=e,0==this.isDragging){if(this.IsStartDragOut(e)){this.isDragging=!0,null==this.dragCardsViewer?this.CreateDragCardsViewer():(this.isHavNewCardsBind||this.isHavNewSlotsBind)&&(this.BindOtherCardsAndSlots(),this.isHavNewSlotsBind=!1,this.isHavNewCardsBind=!1),this.dragParent.active=!0;var i=this.dragParent.parent.convertToNodeSpaceAR(e);this.dragCardsViewer.SetParentPos(i),this.dragCardsViewer.Show(),this.dragCardsViewer.Run(),this.dragCardsViewerBind.ClickedCardsAreaB(),this.SetDragCardsToPrepCamreaGroup(this.dragCardsViewer)}null!=t.respEventNode&&this.parent==t.respEventNode.parent&&(t.isProcessRespEventNode=!0)}if(this.dragCardsViewer&&this.dragCardsViewer.IsRuning()&&((i=this.dragParent.parent.convertToNodeSpaceAR(e)).y+=this.cardPixelSize.y*this.cardScale.y*this.DragCardPosOffsetScale,this.dragCardsViewer.SetParentPos(i),null!=t.mouseMoveDir&&null!=t.mouseMoveSpeed))for(var n=this.dragCardsViewer.GetAllCards(),o=0;o<n.length;o++){var a=v.WorldDirectionInNodeSpace(n[o].node.parent,t.mouseMoveDir);E.ScTweenerPreset.DragWobble(n[o].node,a,t.mouseMoveSpeed,this.cardsDragOrgQuat[o])}},e.prototype.SetDragCardsToPrepCamreaGroup=function(t){null==this.cardsDragOrgQuat&&(this.cardsDragOrgQuat=new Array),t.GetCardDstRotQuats(this.cardsDragOrgQuat);for(var e=t.GetAllCards(),i=0;i<e.length;i++)e[i].SetGroup("card")},e.prototype.IsStartDragOut=function(t){if(null==this.lastPressCardNode)return!1;var e=new cc.Vec3(t.x,t.y,0),i=this.cardPixelSize.y*this.cardScale.y/2*this.DragOutCardsDistScale,n=v.ComputeWorldPosAtNodeUpDirectionDist(this.parent,e);return!(n<i)&&(!((n=v.ComputeWorldPosAtNodeUpDirectionDist(this.lastPressCardNode,e,cc.Vec3.UP))<i)&&(this.lastPressCardNode=null,!0))},e.prototype.CreateDragCardsViewer=function(){null==this.dragParent&&(this.dragParent=new cc.Node("DragParent"),this.dragParent.setParent(this.parent.parent)),this.dragParent.width=2*this.cardPixelSize.x,this.dragParent.height=this.cardPixelSize.y,this.dragCardsViewer=new e(this.dragParent),this.dragCardsViewer.UsePrespViewMode=!0,this.dragCardsViewer.animScale=this.DragCardMoveSpeedScale,this.dragCardsViewer.ArcLayoutHeightScale=this.DragCardArc,this.dragCardsViewer.ArcLayoutAbsEluerAngleZ=this.DragCardAngle,this.dragCardsViewer.LayoutCardCount=3,this.dragCardsViewer.PaiDuiPosOffset=new cc.Vec2(0,0),this.dragCardsViewer.SortPaiOffset=new cc.Vec2(0,0),this.dragCardsViewer.IsOpenCardWobble=!0,this.dragCardsViewer.IsResponseMouseOp=!1,this.dragCardsViewer.SetLayoutWidth(this.dragParent.width),this.dragCardsViewerBind=new A.CardsAndCardsBind,this.dragCardsViewerBind.SetBindMode(o.BindMode.AtoB_And_BtoA),this.dragCardsViewerBind.Bind(this,this.dragCardsViewer),this.BindOtherCardsAndSlots()},e.prototype.BindOtherCardsAndSlots=function(){this.DestoryDragCardsAndSlotsBinds();for(var t=0;t<this.slotsBindList.length;t++){var e=new w.CardsAndSlotsBind;e.SetHostCardsViewer(this),e.Bind(this.dragCardsViewer,this.slotsBindList[t].GetSlotsViewer()),null==this.dragCardsAndSlotsBinds&&(this.dragCardsAndSlotsBinds=new Array),this.dragCardsAndSlotsBinds.push(e)}this.DestoryDragCardsAndCardsBinds();for(t=0;t<this.cardsBindList.length;t++)if(this.cardsBindList[t]!=this.dragCardsViewerBind){var i=new A.CardsAndCardsBind,n=this.cardsBindList[t].GetCardsViewerA();n==this&&(n=this.cardsBindList[t].GetCardsViewerB()),i.Bind(this.dragCardsViewer,n),null==this.dragCardsAndCardsBinds&&(this.dragCardsAndCardsBinds=new Array),this.dragCardsAndCardsBinds.push(i)}},e.prototype.DestoryDragCardsAndSlotsBinds=function(){if(null!=this.dragCardsAndSlotsBinds){for(var t=0;t<this.dragCardsAndSlotsBinds.length;t++)this.dragCardsAndSlotsBinds[t].Destory();this.dragCardsAndSlotsBinds.length=0}},e.prototype.DestoryDragCardsAndCardsBinds=function(){if(null!=this.dragCardsAndCardsBinds){for(var t=0;t<this.dragCardsAndCardsBinds.length;t++)this.dragCardsAndCardsBinds[t].Destory();this.dragCardsAndCardsBinds.length=0}},e.prototype.ProcessClickedCardEventCB=function(t){this.clickedCardEventList.forEach(function(e,i){if(1==i(t))return!1})},e.prototype.AddFilpCardsEndEvent=function(t,e){this.filpCardsEndEventList.setValue(t,e)},e.prototype.RemoveFilpCardsEndEvent=function(t){this.filpCardsEndEventList.remove(t)},e.prototype._ProcessFilpCardsEndEventCB_SYS=function(){var t=this;this.filpCardsEndEventList.forEach(function(e,i){if(1==i(t))return!1})},e.prototype.AddFaPaiEndEvent=function(t,e){this.faPaiEndEventList.setValue(t,e)},e.prototype.RemoveFaPaiEndEvent=function(t){this.faPaiEndEventList.remove(t)},e.prototype._ProcessFaPaiEndEventCB_SYS=function(){var t=this;this.faPaiEndEventList.forEach(function(e,i){if(1==i(t))return!1})},e.prototype.AddFaPaiEndAndNoFilpCardsEvent=function(t,e){this.faPaiEndAndNoFilpCardsEventList.setValue(t,e)},e.prototype.RemoveaPaiEndAndNoFilpCardsEvent=function(t){this.faPaiEndAndNoFilpCardsEventList.remove(t)},e.prototype._ProcessFaPaiEndAndNoFilpCardsEventCB_SYS=function(){var t=this;this.faPaiEndAndNoFilpCardsEventList.forEach(function(e,i){if(1==i(t))return!1})},e.prototype.ResetLightEffectsRenderSort=function(){if(this.IsMergeSideLightEffect)for(var t=null,e=0;e<this.handCardUICaches.length;e++)this.handCardUICaches[e].IsSelected()?null!=t?this.handCardUICaches[e].SetEffectSortingOrder(t.GetEffectSortingOrder()):(this.handCardUICaches[e].SetEffectSortingOrderToCardBottom(),t=this.handCardUICaches[e]):t=null},e.prototype.ResetCardFaces=function(t){if(!this.IsRuning())for(var e=0;e<this.handCardUICaches.length;e++)this.handCardUICaches[e].ResetCardFace(t[e])},e.prototype.UnSelectAllCard=function(){this.StopShake();for(var t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].IsSelected()&&this.handCardUICaches[t].Unselect()},e.prototype.UnSelectedCard=function(t,e){void 0===e&&(e=!0),this.StopShake();for(var i=0;i<this.handCardUICaches.length;i++)if(this.handCardUICaches[i].cardFace==t){this.handCardUICaches[i].Unselect(e);break}this.ResetLightEffectsRenderSort()},e.prototype.DisableCardsOp=function(){for(var t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].DisableOp()},e.prototype.EnableCardsOp=function(){for(var t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].EnableOp()},e.prototype.GetCardsCount=function(){return this.handCardUICaches.length},e.prototype.GetSelectedCardsCount=function(){for(var t=0,e=0;e<this.handCardUICaches.length;e++)this.handCardUICaches[e].IsSelected()&&t++;return t},e.prototype.HavSelectedCard=function(){for(var t=0;t<this.handCardUICaches.length;t++)if(this.handCardUICaches[t].IsSelected())return!0;return!1},e.prototype.GetSelectedCardFaces=function(){for(var t=new Array,e=0;e<this.handCardUICaches.length;e++)this.handCardUICaches[e].IsSelected()&&t.push(this.handCardUICaches[e].cardFace);return t},e.prototype.GetSelectedCards=function(){for(var t=new Array,e=0;e<this.handCardUICaches.length;e++)this.handCardUICaches[e].IsSelected()&&t.push(this.handCardUICaches[e]);return t},e.prototype.GetSelectedCardIdxs=function(){for(var t=null,e=0;e<this.handCardUICaches.length;e++)this.handCardUICaches[e].IsSelected()&&(null==t&&(t=new Array),t.push(e));return t},e.prototype.GetCardsByIdxs=function(t){if("number"==typeof t)return this.handCardUICaches[t];for(var e=new Array,i=0;i<t.length;i++)e.push(this.handCardUICaches[t[i]]);return e},e.prototype.GetAllCardFaces=function(){for(var t=new Array,e=0;e<this.handCardUICaches.length;e++)t.push(this.handCardUICaches[e].cardFace);return t},e.prototype.GetAllCards=function(){return this.handCardUICaches},e.prototype.RemoveAllCard=function(){if(this.IsDynamicCardLayoutPosition){for(var t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].Unselect(!1),T.CardPool.Instance().Push(this.handCardUICaches[t].node);this.handCardUICaches.length=0}else for(t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].Unselect(!1),T.CardPool.Instance().Push(this.handCardUICaches[t].node),this.handCardUICaches[t]=null},e.prototype.RemoveSelectedCard=function(){if(this.IsDynamicCardLayoutPosition){for(var t=new Array,e=0;e<this.handCardUICaches.length;e++)this.handCardUICaches[e].IsSelected()?(this.StopFilppingCard(this.handCardUICaches[e]),this.handCardUICaches[e].Unselect(!1),this.UnsetCardMouseEvents(this.handCardUICaches[e]),T.CardPool.Instance().Push(this.handCardUICaches[e].node)):t.push(this.handCardUICaches[e]);this.handCardUICaches=t,this.AdjustHandCardsToDstPos()}else for(e=0;e<this.handCardUICaches.length;e++)this.handCardUICaches[e].IsSelected()&&(this.StopFilppingCard(this.handCardUICaches[e]),this.handCardUICaches[e].Unselect(!1),this.UnsetCardMouseEvents(this.handCardUICaches[e]),T.CardPool.Instance().Push(this.handCardUICaches[e].node),this.handCardUICaches[e]=null);this.ResetLightEffectsRenderSort()},e.prototype.RemoveCards=function(t){for(var e=0;e<t.length;e++)for(var i=0;i<this.handCardUICaches.length;i++)if(null!=this.handCardUICaches[i]&&this.handCardUICaches[i].IsSelected()&&this.handCardUICaches[i].cardFace==t[i]){this.StopFilppingCard(this.handCardUICaches[i]),this.handCardUICaches[i].Unselect(!1),this.UnsetCardMouseEvents(this.handCardUICaches[i]),T.CardPool.Instance().Push(this.handCardUICaches[i].node),this.handCardUICaches[i]=null;break}if(this.IsDynamicCardLayoutPosition){var n=new Array;for(i=0;i<this.handCardUICaches.length;i++)null!=this.handCardUICaches[i]&&n.push(this.handCardUICaches[i]);this.handCardUICaches=n,this.AdjustHandCardsToDstPos()}this.ResetLightEffectsRenderSort()},e.prototype.DisconnectCards=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!0),null==t||0==t.length)return null;if("number"==typeof t[0]){for(var n=new Array,o=void 0,a=0;a<t.length;a++)o=t[a],null!=this.handCardUICaches[o]&&(v.SetNodeParent(this.handCardUICaches[o].node,T.CardPool.Instance().CardPoolRoot),e&&this.handCardUICaches[o].Unselect(!1,!1,i),n.push(this.handCardUICaches[o]),this.handCardUICaches[o]=null);if(this.IsDynamicCardLayoutPosition){var r=new Array;for(a=0;a<this.handCardUICaches.length;a++)null!=this.handCardUICaches[a]&&r.push(this.handCardUICaches[a]);this.handCardUICaches=r,this.AdjustHandCardsToDstPos()}return this.ResetLightEffectsRenderSort(),n}var s=new Array;for(a=0;a<t.length;a++)for(var c=0;c<this.handCardUICaches.length;c++)this.handCardUICaches[c]==t[a]&&s.push(c);return this.DisconnectCards(s,e,i)},e.prototype.SelectCardsByCardFaces=function(t){var e;this.StopShake();for(var i=0;i<this.handCardUICaches.length;i++)-1!=(e=h.CardsTransform.Instance().FindCardFace(t,this.handCardUICaches[i].cardFace))&&(this.handCardUICaches[i].IsSelected()||this.handCardUICaches[i].Select(),t.splice(e,1));this.ResetLightEffectsRenderSort()},e.prototype.SelectAllCard=function(){this.StopShake();for(var t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].IsSelected()||this.handCardUICaches[t].Select();this.ResetLightEffectsRenderSort()},e.prototype.SelectCards=function(t){this.StopShake();for(var e=0;e<t.length;e++)this.handCardUICaches[t[e]].Select();this.ResetLightEffectsRenderSort()},e.prototype.SelectCard=function(t,e){void 0===e&&(e=!1),this.StopShake(),this.handCardUICaches[t].Select(),e&&this.handCardUICaches[t].ExectueEffects(),this.ResetLightEffectsRenderSort()},e.prototype.SelectCardByCard=function(t,e){void 0===e&&(e=!1),this.StopShake();var i=this.FindSameCard(this.handCardUICaches,t);i<0||(this.handCardUICaches[i].Select(),e&&this.handCardUICaches[i].ExectueEffects(),this.ResetLightEffectsRenderSort())},e.prototype.AddCards=function(t,e){if(null!=t&&0!=t.length){if(this.IsDynamicCardLayoutPosition){for(var i=0;i<t.length;i++)this.handCardUICaches.push(t[i]);this.IsSortCards&&null!=this.CardSortCmpCB&&this.handCardUICaches.sort(this.CardSortCmpCB);for(i=0;i<this.handCardUICaches.length;i++)this.handCardUICaches[i].node.active=!1,v.SetNodeParent(this.handCardUICaches[i].node,T.CardPool.Instance().CardPoolRoot);for(i=0;i<this.handCardUICaches.length;i++)v.SetNodeParent(this.handCardUICaches[i].node,this.parent),this.handCardUICaches[i].node.setSiblingIndex(i),this.SetCardMouseEvents(this.handCardUICaches[i]),this.handCardUICaches[i].node.active=!0}else{for(i=0;i<e.length;i++)this.handCardUICaches[e[i]]=t[i];for(i=0;i<this.handCardUICaches.length;i++)this.handCardUICaches[i].node.active=!1,v.SetNodeParent(this.handCardUICaches[i].node,this.parent),this.handCardUICaches[i].node.setSiblingIndex(i),this.SetCardMouseEvents(this.handCardUICaches[i]),this.handCardUICaches[i].node.active=!0}this.ResetLightEffectsRenderSort()}},e.prototype.IsHavFlyingToHandCards=function(){return null!=this.flyingCards&&0!=this.flyingCards.length},e.prototype.IsHavAdjustingHandCards=function(){return null!=this.adjustCards&&0!=this.adjustCards.length},e.prototype.ResetCardLayout=function(t,e,i){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===i&&(i=-1),t>0&&this.SetLayoutWidth(t),e>0&&(this.ArcLayoutHeight=e),i>0&&(this.ArcLayoutAbsEluerAngleZ=i)},e.prototype.HandCardsFilpping=function(){this.actionStateMachine.Install(this.filpPaiAction),this.filpPaiAction.Execute()},e.prototype.StopFilppingCard=function(t){var e=this.FindSameCard(this.filppingCards,t);-1!=e&&this.filppingCards.splice(e,1)},e.prototype.FindSameCard=function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},e.prototype.DoAlpha=function(t,e){for(var i=0;i<this.handCardUICaches.length;i++)u.ScTweenerRun.DoAlpha(this.handCardUICaches[i].node,t,e)},e.prototype.StopShake=function(){for(var t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].StopShake()},e.prototype.Shake=function(t){if(this.IsHavAdjustingHandCards())return!1;for(var e=0,i=0;i<t.length;i++)e|=this.handCardUICaches[t[i]].Shake();return 0!=e},e.prototype.Wobble=function(){this.IsOpenCardWobble=!0,this.isStopWobble=!1,this.RegWobbleForever()},e.prototype.StopWobble=function(){this.StopWobbleForever()},e.prototype.RegWobbleForever=function(){this.IsOpenCardWobble&&this.wobbleActionMgr.Reg(this.wobbleActionUUID,this.WobbleUpdater.bind(this))},e.prototype.WobbleUpdater=function(){1!=this.isStopWobble&&1!=this.IsHavAdjustingHandCards()&&this._Wobble()},e.prototype.StopWobbleTemporary=function(){for(var t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].StopWobble()},e.prototype.StopWobbleForever=function(){this.isStopWobble=!0,this.StopWobbleTemporary(),this.wobbleActionMgr.UnReg(this.wobbleActionUUID)},e.prototype._Wobble=function(){for(var t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].Wobble()},e.prototype.SetWobbleSpeedLow=function(){for(var t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].StopWobble(),this.handCardUICaches[t].SetWoblleSpeedLow()},e.prototype.SetWobbleSpeedHigh=function(){for(var t=0;t<this.handCardUICaches.length;t++)this.handCardUICaches[t].StopWobble(),this.handCardUICaches[t].SetWoblleSpeedHigh()},e.prototype.SetWobbleSpeed=function(t,e){for(var i=0;i<this.handCardUICaches.length;i++)this.handCardUICaches[i].StopWobble(),this.handCardUICaches[i].SetWoblleSpeed(t,e)},e.prototype.CreatePaiDui=function(t,e){for(var i=0;i<this.handCardUICaches.length;i++)this.handCardUICaches[i].Unselect(!1),T.CardPool.Instance().Push(this.handCardUICaches[i].node);var n;this.handCardUICaches.length=0;for(i=0;i<t.length;i++)(n=T.CardPool.Instance().Pop(t[i]).getComponent(a.default)).SetSelectMode(this.GetCardSelectMode()),n.DisableOp(),this.UsePrespViewMode&&n.SetGroup("card"),n.cardFace==this.maPai?n.mapaiMark.active=!0:n.mapaiMark.active=!1,null!=e&&e[i]&&(n.laiziMark.active=!0),this.IsFaPaiFrontFace||n.ShowCardBg(),this.handCardUICaches.push(n);this.IsSortCards&&null!=this.CardSortCmpCB&&this.handCardUICaches.sort(this.CardSortCmpCB);for(i=0;i<this.handCardUICaches.length;i++){v.SetNodeParent(this.handCardUICaches[i].node,this.parent,!1),this.handCardUICaches[i].node.setScale(this.defaultCardScale);var o=cc.Vec3.ZERO;this.handCardUICaches[i].node.getPosition(o),o.z=0,this.handCardUICaches[i].node.setPosition(o),this.SetCardMouseEvents(this.handCardUICaches[i]),this.handCardUICaches[i].node.active=!0}this.Layout(),null!=this.SetHandCardsParentPos&&this.SetHandCardsParentPos(),this.parent.getPosition(this.centerPos)},e.prototype.ShowPaiDuiAnim=function(t,e){for(var i=this.cardScale.x*this.cardPixelSize.x*this.PaiDuiPosOffset.x,n=this.cardScale.y*this.cardPixelSize.y*this.PaiDuiPosOffset.y,o=0;o<this.handCardUICaches.length-1;o++){u.ScTweenerRun.DoAlpha(this.handCardUICaches[o].shadowBack,.1,0),this.handCardUICaches[o].node.setScale(this.cardScale);var a=t.x+i*o,r=t.y+n*o,s=new cc.Vec3(a,r,0);this.handCardUICaches[o].node.setPosition(s),u.ScTweenerRun.DoAlpha(this.handCardUICaches[o].node,0,0),u.ScTweenerRun.DoAlpha(this.handCardUICaches[o].node,.5,e*this.fapaiAnimScale)}var c=this.handCardUICaches.length-1;this.handCardUICaches[c].node.setScale(this.cardScale);var l=t.x+i*c,h=t.y+n*c,d=new cc.Vec3(l,h,0);this.handCardUICaches[c].node.setPosition(d),u.ScTweenerRun.DoAlpha(this.handCardUICaches[c].node,0,0),u.ScTweenerRun.DoAlpha(this.handCardUICaches[c].node,this.CardAlpha,e*this.fapaiAnimScale)},e.prototype.GetLeftFirstCardPos=function(){var t;return t=-1!=this.LayoutWidthScale?this.LayoutWidthScale*this.cardPixelSize.x*this.cardScale.x:this.LayoutWidth(),new cc.Vec3(-t/2+this.GetCardPixelSize().x/2*this.cardScale.x,0,0)},e.prototype.ComputeCardListWidth=function(t){return Math.floor(this.LayoutWidth())},e.prototype.ComputeCardsDstLayoutPos=function(t){void 0===t&&(t=!1),this.IsDynamicCardLayoutPosition?this.DynamicComputeCardsDstLayoutPos(this.handCardUICaches.length,t):this.DynamicComputeCardsDstLayoutPos(this.RowMaxCardCount,t)},e.prototype.DynamicComputeCardsDstLayoutPos=function(t,e){var i,n;void 0===e&&(e=!1);var o=0,a=this.LayoutWidth();-1!=this.LayoutWidthScale&&(a=this.LayoutWidthScale*this.cardPixelSize.x*this.cardScale.x),-1e4==this.arcLayoutRotWidth&&(o=this.CalArcLayoutOffsetWidth(),this.arcLayoutRotWidth=a-2*o);var r=this.arcLayoutRotWidth/this.LayoutCardCount*t;i=-1!=this.ArcLayoutHeightScale?this.ArcLayoutHeightScale*this.cardPixelSize.y*this.cardScale.y/this.LayoutCardCount*t:this.ArcLayoutHeight/this.LayoutCardCount*t,n=this.ArcLayoutAbsEluerAngleZ/this.LayoutCardCount*t,this.ComputeCardsDstArcPos(t,r,i,n,e)},e.prototype.CalArcLayoutOffsetWidth=function(){var t=v.CreateQuat(cc.Vec3.FORWARD,-this.ArcLayoutAbsEluerAngleZ),e=v.RotateVectorByQuat(cc.Vec3.UP,t);e.normalizeSelf();var i=v.RotateVectorByQuat(cc.Vec3.RIGHT,t);i.normalizeSelf(),e=e.mul(this.GetCardPixelSize().y/2),i=i.mul(this.GetCardPixelSize().x/2);var n=e.add(i),o=e.sub(i);return Math.max(Math.abs(o.x),Math.abs(n.x))*this.GetCardScale().x},e.prototype.ComputeCardsDstArcPos=function(t,e,i,n,o){void 0===o&&(o=!1),this.cardDstPosList.length=0,this.cardDstEluerAngleList.length=0;var a,r=new Array(3);r[0]=new cc.Vec3(-e/2,0,0),r[2]=new cc.Vec3(e/2,0,0),r[1]=new cc.Vec3(0,i,0);for(var s,c,l=2*n,h=0;h<t;h++){1==t?(a=_.SquareBezier(.5,r[0],r[1],r[2]),s=0):(c=h/(t-1),a=_.SquareBezier(c,r[0],r[1],r[2]),s=n-h*l/(t-1)),a.x+=h*this.cardPixelSize.x*this.cardScale.x*this.SortPaiOffset.x,a.y+=h*this.cardPixelSize.y*this.cardScale.y*this.SortPaiOffset.y,this.handCardUICaches[h].unSelectedLocalPos=a;var u=v.GetRotParentAxisZAngleSelectedStatePosVector(s,this.GetCardPixelSize().y,this.cardScale.y,this.SelectCardHeightScale,this.IsReverseSelectCard);this.handCardUICaches[h].selectedLocalPos=a.add(u),this.handCardUICaches[h].IsSelected()&&(a=this.handCardUICaches[h].selectedLocalPos),this.cardDstPosList.push(a),o?this.cardDstEluerAngleList.push(new cc.Vec3(0,180,-s)):this.cardDstEluerAngleList.push(new cc.Vec3(0,0,s))}},e.prototype.GetCardDstRotQuats=function(t){null==t&&(t=new Array),t.length=0;for(var e=0;e<this.cardDstEluerAngleList.length;e++){var i=cc.quat();i.fromEuler(this.cardDstEluerAngleList[e]),t.push(i)}return t},e.prototype.AdjustHandCardsToDstPos=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.CardsFlyToHand(null,null,!1,t,e)},e.prototype.CardsFlyToHand=function(t,e,i,n,o){if(void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=1),void 0===o&&(o=!1),this.StopShake(),this.StopWobbleTemporary(),null!=t)for(var a=0;a<t.length;a++)this.flyingCards.push(t[a]),t[a].DisableOp();if(o)for(a=0;a<this.handCardUICaches.length;a++)-1==this.flyingCards.indexOf(this.handCardUICaches[a])&&(this.handCardUICaches[a].DisableOp(),this.flyingCards.push(this.handCardUICaches[a]));this.AddCards(t,e);var r=!1;if(0==this.IsFaPaiEndFilpCard&&0==this.IsFaPaiFrontFace&&(r=!0),this.ComputeCardsDstLayoutPos(r),this.IsDynamicCardLayoutPosition){this.adjustCards.length=0,e=new Array(this.handCardUICaches.length);for(a=0;a<this.handCardUICaches.length;a++)e[a]=a}for(a=0;a<e.length;a++){var s=this.handCardUICaches[e[a]];this.adjustCards.push(s);var c=void 0;if(c=u.ScTweenerRun.DoLocalMove(s.node,this.cardDstPosList[e[a]],n*this.animScale).SetCallBackFunc(this.ActionEndForHand.bind(this),this.handCardUICaches[e[a]]).SetEast(f.ScEasingType.EaseOutExpo),u.ScTweenerRun.DoLocalEluerAngles(s.node,this.cardDstEluerAngleList[e[a]],!0,n*this.animScale).SetEast(f.ScEasingType.EaseOutQuint),u.ScTweenerRun.DoAlpha(s.node,this.CardAlpha,n*this.animScale).SetEast(f.ScEasingType.EaseOutQuint),-1!=this.flyingCards.indexOf(s)&&null!=t&&-1!=t.indexOf(s)){if(i){var l=new cc.Vec3;s.node.getPosition(l);var h=_.GetRouteHandles(l,this.cardDstPosList[e[a]],[50,150]);c.SetBezierRoute(h[0],h[1])}if(1==this.UseFlyCardScale){var d=cc.Vec3.ZERO;s.node.getScale(d);var p=u.ScTweenerRun.DoLocalScale(s.node,d.mul(this.CardFlyScaleMul),n*this.animScale/7,!1).SetEast(f.ScEasingType.EaseOutQuint),S=u.ScTweenerRun.DoLocalScale(s.node,this.cardScale,n*this.animScale/7*6,!1).SetEast(f.ScEasingType.EaseOutQuint);u.ScTweenerRun.DoTweenerSeq([p,S])}}else u.ScTweenerRun.DoLocalScale(s.node,this.cardScale,n*this.animScale).SetEast(f.ScEasingType.EaseOutQuint)}},e.prototype.ActionEndForHand=function(t){this.IsResponseMouseOp&&(t.EnableOp(),t.SetSelectMode(this.GetCardSelectMode()),this.SetCardMouseEvents(t));var e=this.adjustCards.indexOf(t);-1!=e&&this.adjustCards.splice(e,1),-1!=(e=this.flyingCards.indexOf(t))&&this.flyingCards.splice(e,1),0==this.flyingCards.length&&null!=this.CardsFlyingEnded&&this.CardsFlyingEnded(this),0==this.adjustCards.length&&null!=this.CardsAdjustEnded&&this.CardsAdjustEnded(this)},e}(s.ScObject);i.CardsViewer=L,cc._RF.pop()},{"../../../GameCompents/MouseEvents":"MouseEvents","../../../GameCompents/ScreenTouchEvents":"ScreenTouchEvents","../../../GameLibs/Collections/Dictionary":"Dictionary","../../../GameLibs/ScAction/ScActionMgr":"ScActionMgr","../../../GameLibs/ScMath/ScMath":"ScMath","../../../GameLibs/ScStateMachine/ScStateMachine":"ScStateMachine","../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../GameLibs/ScTweener/ScTweenerPreset":"ScTweenerPreset","../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes","../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../GameLibs/ScTypes/ScObject":"ScObject","../../../GameLibs/ScUtils/UniqueSingleMachineID":"UniqueSingleMachineID","../../GameTypes":"GameTypes","../ResMgr/GameAudios":"GameAudios","../ResMgr/Pool/CardPool":"CardPool","./Action/CardsViewerAction/FilpPaiAction":"FilpPaiAction","./Action/CardsViewerAction/SoundAction":"SoundAction","./Action/CardsViewerAction/XiPaiAction":"XiPaiAction","./Action/CardsViewerAction/XiPaiDstPosAction":"XiPaiDstPosAction","./Card":"Card","./CardsAlgorithm/CardAlgoTypes":"CardAlgoTypes","./CardsAlgorithm/CardsTransform":"CardsTransform","./CardsAndCardsBind":"CardsAndCardsBind","./CardsAndSlotsBind":"CardsAndSlotsBind","./CardsProcesserTypes":"CardsProcesserTypes"}],Card:[function(t,e,i){"use strict";cc._RF.push(e,"d7a31kTRCBFBpzguYcXJDxC","Card");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../GameLibs/ScTweener/ScTweenerRun"),r=t("./CardsProcesserTypes"),s=t("../../../GameLibs/ScTweener/ScTweenerTypes"),c=t("../../../GameLibs/ScStateMachine/ScStateMachineTypes"),l=t("./Action/CardAction/CardShakeAction"),h=t("./Action/CardAction/CardEffectAction"),u=t("./Action/CardAction/CardWobbleAction"),d=t("../../../GameCompents/MouseEvents"),p=t("../ResMgr/Pool/CardPool"),f=cc._decorator,S=f.ccclass,y=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardFaceSprite=null,e.backFaceSprite=null,e.horseMarkSprite=null,e.laziMarkSprite=null,e.shadowSprite=null,e.shadowBackSprite=null,e.holeSprite=null,e.isSelected=!1,e.isActioning=!1,e.isStartWobble=!1,e.isShowEffect=!0,e.selectShadowMaxAlpha=.5,e.selectMode=r.CardSelectMode.LightEffect,e.selectedLocalPos=cc.Vec3.ZERO,e.unSelectedLocalPos=cc.Vec3.ZERO,e}var i;return n(e,t),i=e,e.prototype.IsSelected=function(){return this.isSelected},e.prototype.GetSelectMode=function(){return this.selectMode},e.prototype.SetSelectMode=function(t){this.selectMode=t,this.selectMode==r.CardSelectMode.ShadowLightEffectComb?this.selectShadowMaxAlpha=.85:this.selectShadowMaxAlpha=.6},e.prototype.onLoad=function(){this.gameMouseEvents=this.node.addComponent(d.default),this.gameMouseEvents.MouseDownEvent=this.OnMouseDown.bind(this),this.gameMouseEvents.MouseClickEvent=this.OnClick.bind(this),this.gameMouseEvents.MouseDragEvent=this.OnMouseDrag.bind(this),this.frontFace=this.cardFaceSprite.node,this.backFace=this.backFaceSprite.node,this.laiziMark=this.laziMarkSprite.node,this.mapaiMark=this.horseMarkSprite.node,this.shadow=this.shadowSprite.node,this.shadowBack=this.shadowBackSprite.node,this.effectAction=new h.CardEffectAction,this.effectAction.isAutoInstallAndUninstall=!0,this.effectAction.SetData(this),this.effectAction.Install(),this.effectAction.UnInstall(),this.wobbleAction=new u.CardWobbleAction,this.wobbleAction.isAutoInstallAndUninstall=!0,this.wobbleAction.SetData(this),this.SetWoblleSpeedLow(),this.wobbleAction.Install(),this.wobbleAction.UnInstall(),this.shakeAction=new l.CardShakeAction,this.shakeAction.isAutoInstallAndUninstall=!0,this.shakeAction.SetData(this),this.shakeAction.Install(),this.shakeAction.UnInstall()},e.prototype.OnMouseDown=function(){null!=this.OnMouseDownCB&&this.OnMouseDownCB(this)},e.prototype.OnClick=function(){null!=this.OnClickCB&&this.OnClickCB(this)},e.prototype.OnMouseDrag=function(t){null!=this.OnMouseDragCB&&this.OnMouseDragCB(this)},e.prototype.onDestroy=function(){this.effectAction.Destroy(),this.wobbleAction.Destroy(),this.shakeAction.Destroy()},e.prototype.Clear=function(){this.effectAction.UnInstall(),this.wobbleAction.UnInstall(),this.shakeAction.UnInstall(),a.ScTweenerRun.DoAlpha(this.shadow,1,0),a.ScTweenerRun.DoAlpha(this.shadowBack,1,0),this.holeSprite.node.active=!1,this.mapaiMark.active=!1,this.laiziMark.active=!1,this.node.group="default"},e.prototype.ResetCardFace=function(t){if(t!=this.cardFace){var e=p.CardPool.Instance().Pop(t),n=e.getComponent(i);n.cardFace=this.cardFace,n.cardFaceSprite.spriteFrame=p.CardPool.Instance().GetCardFaceSprite(n.cardFace),p.CardPool.Instance().Push(e),this.cardFace=t,this.cardFaceSprite.spriteFrame=p.CardPool.Instance().GetCardFaceSprite(t)}},e.prototype.DoHoleColor=function(t,e){return a.ScTweenerRun.DoColor(this.holeSprite.node,t,e,!0,!1)},e.prototype.DoColor=function(t,e){a.ScTweenerRun.DoColor(this.frontFace,t,e,!1),a.ScTweenerRun.DoColor(this.backFace,t,e,!1),a.ScTweenerRun.DoColor(this.laiziMark,t,e,!1),a.ScTweenerRun.DoColor(this.mapaiMark,t,e,!1)},e.prototype.ShowCardBg=function(){this.node.eulerAngles=new cc.Vec3(0,180,0)},e.prototype.ShowCardFront=function(){this.node.eulerAngles=new cc.Vec3(0,0,0)},e.prototype.SetEffectSortingOrder=function(t){},e.prototype.GetEffectSortingOrder=function(){return 0},e.prototype.SetEffectSortingOrderToCardBottom=function(){},e.prototype.DisableOp=function(){this.gameMouseEvents.enabled=!1},e.prototype.EnableOp=function(){this.gameMouseEvents.enabled=!0},e.prototype.SetGroup=function(t){this.node.group=t},e.prototype.GetPixelSize=function(){return new cc.Vec2(this.node.width,this.node.height)},e.prototype.ExectueEffects=function(){},e.prototype.ShowEffect=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=.05)},e.prototype.HideEffect=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=.05)},e.prototype.HideEffectEnd=function(){},e.prototype.Shake=function(){return this.shakeAction.ExeState()!=c.ActionExeState.EndExecuted?0:this.isActioning?0:(this.StopWobble(),this.isStartWobble=!1,this.shakeAction.Stop(),this.shakeAction.Execute(),1)},e.prototype.StopShake=function(){this.shakeAction.Stop(!0)},e.prototype.Wobble=function(){this.wobbleAction.ExeState()==c.ActionExeState.EndExecuted&&this.shakeAction.ExeState()==c.ActionExeState.EndExecuted&&(this.isActioning?this.isStartWobble=!0:(this.isStartWobble=!1,this.wobbleAction.Stop(!0),this.wobbleAction.Execute()))},e.prototype.StopWobble=function(){this.wobbleAction.Stop(!0)},e.prototype.SetWoblleSpeedLow=function(){this.SetWoblleSpeed(2.5,3)},e.prototype.SetWoblleSpeedHigh=function(){this.SetWoblleSpeed(1,10)},e.prototype.SetWoblleSpeed=function(t,e){this.wobbleAction.duration=t,this.wobbleAction.movDist=e},e.prototype.FilpSelect=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this.isSelected?this.Unselect(t,e):this.Select(t,e)},e.prototype.Select=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this.isStartWobble=!1,this.wobbleAction.Stop(!0),this.effectAction.Stop(!0),this.shakeAction.Stop(!0),this.SetWhiteSmallFireEffectToMats(),this.isSelected=!0;var i=.03;switch(t||(i=0),e?(this.isActioning=!0,a.ScTweenerRun.DoLocalMove(this.node,this.selectedLocalPos,i).SetCallBackFunc(this.ActionEnd.bind(this))):this.isActioning=!1,this.GetSelectMode()){case r.CardSelectMode.LightEffect:this.isShowEffect&&this.ShowEffect(t,.03);break;case r.CardSelectMode.Shadow:(n=cc.Color.WHITE).setR(255*this.selectShadowMaxAlpha),n.setG(255*this.selectShadowMaxAlpha),n.setB(255*this.selectShadowMaxAlpha),this.DoColor(n,i);break;case r.CardSelectMode.ShadowLightEffectComb:var n;this.isShowEffect&&this.ShowEffect(t,.03),(n=cc.Color.WHITE).setR(255*this.selectShadowMaxAlpha),n.setG(255*this.selectShadowMaxAlpha),n.setB(255*this.selectShadowMaxAlpha),this.DoColor(n,i)}},e.prototype.Unselect=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.isStartWobble=!1,this.wobbleAction.Stop(!0),this.shakeAction.Stop(!0);var n=.07;0==this.isSelected&&(n=.5),this.isShowEffect&&i&&(t&&this.GetSelectMode()!=r.CardSelectMode.Shadow?(this.HideEffect(!0,1),this.DoYellowLargeFireEffects(1.8,s.ScEasingType.EaseOutQuint)):this.HideEffect(t,n));var o=0;t&&(o=.07),this.DoColor(cc.Color.WHITE,o),this.isSelected=!1,e?(this.isActioning=!0,a.ScTweenerRun.DoLocalMove(this.node,this.unSelectedLocalPos,o).SetCallBackFunc(this.ActionEnd.bind(this))):this.isActioning=!1},e.prototype.ActionEnd=function(){this.isActioning=!1,this.isStartWobble&&this.Wobble()},e.prototype.SetYellowFireEffectToMats=function(){},e.prototype.SetWhiteSmallFireEffectToMats=function(){},e.prototype.DoWhiteSmallFireEffects=function(t,e){void 0===t&&(t=0),void 0===e&&(e=s.ScEasingType.Linear),this.DoEffects(this.whiteSmallFireEffects,t,e)},e.prototype.DoWhiteFireEffects=function(t,e){void 0===t&&(t=0),void 0===e&&(e=s.ScEasingType.Linear),this.DoEffects(this.whiteFireEffects,t,e)},e.prototype.DoYellowLargeFireEffects=function(t,e){void 0===t&&(t=0),void 0===e&&(e=s.ScEasingType.Linear),this.DoEffects(this.yellowLargeFireEffects,t,e)},e.prototype.DoYellowFireEffects=function(t,e){void 0===t&&(t=0),void 0===e&&(e=s.ScEasingType.Linear),this.DoEffects(this.yellowFireEffects,t,e)},e.prototype.DoEffects=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=s.ScEasingType.Linear)},e.prototype.DoLineEffect=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=s.ScEasingType.Linear)},e.prototype.DoBgEffect=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=s.ScEasingType.Linear)},e.prototype.DoBgShadowEffect=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=s.ScEasingType.Linear)},e.prototype.DoEffect=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=s.ScEasingType.Linear)},e.prototype.CreateFireEffectInfo=function(){this.CreateYellowFireEffectInfo(),this.CreateYellowLargeFireEffectInfo(),this.CreateWhiteFireEffectInfo(),this.CreateWhiteSmallFireEffectInfo()},e.prototype.CreateYellowFireEffectInfo=function(){var t=new cc.Color(246/255,230/255,25/255,1),e=new cc.Color(171/255,39/255,24/255,1);this.yellowFireEffects=this._CreateFireEffectInfo(t,e)},e.prototype.CreateWhiteFireEffectInfo=function(){var t=new cc.Color(.9,1,.9,.8),e=new cc.Color(.7,.9,.7,.9);this.whiteFireEffects=this._CreateFireEffectInfo(t,e)},e.prototype._CreateFireEffectInfo=function(t,e){var i=new r.CardEffectInfo;(void 0).lineEffectInfo=i,i.isHavColor=!0,i.colorTint=t,i.mainTexTiling=new cc.Vec2(2.42,1.11),i.noiseTexTiling=new cc.Vec2(1.67,.9),i.maskTexTiling=new cc.Vec2(1,1),i.noiseSpeedX=1.36,i.noiseSpeedY=2.92,i.noiseIntensity=.41,i.alpha=1,i.localPosition=new cc.Vec3(0,.8,0),i.localScale=new cc.Vec3(617.1694,660,1),i=new r.CardEffectInfo,(void 0).bgEffectInfo=i,i.isHavColor=!0,i.colorTint=e,i.mainTexTiling=new cc.Vec2(1,1),i.noiseTexTiling=new cc.Vec2(1,1),i.maskTexTiling=new cc.Vec2(-1.57,3.2),i.noiseSpeedX=1,i.noiseSpeedY=1,i.noiseIntensity=.05,i.alpha=1,i.localPosition=new cc.Vec3(2.8,2.8,0),i.localScale=new cc.Vec3(184.5911,185.4334,1),i=new r.CardEffectInfo,(void 0).bgShadowEffectInfo=i,i.isHavColor=!1,i.mainTexTiling=new cc.Vec2(1,1),i.noiseTexTiling=new cc.Vec2(1,1),i.maskTexTiling=new cc.Vec2(1,1),i.noiseSpeedX=1.36,i.noiseSpeedY=1.72,i.noiseIntensity=.05,i.alpha=1,i.localPosition=new cc.Vec3(3.2,2,0),i.localScale=new cc.Vec3(171.3204,187.0977,1)},e.prototype.CreateWhiteSmallFireEffectInfo=function(){var t=new cc.Color(36/255,1,32/255,120/255),e=new cc.Color(24/255,133/255,32/255,210/255);this.whiteSmallFireEffects=this.CreateSmallFireEffectInfo(t,e)},e.prototype.CreateSmallFireEffectInfo=function(t,e){var i=new r.CardEffectInfo;(void 0).lineEffectInfo=i,i.isHavColor=!0,i.colorTint=t,i.mainTexTiling=new cc.Vec2(1.72,.71),i.noiseTexTiling=new cc.Vec2(1,1),i.maskTexTiling=new cc.Vec2(1,1),i.noiseSpeedX=1,i.noiseSpeedY=3,i.noiseIntensity=.1,i.alpha=1,i.localPosition=new cc.Vec3(0,1,0),i.localScale=new cc.Vec3(587.7205,654.51,1),i=new r.CardEffectInfo,(void 0).bgEffectInfo=i,i.isHavColor=!0,i.colorTint=e,i.mainTexTiling=new cc.Vec2(1,1),i.noiseTexTiling=new cc.Vec2(.78,1.46),i.maskTexTiling=new cc.Vec2(1,1),i.noiseSpeedX=0,i.noiseSpeedY=1.76,i.noiseIntensity=.06,i.alpha=1,i.localPosition=new cc.Vec3(1,2.5,0),i.localScale=new cc.Vec3(154.77,181,1),i=new r.CardEffectInfo,(void 0).bgShadowEffectInfo=i,i.isHavColor=!1,i.mainTexTiling=new cc.Vec2(1,1),i.noiseTexTiling=new cc.Vec2(1,1),i.maskTexTiling=new cc.Vec2(1,1),i.noiseSpeedX=1.36,i.noiseSpeedY=1.72,i.noiseIntensity=0,i.alpha=1,i.localPosition=new cc.Vec3(-2.7,4.7,0),i.localScale=new cc.Vec3(175.6418,190.1081,1)},e.prototype.CreateYellowLargeFireEffectInfo=function(){var t=new cc.Color(194/255,111/255,0,1),e=new cc.Color(1,10/255,0,1);this.yellowLargeFireEffects=this.CreateLargeFireEffectInfo(t,e)},e.prototype.CreateLargeFireEffectInfo=function(t,e){var i=new r.CardEffectInfo;(void 0).lineEffectInfo=i,i.isHavColor=!0,i.colorTint=t,i.mainTexTiling=new cc.Vec2(2.42,.78),i.noiseTexTiling=new cc.Vec2(1.67,.9),i.maskTexTiling=new cc.Vec2(1,1),i.noiseSpeedX=1.36,i.noiseSpeedY=2.92,i.noiseIntensity=.32,i.alpha=1,i.localPosition=new cc.Vec3(-.6,-.5,0),i.localScale=new cc.Vec3(565.1163,576.0835,1),i=new r.CardEffectInfo,(void 0).bgEffectInfo=i,i.isHavColor=!0,i.colorTint=e,i.mainTexTiling=new cc.Vec2(1,1),i.noiseTexTiling=new cc.Vec2(1,1),i.maskTexTiling=new cc.Vec2(-1.57,3.2),i.noiseSpeedX=1,i.noiseSpeedY=1,i.noiseIntensity=-.12,i.alpha=1,i.localPosition=new cc.Vec3(-3.8,-2.5,0),i.localScale=new cc.Vec3(179.6957,185.7734,1),i=new r.CardEffectInfo,(void 0).bgShadowEffectInfo=i,i.isHavColor=!1,i.mainTexTiling=new cc.Vec2(1,1),i.noiseTexTiling=new cc.Vec2(1,1),i.maskTexTiling=new cc.Vec2(1,1),i.noiseSpeedX=1.36,i.noiseSpeedY=1.72,i.noiseIntensity=.12,i.alpha=1,i.localPosition=new cc.Vec3(-9.6,-8.4,0),i.localScale=new cc.Vec3(185.6931,196.7671,1)},o([y(cc.Sprite)],e.prototype,"cardFaceSprite",void 0),o([y(cc.Sprite)],e.prototype,"backFaceSprite",void 0),o([y(cc.Sprite)],e.prototype,"horseMarkSprite",void 0),o([y(cc.Sprite)],e.prototype,"laziMarkSprite",void 0),o([y(cc.Sprite)],e.prototype,"shadowSprite",void 0),o([y(cc.Sprite)],e.prototype,"shadowBackSprite",void 0),o([y(cc.Sprite)],e.prototype,"holeSprite",void 0),e=i=o([S],e)}(cc.Component);i.default=m,cc._RF.pop()},{"../../../GameCompents/MouseEvents":"MouseEvents","../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes","../ResMgr/Pool/CardPool":"CardPool","./Action/CardAction/CardEffectAction":"CardEffectAction","./Action/CardAction/CardShakeAction":"CardShakeAction","./Action/CardAction/CardWobbleAction":"CardWobbleAction","./CardsProcesserTypes":"CardsProcesserTypes"}],ClientServerLinker:[function(t,e,i){"use strict";cc._RF.push(e,"088a2V9y/BGnZeE0t2qSqcl","ClientServerLinker"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("../GameServer/GameServer"),o=t("../GameServer/CommonMsgProcesser"),a=t("../GameServer/GameMsg"),r=t("../../GameLibs/ByteBuffer/bytebuffer"),s=t("../GameServer/ServerInfoDeEncode/PlayGameInfo"),c=t("../GameServer/ServerInfoDeEncode/MatchingActionInfo"),l=t("../GameServer/ServerInfoDeEncode/EnterOrLeaveGoldRoom"),h=t("../GameServer/ServerInfoDeEncode/PlayerInfo"),u=t("../GameClient/Viewers/MsgBox"),d=t("../GameClient/GameClient"),p=t("../GameServer/GameError"),f=t("../GameClient/Scene/SceneSwitch"),S=t("../../GameLibs/ScCmd/CmdMgr"),y=t("../../GameLibs/ScCmd/Cmd"),m=t("../../GameLibs/ScTask/TaskMgr"),g=t("../GameServer/ServerInfoDeEncode/RoomInfo"),C=t("../GameTypes"),T=t("../GameUtils"),v=t("../GameClient/CardsProcesser/CardsAlgorithm/CardsTransform"),w=t("../GameClient/CardsProcesser/CardsAlgorithm/CardAlgoTypes"),A=t("../GameClient/GameCmd/PlayerDataUpdateCmd"),b=t("../GameServer/ServerInfoDeEncode/PublicPlayerGameInfo"),_=t("../GameClient/GameCmd/RoomDataUpdateCmd"),P=function(){function t(){this.selfServerSeatIdx=-1,this.count=0}return t.prototype.Create=function(){this.CreateMsgProcesser(),this.CreateGameCmdProcesser(),this.rootCmd=S.CmdMgr.Instance().CreateRootCmd(),this.sceneSwitch=new f.SceneSwitch,this.sceneSwitch.sceneHookNode=this.gameLayer,this.gameClient=new d.GameClient,this.gameClient.LoginAccountCB=this.LoginAccount.bind(this),this.gameClient.RegAccountCB=this.RegAccount.bind(this),this.gameClient.ExitRoomCB=this.ExitRoom.bind(this),this.gameClient.SelectCardsCompletedCB=this.SelectCardsCompleted.bind(this),this.gameClient.ReadyGameCB=this.ReadyGame.bind(this),this.gameServer=new n.GameServer,this.gameServer.SetMsgProcesser(this.msgProcesser),this.gameServer.RegSucessed=this.RegSucessed.bind(this),this.gameServer.LoginSucessed=this.LoginSucessed.bind(this),this.gameServer.ExitSucessed=this.ExitSucessed.bind(this),this.gameServer.ErrorMsg=this.GameErrorMsg.bind(this)},t.prototype.CreateMsgProcesser=function(){this.msgProcesser=new o.CommonMsgProcesser,this.msgProcesser.RegMsg(a.GameMsg.MSG_GET_PLAYER_INFO,this.GetPlayerAccountInfo.bind(this)),this.msgProcesser.RegMsg(a.GameMsg.MSG_GOLD_ENTER_LEAVE_PIAZZA,this.EnterOrLeaveGoldRoom.bind(this)),this.msgProcesser.RegMsg(a.GameMsg.MSG_GOLD_MATCHING_ACTION,this.GoldRoomMatchingAction.bind(this)),this.msgProcesser.RegMsg(a.GameMsg.MSG_GOLD_NOTIFY_MATCHING_RESULT,this.GoldRoomMatchingResult.bind(this)),this.msgProcesser.RegMsg(a.GameMsg.MSG_PLAY_GAME,this.PlayGameInfo.bind(this))},t.prototype.CreateGameCmdProcesser=function(){this.gameCmdProcesser=new m.TaskMgr,this.gameCmdProcesser.Start(),this.gameCmdProcesser.RegMsg(a.GameCMD.enmGameCMD_table_info,this.RoomInfo,this),this.gameCmdProcesser.RegMsg(a.GameCMD.enmGameCMD_table_game_info,this.RoomPlayingInfo,this),this.gameCmdProcesser.RegMsg(a.GameCMD.enmGameCMD_table_sit_down,this.PlayerSitDown,this),this.gameCmdProcesser.RegMsg(a.GameCMD.enmGameCMD_table_set_ready,this.GameReady,this),this.gameCmdProcesser.RegMsg(a.GameCMD.enmGameCMD_table_player_info_notify,this.PlayerInfoNotify,this),this.gameCmdProcesser.RegMsg(a.GameCMD.enmGameCMD_table_public_player_game_info,this.PublicPlayerPlayingInfo,this),this.gameCmdProcesser.RegMsg(a.GameCMD.enmGameCMD_table_game_start,this.GameStart,this),this.gameCmdProcesser.RegMsg(a.GameCMD.enmGameCMD_table_game_round_balance,this.GameRoundBalance,this),this.gameCmdProcesser.RegMsg(a.GameCMD.enmGameCMD_table_game_final_balance,this.GameFinalBalance,this),this.gameCmdProcesser.RegMsg(a.GameCMD.enmGameCMD_table_force_leave,this.RoomForceLeave,this)},t.prototype.Run=function(){this.sceneSwitch.Switch("Login")},t.prototype.RegAccount=function(t){null!=t&&0!=t.length&&this.gameServer.Reg(t,"TestServer")},t.prototype.RegSucessed=function(t){u.MsgBox.Show("\u8d26\u53f7\u6ce8\u518c\u6210\u529f\uff01",null,u.MsgBoxBtnType.ButtonOK)},t.prototype.LoginAccount=function(t){null!=t&&0!=t.length&&(this.msgBoxNode=u.MsgBox.Show("\u767b\u5f55\u4e2d..."),this.gameServer.Login(t,"TestServer"))},t.prototype.LoginSucessed=function(t){this.room=null,this.roomInfo=null,this.roomPlayingInfo=null,this.ReqPlayerAccountInfo()},t.prototype.ExitRoom=function(){u.MsgBox.Show("\u662f\u5426\u9000\u51fa\u6e38\u620f?",this.IsExitRoom.bind(this),u.MsgBoxBtnType.ButtonOK|u.MsgBoxBtnType.ButtonCancel)},t.prototype.IsExitRoom=function(){this.RequestPlayGameMsg(this.roomInfo.tableInfo.tableNumber,a.GameCMD.enmGameCMD_table_force_leave,null)},t.prototype.SelectCardsCompleted=function(){u.MsgBox.Show("\u7b49\u5f85\u81ea\u52a8\u63d0\u4ea4\u724c\u578b",null,u.MsgBoxBtnType.ButtonOK)},t.prototype.ReadyGame=function(){this.RequestSetReady(this.roomInfo.tableInfo.tableNumber,1)},t.prototype.ReqPlayerAccountInfo=function(){var t=new h.RequestPlayerAccountInfo;t.uin=this.gameServer.serverInfos.loginData.uin,this.gameServer.SendMsg(a.GameMsg.MSG_GET_PLAYER_INFO,t)},t.prototype.GetPlayerAccountInfo=function(t,e,i,n){this.playerAccountInfo=new h.PlayerAccountInfo,this.playerAccountInfo.decode(i),u.MsgBox.Hide(this.msgBoxNode);var o=this.ComputePlayerGoldMatchRoomRate();if(0==o)return this.msgBoxNode=u.MsgBox.Show("\u91d1\u5e01\u4e0d\u8db3\uff0c\u65e0\u6cd5\u8fdb\u5165\u6e38\u620f!",null,u.MsgBoxBtnType.ButtonOK),void this.gameServer.Exit();this.msgBoxNode=u.MsgBox.Show("\u91d1\u5e01\u573a\u5339\u914d\u73a9\u5bb6\u4e2d..."),this.RequestEnterOrLeaveGoldRoom(1,o)},t.prototype.ComputePlayerGoldMatchRoomRate=function(){var t=this.playerAccountInfo.equipInfo.coin;return 0==t?0:t>0&&t<=1e3?50:t>1e3&&t<4e3?200:1e3},t.prototype.RequestEnterOrLeaveGoldRoom=function(t,e){var i=new l.RequestEnterOrLeaveGoldRoom;i.m_iUin=this.playerAccountInfo.uin,i.m_cEnterOrLeave=t,i.m_cPiazzaType=1,i.m_iRate=e,this.gameServer.SendMsg(a.GameMsg.MSG_GOLD_ENTER_LEAVE_PIAZZA,i)},t.prototype.EnterOrLeaveGoldRoom=function(t,e,i,n){var o=new c.RequestMatchingAction;o.m_iUin=this.playerAccountInfo.uin,o.m_cStartOrStop=1,this.gameServer.SendMsg(a.GameMsg.MSG_GOLD_MATCHING_ACTION,o)},t.prototype.GoldRoomMatchingAction=function(t,e,i,n){var o=new c.ResponseMatchingAction;o.decode(i),o.m_iResultID},t.prototype.GoldRoomMatchingResult=function(t,e,i,n){var o=new c.ResponseNotifyMatching;o.decode(i),0==o.m_iResultID&&(u.MsgBox.Hide(this.msgBoxNode),this.room=this.sceneSwitch.Switch("Room"))},t.prototype.PlayGameInfo=function(t,e,i,n){var o=new s.ResponsePlayGame;o.decode(i),0==o.m_iResultID&&this.gameCmdProcesser.SendMsg(o.m_iGameCMD,o.m_stGameData)},t.prototype.RoomInfo=function(t){cc.log("----------------------------------------------------------------------"),cc.log("enmGameCMD_table_info"),this.roomInfo=new g.RoomInfo,this.roomInfo.decode(t),this.SendRoomInfoCmd(),this.SendClientCmds();for(var e=0;e<this.roomInfo.playerCount;e++){var i=this.roomInfo.playerInfos[e],n=T.GetStatusNameStr(i.playerStatus);cc.log(i.playerAtTableRoleInfo.roleName+"(\u5ea7\u4f4d\u53f7:"+i.seatID+"):"+n)}},t.prototype.RoomPlayingInfo=function(t){var e;cc.log("----------------------------------------------------------------------"),cc.log("enmGameCMD_table_game_info"),this.roomPlayingInfo=new g.RoomPlayingGameInfo,this.roomPlayingInfo.decode(t),this.SendClientCmds();for(var i=0;i<this.roomPlayingInfo.gamePlayerInfos.length;i++){e=this.roomPlayingInfo.gamePlayerInfos[i];for(var n=this.roomPlayingInfo.gamePlayerInfos[i].submitCardInfo.orgCards,o=new Array(n.length),a=0;a<n.length;a++)o[a]=v.CardsTransform.Instance().GetCardFace(n[a].point,n[a].suit);cc.log("(\u73a9\u5bb6\u5ea7\u4f4d\u53f7:"+e.seatID+") \u63d0\u4ea4\u724c\u578b:"+o),n=e.playerCardInfo.cards,o=new Array(n.length);for(a=0;a<n.length;a++)o[a]=v.CardsTransform.Instance().GetCardFace(n[a].point,n[a].suit);cc.log("(\u73a9\u5bb6\u5ea7\u4f4d\u53f7:"+e.seatID+") \u624b\u724c:"+o)}},t.prototype.PlayerInfoNotify=function(t){cc.log("enmGameCMD_table_player_info_notify");var e=new h.PlayerAtTableInfo;e.decode(t);var i=this.GetPlayerPlayingInfo(e.playerAtTableRoleInfo.uin);this.SendClientCmd(e,i);var n=T.GetStatusNameStr(e.playerStatus);cc.log(e.playerAtTableRoleInfo.roleName+"(\u5ea7\u4f4d\u53f7:"+e.seatID+"):"+n)},t.prototype.PublicPlayerPlayingInfo=function(t){cc.log("enmGameCMD_table_public_player_game_info");var e=new b.PublicPlayerGameInfo;if(e.decode(t),e.m_bSubmit>0){var i=this.GetPlayerAtTableInfo(e.m_iUin);if(null!=i){i.playerStatus|=C.PlayerGameStatus.SubmitedCard;var n=this.GetPlayerPlayingInfo(e.m_iUin);this.SendClientCmd(i,n)}}},t.prototype.PlayerSitDown=function(t){cc.log("enmGameCMD_table_sit_down")},t.prototype.GameReady=function(t){cc.log("enmGameCMD_table_set_ready")},t.prototype.GameStart=function(t){cc.log("enmGameCMD_table_game_start")},t.prototype.GameRoundBalance=function(t){cc.log("enmGameCMD_table_game_round_balance"),this.RoomPlayingInfo(t)},t.prototype.GameFinalBalance=function(t){this.RoomPlayingInfo(t)},t.prototype.RoomForceLeave=function(t){this.gameServer.Exit(),this.room=null,this.roomInfo=null,this.rootCmd.Stop(),this.sceneSwitch.Switch("Login")},t.prototype.ReqGamePlayingInfo=function(){null!=this.roomInfo&&this.RequestPlayGameMsg(this.roomInfo.tableInfo.tableNumber,a.GameCMD.enmGameCMD_table_game_info)},t.prototype.RequestPlayGameMsg=function(t,e,i){var n=new s.RequestPlayGame;n.m_iTableID=t,n.m_iGameCMD=e,n.m_stGameData=i,n.m_iDataLength=null!=i?i.offset:0,this.gameServer.SendMsg(a.GameMsg.MSG_PLAY_GAME,n)},t.prototype.RequestSetReady=function(t,e){var i=new r;i.writeByte(e),this.RequestPlayGameMsg(t,a.GameCMD.enmGameCMD_table_set_ready,i)},t.prototype.GameErrorMsg=function(t){switch(u.MsgBox.Hide(this.msgBoxNode),t){case p.GameError.LoginTimeOut:u.MsgBox.Show("\u767b\u5f55\u8d85\u65f6\uff01",null,u.MsgBoxBtnType.ButtonOK);break;case p.GameError.GameLoginFaild:u.MsgBox.Show("\u767b\u5f55\u5931\u8d25\uff01",null,u.MsgBoxBtnType.ButtonOK);break;case p.GameError.NeedRegAccout:u.MsgBox.Show("\u6b64\u8d26\u53f7\u8fd8\u672a\u6ce8\u518c\u3002",null,u.MsgBoxBtnType.ButtonOK);break;case p.GameError.RegAccoutFaild:u.MsgBox.Show("\u8d26\u53f7\u6ce8\u518c\u5931\u8d25\uff01",null,u.MsgBoxBtnType.ButtonOK);break;case p.GameError.AlreadyRegedAccout:u.MsgBox.Show("\u6b64\u8d26\u53f7\u5df2\u88ab\u6ce8\u518c\uff01",null,u.MsgBoxBtnType.ButtonOK)}},t.prototype.ExitSucessed=function(t){},t.prototype.SendRoomInfoCmd=function(){if(null!=this.roomInfo){var t=new _.RoomDataUpdateCmd;t.delayExeType=y.CmdDelayExecuteType.ParentCmdExeStartDelay,t.room=this.room,t.round=this.roomInfo.round,this.rootCmd.AddChildCmd(t)}},t.prototype.SendClientCmds=function(){var t,e;if(null!=this.roomInfo&&null!=this.roomInfo.playerInfos)for(var i=0;i<this.roomInfo.playerInfos.length;i++)t=this.roomInfo.playerInfos[i],e=this.GetPlayerPlayingInfo(t.playerAtTableRoleInfo.uin),this.SendClientCmd(t,e)},t.prototype.SendClientCmd=function(t,e){if(null!=this.playerAccountInfo&&null!=t&&null!=t.playerAtTableRoleInfo){var i=new A.PlayerDataUpdateCmd;i.room=this.room,this.playerAccountInfo.uin!=t.playerAtTableRoleInfo.uin?i.delayExeType=y.CmdDelayExecuteType.ParentCmdExeStartDelay:i.delayExeType=y.CmdDelayExecuteType.NotDelay;var n=i.updatePlayerData;this.rootCmd.AddChildCmd(i),n.uin=t.playerAtTableRoleInfo.uin,n.roleName=t.playerAtTableRoleInfo.roleName,n.seatIdx=this.ConvertServerSeatIdxToClient(t.seatID),n.AddGameStatus(t.playerStatus),null!=e&&0!=e.playerCardInfo.cards.length?n.handCardFaces=v.CardsTransform.Instance().ConvertToCardFaces(e.playerCardInfo.cards):0==n.seatIdx?(n.handCardFaces=null,n.SetGameStatus(0),n.AlppyChangedGameStatus()):n.handCardFaces=[w.CardFace.Club_A,w.CardFace.Club_2,w.CardFace.Club_3,w.CardFace.Club_4,w.CardFace.Club_5,w.CardFace.Club_6,w.CardFace.Club_7,w.CardFace.Club_8,w.CardFace.Club_9,w.CardFace.Club_10,w.CardFace.Club_J,w.CardFace.Club_Q,w.CardFace.Club_K];var o=null;if(null!=e&&(o=e.submitCardInfo),null!=e&&e.isHavSubmit>0&&0!=o.computedCards.length){for(var a=new Array,r=new Array,s=new Array,c=new Array,l=0,h=0;h<5;h++)r[h]=v.CardsTransform.Instance().ConvertToCardFace(o.computedCards[l++]);for(h=0;h<5;h++)s[h]=v.CardsTransform.Instance().ConvertToCardFace(o.computedCards[l++]);for(h=0;h<3;h++)c[h]=v.CardsTransform.Instance().ConvertToCardFace(o.computedCards[l++]);a.push(c),a.push(s),a.push(r),n.slotsCardFaces=a}else{var u=n.handCardFaces;null!=u&&(n.slotsCardFaces=[[u[0],u[1],u[2]],[u[3],u[4],u[5],u[6],u[7]],[u[8],u[9],u[10],u[11],u[12]]])}n.slotsCardsTypes=[w.CardsType.DuiZi,w.CardsType.TongHuaShun,w.CardsType.WuTong],null!=o&&o.submitType>0&&(n.specCardsType=w.CardsType.YiTiaoLong);var d=null;null!=e?(d=e.submitCardResult,n.slotsScores=this.GetPlayerSlotScores(e.seatID)):n.slotsScores=["0","0","0"],null!=d&&null!=d.roundScore&&(n.totalScore=this.ConvertScoreNumToStr(d.roundScore));var p=null;if(null!=e){var f=e.submitCardResult.vSeatRoundBalance;for(h=0;h<f.length;h++)if(f[h].killAllJudge>0){null==p&&(p=new Array);var S=this.ConvertServerSeatIdxToClient(f[h].seatID);p.push(S)}}n.killOtherPlayerSeatIdxs=p}},t.prototype.GetPlayerSlotScores=function(t){for(var e=this.GetPlayerPlayingInfo(this.playerAccountInfo.uin).submitCardResult.vSeatRoundBalance,i=0;i<e.length;i++)if(e[i].seatID==t){for(var n=new Array,o=0;o<e[i].balanceScores.length;o++)n.push(this.ConvertScoreNumToStr(e[i].balanceScores[o]));return n}return["0","0","0"]},t.prototype.GetPlayerAtTableInfo=function(t){if(null==this.roomInfo||null==this.roomInfo.playerInfos)return null;for(var e=0;e<this.roomInfo.playerInfos.length;e++)if(this.roomInfo.playerInfos[e].playerAtTableRoleInfo.uin==t)return this.roomInfo.playerInfos[e];return null},t.prototype.GetPlayerPlayingInfo=function(t){if(null==this.roomPlayingInfo||null==this.roomPlayingInfo.gamePlayerInfos)return null;for(var e=0;e<this.roomPlayingInfo.gamePlayerInfos.length;e++)if(this.roomPlayingInfo.gamePlayerInfos[e].uin==t)return this.roomPlayingInfo.gamePlayerInfos[e];return null},t.prototype.GetSelfServerSeatIdx=function(){for(var t=0;t<this.roomInfo.playerInfos.length;t++)if(this.roomInfo.playerInfos[t].playerAtTableRoleInfo.uin==this.playerAccountInfo.uin)return this.selfServerSeatIdx=t,this.selfServerSeatIdx;return this.selfServerSeatIdx},t.prototype.ConvertServerSeatIdxToClient=function(t){var e=this.roomInfo.playerCount-1,i=this.GetSelfServerSeatIdx();return t<i?e-(i-t)+1:t>i?t-i:0},t.prototype.ConvertScoreNumToStr=function(t){return t>0?"+"+t.toString():t.toString()},t}();i.ClientServerLinker=P,cc._RF.pop()},{"../../GameLibs/ByteBuffer/bytebuffer":"bytebuffer","../../GameLibs/ScCmd/Cmd":"Cmd","../../GameLibs/ScCmd/CmdMgr":"CmdMgr","../../GameLibs/ScTask/TaskMgr":"TaskMgr","../GameClient/CardsProcesser/CardsAlgorithm/CardAlgoTypes":"CardAlgoTypes","../GameClient/CardsProcesser/CardsAlgorithm/CardsTransform":"CardsTransform","../GameClient/GameClient":"GameClient","../GameClient/GameCmd/PlayerDataUpdateCmd":"PlayerDataUpdateCmd","../GameClient/GameCmd/RoomDataUpdateCmd":"RoomDataUpdateCmd","../GameClient/Scene/SceneSwitch":"SceneSwitch","../GameClient/Viewers/MsgBox":"MsgBox","../GameServer/CommonMsgProcesser":"CommonMsgProcesser","../GameServer/GameError":"GameError","../GameServer/GameMsg":"GameMsg","../GameServer/GameServer":"GameServer","../GameServer/ServerInfoDeEncode/EnterOrLeaveGoldRoom":"EnterOrLeaveGoldRoom","../GameServer/ServerInfoDeEncode/MatchingActionInfo":"MatchingActionInfo","../GameServer/ServerInfoDeEncode/PlayGameInfo":"PlayGameInfo","../GameServer/ServerInfoDeEncode/PlayerInfo":"PlayerInfo","../GameServer/ServerInfoDeEncode/PublicPlayerGameInfo":"PublicPlayerGameInfo","../GameServer/ServerInfoDeEncode/RoomInfo":"RoomInfo","../GameTypes":"GameTypes","../GameUtils":"GameUtils"}],CmdMgr:[function(t,e,i){"use strict";cc._RF.push(e,"ae1e5GIPGRIjp7BB4xW+dFx","CmdMgr");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Cmd"),a=t("../ScTypes/ScObject"),r=t("../ScAction/ScActionMgr"),s=t("../ScAction/ScAction"),c=t("../ScUtils/ScUtils"),l=t("../ScTask/GameTaskMgr"),h=function(t){function e(){var e=t.call(this)||this;return e.rootCmdList=new Array,e.delayCmdsList=new Array,e.updater=r.ScActionMgr.Instance().CreateAction(s.ScAction),e.updater.Reg(0,e.Update.bind(e)),e}return n(e,t),e.Instance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.Destory=function(){r.ScActionMgr.Instance().RemoveAction(this.updater),this.rootCmdList.length=0},e.prototype.CreateRootCmd=function(){var t=new o.Cmd;return t.rootCmd=t,this.rootCmdList.push(t),t},e.prototype.RemoveRootCmd=function(t){for(var e=0;e<this.rootCmdList.length;e++)if(this.rootCmdList[e]==t){t.Stop(),this.rootCmdList.splice(e,1);break}},e.prototype.StopRootCmdDelayCmds=function(t){for(var e=0;e<this.delayCmdsList.length;e++)this.delayCmdsList[e].rootCmd==t&&this.delayCmdsList[e].Stop()},e.prototype.CmdExecuteEnded=function(t){if(t.delayExeType!=o.CmdDelayExecuteType.NotDelay)for(var e=0;e<this.delayCmdsList.length;e++)if(this.delayCmdsList[e]==t){this.delayCmdsList.splice(e,1);break}},e.prototype.AddDelayExecuteCmd=function(t,e){this.delayCmdsList.push(t),l.GameTaskMgr.Instance().PostTask(this.DelayExecuteTaskProcesser,t,null,1e3*e)},e.prototype.DelayExecuteTaskProcesser=function(t){var e=c.Time();t.Execute(e)},e.prototype.Update=function(){for(var t=0;t<this.rootCmdList.length;t++)this.rootCmdList[t].needExecute&&(this.rootCmdList[t].needExecute=!1,this.rootCmdList[t].Execute(c.Time()))},e}(a.ScObject);i.CmdMgr=h,cc._RF.pop()},{"../ScAction/ScAction":"ScAction","../ScAction/ScActionMgr":"ScActionMgr","../ScTask/GameTaskMgr":"GameTaskMgr","../ScTypes/ScObject":"ScObject","../ScUtils/ScUtils":"ScUtils","./Cmd":"Cmd"}],Cmd:[function(t,e,i){"use strict";cc._RF.push(e,"9805fwxDT9HF6kPxCB0LxE6","Cmd");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o,a,r=t("../Collections/LinkedListEx"),s=t("./CmdMgr"),c=t("../ScTypes/ScObject"),l=t("../ScUtils/ScUtils");(function(t){t[t.NotDelay=0]="NotDelay",t[t.ParentCmdExeStartDelay=1]="ParentCmdExeStartDelay",t[t.ParentCmdExeEndDelay=2]="ParentCmdExeEndDelay"})(o=i.CmdDelayExecuteType||(i.CmdDelayExecuteType={})),function(t){t[t.Executing=0]="Executing",t[t.ExecutedEnd=1]="ExecutedEnd"}(a=i.CmdExecuteState||(i.CmdExecuteState={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delayExeType=o.NotDelay,e.delayExecuteTime=0,e.childCmd=new r.LinkedListEx,e.delayExeCmds=new Array,e.needExecute=!1,e.exeState=a.ExecutedEnd,e.isStop=!1,e}return n(e,t),e.prototype.AddChildCmd=function(t){if(!t.isStop){null!=this.rootCmd&&0==this.rootCmd.childCmd.Count()&&(this.rootCmd.needExecute=!0);var e=this.childCmd.AddLast(t);return t.node=e,t.parentCmd=this,null!=this.rootCmd&&(this.SetChildRootCmd(),this.exeState==a.ExecutedEnd&&this.DirectExecuteDelayChildCmd()),t}},e.prototype.SetChildRootCmd=function(){for(var t=this.childCmd.First();null!=t;t=t.Next)t.Value.rootCmd=this.rootCmd,t.Value.SetChildRootCmd()},e.prototype.Stop=function(){this.isStop=!0,this.StopChild(),this.rootCmd==this&&(s.CmdMgr.Instance().StopRootCmdDelayCmds(this),this.rootCmd.childCmd.Clear(),this.isStop=!1)},e.prototype.StopChild=function(){for(var t=this.childCmd.First();null!=t;t=t.Next)t.Value.isStop=!0,t.Value.Stop()},e.prototype.Execute=function(t){if(this.isStop)this.exeState=a.ExecutedEnd;else{this.exeState=a.Executing,this.ProcessDelayExecuteChildCmd();var e=!0;null!=this.ExecuteCB&&(e=this.ExecuteCB(this)),null!=e&&1!=e||this.ExecuteEnd(t)}},e.prototype.ExecuteEnd=function(t){if(this.exeState!=a.ExecutedEnd){this.exeState=a.ExecutedEnd,null!=this.CmdExecuteEndProcess&&this.CmdExecuteEndProcess(this),s.CmdMgr.Instance().CmdExecuteEnded(this),null==t&&(t=l.Time());for(var e=0;e<this.delayExeCmds.length;e++)this.delayExeCmds[e].Execute(t);this.delayExeCmds.length=0;var i=this.childCmd.First();if(null==i){if(null!=this.parentCmd){this.parentCmd.childCmd.RemoveFirst();var n=this.parentCmd.childCmd.First();if(null==n){if(null!=this.parentCmd.parentCmd){var o=this.parentCmd.parentCmd;o.childCmd.RemoveFirst();var r=o.childCmd.First();null==r||r.Value.Execute(t)}}else n.Value.Execute(t)}}else i.Value.Execute(t)}},e.prototype.DirectExecuteDelayChildCmd=function(){for(var t,e,i=this.childCmd.First();null!=i;)(t=i.Value).delayExeType==o.ParentCmdExeStartDelay?(e=i.Next,s.CmdMgr.Instance().AddDelayExecuteCmd(t,0),this.childCmd.RemoveNode(i),i=e,t.parentCmd=null):t.delayExeType==o.ParentCmdExeEndDelay?(e=i.Next,s.CmdMgr.Instance().AddDelayExecuteCmd(t,t.delayExecuteTime),this.childCmd.RemoveNode(i),i=e,t.parentCmd=null):i=i.Next},e.prototype.ProcessDelayExecuteChildCmd=function(){for(var t,e,i=this.childCmd.First();null!=i;)(t=i.Value).delayExeType==o.ParentCmdExeStartDelay?(t.parentCmd=null,e=i.Next,s.CmdMgr.Instance().AddDelayExecuteCmd(t,t.delayExecuteTime),this.childCmd.RemoveNode(i),i=e):t.delayExeType==o.ParentCmdExeEndDelay?(t.parentCmd=null,s.CmdMgr.Instance().AddDelayExecuteCmd(t,t.delayExecuteTime),e=i.Next,this.delayExeCmds.push(t),this.childCmd.RemoveNode(i),i=e):i=i.Next},e}(c.ScObject);i.Cmd=h,cc._RF.pop()},{"../Collections/LinkedListEx":"LinkedListEx","../ScTypes/ScObject":"ScObject","../ScUtils/ScUtils":"ScUtils","./CmdMgr":"CmdMgr"}],CmpCardsStageAction:[function(t,e,i){"use strict";cc._RF.push(e,"de6a5p7cNhJLLAP5hdCTDFB","CmpCardsStageAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../GameLibs/ScStateMachine/ScStateMachineTypes"),r=t("../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes"),s=t("../../../../../GameLibs/ScTweener/ScTweenerRun"),c=t("../../../../../GameLibs/ScTweener/ScTweenerUtils"),l=t("../../../../../GameLibs/ScMath/ScMath"),h=t("../../../../../GameLibs/ScTweener/ScTweenerTypes"),u=t("../../../ResMgr/CardsTypeSpriteAsset"),d=t("../../../../../GameLibs/ScTask/GameTaskMgr"),p=t("../../../ResMgr/Pool/PrefabPool"),f=t("../../../../GameTypes"),S=t("../../../../../GameCompents/MouseEvents"),y=function(t){function e(){var e=t.call(this)||this;return e.isFirstEnterStage=!1,e.isDirectEnterStage=!1,e.isImmediateApplyPlayerGameStatus=!0,e.wait=new a.WaitObj,e.cmpSlotIdx=0,e.playerIdx=0,e.UnInstallProcesser=e.UnInstallProcess.bind(e),e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,12),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e.AddStateChildAction(2,e.State2.bind(e)),e.AddStateChildAction(3,e.State3.bind(e)),e.AddStateChildAction(4,e.State4.bind(e)),e.AddStateChildAction(5,e.State5.bind(e)),e.AddStateChildAction(6,e.State6.bind(e)),e.AddStateChildAction(7,e.State7.bind(e)),e.AddStateChildAction(8,e.State8.bind(e)),e.AddStateChildAction(9,e.State9.bind(e)),e.AddStateChildAction(10,e.State10.bind(e)),e.AddStateChildAction(11,e.State11.bind(e)),e.AddStateChildAction(12,e.State12.bind(e)),e}return n(e,t),e.prototype.UnInstallProcess=function(){d.GameTaskMgr.Instance().UnRegMsgFunc("GunFire",this.GunFire,this)},e.prototype._BundleData=function(){return[this.isFirstEnterStage,this.isDirectEnterStage,this.isImmediateApplyPlayerGameStatus,this.timeScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.isFirstEnterStage=t[0],this.isDirectEnterStage=t[1],this.isImmediateApplyPlayerGameStatus=t[2],this.timeScale=t[3])},e.prototype.State0=function(){var t;this.cmpSlotIdx=0,this.playerIdx=0;for(var e=0;e<this.data.players.length;e++)(t=this.data.CreatePlayerSeatViewer(e)).ResetCardFaces(this.data.players[e].slotsCardFaces),t.HidePlayerGameState();t=this.data.CreatePlayerSeatViewer(0),this.isDirectEnterStage?t.isOffFaPaiAnim=!0:t.isOffFaPaiAnim=!1,t.actionTimeScale=this.timeScale,t.GaiCards(),this.GotoState(1)},e.prototype.State1=function(){0!=this.data.CreatePlayerSeatViewer(0).IsFilpCardsEnded()&&this.GotoState(2)},e.prototype.State2=function(){for(var t=0;t<this.data.playerSeatViewers.length;t++)null!=this.data.players[t].specCardsType&&this.data.players[t].specCardsType!=r.CardsType.None||(this.data.playerSeatViewers[t].slotIdx=this.cmpSlotIdx,this.data.playerSeatViewers[t].slotCardsType=this.data.players[t].slotsCardsTypes[this.cmpSlotIdx],this.data.playerSeatViewers[t].actionTimeScale=this.timeScale,this.isDirectEnterStage?this.data.playerSeatViewers[t].isOffFaPaiAnim=!0:this.data.playerSeatViewers[t].isOffFaPaiAnim=!1,this.data.playerSeatViewers[t].FilpSlotCards());this.GotoState(3,1)},e.prototype.State3=function(){for(var t=0;t<this.data.playerSeatViewers.length;t++)if(!this.data.playerSeatViewers[t].IsFilpSlotCardsEnded())return;var e=!1;for(t=1;t<this.data.playerSeatViewers.length;t++)null!=this.data.players[t].specCardsType&&this.data.players[t].specCardsType!=r.CardsType.None||(this.data.playerSeatViewers[t].slotIdx=this.cmpSlotIdx,this.data.playerSeatViewers[t].slotScoreStr=this.data.players[t].slotsScores[this.cmpSlotIdx],this.data.playerSeatViewers[t].actionTimeScale=this.timeScale,this.data.playerSeatViewers[t].ShowSlotScore(),e=!0);if(0==e)return this.cmpSlotIdx=0,this.playerIdx=0,void this.GotoState(4,0);this.cmpSlotIdx++,3==this.cmpSlotIdx?(this.cmpSlotIdx=0,this.playerIdx=0,this.GotoState(4,1)):this.GotoState(2,1)},e.prototype.State4=function(){for(var t=new Array;this.playerIdx<this.data.players.length&&null==this.data.players[this.playerIdx].killOtherPlayerSeatIdxs;)this.playerIdx++;if(this.playerIdx>=this.data.players.length)return this.playerIdx=0,void this.GotoState(6);for(var e=0;e<this.data.players[this.playerIdx].killOtherPlayerSeatIdxs.length;e++){var i=this.data.players[this.playerIdx].killOtherPlayerSeatIdxs[e];t.push(this.data.playerSeatViewers[i])}d.GameTaskMgr.Instance().RegMsg("GunFire",this.GunFire,this),this.data.playerSeatViewers[this.playerIdx].actionTimeScale=this.timeScale,this.data.playerSeatViewers[this.playerIdx].Fire(t),this.GotoState(5)},e.prototype.GunFire=function(t){t.actionTimeScale=this.timeScale,t.isBeFrieShowKong=!0,t.cardOffsetScale=1,t.BeFire()},e.prototype.State5=function(){this.data.playerSeatViewers[this.playerIdx].IsFireEnded()&&(this.playerIdx++,this.playerIdx>=this.data.players.length?(this.playerIdx=0,this.GotoState(6)):this.GotoState(4))},e.prototype.State6=function(){for(var t=this.playerIdx;t<this.data.playerSeatViewers.length;t++)if(null!=this.data.players[t].specCardsType&&this.data.players[t].specCardsType!=r.CardsType.None)return this.playerIdx=t,this.data.playerSeatViewers[t].commonCardsTypes=null,this.data.playerSeatViewers[t].specCardsType=null,this.data.playerSeatViewers[t].actionTimeScale=this.timeScale,this.isDirectEnterStage?this.data.playerSeatViewers[t].isOffFaPaiAnim=!0:this.data.playerSeatViewers[t].isOffFaPaiAnim=!1,this.data.playerSeatViewers[t].WholeFanCards(),void this.GotoState(7,1);this.GotoState(11)},e.prototype.State7=function(){if(this.data.playerSeatViewers[this.playerIdx].IsWholeFanCardsEnded()){var t=this.data.playerSeatViewers[this.playerIdx];this.orgCardsviewerGroupNodePosition=t.cardsViewerGroupNode.position,this.orgCardsviewerGroupNodeParent=t.cardsViewerGroupNode.parent,c.SetNodeParent(t.cardsViewerGroupNode,this.data.roomNode);var e=t.cardsViewerGroupNode.parent.convertToWorldSpaceAR(t.cardsViewerGroupNode.position),i=this.data.roomNode.parent.convertToWorldSpaceAR(this.data.roomNode.position),n=l.GetRouteHandles(e,i,[300,600]);s.ScTweenerRun.DoMove(t.cardsViewerGroupNode,i,2*this.timeScale).SetBezierRoute(n[0],n[1]).SetEast(h.ScEasingType.EaseOutQuint);var o=cc.Vec3.ZERO;t.cardsViewerGroupNode.getScale(o);var a=s.ScTweenerRun.DoLocalScale(t.cardsViewerGroupNode,o.mul(2.3),1.6*this.timeScale,!1).SetEast(h.ScEasingType.EaseOutBack),r=s.ScTweenerRun.DoLocalScale(t.cardsViewerGroupNode,o,.4*this.timeScale,!1);s.ScTweenerRun.DoTweenerSeq([a,r]),this.GotoState(8,2)}},e.prototype.State8=function(){var t=this.data.playerSeatViewers[this.playerIdx];t.actionTimeScale=this.timeScale,t.cardOffsetScale=2,t.DisperseCards(),t.specCardsTypeNode.getComponent(cc.Sprite).spriteFrame=u.CardsTypeSpriteAsset.Instance().GetSpriteFrame(this.data.players[this.playerIdx].specCardsType);var e=c.NodeLocalPositionToParent(t.cardsViewerGroupNode,t.specCardsTypeLayoutNode);s.ScTweenerRun.DoLocalMove(t.specCardsTypeNode,e,0*this.timeScale),c.SetNodeParent(t.specCardsTypeNode,this.data.roomNode),s.ScTweenerRun.DoAlpha(t.specCardsTypeLayoutNode,0,0*this.timeScale),s.ScTweenerRun.DoAlpha(t.specCardsTypeNode,0,0*this.timeScale),s.ScTweenerRun.DoAlpha(t.specCardsTypeNode,1,1*this.timeScale).SetEast(h.ScEasingType.EaseOutQuint);for(var i=0;i<this.data.playerSeatViewers.length;i++)if(i!=this.playerIdx&&(null==this.data.players[i].specCardsType||this.data.players[i].specCardsType==r.CardsType.None))for(var n=0;n<6;n++)this.data.playerSeatViewers[i].isBeFrieShowKong=!1,this.data.playerSeatViewers[i].cardOffsetScale=.9,this.data.playerSeatViewers[i].actionTimeScale=1*this.timeScale,this.data.playerSeatViewers[i].BeFire(1,.1*(n+1)*this.timeScale);this.GotoState(9)},e.prototype.State9=function(){var t=this.data.playerSeatViewers[this.playerIdx];t.IsDisperseCardsEnded()&&(s.ScTweenerRun.DoAlpha(t.cardsViewerGroupNode,0,.5*this.timeScale),s.ScTweenerRun.DoAlpha(t.specCardsTypeLayoutNode,1,0*this.timeScale),s.ScTweenerRun.DoAlpha(t.specCardsTypeNode,0,.5*this.timeScale),this.GotoState(10,.5))},e.prototype.State10=function(){var t=this.data.playerSeatViewers[this.playerIdx];c.SetNodeParent(t.cardsViewerGroupNode,this.orgCardsviewerGroupNodeParent),t.cardsViewerGroupNode.setPosition(this.orgCardsviewerGroupNodePosition),t.cardsViewerGroupNode.setSiblingIndex(1),c.SetNodeParent(t.specCardsTypeNode,t.specCardsTypeLayoutNode),t.specCardsTypeNode.setPosition(cc.Vec3.ZERO),s.ScTweenerRun.DoAlpha(t.cardsViewerGroupNode,1,.5*this.timeScale),s.ScTweenerRun.DoAlpha(t.specCardsTypeNode,1,.5*this.timeScale),this.playerIdx++,this.playerIdx>=this.data.players.length?(this.playerIdx=0,this.GotoState(11,1)):this.GotoState(6,1)},e.prototype.State11=function(){for(var t=0;t<this.data.playerSeatViewers.length;t++)this.data.playerSeatViewers[t].actionTimeScale=this.timeScale,this.data.playerSeatViewers[t].ShowTotalScore(this.data.players[t].totalScore,this.data.roomNode);this.GotoState(12,.5)},e.prototype.State12=function(){(this.CreateReadyBtn(),this.data.players[0].IsChangedGameStatus()||this.data.players[0].IsNewedGameStatus())&&(this.data.btnReady.children[0].children[0].getComponent(cc.Label).string="\u51c6  \u5907");s.ScTweenerRun.DoAlpha(this.data.btnReady,0,0),s.ScTweenerRun.DoAlpha(this.data.btnReady,1,.2),s.ScTweenerRun.DoLocalScale(this.data.btnReady,cc.Vec3.ONE,.1),this.GotoState(this.IdleState())},e.prototype.CreateReadyBtn=function(){if(null==this.data.btnReady){this.data.btnReady=p.PrefabPool.Instance().Pop(f.PrefabIdx.BtnReady),this.data.btnReady.active=!0,this.data.btnReady.getComponent(S.default).MouseClickEvent=this.PressReadyBtn.bind(this);var t=c.GetNodeLocalPosition(this.data.btnReady);c.SetNodeParent(this.data.btnReady,this.data.roomNode),this.data.btnReady.setPosition(t)}},e.prototype.PressReadyBtn=function(){d.GameTaskMgr.Instance().SendMsg("ReadyGame",this.data.players[0])},e}(o.ScDesginAction);i.CmpCardsStageAction=y,cc._RF.pop()},{"../../../../../GameCompents/MouseEvents":"MouseEvents","../../../../../GameLibs/ScMath/ScMath":"ScMath","../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../../../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr","../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes","../../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../../GameTypes":"GameTypes","../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes":"CardAlgoTypes","../../../ResMgr/CardsTypeSpriteAsset":"CardsTypeSpriteAsset","../../../ResMgr/Pool/PrefabPool":"PrefabPool"}],CommonMsgProcesser:[function(t,e,i){"use strict";cc._RF.push(e,"c27beITGilMWIaJZUMWqASt","CommonMsgProcesser");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../GameLibs/ScNet/MsgProcesser"),a=t("../../GameLibs/ScNet/DePacketor"),r=function(){return function(){}}();i.CommonDataHead=r;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.GetMsgTypeValue=function(t){return t.m_iMessageID},e.prototype.CreateDepacktor=function(){var t=new a.DePacketor;return t.SetPackHeadPreLength(20),t.SetGetPackDataLengthCallBack(this.GetPackDataLength.bind(this)),t},e.prototype.ReadHeaderData=function(t){var e=new r;return e.m_iMessageLength=t.readInt(),e.m_iMessageID=t.readShort(),e.m_iCryptMethod=t.readShort(),e.m_iUin=t.readInt(),e.m_iGroupID=t.readInt(),e.m_iSequence=t.readInt(),e},e.prototype.GetPackDataLength=function(t,e,i,n){var o=e.offset;e.offset=i;var a=e.readInt();e.readShort(),e.readShort(),e.readInt(),e.readInt(),e.readInt();var r=e.offset-i,s=a-r;return e.offset=o,[s,r]},e.prototype.ProcessSingleDataFrame=function(t,e,i,n){return!0},e}(o.MsgProcesser);i.CommonMsgProcesser=s,cc._RF.pop()},{"../../GameLibs/ScNet/DePacketor":"DePacketor","../../GameLibs/ScNet/MsgProcesser":"MsgProcesser"}],DePacketor:[function(t,e,i){"use strict";cc._RF.push(e,"74552cGTj5B75qkeM34ZJfn","DePacketor");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../ByteBuffer/bytebuffer"),a=t("./ScNetTypes"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.socket=null,e.curtPack=null,e.joinDataCache=null,e.remainJoinDataOffset=0,e.remainJoinDataSize=0,e.maxBufferSize=2048,e.packHeaderPreLen=4,e.packTailSize=0,e.getPackDataLength=null,e}return n(e,t),e.prototype.UnPack=function(t,e){var i=e.MsgProcesser();null!=i&&i.UnPack(t,e)},e.prototype.SetPack=function(t,e){this.socket=t,this.curtPack=e,this.remainJoinDataSize=t.remainJoinDataSize,this.remainJoinDataOffset=t.remainJoinDataOffset},e.prototype.CreateCachePackBuf=function(){if(this.curtPack==this.joinDataCache){(null==this.socket.joinDataCache||this.curtPack.limit>this.socket.joinDataCache.limit)&&this.curtPack.limit>this.GetMaxBufferSize()?this.socket.joinDataCache=new o(this.curtPack.limit):this.socket.joinDataCache=new o(this.GetMaxBufferSize());var t=this.socket.remainJoinDataOffset+this.socket.remainJoinDataSize;this.joinDataCache=this.socket.joinDataCache,this.curtPack.copyTo(this.joinDataCache,0,this.socket.remainJoinDataOffset,t),this.joinDataCache.offset=this.socket.remainJoinDataSize,this.socket.remainJoinDataOffset=0}},e.prototype.ReleaseCachePackBuf=function(){this.socket.ClearCachePackBuf()},e.prototype.Extract=function(){var t,e=this.socket.unPackCalcLen,i=this.socket.unPackHeadLen;if(this.joinDataCache=this.socket.joinDataCache,null!=this.joinDataCache&&0!=this.socket.remainJoinDataSize){var n=this.socket.remainJoinDataOffset+this.socket.remainJoinDataSize,r=this.joinDataCache.limit-n;if(this.curtPack.offset<=r)this.curtPack.copyTo(this.joinDataCache,n,0,this.curtPack.offset),this.socket.remainJoinDataSize+=this.curtPack.offset;else{var s=void 0,c=this.socket.remainJoinDataSize+this.curtPack.offset;s=c<=this.GetMaxBufferSize()?new o(this.GetMaxBufferSize()):new o(2*c),this.joinDataCache.copyTo(s,0,this.socket.remainJoinDataOffset,n),this.curtPack.copyTo(s,this.socket.remainJoinDataSize,0,this.curtPack.offset),this.socket.remainJoinDataSize=c,this.socket.remainJoinDataOffset=0,this.joinDataCache=this.socket.joinDataCache=s}this.remainJoinDataSize=this.socket.remainJoinDataSize,this.remainJoinDataOffset=this.socket.remainJoinDataOffset}else this.joinDataCache=this.curtPack,this.remainJoinDataSize=this.curtPack.offset,this.remainJoinDataOffset=0;for(;;)switch(this.socket.extractState){case a.ExtractState.ES_PACKET_HEADLEN_NOT_GET:if(!(this.remainJoinDataSize>=i))return this.CreateCachePackBuf(),this.socket.extractState=a.ExtractState.ES_PACKET_HEADLEN_NOT_GET,1;if(e=(t=this.GetPackLength(this.joinDataCache,this.remainJoinDataOffset,this.remainJoinDataSize))[0],this.socket.unPackCalcLen=e,(i=this.socket.unPackHeadLen=t[1])<0)return this.CreateCachePackBuf(),this.socket.extractState=a.ExtractState.ES_PACKET_HEADLEN_NOT_GET,1;if(e<0)return this.CreateCachePackBuf(),this.socket.extractState=a.ExtractState.ES_PACKET_HEAD_NOT_FULL,1;this.socket.extractState=a.ExtractState.ES_PACKET_HEAD_FULL;break;case a.ExtractState.ES_PACKET_HEAD_FULL:if(e==this.remainJoinDataSize){var l=this.joinDataCache.copy(this.remainJoinDataOffset,this.remainJoinDataOffset+this.remainJoinDataSize);return this.socket.SetPack(l),this.UnPack(a.SocketEvent.EV_SOCKET_RECV,this.socket),this.socket.RemovePack(),this.ReleaseCachePackBuf(),this.socket.extractState=a.ExtractState.ES_PACKET_HEADLEN_NOT_GET,0}if(!(e<this.remainJoinDataSize))return this.CreateCachePackBuf(),this.socket.extractState=a.ExtractState.ES_PACKET_HEAD_FULL,1;l=this.joinDataCache.copy(this.remainJoinDataOffset,this.remainJoinDataOffset+e);this.socket.SetPack(l),this.UnPack(a.SocketEvent.EV_SOCKET_RECV,this.socket),this.socket.RemovePack(),this.remainJoinDataOffset+=e,this.remainJoinDataSize-=e,this.socket.remainJoinDataOffset=this.remainJoinDataOffset,this.socket.remainJoinDataSize=this.remainJoinDataSize,this.socket.extractState=a.ExtractState.ES_PACKET_HEADLEN_NOT_GET,this.socket.unPackCalcLen=-1,i=this.socket.unPackHeadLen=this.GetPackHeadPreLength();break;case a.ExtractState.ES_PACKET_HEAD_NOT_FULL:var h=i-this.remainJoinDataSize;if(this.curtPack.offset<h)return this.socket.extractState=a.ExtractState.ES_PACKET_HEAD_NOT_FULL,1;this.socket.extractState=a.ExtractState.ES_PACKET_HEAD_FULL}},e.prototype.SetGetPackDataLengthCallBack=function(t){this.getPackDataLength=t},e.prototype.GetPackHeadPreLength=function(){return this.packHeaderPreLen},e.prototype.GetPackDataLength=function(t,e,i){return null!=this.getPackDataLength?this.getPackDataLength(this,t,e,i):[-1,-1]},e.prototype.GetPackTailLength=function(){return this.packTailSize},e.prototype.GetPackLength=function(t,e,i){var n=this.GetPackDataLength(t,e,i);return-1==n[0]||-1==n[1]?[-1,n[1]]:[n[1]+n[0]+this.GetPackTailLength(),n[1]]},e.prototype.SetPackHeadPreLength=function(t){this.packHeaderPreLen=t},e.prototype.SetPackTailLength=function(t){this.packTailSize=t},e.prototype.GetMaxBufferSize=function(){return this.maxBufferSize},e}(t("../ScTypes/ScObject").ScObject);i.DePacketor=r,cc._RF.pop()},{"../ByteBuffer/bytebuffer":"bytebuffer","../ScTypes/ScObject":"ScObject","./ScNetTypes":"ScNetTypes"}],Dictionary:[function(t,e,i){"use strict";cc._RF.push(e,"c20bdz5hqtHLrsiw99ETbBU","Dictionary"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./util"),o=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||n.defaultToString}return t.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!n.isUndefined(e))return e.value},t.prototype.setValue=function(t,e){if(!n.isUndefined(t)&&!n.isUndefined(e)){var i,o="$"+this.toStr(t),a=this.table[o];return n.isUndefined(a)?(this.nElements++,i=void 0):i=a.value,this.table[o]={key:t,value:e},i}},t.prototype.remove=function(t){var e="$"+this.toStr(t),i=this.table[e];if(!n.isUndefined(i))return delete this.table[e],this.nElements--,i.value},t.prototype.keys=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var i=this.table[e];t.push(i.key)}return t},t.prototype.values=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var i=this.table[e];t.push(i.value)}return t},t.prototype.forEach=function(t){for(var e in this.table)if(n.has(this.table,e)){var i=this.table[e];if(!1===t(i.key,i.value))return}},t.prototype.containsKey=function(t){return!n.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var t="{";return this.forEach(function(e,i){t+="\n\t"+e+" : "+i}),t+"\n}"},t}();i.Dictionary=o,cc._RF.pop()},{"./util":"util"}],DisperseCardsAction:[function(t,e,i){"use strict";cc._RF.push(e,"6a012cTNn5Aq5/GgrcqyzHB","DisperseCardsAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../../GameLibs/ScTweener/ScTweenerRun"),r=t("../../../../../../GameLibs/ScTweener/ScTweenerTypes"),s=function(t){function e(){var e=t.call(this)||this;return e.disperseCount=1,e.cardOffsetScale=1,e.isAutoInstallAndUninstall=!0,e.Init=e._Init.bind(e),e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,2),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e.AddStateChildAction(2,e.State2.bind(e)),e}return n(e,t),e.prototype._Init=function(){},e.prototype._BundleData=function(){return[this.timeScale,this.disperseCount,this.cardOffsetScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.timeScale=t[0],this.disperseCount=t[1],this.cardOffsetScale=t[2])},e.prototype.State0=function(){for(var t=this.data.cardsViewerGroupNode.parent.convertToWorldSpaceAR(this.data.cardsViewerGroupNode.position),e=0;e<this.disperseCount;e++)for(var i=this.data.cardsViewers,n=void 0,o=0;o<i.length;o++){i[o].StopWobble();for(var s=i[o].GetAllCards(),c=0;c<s.length;c++){n=s[c].node.position;var l=s[c].node.parent.convertToWorldSpaceAR(n).sub(t).normalizeSelf(),h=s[c].node.width*s[c].node.scaleX*this.cardOffsetScale,u=t.add(l.mul(h)),d=s[c].node.parent.convertToNodeSpaceAR(u);a.ScTweenerRun.DoLocalMove(s[c].node,d,.5*this.timeScale).SetEast(r.ScEasingType.EaseOutQuint)}}this.data.beFireShakeAction.timeScale=this.timeScale,this.data.beFireShakeAction.Execute(),this.GotoState(1,.5)},e.prototype.State1=function(){for(var t=this.data.cardsViewers,e=0;e<t.length;e++)for(var i=t[e].GetAllCards(),n=0;n<i.length;n++){var o=this.data.orgCardPosDict.getValue(i[n].node.uuid);a.ScTweenerRun.DoLocalMove(i[n].node,o,1*this.timeScale).SetEast(r.ScEasingType.EaseInQuint)}this.GotoState(2,1)},e.prototype.State2=function(){for(var t=this.data.cardsViewers,e=0;e<t.length;e++)t[e].Wobble();this.GotoState(this.IdleState())},e}(o.ScDesginAction);i.DisperseCardsAction=s,cc._RF.pop()},{"../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes"}],EnterOrLeaveGoldRoom:[function(t,e,i){"use strict";cc._RF.push(e,"f7d37nGuf9J9IEieLYV78pZ","EnterOrLeaveGoldRoom");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./InfoBase"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_cEnterOrLeave=0,e.m_cPiazzaType=0,e.m_iRate=0,e}return n(e,t),e.prototype.encode=function(t){t.writeInt(this.m_iUin),t.writeByte(this.m_cEnterOrLeave),t.writeByte(this.m_cPiazzaType),t.writeInt(this.m_iRate)},e}(o.InfoBase);i.RequestEnterOrLeaveGoldRoom=a;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_iNumOfPlayers=0,e.m_cEnterOrLeave=0,e.m_cPiazzaType=0,e.m_iRate=0,e}return n(e,t),e.prototype.decode=function(t){this.m_iResultID=t.readShort(),this.m_iUin=t.readInt(),0==this.m_iResultID&&(this.m_cEnterOrLeave=t.readByte(),this.m_cPiazzaType=t.readByte(),this.m_iRate=t.readInt(),this.m_iNumOfPlayers=t.readInt())},e}(o.InfoBase);i.ResponseEnterOrLeaveGoldRoom=r,cc._RF.pop()},{"./InfoBase":"InfoBase"}],FactoryDictionary:[function(t,e,i){"use strict";cc._RF.push(e,"9bc58WoaMpKMKvJCxl91qAp","FactoryDictionary");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./util"),a=function(t){function e(e,i){var n=t.call(this,i)||this;return n.defaultFactoryFunction=e,n}return n(e,t),e.prototype.setDefault=function(e,i){var n=t.prototype.getValue.call(this,e);return o.isUndefined(n)?(this.setValue(e,i),i):n},e.prototype.getValue=function(t){return this.setDefault(t,this.defaultFactoryFunction())},e}(t("./Dictionary").Dictionary);i.default=a,cc._RF.pop()},{"./Dictionary":"Dictionary","./util":"util"}],FanPaiAction:[function(t,e,i){"use strict";cc._RF.push(e,"e300dATtfdCf4SqHaLApPxN","FanPaiAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../../GameLibs/ScTweener/ScTweenerRun"),r=t("../../../../ResMgr/CardsTypeSpriteAsset"),s=t("../../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes"),c=t("../../../../../../GameLibs/ScStateMachine/ScStateMachineTypes"),l=function(t){function e(){var e=t.call(this)||this;return e.cardsType=s.CardsType.TongHuaShun,e.isOffFapaiAnimation=!1,e.wait=new c.WaitObj,e.isAutoInstallAndUninstall=!0,e.Init=e._Init.bind(e),e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,1),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e}return n(e,t),e.prototype._Init=function(){},e.prototype._BundleData=function(){return[this.timeScale,this.fanPaiSlotIdx,this.cardsType,this.isOffFapaiAnimation]},e.prototype._UnBundleData=function(t){null!=t&&(this.timeScale=t[0],this.fanPaiSlotIdx=t[1],this.cardsType=t[2],this.isOffFapaiAnimation=t[3])},e.prototype.State0=function(){this.wait.Reset(),this.isOffFapaiAnimation?this.data.cardsViewers[this.fanPaiSlotIdx].OffFaPaiAnimation():this.data.cardsViewers[this.fanPaiSlotIdx].OnFaPaiAnimation(),this.data.cardsViewers[this.fanPaiSlotIdx].AddFilpCardsEndEvent(this.UUID(),this.FlipPaiEnd.bind(this)),this.data.cardsViewers[this.fanPaiSlotIdx].HandCardsFilpping(),this.WaitGoToState(this.wait,1)},e.prototype.FlipPaiEnd=function(t){t.RemoveFilpCardsEndEvent(this.UUID()),this.ContinueGoto(this.wait)},e.prototype.State1=function(){null!=this.cardsType?(this.data.cardsTypesNode[this.fanPaiSlotIdx].getComponent(cc.Sprite).spriteFrame=r.CardsTypeSpriteAsset.Instance().GetSpriteFrame(this.cardsType),a.ScTweenerRun.DoLocalScale(this.data.cardsTypesNode[this.fanPaiSlotIdx],new cc.Vec3(2,2,1),0*this.timeScale),a.ScTweenerRun.DoLocalScale(this.data.cardsTypesNode[this.fanPaiSlotIdx],new cc.Vec3(1,1,1),.2*this.timeScale).SetEast(.175,.885,.32,1.775),a.ScTweenerRun.DoAlpha(this.data.cardsTypesNode[this.fanPaiSlotIdx],1,.2*this.timeScale),this.GotoState(this.IdleState(),.2)):this.GotoState(this.IdleState())},e}(o.ScDesginAction);i.FanPaiAction=l,cc._RF.pop()},{"../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes":"CardAlgoTypes","../../../../ResMgr/CardsTypeSpriteAsset":"CardsTypeSpriteAsset"}],FilpPaiAction:[function(t,e,i){"use strict";cc._RF.push(e,"b0182QqQYNG4LX9CA9Q4pYX","FilpPaiAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../GameLibs/ScTweener/ScTweenerRun"),r=function(t){function e(){var e=t.call(this)||this;return e.isFilpEnd=!1,e.filpCount=0,e.SetStateLifeRange(0,1),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e}return n(e,t),e.prototype.State0=function(){for(var t=0,e=0;e<this.data.handCardUICaches.length;e++)-1==this.data.flyingCards.indexOf(this.data.handCardUICaches[e])&&(this.data.filppingCards.push(this.data.handCardUICaches[e]),a.ScTweenerRun.DoRotateBySelfAxisY(this.data.handCardUICaches[e].node,180,this.data.FilpCardTime*this.data.animScale).SetDelay(t*this.data.FilpCardDelay),t++);this.SetState(1,this.data.FilpCardTime+t*this.data.FilpCardDelay/this.data.animScale)},e.prototype.State1=function(){for(var t=0;t<this.data.handCardUICaches.length;t++)this.data.handCardUICaches[t].EnableOp();this.data.IsOpenCardWobble&&this.data.Wobble(),this.data.filppingCards.length=0,this.SetState(this.IdleState(),-1),this.data._FaPaiEnded_Processer_SYS(),this.data._ProcessFilpCardsEndEventCB_SYS(),this.data._ProcessFaPaiEndEventCB_SYS(),this.stateMachine.UnInstall(this)},e.prototype.SetState=function(t,e){this.GotoState(t,e*this.data.animScale)},e}(o.ScDesginAction);i.FilpPaiAction=r,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun"}],FireAction:[function(t,e,i){"use strict";cc._RF.push(e,"7e7b0/qHGFJL6X7LjSadXmD","FireAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../../GameLibs/ScTweener/ScTweenerRun"),r=t("../../../../../../GameLibs/ScTweener/ScTweenerUtils"),s=t("../../../../../../GameLibs/ScTweener/ScTweenerTypes"),c=t("../../../../../../GameLibs/ScTask/GameTaskMgr"),l=function(t){function e(){var e=t.call(this,!0)||this;return e.gunLineWidth=0,e.isRotEnded=!1,e.isAutoInstallAndUninstall=!0,e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.ActionEndedProcesser=e.ActionEnded.bind(e),e.SetStateLifeRange(0,6),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e.AddStateChildAction(2,e.State2.bind(e)),e.AddStateChildAction(3,e.State3.bind(e)),e.AddStateChildAction(4,e.State4.bind(e)),e.AddStateChildAction(5,e.State5.bind(e)),e.AddStateChildAction(6,e.State6.bind(e)),e}return n(e,t),e.prototype.ActionEnded=function(t){r.SetNodeParent(this.data.gunLineNode,this.data.gunKongNode,!0)},e.prototype._BundleData=function(){return[this.dstFirePlayerSeatViewer,this.dstFireWorldPos]},e.prototype._UnBundleData=function(t){null!=t&&(this.dstFirePlayerSeatViewer=t[0],this.dstFireWorldPos=t[1])},e.prototype.State0=function(){this.fireIdx=0,this.data.gunNode.eulerAngles=new cc.Vec3(0,0,0),a.ScTweenerRun.DoAlpha(this.data.gunNode,1,.1*this.timeScale),a.ScTweenerRun.DoAlpha(this.data.gunLineNode,0,0),a.ScTweenerRun.DoLocalScale(this.data.gunNode,new cc.Vec3(1,1,1),.1*this.timeScale),this.GotoState(1,.1)},e.prototype.State1=function(){this.isRotEnded=!1;var t=this.data.gunNode.parent.convertToWorldSpaceAR(this.data.gunNode.position),e=this.dstFireWorldPos[this.fireIdx].sub(t);e.normalizeSelf();var i=r.NodeRightInWorldSpace(this.data.gunNode),n=cc.v2(i).signAngle(cc.v2(e)),o=180/Math.PI*n,s=r.RotateVectorByAxis(this.data.gunKongNode.position,cc.Vec3.FORWARD,o);t=this.data.gunKongNode.parent.convertToWorldSpaceAR(s),e=this.dstFireWorldPos[this.fireIdx].sub(t),this.gunLineWidth=e.len(),a.ScTweenerRun.DoRotateBySelfAxisZ(this.data.gunNode,o,.3*this.timeScale).SetCallBackFunc(this.IsRotEnded.bind(this)),this.GotoState(2,.3)},e.prototype.IsRotEnded=function(){this.isRotEnded=!0},e.prototype.State2=function(){if(0!=this.isRotEnded){r.SetNodeParent(this.data.gunLineNode,this.data.node.parent,!0),this.data.gunLineNode.width=this.gunLineWidth,this.data.gunLineNode.height=1.3;var t=a.ScTweenerRun.DoAlpha(this.data.gunLineNode,.9,.2*this.timeScale,!1),e=a.ScTweenerRun.DoAlpha(this.data.gunLineNode,.4,.2*this.timeScale,!1);a.ScTweenerRun.DoTweenerSeq([t,e],!0),this.GotoState(3,.8)}},e.prototype.State3=function(){r.SetNodeParent(this.data.gunLineNode,this.data.gunKongNode,!0),c.GameTaskMgr.Instance().SendMsg("GunFire",this.dstFirePlayerSeatViewer[this.fireIdx]),a.ScTweenerRun.DoAlpha(this.data.gunLineNode,0,.1*this.timeScale);var t=r.NodeRightInParentSpace(this.data.gunNode).mul(-1).mul(.3*this.data.gunNode.width*this.timeScale),e=this.data.gunNode.position.add(t);this.gunOrgPos=this.data.gunNode.position,a.ScTweenerRun.DoLocalMove(this.data.gunNode,e,.3*this.timeScale).SetEast(s.ScEasingType.EaseInOutBack),this.rotAngle<0?this.rotDir=-1:this.rotDir=1,a.ScTweenerRun.DoRotateBySelfAxisZ(this.data.gunNode,20*-this.rotDir,.3*this.timeScale).SetEast(s.ScEasingType.EaseInOutBack),this.GotoState(4,.3)},e.prototype.State4=function(){a.ScTweenerRun.DoLocalMove(this.data.gunNode,this.gunOrgPos,1).SetEast(s.ScEasingType.EaseInExpo),a.ScTweenerRun.DoRotateBySelfAxisZ(this.data.gunNode,20*this.rotDir,.5*this.timeScale),this.fireIdx++,this.fireIdx>=this.dstFireWorldPos.length?this.GotoState(5,1):this.GotoState(1,1)},e.prototype.State5=function(){a.ScTweenerRun.DoLocalEluerAngles(this.data.gunNode,cc.Vec3.ZERO,!0,.5*this.timeScale).SetEast(s.ScEasingType.EaseInOutBack),this.GotoState(6,.5)},e.prototype.State6=function(){a.ScTweenerRun.DoRotateBySelfAxisZ(this.data.gunNode,500,.3*this.timeScale),a.ScTweenerRun.DoAlpha(this.data.gunNode,0,.3*this.timeScale),a.ScTweenerRun.DoLocalScale(this.data.gunNode,new cc.Vec3(.01,.01,1),.3*this.timeScale),this.GotoState(this.IdleState(),.3)},e}(o.ScDesginAction);i.FireAction=l,cc._RF.pop()},{"../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr","../../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes","../../../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils"}],GaiPaiAction:[function(t,e,i){"use strict";cc._RF.push(e,"d0b86rABU1LEp3ECLSc09Zb","GaiPaiAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../../GameLibs/ScTweener/ScTweenerRun"),r=t("../../../../../../GameLibs/ScStateMachine/ScStateMachineTypes"),s=function(t){function e(){var e=t.call(this)||this;return e.isOffFapaiAnimation=!1,e.completeActionCount=0,e.wait=new r.WaitObj,e.isAutoInstallAndUninstall=!0,e.Init=e._Init.bind(e),e.SetStateLifeRange(0,1),e.AddStateChildAction(0,e.State0.bind(e)),e}return n(e,t),e.prototype._Init=function(){},e.prototype.State0=function(){this.wait.Reset(),this.completeActionCount=0;for(var t=0;t<this.data.cardsViewers.length;t++)this.isOffFapaiAnimation?this.data.cardsViewers[t].OffFaPaiAnimation():this.data.cardsViewers[t].OnFaPaiAnimation(),this.data.cardsViewers[t].AddFilpCardsEndEvent(this.UUID(),this.FlipPaiEnd.bind(this)),this.data.cardsViewers[t].HandCardsFilpping();for(t=0;t<this.data.cardsTypesNode.length;t++)a.ScTweenerRun.DoLocalScale(this.data.cardsTypesNode[t],new cc.Vec3(0,0,1),.2*this.timeScale),a.ScTweenerRun.DoAlpha(this.data.cardsTypesNode[t],0,.2*this.timeScale);for(t=0;t<this.data.slotScoreNode.length;t++)a.ScTweenerRun.DoAlpha(this.data.slotScoreNode[t],0,.2*this.timeScale);a.ScTweenerRun.DoAlpha(this.data.specCardsTypeLayoutNode,0,.2*this.timeScale).SetCallBackFunc(this.DoFuncEnded.bind(this)),this.WaitGoToState(this.wait,this.IdleState())},e.prototype.FlipPaiEnd=function(t){t.RemoveFilpCardsEndEvent(this.UUID()),this.completeActionCount++,4==this.completeActionCount&&this.ContinueGoto(this.wait)},e.prototype.DoFuncEnded=function(){this.completeActionCount++,4==this.completeActionCount&&this.ContinueGoto(this.wait)},e}(o.ScDesginAction);i.GaiPaiAction=s,cc._RF.pop()},{"../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun"}],GameAudios:[function(t,e,i){"use strict";cc._RF.push(e,"af1a4ykemdL+604RyFRFdZ2","GameAudios"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./GameRes"),o=function(){function t(){}return t.Instance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.StopMusic=function(){cc.audioEngine.stopMusic()},t.prototype.StopEffect=function(t){cc.audioEngine.stopEffect(t)},t.prototype.StopAllEffect=function(){cc.audioEngine.stopAllEffects()},t.prototype.PlayEffect=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);var o=n.GameRes.Instance().LoadAudioClip(t);if(null!=o){var a=cc.audioEngine.playEffect(o,i);return cc.audioEngine.setVolume(a,e),a}},t.prototype.PlayMusic=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!0);var o=n.GameRes.Instance().LoadAudioClip(t);if(null!=o){var a=cc.audioEngine.playMusic(o,!0);return cc.audioEngine.setVolume(a,e),a}},t}();i.GameAudios=o,cc._RF.pop()},{"./GameRes":"GameRes"}],GameClient:[function(t,e,i){"use strict";cc._RF.push(e,"72e44ts3TZDUIFohpGf2l6E","GameClient"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../GameLibs/ScTask/GameTaskMgr"),o=function(){function t(){n.GameTaskMgr.Instance().RegMsg("LoginAccount",this.LoginAccount,this),n.GameTaskMgr.Instance().RegMsg("RegAccount",this.RegAccount,this),n.GameTaskMgr.Instance().RegMsg("ExitRoom",this.ExitRoom,this),n.GameTaskMgr.Instance().RegMsg("SelectCardsCompleted",this.SelectCardsCompleted,this),n.GameTaskMgr.Instance().RegMsg("ReadyGame",this.ReadyGame,this)}return t.prototype.LoginAccount=function(t){null!=this.LoginAccountCB&&this.LoginAccountCB(t)},t.prototype.RegAccount=function(t){null!=this.RegAccountCB&&this.RegAccountCB(t)},t.prototype.ExitRoom=function(){null!=this.ExitRoomCB&&this.ExitRoomCB()},t.prototype.SelectCardsCompleted=function(){null!=this.SelectCardsCompletedCB&&this.SelectCardsCompletedCB()},t.prototype.ReadyGame=function(){null!=this.ReadyGameCB&&this.ReadyGameCB()},t}();i.GameClient=o,cc._RF.pop()},{"../../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr"}],GameEntry:[function(t,e,i){"use strict";cc._RF.push(e,"96273AHVwxMVK8AGhyN9Zk7","GameEntry");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./GameTypes"),r=t("./GameClient/ResMgr/GameRes"),s=t("../GameLibs/ScTask/GameTaskMgr"),c=t("../GameLibs/ScAction/ScActionMgr"),l=t("./GameClient/CardsProcesser/CardsViewer"),h=t("./GameClient/ResMgr/Pool/CardPool"),u=t("./GameClient/ResMgr/Pool/PrefabPool"),d=t("./GameClient/Viewers/MsgBox"),p=t("../GameLibs/ScTweener/ScTweenerMgr"),f=t("./ClientServerLinker/ClientServerLinker"),S=t("../GameCompents/MouseEvents"),y=t("../GameCompents/ScreenTouchEvents"),m=cc._decorator,g=m.ccclass,C=m.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text="hello",e.camera=null,e.card=null,e.cardsViewerRoot=null,e.cardsViewerRoot2=null,e.slotsViewerRoot=null,e.gameTouchLayer=null,e.btnStart=null,e.gameLayer=null,e.msgLayer=null,e.room=null,e.golbalMouseEvents=null,e.loadResCount=0,e.palyerSeatViewers=new Array,e}return n(e,t),e.prototype.onLoad=function(){d.MsgBox.parent=this.msgLayer,d.MsgBox.mask=this.msgLayer.children[0]},e.prototype.start=function(){y.ScreenTouchEventsMgr.Instance().SetComputeMouseMoveInfo(!0),this.clientServerLinker=new f.ClientServerLinker,this.clientServerLinker.gameLayer=this.gameLayer,this.clientServerLinker.Create(),cc.game.setFrameRate(60),cc.dynamicAtlasManager.enabled=!1,r.GameRes.Instance().LoadResEnded=this.LoadResEnded.bind(this),r.GameRes.Instance().AddPrefabRes("Prefab/Login",a.PrefabIdx.Login),r.GameRes.Instance().AddPrefabRes("Prefab/Room",a.PrefabIdx.Room),r.GameRes.Instance().AddPrefabRes("Prefab/PlayerSeatViewer",a.PrefabIdx.PlayerSeatViewer),r.GameRes.Instance().AddPrefabRes("Prefab/BtnStartGame",a.PrefabIdx.BtnStartGame),r.GameRes.Instance().AddPrefabRes("Prefab/BtnReady",a.PrefabIdx.BtnReady),r.GameRes.Instance().AddPrefabRes("Prefab/Card",a.PrefabIdx.Card),r.GameRes.Instance().AddPrefabRes("Prefab/SlotsViewer",a.PrefabIdx.SlotsViewer),r.GameRes.Instance().AddPrefabRes("Prefab/OrangeScore",a.PrefabIdx.OrangeScore),r.GameRes.Instance().AddPrefabRes("Prefab/BlueScore",a.PrefabIdx.BlueScore),r.GameRes.Instance().AddPrefabRes("Prefab/MsgBox",a.PrefabIdx.MsgBox),r.GameRes.Instance().AddPrefabRes("Prefab/BgMask",a.PrefabIdx.BgMask),r.GameRes.Instance().AddSpriteAtlasRes("SpriteAtlas/CardsAtlas",a.SpriteAtlasIdx.Cards)},e.prototype.onDestroy=function(){h.CardPool.Instance().Destory(),u.PrefabPool.Instance().Destory(),p.ScTweenerMgr.Instance().Destroy(),c.ScActionMgr.Instance().Stop(),r.GameRes.Instance().Destroy(),s.GameTaskMgr.Instance().Stop()},e.prototype.LoadResEnded=function(){this.loadResCount++,this.loadResCount<12||(cc.sys.localStorage.getItem,h.CardPool.Instance().CreatePool(),this.clientServerLinker.Run())},e.prototype.CreateCardsViewer=function(t){var e=new l.CardsViewer(t);return e.UsePrespViewMode=!0,e.animScale=.7,e.fapaiAnimScale=.6,e.IsFaPaiFrontFace=!1,e.IsFaPaiEndFilpCard=!0,e.ArcLayoutHeightScale=0,e.ArcLayoutAbsEluerAngleZ=0,e.IsReverseSelectCard=!0,e.LayoutCardCount=13,e.PaiDuiPosOffset=new cc.Vec2(-.005,.0015),e.SortPaiOffset=new cc.Vec2(0,0),e.IsOpenCardWobble=!0,e.IsFaPaiPreRightMove=!0,e.SetLayoutWidth(t.width),e.CacheFaPaiAnimation(),e},o([C],e.prototype,"text",void 0),o([C(cc.Camera)],e.prototype,"camera",void 0),o([C(cc.Node)],e.prototype,"card",void 0),o([C(cc.Node)],e.prototype,"cardsViewerRoot",void 0),o([C(cc.Node)],e.prototype,"cardsViewerRoot2",void 0),o([C(cc.Node)],e.prototype,"slotsViewerRoot",void 0),o([C(y.default)],e.prototype,"gameTouchLayer",void 0),o([C(cc.Node)],e.prototype,"btnStart",void 0),o([C(cc.Node)],e.prototype,"gameLayer",void 0),o([C(cc.Node)],e.prototype,"msgLayer",void 0),o([C(cc.Node)],e.prototype,"room",void 0),o([C(S.default)],e.prototype,"golbalMouseEvents",void 0),e=o([g],e)}(cc.Component);i.default=T,cc._RF.pop()},{"../GameCompents/MouseEvents":"MouseEvents","../GameCompents/ScreenTouchEvents":"ScreenTouchEvents","../GameLibs/ScAction/ScActionMgr":"ScActionMgr","../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr","../GameLibs/ScTweener/ScTweenerMgr":"ScTweenerMgr","./ClientServerLinker/ClientServerLinker":"ClientServerLinker","./GameClient/CardsProcesser/CardsViewer":"CardsViewer","./GameClient/ResMgr/GameRes":"GameRes","./GameClient/ResMgr/Pool/CardPool":"CardPool","./GameClient/ResMgr/Pool/PrefabPool":"PrefabPool","./GameClient/Viewers/MsgBox":"MsgBox","./GameTypes":"GameTypes"}],GameError:[function(t,e,i){"use strict";cc._RF.push(e,"3b00c+qalVFp6c30AttsZs2","GameError"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.LoadServersInfosResFaild=0]="LoadServersInfosResFaild",t[t.AuthenAccoutFaild=1]="AuthenAccoutFaild",t[t.NeedRegAccout=2]="NeedRegAccout",t[t.LoginTimeOut=3]="LoginTimeOut",t[t.RegTimeOut=4]="RegTimeOut",t[t.ExitTimeOut=5]="ExitTimeOut",t[t.GameLoginFaild=6]="GameLoginFaild",t[t.RegAccoutFaild=7]="RegAccoutFaild",t[t.AlreadyRegedAccout=8]="AlreadyRegedAccout",t[t.GameExitFaild=9]="GameExitFaild"}(i.GameError||(i.GameError={})),cc._RF.pop()},{}],GameMsg:[function(t,e,i){"use strict";cc._RF.push(e,"45590IfWFxPEa/ISumQm2TK","GameMsg"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.MSG_AUTH_SIGNATURE=4096]="MSG_AUTH_SIGNATURE",t[t.MSG_LOGIC_LOGIN=4098]="MSG_LOGIC_LOGIN",t[t.MSG_GET_PLAYER_INFO=4099]="MSG_GET_PLAYER_INFO",t[t.MSG_NOTIFY_GAME_SESSION=4100]="MSG_NOTIFY_GAME_SESSION",t[t.MSG_GET_CREATE_TABLE_RECORD=4101]="MSG_GET_CREATE_TABLE_RECORD",t[t.MSG_CREATE_TABLE=4102]="MSG_CREATE_TABLE",t[t.MSG_NOTIFY_CREATE_TABLE_RECORD=4103]="MSG_NOTIFY_CREATE_TABLE_RECORD",t[t.MSG_NOTIFY_COMMON_UPDATE=4104]="MSG_NOTIFY_COMMON_UPDATE",t[t.MSG_BIND_INTRODUCER=4105]="MSG_BIND_INTRODUCER",t[t.MSG_NOTIFY_AGENT_INFO=4107]="MSG_NOTIFY_AGENT_INFO",t[t.MSG_INTRODUCER_AWARD=4106]="MSG_INTRODUCER_AWARD",t[t.MSG_GET_GAME_RECORDS=4108]="MSG_GET_GAME_RECORDS",t[t.MSG_NOTIFY_GAME_RECORDS=4109]="MSG_NOTIFY_GAME_RECORDS",t[t.MSG_NOTIFY_BROADCAST_NEWS=4110]="MSG_NOTIFY_BROADCAST_NEWS",t[t.MSG_HEARTBEAT=4111]="MSG_HEARTBEAT",t[t.MSG_VERSION_AWARD=4112]="MSG_VERSION_AWARD",t[t.MSG_SHARE_AWARD=4113]="MSG_SHARE_AWARD",t[t.MSG_GET_CLUB_INFO=4114]="MSG_GET_CLUB_INFO",t[t.MSG_GET_CLUB_DETAIL=4115]="MSG_GET_CLUB_DETAIL",t[t.MSG_GET_CLUB_MEMBER=4116]="MSG_GET_CLUB_MEMBER",t[t.MSG_CLUB_DONATE_FUND=4117]="MSG_CLUB_DONATE_FUND",t[t.MSG_CLUB_MEBER_INFO_NOTIFY=4118]="MSG_CLUB_MEBER_INFO_NOTIFY",t[t.MSG_CLUB_RUNNING_INFO=4119]="MSG_CLUB_RUNNING_INFO",t[t.MSG_CLUB_CREATE=4120]="MSG_CLUB_CREATE",t[t.MSG_CLUB_FLOOR_SETTING=4121]="MSG_CLUB_FLOOR_SETTING",t[t.MSG_CLUB_UPDATE_MEMBER_POST=4122]="MSG_CLUB_UPDATE_MEMBER_POST",t[t.MSG_CLUB_GLOBAL_SETTING=4123]="MSG_CLUB_GLOBAL_SETTING",t[t.MSG_CLUB_APPLY_JOIN=4124]="MSG_CLUB_APPLY_JOIN",t[t.MSG_CLUB_UPDATE_APPLIANCE=4125]="MSG_CLUB_UPDATE_APPLIANCE",t[t.MSG_CLUB_MEMBER_ALTER_NOTIFY=4127]="MSG_CLUB_MEMBER_ALTER_NOTIFY",t[t.MSG_CLUB_DELETE_MEMBER=4128]="MSG_CLUB_DELETE_MEMBER",t[t.MSG_NOTIFY_JOINED_CLUB_ALTERED=4129]="MSG_NOTIFY_JOINED_CLUB_ALTERED",t[t.MSG_GET_USERDATA=4130]="MSG_GET_USERDATA",t[t.MSG_CLUB_ENTER_FLOOR_TABLE=4131]="MSG_CLUB_ENTER_FLOOR_TABLE",t[t.MSG_CLUB_GET_DONATION_RECORDS=4132]="MSG_CLUB_GET_DONATION_RECORDS",t[t.MSG_CLUB_NOTIFY_DONATION_RECORD=4133]="MSG_CLUB_NOTIFY_DONATION_RECORD",t[t.MSG_CLUB_GET_GAME_RECORDS=4134]="MSG_CLUB_GET_GAME_RECORDS",t[t.MSG_CLUB_NOTIFY_GAME_RECORD=4135]="MSG_CLUB_NOTIFY_GAME_RECORD",t[t.MSG_CLUB_ADD_CANDIDATE_LIMIT=4136]="MSG_CLUB_ADD_CANDIDATE_LIMIT",t[t.MSG_CLUB_UPDATE_MEMBER_BLACKLIST_STATUS=4137]="MSG_CLUB_UPDATE_MEMBER_BLACKLIST_STATUS",t[t.MSG_GAME_SHUFFLE_CARDS=4144]="MSG_GAME_SHUFFLE_CARDS",t[t.MSG_CLUB_NEW_TABLE_NOTIFY=4180]="MSG_CLUB_NEW_TABLE_NOTIFY",t[t.MSG_CLUB_NOTIFY_REQUEST=4181]="MSG_CLUB_NOTIFY_REQUEST",t[t.MSG_EXPRESS_UPDATE=4182]="MSG_EXPRESS_UPDATE",t[t.MSG_EXPRESS_GET=4183]="MSG_EXPRESS_GET",t[t.MSG_GET_MAIL_INFO=4146]="MSG_GET_MAIL_INFO",t[t.MSG_MAIL_FETCH_ATTACHMENT=4147]="MSG_MAIL_FETCH_ATTACHMENT",t[t.MSG_NEW_MAIL_NOTICE=4148]="MSG_NEW_MAIL_NOTICE",t[t.MSG_GAMESERVER_STATUS_NOTICE=4149]="MSG_GAMESERVER_STATUS_NOTICE",t[t.MSG_GET_SIGN_IN_INFO=4150]="MSG_GET_SIGN_IN_INFO",t[t.MSG_SIGN_IN_AWARD=4151]="MSG_SIGN_IN_AWARD",t[t.MSG_GOLD_GET_SUBSIDY=4177]="MSG_GOLD_GET_SUBSIDY",t[t.MSG_TABLE_AC_CREATE=4384]="MSG_TABLE_AC_CREATE",t[t.MSG_TABLE_AC_NOTIFY=4385]="MSG_TABLE_AC_NOTIFY",t[t.MSG_GOLD_GET_LEVEL_INFO=4152]="MSG_GOLD_GET_LEVEL_INFO",t[t.MSG_GOLD_ENTER_LEAVE_PIAZZA=4153]="MSG_GOLD_ENTER_LEAVE_PIAZZA",t[t.MSG_GOLD_MATCHING_ACTION=4160]="MSG_GOLD_MATCHING_ACTION",t[t.MSG_GOLD_NOTIFY_MATCHING_RESULT=4161]="MSG_GOLD_NOTIFY_MATCHING_RESULT",t[t.MSG_GOLD_EXCHANGE=4163]="MSG_GOLD_EXCHANGE",t[t.MSG_UNION_NOTIFY_INFO=4352]="MSG_UNION_NOTIFY_INFO",t[t.MSG_UNION_APPLY_TO=4353]="MSG_UNION_APPLY_TO",t[t.MSG_UNION_ON_APPLY=4354]="MSG_UNION_ON_APPLY",t[t.MSG_UNION_ASK_APPLY=4355]="MSG_UNION_ASK_APPLY",t[t.MSG_UNION_APPLY_RESULT=4356]="MSG_UNION_APPLY_RESULT",t[t.MSG_UNION_DISSOLUTION=4357]="MSG_UNION_DISSOLUTION",t[t.MSG_CLUB_BALANCE_SUMMRAY=4162]="MSG_CLUB_BALANCE_SUMMRAY",t[t.MSG_PLAY_GAME=8192]="MSG_PLAY_GAME",t[t.MSG_MANIPULATE_GAME=8193]="MSG_MANIPULATE_GAME",t[t.MSG_GAME_GET_ITEMS=4178]="MSG_GAME_GET_ITEMS",t[t.MSG_FFL_GET_ONE=4400]="MSG_FFL_GET_ONE",t[t.MSG_FFL_DONE_ONE=4401]="MSG_FFL_DONE_ONE",t[t.MSG_FFL_SUBMIT=4402]="MSG_FFL_SUBMIT",t[t.MSG_FFL_NEW_ROUND=4403]="MSG_FFL_NEW_ROUND",t[t.MSG_FFL_RESET=4404]="MSG_FFL_RESET",t[t.MSG_FFL_GET_REMAIN=4405]="MSG_FFL_GET_REMAIN"}(i.GameMsg||(i.GameMsg={})),function(t){t[t.enmGameCMD_table_create=1]="enmGameCMD_table_create",t[t.enmGameCMD_table_sit_down=2]="enmGameCMD_table_sit_down",t[t.enmGameCMD_table_set_param=3]="enmGameCMD_table_set_param",t[t.enmGameCMD_table_leave=4]="enmGameCMD_table_leave",t[t.enmGameCMD_table_stand_up=5]="enmGameCMD_table_stand_up",t[t.enmGameCMD_table_exit=6]="enmGameCMD_table_exit",t[t.enmGameCMD_table_kick_player=7]="enmGameCMD_table_kick_player",t[t.enmGameCMD_table_game_stop=8]="enmGameCMD_table_game_stop",t[t.enmGameCMD_table_info=9]="enmGameCMD_table_info",t[t.enmGameCMD_table_game_info=10]="enmGameCMD_table_game_info",t[t.enmGameCMD_table_player_info_notify=11]="enmGameCMD_table_player_info_notify",t[t.enmGameCMD_table_set_ready=12]="enmGameCMD_table_set_ready",t[t.enmGameCMD_table_set_offline=13]="enmGameCMD_table_set_offline",t[t.enmGameCMD_table_game_start=14]="enmGameCMD_table_game_start",t[t.enmGameCMD_table_game_round_submit=15]="enmGameCMD_table_game_round_submit",t[t.enmGameCMD_table_game_round_balance=16]="enmGameCMD_table_game_round_balance",t[t.enmGameCMD_table_game_round_start=17]="enmGameCMD_table_game_round_start",t[t.enmGameCMD_table_game_final_balance=18]="enmGameCMD_table_game_final_balance",t[t.enmGameCMD_table_start_vote=19]="enmGameCMD_table_start_vote",t[t.enmGameCMD_table_make_vote=20]="enmGameCMD_table_make_vote",t[t.enmGameCMD_table_notify_update_vote=21]="enmGameCMD_table_notify_update_vote",t[t.enmGameCMD_table_notify_vote_submission=22]="enmGameCMD_table_notify_vote_submission",t[t.enmGameCMD_table_player_set_option=23]="enmGameCMD_table_player_set_option",t[t.enmGameCMD_table_public_player_game_info=24]="enmGameCMD_table_public_player_game_info",t[t.enmGameCMD_table_player_quick_talk=25]="enmGameCMD_table_player_quick_talk",t[t.enmGameCMD_table_player_yield_admin=26]="enmGameCMD_table_player_yield_admin",t[t.enmGameCMD_table_admin_altered=27]="enmGameCMD_table_admin_altered",t[t.enmGameCMD_table_dismiss=28]="enmGameCMD_table_dismiss",t[t.enmGameCMD_table_leave_and_observe=29]="enmGameCMD_table_leave_and_observe",t[t.enmGameCMD_table_add_new_observer=31]="enmGameCMD_table_add_new_observer",t[t.enmGameCMD_table_del_new_observer=32]="enmGameCMD_table_del_new_observer",t[t.enmGameCMD_table_shuffle_cards_req=33]="enmGameCMD_table_shuffle_cards_req",t[t.enmGameCMD_table_shuffle_cards=34]="enmGameCMD_table_shuffle_cards",t[t.enmGameCMD_table_going_to_stop=35]="enmGameCMD_table_going_to_stop",t[t.enmGameCMD_table_force_leave=36]="enmGameCMD_table_force_leave",t[t.enmGameCMD_table_short_of_coin=37]="enmGameCMD_table_short_of_coin",t[t.enmGameCMDExt_table_switch_as_player=15873]="enmGameCMDExt_table_switch_as_player",t[t.enmGameCMDExt_table_set_offline=15874]="enmGameCMDExt_table_set_offline",t[t.enmGameCMDExt_table_stop_observing=15875]="enmGameCMDExt_table_stop_observing",t[t.enmGameCMDExt_table_join_paid=15876]="enmGameCMDExt_table_join_paid",t[t.enmGameCMD_table_banker_grab=272]="enmGameCMD_table_banker_grab",t[t.enmGameCMD_table_banker_winner_notify=273]="enmGameCMD_table_banker_winner_notify",t[t.enmGameCMD_table_union_notify=258]="enmGameCMD_table_union_notify"}(i.GameCMD||(i.GameCMD={})),cc._RF.pop()},{}],GameRes:[function(t,e,i){"use strict";cc._RF.push(e,"496b52n3axCgpeOVi764Sxm","GameRes"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../GameLibs/ScStateMachine/ScDesginAction"),o=t("../../../GameLibs/ScStateMachine/ScStateMachineTypes"),a=t("../../../GameLibs/Collections/Dictionary"),r=function(){function t(){this.prefabDict=new a.Dictionary,this.spriteAtlasDict=new a.Dictionary,this.audioClipDict=new a.Dictionary,this.wait=new o.WaitObj,this.InstallAction()}return t.Instance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.Destroy=function(){this.prefabDict.forEach(function(t,e){e.destroy()}),this.spriteAtlasDict.forEach(function(t,e){e.destroy()}),this.prefabDict.clear(),this.spriteAtlasDict.clear(),this.loadResAction.Destroy()},t.prototype.AddPrefabRes=function(t,e){this.loadResAction.Execute([t,e,cc.Prefab])},t.prototype.AddSpriteAtlasRes=function(t,e){this.loadResAction.Execute([t,e,cc.SpriteAtlas])},t.prototype.AddAudioClipRes=function(t,e){this.loadResAction.Execute([t,e,cc.AudioClip])},t.prototype.LoadPrefab=function(t){return this.prefabDict.getValue(t)},t.prototype.LoadSpriteAltas=function(t){return this.spriteAtlasDict.getValue(t)},t.prototype.LoadSpriteAltasFrame=function(t,e){return this.spriteAtlasDict.getValue(t).getSpriteFrame(e)},t.prototype.LoadSpriteAltasFrames=function(t){return this.spriteAtlasDict.getValue(t).getSpriteFrames()},t.prototype.LoadAudioClip=function(t){return this.audioClipDict.getValue(t)},t.prototype.InstallAction=function(){this.loadResAction=new n.ScDesginAction(!0),this.loadResAction.stateMachine.ExeMode=o.StateMachineExeMode.Serial,this.loadResAction.Install(this),this.loadResAction.ProcessExData=this.ProcessActionExData.bind(this),this.loadResAction.SetStateLifeRange(0,1),this.loadResAction.AddStateChildAction(0,this.State0.bind(this)),this.loadResAction.AddStateChildAction(1,this.State1.bind(this))},t.prototype.ProcessActionExData=function(t){this.resUrl=t[0],this.resIdx=t[1],this.resAssetType=t[2]},t.prototype.State0=function(){this.wait.Reset(),cc.loader.loadRes(this.resUrl,this.resAssetType,this.LoadResEnd.bind(this)),this.loadResAction.WaitGoToState(this.wait,1)},t.prototype.State1=function(){if(this.loadResErrorMessage)return cc.log("\u8f7d\u5165\u8d44\u6e90\u5931\u8d25, \u539f\u56e0:"+this.loadResErrorMessage),this.loadResAction.GotoState(this.loadResAction.IdleState()),void this.LoadResEnded();this.asset instanceof cc.Prefab?this.prefabDict.setValue(this.resIdx,this.asset):this.asset instanceof cc.SpriteAtlas?this.spriteAtlasDict.setValue(this.resIdx,this.asset):this.asset instanceof cc.AudioClip&&this.audioClipDict.setValue(this.resIdx,this.asset),this.loadResAction.GotoState(this.loadResAction.IdleState()),this.LoadResEnded()},t.prototype.LoadResEnd=function(t,e){this.loadResErrorMessage=t,this.asset=e,this.loadResAction.ContinueGoto(this.wait)},t}();i.GameRes=r,cc._RF.pop()},{"../../../GameLibs/Collections/Dictionary":"Dictionary","../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes"}],GameServerTypes:[function(t,e,i){"use strict";cc._RF.push(e,"88088d+3Q9FK7ttvlkmyiXv","GameServerTypes"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(t){null!=t&&(this.gw_host=t.gw_host,this.gw_port=t.gw_port,this.version=t.version,this.serverState=t.serverState,this.isOpenNormalVersion=t.isOpenNormalVersion,this.config_version=t.config_version,this.appcheck_version=t.appcheck_version,this.isOpenAppleCheck=t.isOpenAppleCheck,this.isOpenAppleCheck2=t.isOpenAppleCheck2,this.game_setting_version=t.game_setting_version)}}();i.GatewayConfigInfo=n;var o=function(){return function(t){null!=t&&(this.account=t.account,this.auth_str=t.auth_str,this.auth_str_length=t.auth_str_length,this.expire_in=t.expire_in,this.need_create_role=t.need_create_role,this.renew_hash=t.renew_hash,this.result_id=t.result_id,this.uin=t.uin)}}();i.LoginData=o;var a=function(){return function(t){null!=t&&(this.m_nResultID=t.m_nResultID,this.m_iUin=t.m_iUin)}}();i.RegData=a;var r=function(){return function(){}}();i.ServerData=r,cc._RF.pop()},{}],GameServersDatas:[function(t,e,i){"use strict";cc._RF.push(e,"c3f6d1DbqdBGIUCNZpJytvm","GameServersDatas"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./GameServerTypes"),o=t("../../GameLibs/Utils/HttpHelp"),a=t("./GameError"),r=t("../../GameLibs/ScTask/GameTaskMgr"),s=t("../../GameLibs/Utils/MD5"),c=t("../../GameLibs/Collections/Dictionary"),l=function(){function t(){}return t.Load=function(e){null!=e&&t.LoadServersInfosEndedGameServerList.push(e),0==t.isLoadedGlobleInfo?cc.loader.loadRes("ServerDatas",cc.TextAsset,this.LoadXml.bind(this)):t.LoadServerDataEndedCBFunc(!0)},t.LoadXml=function(e,i){if(null!=i&&0!=i.length){var n=""+i,o=(new DOMParser).parseFromString(n,"text/xml");t.GetServerData(o);var a=o.getElementsByTagName("AuthenAccoutAddr").item(0);t.authenAccoutAddr=a.getAttribute("Url"),t.privateKey=a.getAttribute("PrivateKey");var r=o.getElementsByTagName("GameWayAddr").item(0);t.gateWayAddr=r.getAttribute("Url");var s=o.getElementsByTagName("RegAccoutAddr").item(0);t.regAccoutAddr=s.getAttribute("Url"),t.LoadServerDataEndedCBFunc(!0)}else t.LoadServerDataEndedCBFunc(!1)},t.GetServerData=function(e){for(var i=e.getElementsByTagName("Server"),o=0;o<i.length;o++){var a=new n.ServerData;a.name=i[o].getAttribute("Name"),a.ip=i[o].getAttribute("Ip"),a.port=i[o].getAttribute("Port"),a.authenAccoutDir=i[o].getAttribute("AuthenAccountDir"),t.serverInfoMap.setValue(a.name,a)}},t.prototype.ConnectGateWayServer=function(e){var i=t.serverInfoMap.getValue(e),n=t.gateWayAddr;n=(n=n.replace("{0}",i.ip+":"+i.port)).replace("{1}",i.authenAccoutDir),r.GameTaskMgr.Instance().PostTask(this.GateWayReqProcessTest.bind(this),e)},t.prototype.ConnectLoginServer=function(e,i){var n=t.serverInfoMap.getValue(i),a=t.authenAccoutAddr,r=(new s.MD5).hex_md5(e+t.privateKey);a=(a=(a=(a=a.replace("{0}",n.ip+":"+n.port)).replace("{1}",n.authenAccoutDir)).replace("{2}",r)).replace("{3}",e),o.HttpHelp.Request(a,this.AuthenAccoutReqProcess.bind(this))},t.prototype.ConnectRegAccoutServer=function(e,i,n,o){var a=t.serverInfoMap.getValue(o),s=t.regAccoutAddr;s=(s=(s=(s=(s=s.replace("{0}",a.ip+":"+a.port)).replace("{1}",a.authenAccoutDir)).replace("{2}",i.toString())).replace("{3}",n.toString())).replace("{4}",e),console.debug(s),this.request=new XMLHttpRequest,this.request.onload=this.RegAccoutReqProcess.bind(this),this.request.open("GET",s,!0),this.request.send(),r.GameTaskMgr.Instance().PostTask(this.ConnectRegServerEnded)},t.prototype.GateWayReqProcess=function(t,e){if(0!=t){var i=JSON.parse(e);this.gatewayInfo=new n.GatewayConfigInfo(i),r.GameTaskMgr.Instance().PostTask(this.ConnectGateWayServerEnded)}},t.prototype.GateWayReqProcessTest=function(t){this.gatewayInfo=new n.GatewayConfigInfo,"TestServer"==t?(this.gatewayInfo.gw_host="211.159.216.18",this.gatewayInfo.gw_port="845"):(this.gatewayInfo.gw_host="211.159.216.18",this.gatewayInfo.gw_port="843"),r.GameTaskMgr.Instance().PostTask(this.ConnectGateWayServerEnded)},t.prototype.AuthenAccoutReqProcess=function(t,e){if(0!=t){var i=JSON.parse(e);this.loginData=new n.LoginData(i),1!=this.loginData.need_create_role?r.GameTaskMgr.Instance().PostTask(this.ConnectLoginServerEnded):r.GameTaskMgr.Instance().PostTask(this.ErrorMsg,a.GameError.NeedRegAccout)}else r.GameTaskMgr.Instance().PostTask(this.ErrorMsg,a.GameError.AuthenAccoutFaild)},t.prototype.RegAccoutReqProcess=function(){var t,e=!1;if(4==this.request.readyState&&this.request.status>=200&&this.request.status<400&&(t=this.request.responseText,e=!0),0!=e){var i=JSON.parse(t);if(this.regData=new n.RegData(i),0!=this.regData.m_nResultID)return console.debug(i.m_nResultID),void r.GameTaskMgr.Instance().PostTask(this.ErrorMsg,a.GameError.RegAccoutFaild);r.GameTaskMgr.Instance().PostTask(this.ConnectRegServerEnded)}else r.GameTaskMgr.Instance().PostTask(this.ErrorMsg,a.GameError.RegAccoutFaild)},t.RegLoadServerDataEndedCBFunc=function(e,i){t.LoadServersInfosEndedDict.setValue(e,i)},t.UnregLoadServerDataEndedCBFunc=function(e){t.LoadServersInfosEndedDict.remove(e)},t.LoadServerDataEndedCBFunc=function(e){for(var i,n=0;n<t.LoadServersInfosEndedGameServerList.length;n++)i=t.LoadServersInfosEndedDict.getValue(t.LoadServersInfosEndedGameServerList[n]),r.GameTaskMgr.Instance().PostTask(i,e);t.LoadServersInfosEndedGameServerList.length=0},t.isLoadedGlobleInfo=!1,t.serverInfoMap=new c.Dictionary,t.LoadServersInfosEndedGameServerList=new Array,t.LoadServersInfosEndedDict=new c.Dictionary,t}();i.GameServersDatas=l,cc._RF.pop()},{"../../GameLibs/Collections/Dictionary":"Dictionary","../../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr","../../GameLibs/Utils/HttpHelp":"HttpHelp","../../GameLibs/Utils/MD5":"MD5","./GameError":"GameError","./GameServerTypes":"GameServerTypes"}],GameServer:[function(t,e,i){"use strict";cc._RF.push(e,"514e8FOU61M7opvEeW/cRe8","GameServer");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../GameLibs/ScNet/SocketMgr"),a=t("./GameServersDatas"),r=t("../../GameLibs/ScNet/ScNetTypes"),s=t("./GameMsg"),c=t("./GameError"),l=t("../../GameLibs/ByteBuffer/bytebuffer"),h=t("../../GameLibs/ScStateMachine/ScStateMachineTypes"),u=t("../../GameLibs/ScTask/GameTaskMgr"),d=t("../../GameLibs/ScStateMachine/ScStateMachine"),p=t("../../GameLibs/ScStateMachine/ScDesginAction"),f=t("../GameTypes"),S=t("../../GameLibs/ScTypes/ScObject"),y=t("./ServerInfoDeEncode/HeadInfo"),m=t("./ServerInfoDeEncode/AuthSignatureInfo"),g=t("./ServerInfoDeEncode/LoginInfo"),C=function(t){function e(){var e=t.call(this)||this;return e.seq=0,e.groupID=1,e.isTryDirectConnectGameServer=!1,e.isConnectLoginServerSucessed=!1,e.wait=new h.WaitObj,e.socketMgr=new o.SocketMgr,e.gameLoginState=f.GameLoginState.NonLogin,e.serverInfos=new a.GameServersDatas,e.serverInfos.ConnectGateWayServerEnded=e.ConnectGateWayServerEnded.bind(e),e.serverInfos.ConnectLoginServerEnded=e.ConnectLoginServerEnded.bind(e),e.serverInfos.ConnectRegServerEnded=e.ConnectRegServerEnded.bind(e),e.serverInfos.ErrorMsg=e.GameErrorMsg.bind(e),e.MachineActionInit(),e}return n(e,t),e.prototype.Destory=function(){this.stateMachine.Destroy(),null!=this.socket&&this.socket.Close(),this.socketMgr.Stop()},e.prototype.CreateContentCombHeadBuf=function(t,e){var i=new l,n=new y.HeadInfo;return n.messageLength=e.offset,n.uin=this.serverInfos.loginData.uin,n.cryptMethod=0,n.groupID=this.groupID,n.messageID=t,n.sequence=this.seq++,n.encode(i),e.limit=e.offset,e.offset=0,i.writeBytes(e),i},e.prototype.SendMsg=function(t,e){if(null!=this.socket){var i=new l;e.encode(i);var n=this.CreateContentCombHeadBuf(t,i);this.socket.Send(n)}},e.prototype.SetMsgProcesser=function(t){this.msgProcesser=t,this.msgProcesser.SetCustomData(this),this.msgProcesser.RegSocketEvent(r.SocketEvent.EV_SOCKET_CONNECTED,this.Connected,this),this.msgProcesser.RegSocketEvent(r.SocketEvent.EV_SOCKET_CLOSED,this.SocketClosed,this),this.msgProcesser.RegSocketEvent(r.SocketEvent.EV_SOCKET_ERROR,this.SocketError,this),this.msgProcesser.RegMsg(s.GameMsg.MSG_AUTH_SIGNATURE,this.OnGetAuthSignature.bind(this)),this.msgProcesser.RegMsg(s.GameMsg.MSG_LOGIC_LOGIN,this.OnLogin.bind(this))},e.prototype.Reg=function(t,e){0!=this.stateMachine.IsIdle()&&(this.account=t,this.serverName=e,this.regAction.Execute())},e.prototype.Login=function(t,e){0!=this.stateMachine.IsIdle()&&this.gameLoginState!=f.GameLoginState.LoginSucessed&&(this.account=t,this.serverName=e,this.loginAction.Execute())},e.prototype.Exit=function(){0!=this.stateMachine.IsIdle()&&this.gameLoginState!=f.GameLoginState.NonLogin&&this.exitAction.Execute()},e.prototype.MachineActionInit=function(){this.stateMachine=new d.ScStateMachine,this.stateMachine.ExeMode=h.StateMachineExeMode.IsFreeExe,this.stateMachine.SetData(this),this.LoginAction_Init(),this.RegAction_Init(),this.ExitAction_Init()},e.prototype.LoginAction_Init=function(){this.loginAction=new p.ScDesginAction(!1),this.stateMachine.Install(this.loginAction),this.loginAction.SetStateLifeRange(0,5),this.loginAction.AddStateChildAction(0,this.LoginAction_State0.bind(this)),this.loginAction.AddStateChildAction(1,this.LoginAction_State1.bind(this)),this.loginAction.AddStateChildAction(2,this.LoginAction_State2.bind(this)),this.loginAction.AddStateChildAction(3,this.LoginAction_State3.bind(this)),this.loginAction.AddStateChildAction(4,this.LoginAction_State4.bind(this)),this.loginAction.AddStateChildAction(5,this.LoginAction_State5.bind(this))},e.prototype.LoginAction_State0=function(){this.gameLoginState=f.GameLoginState.Logining,a.GameServersDatas.RegLoadServerDataEndedCBFunc(this,this.ServerDatasLoadEnded.bind(this)),a.GameServersDatas.Load(this),this.timeOutTimer=u.GameTaskMgr.Instance().CreateTimer(this.TimeOut.bind(this),null,5e3,!1),this.timeOutTimer.Start(),this.stateMachine.WaitGoToState(this.wait,1)},e.prototype.LoginAction_State1=function(){1==this.isTryDirectConnectGameServer&&null!=this.serverInfos.gatewayInfo?(this.serverInfos.ConnectLoginServer(this.account,this.serverName),this.stateMachine.WaitGoToState(this.wait,3)):(this.isTryDirectConnectGameServer=!1,this.serverInfos.ConnectGateWayServer(this.serverName),this.stateMachine.WaitGoToState(this.wait,2))},e.prototype.LoginAction_State2=function(){this.serverInfos.ConnectLoginServer(this.account,this.serverName),this.stateMachine.WaitGoToState(this.wait,3)},e.prototype.LoginAction_State3=function(){this.socket=this.socketMgr.ConnectServer(this.serverInfos.gatewayInfo.gw_host,this.serverInfos.gatewayInfo.gw_port),this.socket.SetMsgProcesser(this.msgProcesser,!0),this.socket.Data=this,this.stateMachine.WaitGoToState(this.wait,4)},e.prototype.LoginAction_State4=function(){this.isTryDirectConnectGameServer=!0;var t=new l,e=new m.RequestAuthSignature;e.token=this.serverInfos.loginData.auth_str,e.encode(t);var i=this.CreateContentCombHeadBuf(s.GameMsg.MSG_AUTH_SIGNATURE,t);this.socket.Send(i),this.stateMachine.WaitGoToState(this.wait,5)},e.prototype.LoginAction_State5=function(){null!=this.timeOutTimer&&this.timeOutTimer.Stop(),this.gameLoginState=f.GameLoginState.LoginSucessed,this.stateMachine.GotoState(this.stateMachine.IdleState()),null!=this.LoginSucessed&&this.LoginSucessed(this)},e.prototype.RegAction_Init=function(){this.regAction=new p.ScDesginAction(!1),this.stateMachine.Install(this.regAction),this.regAction.SetStateLifeRange(6,9),this.regAction.AddStateChildAction(6,this.RegAction_State0.bind(this)),this.regAction.AddStateChildAction(7,this.RegAction_State1.bind(this)),this.regAction.AddStateChildAction(8,this.RegAction_State2.bind(this)),this.regAction.AddStateChildAction(9,this.RegAction_State3.bind(this))},e.prototype.RegAction_State0=function(){this.gameLoginState=f.GameLoginState.RegAccouting,this.isConnectLoginServerSucessed=!1,a.GameServersDatas.RegLoadServerDataEndedCBFunc(this,this.ServerDatasLoadEnded.bind(this)),a.GameServersDatas.Load(this),this.timeOutTimer=u.GameTaskMgr.Instance().CreateTimer(this.TimeOut.bind(this),null,5e3,!1),this.timeOutTimer.Start(),this.stateMachine.WaitGoToState(this.wait,7)},e.prototype.RegAction_State1=function(){this.serverInfos.ConnectLoginServer(this.account,this.serverName),this.stateMachine.WaitGoToState(this.wait,8)},e.prototype.RegAction_State2=function(){if(1==this.isConnectLoginServerSucessed)return this.ErrorMsg(c.GameError.AlreadyRegedAccout),this.gameLoginState=f.GameLoginState.NonLogin,void this.stateMachine.GotoState(this.stateMachine.IdleState());this.serverInfos.ConnectRegAccoutServer(this.serverInfos.loginData.account,this.serverInfos.loginData.uin,1,this.serverName),this.stateMachine.WaitGoToState(this.wait,9)},e.prototype.RegAction_State3=function(){null!=this.timeOutTimer&&this.timeOutTimer.Stop(),this.gameLoginState=f.GameLoginState.NonLogin,this.stateMachine.GotoState(this.stateMachine.IdleState()),null!=this.RegSucessed&&this.RegSucessed(this)},e.prototype.ExitAction_Init=function(){this.exitAction=new p.ScDesginAction(!1),this.stateMachine.Install(this.exitAction),this.exitAction.SetStateLifeRange(10,11),this.exitAction.AddStateChildAction(10,this.ExitAction_State0.bind(this)),this.exitAction.AddStateChildAction(11,this.ExitAction_State1.bind(this))},e.prototype.ExitAction_State0=function(){this.gameLoginState=f.GameLoginState.Exiting,null!=this.socket?(this.socket.Close(),this.timeOutTimer=u.GameTaskMgr.Instance().CreateTimer(this.TimeOut.bind(this),null,5e3,!1),this.timeOutTimer.Start(),this.stateMachine.WaitGoToState(this.wait,11)):this.stateMachine.GotoState(1)},e.prototype.ExitAction_State1=function(){this.socket=null,null!=this.timeOutTimer&&this.timeOutTimer.Stop(),this.gameLoginState=f.GameLoginState.NonLogin,this.stateMachine.GotoState(this.stateMachine.IdleState()),null!=this.ExitSucessed&&this.ExitSucessed(this)},e.prototype.ServerDatasLoadEnded=function(t){0!=t?this.stateMachine.ContinueGoto(this.wait):this.gameLoginState==f.GameLoginState.Logining?(this.gameLoginState=f.GameLoginState.NonLogin,this.ErrorMsg(c.GameError.LoadServersInfosResFaild),this.ErrorMsg(c.GameError.GameLoginFaild)):(this.gameLoginState=f.GameLoginState.NonLogin,this.ErrorMsg(c.GameError.LoadServersInfosResFaild),this.ErrorMsg(c.GameError.RegAccoutFaild))},e.prototype.ConnectGateWayServerEnded=function(){this.stateMachine.ContinueGoto(this.wait)},e.prototype.ConnectLoginServerEnded=function(){this.isConnectLoginServerSucessed=!0,this.stateMachine.ContinueGoto(this.wait)},e.prototype.ConnectRegServerEnded=function(){this.stateMachine.ContinueGoto(this.wait)},e.prototype.Connected=function(){return this.stateMachine.ContinueGoto(this.wait),!0},e.prototype.OnGetAuthSignature=function(t,e,i){var n=new m.AuthSignatureInfo;if(n.decode(i),0!=n.resultID)return this.gameLoginState=f.GameLoginState.NonLogin,this.socket.Close(),void this.ErrorMsg(c.GameError.GameLoginFaild);var o=new g.RequestLogin;o.uin=this.serverInfos.loginData.uin,this.SendMsg(s.GameMsg.MSG_LOGIC_LOGIN,o)},e.prototype.OnLogin=function(t,e,i){var n=new g.LoginInfo;if(n.decode(i),0!=n.resultID){n.resultDesc;return this.socket.Close(),this.gameLoginState=f.GameLoginState.NonLogin,void this.ErrorMsg(c.GameError.GameLoginFaild)}this.stateMachine.ContinueGoto(this.wait)},e.prototype.TimeOut=function(){if(this.stateMachine.StopAllActions(),this.timeOutTimer.Stop(),this.gameLoginState==f.GameLoginState.RegAccouting)this.gameLoginState=f.GameLoginState.NonLogin,this.ErrorMsg(c.GameError.RegTimeOut),this.ErrorMsg(c.GameError.RegAccoutFaild);else if(this.gameLoginState==f.GameLoginState.Logining){if(this.isTryDirectConnectGameServer)return this.gameLoginState=f.GameLoginState.NonLogin,this.serverInfos.gatewayInfo=null,this.Login(this.account,this.serverName),void(this.isTryDirectConnectGameServer=!1);this.serverInfos.gatewayInfo=null,this.ErrorMsg(c.GameError.LoginTimeOut),this.ErrorMsg(c.GameError.GameLoginFaild),null!=this.socket?this.socket.Close():this.gameLoginState=f.GameLoginState.NonLogin}else this.ErrorMsg(c.GameError.ExitTimeOut),this.ErrorMsg(c.GameError.GameExitFaild)},e.prototype.SocketClosed=function(){return this.stateMachine.IsIdle()?(this.socket=null,this.gameLoginState=f.GameLoginState.NonLogin):this.exitAction.ExeState()==h.ActionExeState.Executing?this.stateMachine.ContinueGoto(this.wait):(this.stateMachine.StopAllActions(),this.timeOutTimer.Stop(),this.socket=null,this.gameLoginState=f.GameLoginState.NonLogin),!0},e.prototype.SocketError=function(){return this.stateMachine.StopAllActions(),null!=this.timeOutTimer&&this.timeOutTimer.Stop(),this.socket=null,this.serverInfos.gatewayInfo=null,this.gameLoginState=f.GameLoginState.NonLogin,!0},e.prototype.GameErrorMsg=function(t){this.regAction.ExeState()!=h.ActionExeState.Executing||t!=c.GameError.NeedRegAccout?(this.SocketError(),this.ErrorMsg(t),this.ErrorMsg(c.GameError.GameLoginFaild)):this.stateMachine.ContinueGoto(this.wait)},e}(S.ScObject);i.GameServer=C,cc._RF.pop()},{"../../GameLibs/ByteBuffer/bytebuffer":"bytebuffer","../../GameLibs/ScNet/ScNetTypes":"ScNetTypes","../../GameLibs/ScNet/SocketMgr":"SocketMgr","../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../GameLibs/ScStateMachine/ScStateMachine":"ScStateMachine","../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr","../../GameLibs/ScTypes/ScObject":"ScObject","../GameTypes":"GameTypes","./GameError":"GameError","./GameMsg":"GameMsg","./GameServersDatas":"GameServersDatas","./ServerInfoDeEncode/AuthSignatureInfo":"AuthSignatureInfo","./ServerInfoDeEncode/HeadInfo":"HeadInfo","./ServerInfoDeEncode/LoginInfo":"LoginInfo"}],GameTaskMgr:[function(t,e,i){"use strict";cc._RF.push(e,"10f9amlwopFdpbLcls0tXmW","GameTaskMgr");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;return e.SetFrameRate(100),e.Start(),e}return n(e,t),e.Instance=function(){return this.instance},e.instance=new e,e}(t("./TaskMgr").TaskMgr);i.GameTaskMgr=o,cc._RF.pop()},{"./TaskMgr":"TaskMgr"}],GameTypes:[function(t,e,i){"use strict";cc._RF.push(e,"4df7fCTGrNFtYxm+gAkgqD9","GameTypes"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.Login=0]="Login",t[t.Room=1]="Room",t[t.PlayerSeatViewer=2]="PlayerSeatViewer",t[t.BtnStartGame=3]="BtnStartGame",t[t.BtnReady=4]="BtnReady",t[t.Card=5]="Card",t[t.SlotsViewer=6]="SlotsViewer",t[t.OrangeScore=7]="OrangeScore",t[t.BlueScore=8]="BlueScore",t[t.MsgBox=9]="MsgBox",t[t.BgMask=10]="BgMask"}(i.PrefabIdx||(i.PrefabIdx={})),function(t){t[t.Cards=0]="Cards"}(i.SpriteAtlasIdx||(i.SpriteAtlasIdx={})),function(t){t[t.CardFlip=0]="CardFlip",t[t.BK_MUSIC0=1]="BK_MUSIC0",t[t.BK_MUSIC1=2]="BK_MUSIC1",t[t.BK_MUSIC2=3]="BK_MUSIC2",t[t.Select=4]="Select",t[t.OUT_CARD=5]="OUT_CARD",t[t.Shuffle=6]="Shuffle",t[t.GAME_CARD=7]="GAME_CARD",t[t.Fly=8]="Fly",t[t.CardShake=9]="CardShake",t[t.FallDown=10]="FallDown"}(i.AudioClipIdx||(i.AudioClipIdx={})),function(t){t[t.NonLogin=0]="NonLogin",t[t.RegAccouting=1]="RegAccouting",t[t.Logining=2]="Logining",t[t.Exiting=3]="Exiting",t[t.LoginSucessed=4]="LoginSucessed"}(i.GameLoginState||(i.GameLoginState={})),function(t){t[t.Empty=0]="Empty",t[t.EnteredRoom=1]="EnteredRoom",t[t.ReadyGame=2]="ReadyGame",t[t.PlayedGame=4]="PlayedGame",t[t.GetedCard=8]="GetedCard",t[t.SubmitedCard=16]="SubmitedCard",t[t.Balanced=32]="Balanced",t[t.Offline=64]="Offline",t[t.Exited=128]="Exited",t[t.EnteredObserve=256]="EnteredObserve"}(i.PlayerGameStatus||(i.PlayerGameStatus={})),function(t){t[t.UnKnown=0]="UnKnown",t[t.OrganizeGame=1]="OrganizeGame",t[t.SelectCards=2]="SelectCards",t[t.WaitCmpCards=3]="WaitCmpCards",t[t.CmpCardsBalanced=4]="CmpCardsBalanced",t[t.WaitNextRoundGame=5]="WaitNextRoundGame",t[t.NotExist=6]="NotExist"}(i.RoomStage||(i.RoomStage={})),function(t){t[t.Ready=0]="Ready",t[t.SortPai=1]="SortPai",t[t.CompletedSortPai=2]="CompletedSortPai"}(i.PlayerShowGameState||(i.PlayerShowGameState={})),cc._RF.pop()},{}],GameUtils:[function(t,e,i){"use strict";cc._RF.push(e,"176c0uTiVtLeqkTRCKDVaaa","GameUtils"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./GameTypes");function o(t,e){return(t&e)==e}i.WriteString=function(t,e){var i=t.offset+2;t.writeString(e);var n=t.offset,o=t.offset-i;t.offset=i-2,t.writeShort(o),t.offset=n},i.ReadString=function(t){var e=t.readShort();if(0==e)return null;var i=t.limit;t.limit=t.offset+e;var n=t.toUTF8();return t.limit=i,t.offset+=e,n},i.SearchStates=o,i.RemoveStates=function(t,e){return t^e},i.GetRoomStageByPalyerStatus=function(t){var e=!1,i=!1,a=!1,r=!1,s=!1,c=!1,l=!1,h=!1;return o(t,n.PlayerGameStatus.EnteredRoom)&&(e=!0),o(t,n.PlayerGameStatus.ReadyGame)&&(i=!0),o(t,n.PlayerGameStatus.PlayedGame)&&(a=!0),o(t,n.PlayerGameStatus.GetedCard)&&(r=!0),o(t,n.PlayerGameStatus.SubmitedCard)&&(s=!0),o(t,n.PlayerGameStatus.Balanced)&&(c=!0),o(t,n.PlayerGameStatus.Offline),o(t,n.PlayerGameStatus.Exited)&&(l=!0),o(t,n.PlayerGameStatus.EnteredObserve)&&(h=!0),1==l?n.RoomStage.UnKnown:1==h?n.RoomStage.UnKnown:0==a?n.RoomStage.OrganizeGame:!e||!r||i||s||c?e&&r&&s&&!i&&!c?n.RoomStage.WaitCmpCards:e&&r&&s&&c&&!i?n.RoomStage.CmpCardsBalanced:e&&r&&s&&c&&i?n.RoomStage.WaitNextRoundGame:n.RoomStage.UnKnown:n.RoomStage.SelectCards},i.GetStatusNameStr=function(t){var e="";return o(t,n.PlayerGameStatus.EnteredRoom)&&(e+="|EnteredRoom"),o(t,n.PlayerGameStatus.GetedCard)&&(e+="|GetedCard"),o(t,n.PlayerGameStatus.PlayedGame)&&(e+="|PlayedGame"),o(t,n.PlayerGameStatus.SubmitedCard)&&(e+="|SubmitedCard"),o(t,n.PlayerGameStatus.Balanced)&&(e+="|Balanced"),o(t,n.PlayerGameStatus.ReadyGame)&&(e+="|ReadyGame"),e.length>0&&(e=e.substring(1,e.length)),e},cc._RF.pop()},{"./GameTypes":"GameTypes"}],GunLayout:[function(t,e,i){"use strict";cc._RF.push(e,"0e1dfPvpLZJ5on5TWngU4/z","GunLayout");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../../../../GameCompents/Layout"),r=t("../../../../../../GameCompents/TableLayout"),s=t("../../../../../../GameLibs/ScTweener/ScTweenerUtils"),c=cc._decorator,l=c.ccclass,h=c.property,u=c.executeInEditMode,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerSeatViewer=null,e.avatarboxNode=null,e.tableLayout=null,e}return n(e,t),e.prototype.update=function(){0},e.prototype.Layout=function(){var t=s.NodeLocalPositionToParent(this.avatarboxNode,this.node.parent);this.node.height=this.playerSeatViewer.height/1.5,this.node.width=this.playerSeatViewer.width/2.5,this.node.setPosition(t),this.tableLayout.Layout()},o([h(cc.Node)],e.prototype,"playerSeatViewer",void 0),o([h(cc.Node)],e.prototype,"avatarboxNode",void 0),o([h(r.default)],e.prototype,"tableLayout",void 0),e=o([l,u],e)}(a.default);i.default=d,cc._RF.pop()},{"../../../../../../GameCompents/Layout":"Layout","../../../../../../GameCompents/TableLayout":"TableLayout","../../../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils"}],HeadInfo:[function(t,e,i){"use strict";cc._RF.push(e,"f0ef3+L5OtCuJILl0Pq0+ug","HeadInfo");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.encode=function(t){var e=t.offset;t.offset=t.offset+4,t.writeShort(this.messageID),t.writeShort(this.cryptMethod),t.writeInt(this.uin),t.writeInt(this.groupID),t.writeInt(this.sequence);var i=t.offset-e,n=t.offset;t.offset=e,t.writeInt(i+this.messageLength),t.offset=n},e.prototype.decode=function(t){var e=t.offset;this.messageLength=t.readInt(),this.messageID=t.readShort(),this.cryptMethod=t.readShort(),this.uin=t.readInt(),this.groupID=t.readInt(),this.sequence=t.readInt();var i=t.offset-e;this.messageLength=this.messageLength-i},e}(t("./InfoBase").InfoBase);i.HeadInfo=o,cc._RF.pop()},{"./InfoBase":"InfoBase"}],Heap:[function(t,e,i){"use strict";cc._RF.push(e,"e519bbWpAVFSZ2/GuQpn+I6","Heap"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./util"),o=t("./arrays"),a=function(){function t(t){this.data=[],this.compare=t||n.defaultCompare}return t.prototype.leftChildIndex=function(t){return 2*t+1},t.prototype.rightChildIndex=function(t){return 2*t+2},t.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},t.prototype.siftUp=function(t){for(var e=this.parentIndex(t);t>0&&this.compare(this.data[e],this.data[t])>0;)o.swap(this.data,e,t),t=e,e=this.parentIndex(t)},t.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));e>=0&&this.compare(this.data[t],this.data[e])>0;)o.swap(this.data,e,t),t=e,e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},t.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},t.prototype.add=function(t){return!n.isUndefined(t)&&(this.data.push(t),this.siftUp(this.data.length-1),!0)},t.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},t.prototype.contains=function(t){var e=n.compareToEquals(this.compare);return o.contains(this.data,t,e)},t.prototype.size=function(){return this.data.length},t.prototype.isEmpty=function(){return this.data.length<=0},t.prototype.clear=function(){this.data.length=0},t.prototype.forEach=function(t){o.forEach(this.data,t)},t}();i.default=a,cc._RF.pop()},{"./arrays":"arrays","./util":"util"}],HttpHelp:[function(t,e,i){"use strict";cc._RF.push(e,"31174J5Ad5Iqa13TUX1/f4K","HttpHelp"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.Request=function(t,e){var i=new XMLHttpRequest;i.onload=function(){if(4==i.readyState&&i.status>=200&&i.status<400){var t=i.responseText;e(!0,t)}else e(!1,t)},i.open("GET",t,!0),i.send()},t}();i.HttpHelp=n,cc._RF.pop()},{}],InfoBase:[function(t,e,i){"use strict";cc._RF.push(e,"de5c7shgNpLmp9SwuTqZDlh","InfoBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.decode=function(t){},t.prototype.encode=function(t){},t}();i.InfoBase=n,cc._RF.pop()},{}],Layout:[function(t,e,i){"use strict";cc._RF.push(e,"d0605sO1sBNHaH+2wXSFgSB","Layout");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=(a.property,a.executeInEditMode),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.Layout=function(){},e=o([r,s],e)}(cc.Component);i.default=c,cc._RF.pop()},{}],LinkedDictionary:[function(t,e,i){"use strict";cc._RF.push(e,"7cdc5vT5nRFNov2u0RaV+ig","LinkedDictionary");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./util"),a=t("./Dictionary"),r=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),s=function(){function t(){this.key=null,this.value=null}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}();function c(t){return!t.next}var l=function(t){function e(e){var i=t.call(this,e)||this;return i.head=new s,i.tail=new s,i.head.next=i.tail,i.tail.prev=i.head,i}return n(e,t),e.prototype.appendToTail=function(t){var e=this.tail.prev;e.next=t,t.prev=e,t.next=this.tail,this.tail.prev=t},e.prototype.getLinkedDictionaryPair=function(t){if(!o.isUndefined(t)){var e="$"+this.toStr(t);return this.table[e]}},e.prototype.getValue=function(t){var e=this.getLinkedDictionaryPair(t);if(!o.isUndefined(e))return e.value},e.prototype.remove=function(e){var i=this.getLinkedDictionaryPair(e);if(!o.isUndefined(i))return t.prototype.remove.call(this,e),i.unlink(),i.value},e.prototype.clear=function(){t.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},e.prototype.replace=function(t,e){var i="$"+this.toStr(e.key);e.next=t.next,e.prev=t.prev,this.remove(t.key),e.prev.next=e,e.next.prev=e,this.table[i]=e,++this.nElements},e.prototype.setValue=function(t,e){if(!o.isUndefined(t)&&!o.isUndefined(e)){var i=this.getLinkedDictionaryPair(t),n=new r(t,e),a="$"+this.toStr(t);return o.isUndefined(i)?(this.appendToTail(n),this.table[a]=n,void++this.nElements):(this.replace(i,n),i.value)}},e.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(e)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),t},e.prototype.forEach=function(t){for(var e=this.head.next;!c(e);){if(!1===t(e.key,e.value))return;e=e.next}},e}(a.Dictionary);i.default=l,cc._RF.pop()},{"./Dictionary":"Dictionary","./util":"util"}],LinkedListEx:[function(t,e,i){"use strict";cc._RF.push(e,"5baf6QBhFhDqbUt4Ay/VJo+","LinkedListEx"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(t){this.Value=null,this.Previous=null,this.Next=null,this.Value=t}}();i.LinkedListNode=n;var o=function(){function t(){this.count=0}return t.prototype.Count=function(){return this.count},t.prototype.First=function(){return this.first},t.prototype.Last=function(){return this.last},t.prototype.Find=function(t){for(var e=this.first;null!=e;e=e.Next)if(e.Value==t)return e;return null},t.prototype.AddFirst=function(t){return this.AddBefore(null,t)},t.prototype.AddFirstNode=function(t){return this.AddBeforeNode(null,t)},t.prototype.AddLast=function(t){return this.AddAfter(null,t)},t.prototype.AddLastNode=function(t){return this.AddAfterNode(null,t)},t.prototype.AddBefore=function(t,e){var i=new n(e);return this.AddBeforeNode(t,i)},t.prototype.AddBeforeNode=function(t,e){return null==t&&(t=this.first),null==t?(this.first=e,this.last=e):t==this.first?(this.first=e,t.Previous=e,e.Next=t):(t.Previous.Next=e,e.Previous=t.Previous,t.Previous=e,e.Next=t),this.count++,e},t.prototype.AddAfter=function(t,e){var i=new n(e);return this.AddAfterNode(t,i)},t.prototype.AddAfterNode=function(t,e){return null==t&&(t=this.last),null==t?(this.first=e,this.last=e):t==this.last?(this.last=e,t.Next=e,e.Previous=t):(t.Next.Previous=e,e.Next=t.Next,t.Next=e,e.Previous=t),this.count++,e},t.prototype.Remove=function(t){var e=this.Find(t);this.RemoveNode(e)},t.prototype.RemoveNode=function(t){if(null!=t){var e=t.Previous,i=t.Next;null!=e?e.Next=i:this.first=i,null!=i?i.Previous=e:this.last=e,this.count--}},t.prototype.RemoveFirst=function(){this.RemoveNode(this.first)},t.prototype.RemoveLast=function(){this.RemoveNode(this.last)},t.prototype.Clear=function(){this.first=null,this.last=null,this.count=0},t}();i.LinkedListEx=o,cc._RF.pop()},{}],LinkedList:[function(t,e,i){"use strict";cc._RF.push(e,"792b14KIAtGRbVQoXwfijMk","LinkedList"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./util"),o=t("./arrays"),a=function(){function t(){this.firstNode=null,this.lastNode=null,this.nElements=0}return t.prototype.add=function(t,e){if(n.isUndefined(e)&&(e=this.nElements),e<0||e>this.nElements||n.isUndefined(t))return!1;var i=this.createNode(t);if(0===this.nElements||null===this.lastNode)this.firstNode=i,this.lastNode=i;else if(e===this.nElements)this.lastNode.next=i,this.lastNode=i;else if(0===e)i.next=this.firstNode,this.firstNode=i;else{var o=this.nodeAtIndex(e-1);if(null===o)return!1;i.next=o.next,o.next=i}return this.nElements++,!0},t.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},t.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},t.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);if(null!==e)return e.element},t.prototype.indexOf=function(t,e){var i=e||n.defaultEquals;if(n.isUndefined(t))return-1;for(var o=this.firstNode,a=0;null!==o;){if(i(o.element,t))return a;a++,o=o.next}return-1},t.prototype.contains=function(t,e){return this.indexOf(t,e)>=0},t.prototype.remove=function(t,e){var i=e||n.defaultEquals;if(this.nElements<1||n.isUndefined(t))return!1;for(var o=null,a=this.firstNode;null!==a;){if(i(a.element,t))return null===o?(this.firstNode=a.next,a===this.lastNode&&(this.lastNode=null)):a===this.lastNode?(this.lastNode=o,o.next=a.next,a.next=null):(o.next=a.next,a.next=null),this.nElements--,!0;o=a,a=a.next}return!1},t.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},t.prototype.equals=function(e,i){var o=i||n.defaultEquals;return e instanceof t&&(this.size()===e.size()&&this.equalsAux(this.firstNode,e.firstNode,o))},t.prototype.equalsAux=function(t,e,i){for(;null!==t&&null!==e;){if(!i(t.element,e.element))return!1;t=t.next,e=e.next}return!0},t.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements||null===this.firstNode||null===this.lastNode)){var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var i=this.nodeAtIndex(t-1);null===i?(e=this.firstNode.element,this.firstNode=this.firstNode.next):i.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=i),null!==i&&null!==i.next&&(e=i.next.element,i.next=i.next.next)}return this.nElements--,e}},t.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&!1!==t(e.element);)e=e.next},t.prototype.reverse=function(){for(var t=null,e=this.firstNode,i=null;null!==e;)i=e.next,e.next=t,t=e,e=i;i=this.firstNode,this.firstNode=this.lastNode,this.lastNode=i},t.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){return o.toString(this.toArray())},t.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,i=0;i<t&&null!==e;i++)e=e.next;return e},t.prototype.createNode=function(t){return{element:t,next:null}},t}();i.LinkedList=a,cc._RF.pop()},{"./arrays":"arrays","./util":"util"}],LoginInfo:[function(t,e,i){"use strict";cc._RF.push(e,"6f86d0lg91O2oMfXpvegfHh","LoginInfo");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../GameUtils"),a=t("./InfoBase"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.encode=function(t){t.writeInt32(this.uin)},e}(a.InfoBase);i.RequestLogin=r;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){if(this.resultID=t.readShort(),this.uin=t.readInt(),0==this.resultID)this.loginStatus=t.readInt(),this.groupID=t.readInt(),this.serverVersion=t.readInt(),this.serverConfigVersion=t.readInt(),this.resultDesc=o.ReadString(t),this.accountPlatform=t.readInt();else o.ReadString(t)},e}(a.InfoBase);i.LoginInfo=s,cc._RF.pop()},{"../../GameUtils":"GameUtils","./InfoBase":"InfoBase"}],Login:[function(t,e,i){"use strict";cc._RF.push(e,"651a5xJNU5JVqa1znZjC8Ss","Login");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../ResMgr/Pool/PrefabPool"),a=t("../../../GameTypes"),r=t("../../../../GameLibs/ScTweener/ScTweenerUtils"),s=t("../../../../GameLibs/ScTweener/ScTweenerRun"),c=t("../../Viewers/BgMask"),l=t("../../../../GameLibs/ScTask/GameTaskMgr"),h=t("../../../../GameLibs/ScTypes/ScObject"),u=t("../../../../GameCompents/MouseEvents"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.Destory=function(){c.BgMask.Hide(this.bgMask),o.PrefabPool.Instance().Push(this.loginNode,a.PrefabIdx.Login),this.loginNode=null},e.prototype.FadeIn=function(t){this.Show(),s.ScTweenerRun.DoAlpha(this.loginNode,0,0),s.ScTweenerRun.DoAlpha(this.loginNode,1,t)},e.prototype.FadeOut=function(t){s.ScTweenerRun.DoAlpha(this.loginNode,0,t).SetCallBackFunc(this.Destory.bind(this))},e.prototype.Show=function(){this.CreateLogin(this.parentNode)},e.prototype.CreateLogin=function(t){if(null==this.loginNode){this.loginNode=o.PrefabPool.Instance().Pop(a.PrefabIdx.Login),r.SetNodeParent(this.loginNode,t),this.loginNode.setPosition(cc.Vec3.ZERO),this.loginNode.active=!0,this.accountEnterViewerNode=this.loginNode.getChildByName("AccountEnterViewer"),this.accountEnterViewerNode.active=!1,this.playerLoginBtn=this.loginNode.getChildByName("PlayerLoginBtn"),this.enterAccountEditBox=this.accountEnterViewerNode.getChildByName("enterAccountBox").children[0].getComponent(cc.EditBox),this.loginBtnNode=this.accountEnterViewerNode.getChildByName("loginBtn"),this.regBtnNode=this.accountEnterViewerNode.getChildByName("regBtn");var e=this.playerLoginBtn.getComponent(u.default);e.MouseClickEvent=this.PressEnterGameBtn.bind(this),(e=this.loginBtnNode.getComponent(u.default)).MouseClickEvent=this.PressLoginBtn.bind(this),(e=this.regBtnNode.getComponent(u.default)).MouseClickEvent=this.PressRegBtn.bind(this)}},e.prototype.PressEnterGameBtn=function(){this.accountEnterViewerNode.active=!0,this.bgMask=c.BgMask.ShowAtBottom(this.accountEnterViewerNode),s.ScTweenerRun.DoLocalScale(this.accountEnterViewerNode,new cc.Vec3(.8,.8,.8),0),s.ScTweenerRun.DoLocalScale(this.accountEnterViewerNode,new cc.Vec3(1,1,1),.1),s.ScTweenerRun.DoAlpha(this.accountEnterViewerNode,0,0),s.ScTweenerRun.DoAlpha(this.accountEnterViewerNode,1,.1)},e.prototype.PressLoginBtn=function(){l.GameTaskMgr.Instance().SendMsg("LoginAccount",this.enterAccountEditBox.string)},e.prototype.PressRegBtn=function(){l.GameTaskMgr.Instance().SendMsg("RegAccount",this.enterAccountEditBox.string)},e}(h.ScObject);i.Login=d,cc._RF.pop()},{"../../../../GameCompents/MouseEvents":"MouseEvents","../../../../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr","../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../../GameLibs/ScTypes/ScObject":"ScObject","../../../GameTypes":"GameTypes","../../ResMgr/Pool/PrefabPool":"PrefabPool","../../Viewers/BgMask":"BgMask"}],MD5:[function(t,e,i){"use strict";cc._RF.push(e,"209b2BjM5lBRrphtoP+Qioc","MD5"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var i=this.rstr2binl(t);i.length>16&&(i=this.binl_md5(i,8*t.length));for(var n=Array(16),o=Array(16),a=0;a<16;a++)n[a]=909522486^i[a],o[a]=1549556828^i[a];var r=this.binl_md5(n.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(o.concat(r),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(t){this.hexcase=0}for(var e,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<t.length;o++)e=t.charCodeAt(o),n+=i.charAt(e>>>4&15)+i.charAt(15&e);return n},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(t){this.b64pad=""}for(var e="",i=t.length,n=0;n<i;n+=3)for(var o=t.charCodeAt(n)<<16|(n+1<i?t.charCodeAt(n+1)<<8:0)|(n+2<i?t.charCodeAt(n+2):0),a=0;a<4;a++)8*n+6*a>8*t.length?e+=this.b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-a)&63);return e},t.prototype.rstr2any=function(t,e){var i,n,o,a,r,s=e.length,c=Array(Math.ceil(t.length/2));for(i=0;i<c.length;i++)c[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),h=Array(l);for(n=0;n<l;n++){for(r=Array(),a=0,i=0;i<c.length;i++)a=(a<<16)+c[i],a-=(o=Math.floor(a/s))*s,(r.length>0||o>0)&&(r[r.length]=o);h[n]=a,c=r}var u="";for(i=h.length-1;i>=0;i--)u+=e.charAt(h[i]);return u},t.prototype.str2rstr_utf8=function(t){for(var e,i,n="",o=-1;++o<t.length;)e=t.charCodeAt(o),i=o+1<t.length?t.charCodeAt(o+1):0,55296<=e&&e<=56319&&56320<=i&&i<=57343&&(e=65536+((1023&e)<<10)+(1023&i),o++),e<=127?n+=String.fromCharCode(e):e<=2047?n+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n},t.prototype.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},t.prototype.binl2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,n=-271733879,o=-1732584194,a=271733878,r=0;r<t.length;r+=16){var s=i,c=n,l=o,h=a;i=this.md5_ff(i,n,o,a,t[r+0],7,-680876936),a=this.md5_ff(a,i,n,o,t[r+1],12,-389564586),o=this.md5_ff(o,a,i,n,t[r+2],17,606105819),n=this.md5_ff(n,o,a,i,t[r+3],22,-1044525330),i=this.md5_ff(i,n,o,a,t[r+4],7,-176418897),a=this.md5_ff(a,i,n,o,t[r+5],12,1200080426),o=this.md5_ff(o,a,i,n,t[r+6],17,-1473231341),n=this.md5_ff(n,o,a,i,t[r+7],22,-45705983),i=this.md5_ff(i,n,o,a,t[r+8],7,1770035416),a=this.md5_ff(a,i,n,o,t[r+9],12,-1958414417),o=this.md5_ff(o,a,i,n,t[r+10],17,-42063),n=this.md5_ff(n,o,a,i,t[r+11],22,-1990404162),i=this.md5_ff(i,n,o,a,t[r+12],7,1804603682),a=this.md5_ff(a,i,n,o,t[r+13],12,-40341101),o=this.md5_ff(o,a,i,n,t[r+14],17,-1502002290),n=this.md5_ff(n,o,a,i,t[r+15],22,1236535329),i=this.md5_gg(i,n,o,a,t[r+1],5,-165796510),a=this.md5_gg(a,i,n,o,t[r+6],9,-1069501632),o=this.md5_gg(o,a,i,n,t[r+11],14,643717713),n=this.md5_gg(n,o,a,i,t[r+0],20,-373897302),i=this.md5_gg(i,n,o,a,t[r+5],5,-701558691),a=this.md5_gg(a,i,n,o,t[r+10],9,38016083),o=this.md5_gg(o,a,i,n,t[r+15],14,-660478335),n=this.md5_gg(n,o,a,i,t[r+4],20,-405537848),i=this.md5_gg(i,n,o,a,t[r+9],5,568446438),a=this.md5_gg(a,i,n,o,t[r+14],9,-1019803690),o=this.md5_gg(o,a,i,n,t[r+3],14,-187363961),n=this.md5_gg(n,o,a,i,t[r+8],20,1163531501),i=this.md5_gg(i,n,o,a,t[r+13],5,-1444681467),a=this.md5_gg(a,i,n,o,t[r+2],9,-51403784),o=this.md5_gg(o,a,i,n,t[r+7],14,1735328473),n=this.md5_gg(n,o,a,i,t[r+12],20,-1926607734),i=this.md5_hh(i,n,o,a,t[r+5],4,-378558),a=this.md5_hh(a,i,n,o,t[r+8],11,-2022574463),o=this.md5_hh(o,a,i,n,t[r+11],16,1839030562),n=this.md5_hh(n,o,a,i,t[r+14],23,-35309556),i=this.md5_hh(i,n,o,a,t[r+1],4,-1530992060),a=this.md5_hh(a,i,n,o,t[r+4],11,1272893353),o=this.md5_hh(o,a,i,n,t[r+7],16,-155497632),n=this.md5_hh(n,o,a,i,t[r+10],23,-1094730640),i=this.md5_hh(i,n,o,a,t[r+13],4,681279174),a=this.md5_hh(a,i,n,o,t[r+0],11,-358537222),o=this.md5_hh(o,a,i,n,t[r+3],16,-722521979),n=this.md5_hh(n,o,a,i,t[r+6],23,76029189),i=this.md5_hh(i,n,o,a,t[r+9],4,-640364487),a=this.md5_hh(a,i,n,o,t[r+12],11,-421815835),o=this.md5_hh(o,a,i,n,t[r+15],16,530742520),n=this.md5_hh(n,o,a,i,t[r+2],23,-995338651),i=this.md5_ii(i,n,o,a,t[r+0],6,-198630844),a=this.md5_ii(a,i,n,o,t[r+7],10,1126891415),o=this.md5_ii(o,a,i,n,t[r+14],15,-1416354905),n=this.md5_ii(n,o,a,i,t[r+5],21,-57434055),i=this.md5_ii(i,n,o,a,t[r+12],6,1700485571),a=this.md5_ii(a,i,n,o,t[r+3],10,-1894986606),o=this.md5_ii(o,a,i,n,t[r+10],15,-1051523),n=this.md5_ii(n,o,a,i,t[r+1],21,-2054922799),i=this.md5_ii(i,n,o,a,t[r+8],6,1873313359),a=this.md5_ii(a,i,n,o,t[r+15],10,-30611744),o=this.md5_ii(o,a,i,n,t[r+6],15,-1560198380),n=this.md5_ii(n,o,a,i,t[r+13],21,1309151649),i=this.md5_ii(i,n,o,a,t[r+4],6,-145523070),a=this.md5_ii(a,i,n,o,t[r+11],10,-1120210379),o=this.md5_ii(o,a,i,n,t[r+2],15,718787259),n=this.md5_ii(n,o,a,i,t[r+9],21,-343485551),i=this.safe_add(i,s),n=this.safe_add(n,c),o=this.safe_add(o,l),a=this.safe_add(a,h)}return[i,n,o,a]},t.prototype.md5_cmn=function(t,e,i,n,o,a){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,a)),o),i)},t.prototype.md5_ff=function(t,e,i,n,o,a,r){return this.md5_cmn(e&i|~e&n,t,e,o,a,r)},t.prototype.md5_gg=function(t,e,i,n,o,a,r){return this.md5_cmn(e&n|i&~n,t,e,o,a,r)},t.prototype.md5_hh=function(t,e,i,n,o,a,r){return this.md5_cmn(e^i^n,t,e,o,a,r)},t.prototype.md5_ii=function(t,e,i,n,o,a,r){return this.md5_cmn(i^(e|~n),t,e,o,a,r)},t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();i.MD5=n,cc._RF.pop()},{}],MatchingActionInfo:[function(t,e,i){"use strict";cc._RF.push(e,"1c648LRYvZHAoYylQwjd8zS","MatchingActionInfo");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./InfoBase"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_cStartOrStop=0,e}return n(e,t),e.prototype.encode=function(t){t.writeInt(this.m_iUin),t.writeByte(this.m_cStartOrStop)},e}(o.InfoBase);i.RequestMatchingAction=a;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){this.m_iResultID=t.readShort(),this.m_iUin=t.readInt()},e}(o.InfoBase);i.ResponseMatchingAction=r;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){this.m_iResultID=t.readShort(),this.m_iUin=t.readInt()},e}(o.InfoBase);i.ResponseNotifyMatching=s,cc._RF.pop()},{"./InfoBase":"InfoBase"}],MouseEvents:[function(t,e,i){"use strict";cc._RF.push(e,"5e2389B3fJIqqmXcll/7bJb","MouseEvents");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../GameLibs/ScUtils/ScUtils"),r=t("../GameLibs/Collections/Dictionary"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.IsFirstMouseDownCheckDrag=!1,e.IsComputeMouseMoveInfo=!1,e.mouseMoveDir=null,e.isProcessRespEventNode=!1,e.eventProcessDict=new r.Dictionary,e.clickedCount=0,e.isDragging=!1,e.isCurtCheckDrag=!1,e.isEntered=!1,e.prevMousePos=null,e}return n(e,t),e.prototype.IsDraging=function(){return this.isDragging},e.prototype.IsEntered=function(){return this.isEntered},e.prototype.onLoad=function(){this.Clear(),this.RegEvent()},e.prototype.onDestroy=function(){this.Clear(),this.UnRegEvent()},e.prototype.RegEvent=function(){this.RegEventProcess(cc.Node.EventType.TOUCH_START,this.OnMouseDown.bind(this)),this.RegEventProcess(cc.Node.EventType.TOUCH_END,this.OnMouseUp.bind(this)),this.RegEventProcess(cc.Node.EventType.TOUCH_CANCEL,this.OnMouseLeave.bind(this)),this.RegEventProcess(cc.Node.EventType.TOUCH_MOVE,this.OnMouseMove.bind(this))},e.prototype.UnRegEvent=function(){this.UnRegEventProcess(cc.Node.EventType.TOUCH_START),this.UnRegEventProcess(cc.Node.EventType.TOUCH_END),this.UnRegEventProcess(cc.Node.EventType.TOUCH_CANCEL),this.UnRegEventProcess(cc.Node.EventType.TOUCH_MOVE)},e.prototype.RegEventProcess=function(t,e){this.eventProcessDict.setValue(t,e)},e.prototype.UnRegEventProcess=function(t){this.eventProcessDict.remove(t)},e.prototype.ProcessEvent=function(t,e){if(null==this.eventProcessDict){return 3,void cc.log("eventProcessDict\u7a7a\uff01\uff01")}var i=this.eventProcessDict.getValue(t);null!=i&&i(e)},e.prototype.Clear=function(){this.data=null,this.mouseMoveSpeed=null,this.mouseMoveDir=null,this.eventMouse=null,this.clickedCount=0,this.isDragging=!1,this.isCurtCheckDrag=!1,this.isEntered=!1,this.prevMousePos=null,this.prevTime=null},e.prototype.OnMouseDown=function(t){this.eventMouse=t,this.downMousePos=t.getLocation(),this.isDragging=!1,0==this.isEntered&&(this.isEntered=!0,null!=this.MouseEnterEvent&&this.MouseEnterEvent(this)),0==this.IsFirstMouseDownCheckDrag?this.isCurtCheckDrag=!1:this.isCurtCheckDrag=!0,this.clickedCount>1&&(this.clickedCount=0),0==this.clickedCount?this.doubleClickStartTime=a.TimeMS():1==this.clickedCount&&(this.doubleClickFirstTime=a.TimeMS()),null!=this.MouseDownEvent&&this.MouseDownEvent(this)},e.prototype.OnMouseUp=function(t){if(this.eventMouse=t,this.isEntered=!1,null!=this.MouseUpEvent&&this.MouseUpEvent(this),1!=this.isDragging){if(this.isCurtCheckDrag=!1,this.isDragging=!1,this.clickedCount++,2==this.clickedCount)if(a.TimeMS()-this.doubleClickStartTime<440){if(this.clickedCount=0,null!=this.MouseDoubleClickEvent)return void this.MouseDoubleClickEvent(this)}else this.clickedCount--,this.doubleClickStartTime=this.doubleClickFirstTime;null!=this.MouseClickEvent&&this.MouseClickEvent(this)}else this.isDragging=!1},e.prototype.OnMouseLeave=function(t){this.isDragging=!1,this.isCurtCheckDrag=!1,this.isEntered=!1},e.prototype.OnMouseMove=function(t){if(this.eventMouse=t,this.IsComputeMouseMoveInfo){var e=t.getLocation();this.ComputeMouseMoveSpeedAndDirInfo(e)}if(0==this.isEntered)return this.isEntered=!0,null!=this.MouseEnterEvent&&this.MouseEnterEvent(this),this.isCurtCheckDrag=!0,this.isDragging=!0,void(null!=this.MouseDragEvent&&this.MouseDragEvent(this));1!=this.isDragging&&0!=this.isCurtCheckDrag?(this.eventMouse=t,t.getLocation().sub(this.downMousePos).magSqr()>=49&&(this.isDragging=!0,null!=this.MouseDragEvent&&this.MouseDragEvent(this)),null!=this.MouseMoveEvent&&this.MouseMoveEvent(this)):null!=this.MouseMoveEvent&&this.MouseMoveEvent(this)},e.prototype.ComputeMouseMoveSpeedAndDirInfo=function(t){if(null==this.prevMousePos)return this.prevMousePos=t,this.prevTime=a.Time(),this.mouseMoveSpeed=null,void(this.mouseMoveDir=null);var e=a.Time(),i=t.sub(this.prevMousePos),n=i.mag();if(n<20)return e-this.prevTime>.25&&(this.prevMousePos=t,this.prevTime=e),this.mouseMoveSpeed=null,void(this.mouseMoveDir=null);var o=e-this.prevTime;i.normalizeSelf(),this.mouseMoveDir=new cc.Vec3(i.x,i.y,0),this.mouseMoveSpeed=n/o,this.prevMousePos=t,this.prevTime=e},o([l],e.prototype,"IsFirstMouseDownCheckDrag",void 0),o([l],e.prototype,"IsComputeMouseMoveInfo",void 0),e=o([c],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../GameLibs/Collections/Dictionary":"Dictionary","../GameLibs/ScUtils/ScUtils":"ScUtils"}],MsgBox:[function(t,e,i){"use strict";cc._RF.push(e,"bb04bDMLwFMUY4tV4RJcLm6","MsgBox"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=t("../ResMgr/Pool/PrefabPool"),a=t("../../GameTypes"),r=t("../../../GameLibs/ScTweener/ScTweenerUtils"),s=t("../../../GameLibs/ScTweener/ScTweenerRun"),c=t("../../../GameLibs/ScTask/GameTaskMgr"),l=t("../../../GameCompents/MouseEvents");(function(t){t[t.None=0]="None",t[t.ButtonOK=1]="ButtonOK",t[t.ButtonCancel=2]="ButtonCancel"})(n=i.MsgBoxBtnType||(i.MsgBoxBtnType={}));var h=function(){function t(){}return t.Show=function(e,i,n,o){return null==this.parent?null:null!=o&&o>0?(c.GameTaskMgr.Instance().PostTask(this.ShowMsgTask,[e,i,n,t.parent],null,1e3*o),null):t._Show(e,i,n,t.parent)},t._Show=function(e,i,o,a){null==o&&(o=0);var r=t.CreateMsgBox(a);r.getChildByName("ContentText").getComponent(cc.Label).string=e;var c,h=r.getChildByName("BtnLayout"),u=h.getChildByName("btnOk"),d=h.getChildByName("btnCancel");(u.active=!1,d.active=!1,(o&n.ButtonOK)==n.ButtonOK)&&(u.active=!0,(c=u.getComponent(l.default)).MouseClickEvent=this.ClickedBtnOk,c.data=i);(o&n.ButtonCancel)==n.ButtonCancel&&(d.active=!0,(c=d.getComponent(l.default)).MouseClickEvent=this.ClickedBtnCancel);return s.ScTweenerRun.DoLocalScale(r,new cc.Vec3(.8,.8,.8),0),s.ScTweenerRun.DoLocalScale(r,new cc.Vec3(1,1,1),.1),s.ScTweenerRun.DoAlpha(r,0,0),s.ScTweenerRun.DoAlpha(r,1,.1),null!=t.mask&&0==t.mask.active&&(t.mask.active=!0,s.ScTweenerRun.DoAlpha(t.mask,0,0),s.ScTweenerRun.DoAlpha(t.mask,.5,.1)),r},t.ShowMsgTask=function(e){t._Show(e[0],e[1],e[2],e[3])},t.ClickedBtnOk=function(e){null!=e.data&&(0,e.data)();t.Hide(e.node.parent.parent)},t.ClickedBtnCancel=function(e){t.Hide(e.node.parent.parent)},t.Hide=function(e){null!=e&&(s.ScTweenerRun.DoAlpha(e,0,.1).SetCallBackFunc(t.TweenerAnimEnded,e),s.ScTweenerRun.DoLocalScale(e,new cc.Vec3(.8,.8,.8),.1),null!=t.mask&&(0==t.parent.children.length||1==t.parent.children.length&&t.parent.children[0]==t.mask)&&s.ScTweenerRun.DoAlpha(t.mask,0,.1))},t.TweenerAnimEnded=function(e){o.PrefabPool.Instance().Push(e,a.PrefabIdx.MsgBox),(0==t.parent.children.length||1==t.parent.children.length&&t.parent.children[0]==t.mask)&&(t.mask.active=!1)},t.CreateMsgBox=function(t){var e=o.PrefabPool.Instance().Pop(a.PrefabIdx.MsgBox);return r.SetNodeParent(e,t),e.setPosition(cc.Vec3.ZERO),e.active=!0,e},t}();i.MsgBox=h,cc._RF.pop()},{"../../../GameCompents/MouseEvents":"MouseEvents","../../../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr","../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../GameTypes":"GameTypes","../ResMgr/Pool/PrefabPool":"PrefabPool"}],MsgProcesser:[function(t,e,i){"use strict";cc._RF.push(e,"902e84viT1BJIzniVoTc/fM","MsgProcesser");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ScNetTypes"),a=t("../ByteBuffer/bytebuffer"),r=t("../ScTypes/ScObject"),s=t("../Collections/Dictionary"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(r.ScObject);i.BaseMsgProcesser=c;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MsgLogCB=null,e.msgFuncMap=new s.Dictionary,e.socketEventInfoDict=new s.Dictionary,e.isDecryptData=!1,e.customData=null,e}return n(e,t),e.prototype.SetCustomData=function(t){this.customData=t},e.prototype.SetIsDecryptData=function(t){this.isDecryptData=t},e.prototype.RegSocketEvent=function(t,e,i){if(null!=e){this.socketEventInfoDict.containsKey(t)||this.socketEventInfoDict.setValue(t,new Array);var n=this.socketEventInfoDict.getValue(t);return-1==this.FindRegSocketEventInfoIdx(n,e,i)&&n.push([e,i]),0}return 1},e.prototype.UnRegSocketEventFunc=function(t,e,i){if(null!=i||null!=t){var n=this.socketEventInfoDict.getValue(t);if(null!=n){var o=this.FindRegSocketEventInfoIdx(n,e,i);1==o&&n.splice(o,1)}}else this.UnRegSocketEvent(t)},e.prototype.UnRegSocketEvent=function(t){this.socketEventInfoDict.remove(t)},e.prototype.UnRegAllSocketEvent=function(){this.socketEventInfoDict.clear()},e.prototype.FindRegSocketEventInfoIdx=function(t,e,i){for(var n=0;n<t.length;n++)if(t[n][1]==i&&t[n][0]==e)return n;return-1},e.prototype.RegMsg=function(t,e){null!=e&&(e!=this.msgFuncMap.getValue(t)&&this.msgFuncMap.setValue(t,e))},e.prototype.UnRegMsg=function(t){this.msgFuncMap.remove(t)},e.prototype.UnRegAllMsg=function(){this.msgFuncMap.clear()},e.prototype.IsSingleFrame=function(t){return!1},e.prototype.Decrypt=function(t,e,i){return e.copyTo(i),0},e.prototype.UnPack=function(t,e){switch(t){case o.SocketEvent.EV_SOCKET_RECV:e.DataTransMode()==o.DataTransMode.MODE_PACK?this.ProcessMsg(e):this.ProcessSocketEvent(t,e);break;default:this.ProcessSocketEvent(t,e)}},e.prototype.ProcessSocketEvent=function(t,e){var i;if(null!=(i=this.socketEventInfoDict.getValue(t)))for(var n=0;n<i.length;n++){if(0==i[n][0].bind(i[n][1])(e,e.GetRecvedPack()))break}},e.prototype.ProcessMsg=function(t){var e=t.GetRecvedPack(),i=this.ReadHeaderData(e);if(this.IsSingleFrame(i))this._ProcessSingleFrame(t,i,e);else if(this.isDecryptData){var n=new a;this.Decrypt(i,e,n),n.offset=0,this._ProcessMsg(this.GetMsgTypeValue(i),t,i,n)}else this._ProcessMsg(this.GetMsgTypeValue(i),t,i,e);e.offset=0},e.prototype._ProcessMsg=function(t,e,i,n){var o=this.msgFuncMap.getValue(t);null!=o?(o(e,i,n,this.customData),null!=this.MsgLogCB&&this.MsgLogCB(t,!0)):null!=this.MsgLogCB&&this.MsgLogCB(t,!1)},e.prototype._ProcessSingleFrame=function(t,e,i){if(null==t.joinFrameDataStream)return t.joinFrameDataStream=new a,t.joinFrameHeader=e,void t.joinFrameDataStream.writeBytes(i);var n=this.ProcessSingleDataFrame(t.joinFrameHeader,t.joinFrameDataStream,e,i);if(n){var o=t.joinFrameHeader;if(t.joinFrameDataStream.offset=0,this.isDecryptData){var r=new a;this.Decrypt(o,t.joinFrameDataStream,r),r.offset=0,this._ProcessMsg(this.GetMsgTypeValue(o),t,o,r)}else this._ProcessMsg(this.GetMsgTypeValue(o),t,o,t.joinFrameDataStream);t.joinFrameHeader=null,t.joinFrameDataStream=null}return n},e}(c);i.MsgProcesser=l,cc._RF.pop()},{"../ByteBuffer/bytebuffer":"bytebuffer","../Collections/Dictionary":"Dictionary","../ScTypes/ScObject":"ScObject","./ScNetTypes":"ScNetTypes"}],MultiDictionary:[function(t,e,i){"use strict";cc._RF.push(e,"3bb7fi9cs9G076iLIXFD1du","MultiDictionary"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./util"),o=t("./arrays"),a=t("./Dictionary"),r=function(){function t(t,e,i){void 0===i&&(i=!1),this.dict=new a.Dictionary(t),this.equalsF=e||n.defaultEquals,this.allowDuplicate=i}return t.prototype.getValue=function(t){var e=this.dict.getValue(t);return n.isUndefined(e)?[]:o.copy(e)},t.prototype.setValue=function(t,e){if(n.isUndefined(t)||n.isUndefined(e))return!1;var i=this.dict.getValue(t);return n.isUndefined(i)?(this.dict.setValue(t,[e]),!0):!(!this.allowDuplicate&&o.contains(i,e,this.equalsF))&&(i.push(e),!0)},t.prototype.remove=function(t,e){if(n.isUndefined(e)){var i=this.dict.remove(t);return!n.isUndefined(i)}var a=this.dict.getValue(t);return!(n.isUndefined(a)||!o.remove(a,e,this.equalsF))&&(0===a.length&&this.dict.remove(t),!0)},t.prototype.keys=function(){return this.dict.keys()},t.prototype.values=function(){for(var t=[],e=0,i=this.dict.values();e<i.length;e++)for(var n=0,o=i[e];n<o.length;n++){var a=o[n];t.push(a)}return t},t.prototype.containsKey=function(t){return this.dict.containsKey(t)},t.prototype.clear=function(){this.dict.clear()},t.prototype.size=function(){return this.dict.size()},t.prototype.isEmpty=function(){return this.dict.isEmpty()},t}();i.default=r,cc._RF.pop()},{"./Dictionary":"Dictionary","./arrays":"arrays","./util":"util"}],MultiRootTree:[function(t,e,i){"use strict";var n;cc._RF.push(e,"125adm3+0xC4LSdViBbZolj","MultiRootTree"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER",t[t.INSIDE_AT_END=2]="INSIDE_AT_END",t[t.INSIDE_AT_START=3]="INSIDE_AT_START"}(n||(n={}));var o=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.rootIds=t,this.nodes=e,this.initRootIds(),this.initNodes()}return t.prototype.initRootIds=function(){for(var t=0,e=this.rootIds;t<e.length;t++){var i=e[t];this.createEmptyNodeIfNotExist(i)}},t.prototype.initNodes=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var e=0,i=this.nodes[t];e<i.length;e++){var n=i[e];this.createEmptyNodeIfNotExist(n)}},t.prototype.createEmptyNodeIfNotExist=function(t){this.nodes[t]||(this.nodes[t]=[])},t.prototype.getRootIds=function(){return this.rootIds.slice()},t.prototype.getNodes=function(){var t={};for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(t[e]=this.nodes[e].slice());return t},t.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},t.prototype.toObject=function(){return this.getObject()},t.prototype.flatten=function(){for(var t=this,e=[],i=0;i<this.rootIds.length;i++){var n=this.rootIds[i];e.push({id:n,level:0,hasParent:!1,childrenCount:0}),c(n,this.nodes,e,0)}for(var o=0,a=e;o<a.length;o++){var r=a[o];r.childrenCount=s(r.id)}return e;function s(e){return t.nodes[e]?t.nodes[e].length:0}function c(t,e,i,n){if(void 0===n&&(n=0),t&&e&&i&&e[t]){n++;for(var o=e[t],a=0;a<o.length;a++){var r=o[a];i.push({id:r,level:n,hasParent:!0}),c(r,e,i,n)}n--}}},t.prototype.moveIdBeforeId=function(t,e){return this.moveId(t,e,n.BEFORE)},t.prototype.moveIdAfterId=function(t,e){return this.moveId(t,e,n.AFTER)},t.prototype.moveIdIntoId=function(t,e,i){return void 0===i&&(i=!0),i?this.moveId(t,e,n.INSIDE_AT_START):this.moveId(t,e,n.INSIDE_AT_END)},t.prototype.swapRootIdWithRootId=function(t,e){var i=this.findRootId(t),n=this.findRootId(e);this.swapRootPositionWithRootPosition(i,n)},t.prototype.swapRootPositionWithRootPosition=function(t,e){var i=this.rootIds[e];this.rootIds[e]=this.rootIds[t],this.rootIds[t]=i},t.prototype.deleteId=function(t){this.rootDeleteId(t),this.nodeAndSubNodesDelete(t),this.nodeRefrencesDelete(t)},t.prototype.insertIdBeforeId=function(t,e){var i=this.findRootId(t);for(var n in i>-1&&this.insertIdIntoRoot(e,i),this.nodes)if(this.nodes.hasOwnProperty(n)){var o=this.findNodeId(n,t);o>-1&&this.insertIdIntoNode(n,e,o)}},t.prototype.insertIdAfterId=function(t,e){var i=this.findRootId(t);for(var n in i>-1&&this.insertIdIntoRoot(e,i+1),this.nodes)if(this.nodes.hasOwnProperty(n)){var o=this.findNodeId(n,t);o>-1&&this.insertIdIntoNode(n,e,o+1)}},t.prototype.insertIdIntoId=function(t,e){this.nodeInsertAtEnd(t,e),this.nodes[e]=[]},t.prototype.insertIdIntoRoot=function(t,e){if(void 0===e)this.rootInsertAtEnd(t);else if(e<0){var i=this.rootIds.length;this.rootIds.splice(e+i+1,0,t)}else this.rootIds.splice(e,0,t);this.nodes[t]=this.nodes[t]||[]},t.prototype.insertIdIntoNode=function(t,e,i){if(this.nodes[t]=this.nodes[t]||[],this.nodes[e]=this.nodes[e]||[],void 0===i)this.nodeInsertAtEnd(t,e);else if(i<0){var n=this.nodes[t].length;this.nodes[t].splice(i+n+1,0,e)}else this.nodes[t].splice(i,0,e)},t.prototype.moveId=function(t,e,i){var o=t,a=this.findRootId(o);for(var r in this.nodes[e]&&e,this.nodes)if(this.nodes.hasOwnProperty(r)){this.findNodeId(r,e);break}var s=e,c=this.findRootId(s);for(var r in this.nodes[e]&&e,this.nodes)if(this.nodes.hasOwnProperty(r)){this.findNodeId(r,e);break}if(a>-1)if(c>-1)switch(this.rootDelete(a),c>a&&c--,i){case n.BEFORE:this.insertIdIntoRoot(o,c);break;case n.AFTER:this.insertIdIntoRoot(o,c+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(s,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(s,o)}else for(var r in this.rootDelete(a),this.nodes){if(this.nodes.hasOwnProperty(r))if((l=this.findNodeId(r,s))>-1){switch(i){case n.BEFORE:this.insertIdIntoNode(r,o,l);break;case n.AFTER:this.insertIdIntoNode(r,o,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(s,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(s,o)}break}}else if(c>-1){for(var r in this.nodes){if(this.nodes.hasOwnProperty(r))if((l=this.findNodeId(r,o))>-1){this.nodeDeleteAtIndex(r,l);break}}switch(i){case n.BEFORE:this.insertIdIntoRoot(o,c);break;case n.AFTER:this.insertIdIntoRoot(o,c+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(s,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(s,o)}}else{for(var r in this.nodes){if(this.nodes.hasOwnProperty(r))if((l=this.findNodeId(r,o))>-1){this.nodeDeleteAtIndex(r,l);break}}for(var r in this.nodes){var l;if(this.nodes.hasOwnProperty(r))if((l=this.findNodeId(r,s))>-1){switch(i){case n.BEFORE:this.insertIdIntoNode(r,o,l);break;case n.AFTER:this.insertIdIntoNode(r,o,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(s,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(s,o)}break}}}},t.prototype.swapArrayElements=function(t,e,i){var n=t[e];return t[e]=t[i],t[i]=n,t},t.prototype.rootDeleteId=function(t){var e=this.findRootId(t);e>-1&&this.rootDelete(e)},t.prototype.nodeAndSubNodesDelete=function(t){for(var e=[],i=0;i<this.nodes[t].length;i++){var n=this.nodes[t][i];this.nodeAndSubNodesDelete(n),e.push(t)}this.nodeDelete(t);for(i=0;i<e.length;i++)this.nodeDelete(e[i])},t.prototype.nodeRefrencesDelete=function(t){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var i=0;i<this.nodes[e].length;i++){this.nodes[e][i]===t&&this.nodeDeleteAtIndex(e,i)}},t.prototype.nodeDelete=function(t){delete this.nodes[t]},t.prototype.findRootId=function(t){return this.rootIds.indexOf(t)},t.prototype.findNodeId=function(t,e){return this.nodes[t].indexOf(e)},t.prototype.findNode=function(t){return this.nodes[t]},t.prototype.nodeInsertAtStart=function(t,e){this.nodes[t].unshift(e)},t.prototype.nodeInsertAtEnd=function(t,e){this.nodes[t].push(e)},t.prototype.rootDelete=function(t){this.rootIds.splice(t,1)},t.prototype.nodeDeleteAtIndex=function(t,e){this.nodes[t].splice(e,1)},t.prototype.rootInsertAtStart=function(t){this.rootIds.unshift(t)},t.prototype.rootInsertAtEnd=function(t){this.rootIds.push(t)},t}();i.default=o,cc._RF.pop()},{}],OrganizeGameStageAction:[function(t,e,i){"use strict";cc._RF.push(e,"70a5foLXbtFu6QxjoC5zuWb","OrganizeGameStageAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../GameTypes"),r=t("../../../ResMgr/Pool/PrefabPool"),s=t("../../../../../GameLibs/ScTweener/ScTweenerUtils"),c=t("../../../../../GameLibs/ScTweener/ScTweenerRun"),l=t("../../../../../GameLibs/ScTask/GameTaskMgr"),h=t("../../../../../GameCompents/MouseEvents"),u=function(t){function e(){var e=t.call(this)||this;return e.isFirstEnterStage=!0,e.isDirectEnterStage=!1,e.isImmediateApplyPlayerGameStatus=!0,e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,2),e.AddStateChildAction(0,e.State0.bind(e)),e}return n(e,t),e.prototype._BundleData=function(){return[this.isFirstEnterStage,this.isDirectEnterStage,this.isImmediateApplyPlayerGameStatus,this.timeScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.isFirstEnterStage=t[0],this.isDirectEnterStage=t[1],this.isImmediateApplyPlayerGameStatus=t[2],this.timeScale=t[3])},e.prototype.State0=function(){if(null==this.data.roomNode&&this.data.CreateRoom(this.data.parentNode),this.data.roomMasterUIN==this.data.players[0].uin)null==this.data.btnStartGame&&(this.CreateStartGameBtn(),c.ScTweenerRun.DoAlpha(this.data.btnStartGame,0,0),c.ScTweenerRun.DoAlpha(this.data.btnStartGame,1,.2),c.ScTweenerRun.DoLocalScale(this.data.btnStartGame,cc.Vec3.ONE,.1));else if(null==this.data.btnReady&&(this.CreateReadyBtn(),c.ScTweenerRun.DoAlpha(this.data.btnReady,0,0),c.ScTweenerRun.DoAlpha(this.data.btnReady,1,.2),c.ScTweenerRun.DoLocalScale(this.data.btnReady,cc.Vec3.ONE,.1)),this.data.players[0].IsChangedGameStatus()||this.data.players[0].IsNewedGameStatus()){var t=this.data.btnReady.children[0].children[0].getComponent(cc.Label);this.data.players[0].IsHavGameStatus(a.PlayerGameStatus.ReadyGame)?t.string="\u53d6\u6d88\u51c6\u5907":t.string="\u51c6\u5907"}this.data.CreatePlayerSeatViewer(0),this.data.RefreshPlayerSeatViewer(0,this.timeScale),this.isImmediateApplyPlayerGameStatus&&this.data.players[0].AlppyChangedGameStatus(),this.GotoState(this.IdleState())},e.prototype.CreateStartGameBtn=function(){if(null==this.data.btnStartGame){this.data.btnStartGame=r.PrefabPool.Instance().Pop(a.PrefabIdx.BtnStartGame),this.data.btnStartGame.active=!0,this.data.btnStartGame.getComponent(h.default).MouseClickEvent=this.PressStartGameBtn.bind(this);var t=s.GetNodeLocalPosition(this.data.btnStartGame);s.SetNodeParent(this.data.btnStartGame,this.data.roomNode),this.data.btnStartGame.setPosition(t)}},e.prototype.CreateReadyBtn=function(){if(null==this.data.btnReady){this.data.btnReady=r.PrefabPool.Instance().Pop(a.PrefabIdx.BtnReady),this.data.btnReady.active=!0,this.data.btnReady.getComponent(h.default).MouseClickEvent=this.PressReadyBtn.bind(this);var t=s.GetNodeLocalPosition(this.data.btnReady);s.SetNodeParent(this.data.btnReady,this.data.roomNode),this.data.btnReady.setPosition(t)}},e.prototype.PressStartGameBtn=function(){l.GameTaskMgr.Instance().SendMsg("StartGame",this.data.players[0].tableID)},e.prototype.PressReadyBtn=function(){l.GameTaskMgr.Instance().SendMsg("ReadyGame",this.data.players[0])},e}(o.ScDesginAction);i.OrganizeGameStageAction=u,cc._RF.pop()},{"../../../../../GameCompents/MouseEvents":"MouseEvents","../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr","../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../../GameTypes":"GameTypes","../../../ResMgr/Pool/PrefabPool":"PrefabPool"}],Packet:[function(t,e,i){"use strict";cc._RF.push(e,"cdd87P8sDhBfYAa0+08VCgk","Packet");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../ByteBuffer/bytebuffer"),a=function(t){function e(e,i){void 0===i&&(i=1024);var n=t.call(this)||this;return n.socket=e,n.socketTask=e.socketTask,n.socketID=e.GetID().toString(),n.buf=new o(i),n}return n(e,t),e.prototype.SetOffset=function(t){this.buf.offset=t,this.bufOffset=t},e.prototype.ResetBuffer=function(t,e,i){if(null!=t)if("string"==typeof t)this.buf.writeString(t),this.buf.limit=this.buf.offset,this.buf.offset=0,this.bufOffset=0,this.bufLimit=this.buf.limit;else{(null==e||e<0)&&(e=0),(null==i||i<0)&&(i=t.offset);var n=i-e;n>this.buf.view.byteLength&&this.buf.resize(n),t.copyTo(this.buf,0,e,i),this.buf.offset=0,this.buf.limit=n,this.bufOffset=0,this.bufLimit=n}else this.buf=null},e}(t("../ScTypes/ScObject").ScObject);i.Packet=a,cc._RF.pop()},{"../ByteBuffer/bytebuffer":"bytebuffer","../ScTypes/ScObject":"ScObject"}],PlayGameInfo:[function(t,e,i){"use strict";cc._RF.push(e,"fce17X23GdNBqt1sg+r2nrE","PlayGameInfo");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./InfoBase"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.encode=function(t){t.writeInt(this.m_iTableID),t.writeShort(this.m_iGameCMD),t.writeInt(this.m_iDataLength),null!=this.m_stGameData&&(this.m_stGameData.copyTo(t,t.offset,0,this.m_iDataLength),t.offset+=this.m_iDataLength)},e}(o.InfoBase);i.RequestPlayGame=a;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){this.m_iTableID=t.readInt(),this.m_iGameCMD=t.readShort(),this.m_iResultID=t.readShort(),this.m_iDataLength=t.readInt(),this.m_stGameData=t.readBytes(this.m_iDataLength)},e}(o.InfoBase);i.ResponsePlayGame=r,cc._RF.pop()},{"./InfoBase":"InfoBase"}],PlayerDataUpdateCmd:[function(t,e,i){"use strict";cc._RF.push(e,"5b99fE0PAlJK6pO95fO31Eq","PlayerDataUpdateCmd");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../GameLibs/ScCmd/Cmd"),a=t("../../../GameLibs/ScAction/ScActionMgr"),r=t("../Scene/Room/Player"),s=function(t){function e(){var e=t.call(this)||this;return e.updatePlayerData=new r.Player,e.ExecuteCB=e.CmdExecute.bind(e),e}return n(e,t),e.prototype.CmdExecute=function(){if(null!=this.room){var t=this.room.players,e=!1,i=!1;0==this.updatePlayerData.seatIdx&&(i=!0);for(var n=0;n<t.length;n++)if(null!=t[n]&&t[n].uin==this.updatePlayerData.uin){t[n].SetDataFromPlayerData(this.updatePlayerData),e=!0;break}if(0==e){var o=new r.Player;o.SetDataFromPlayerData(this.updatePlayerData),this.room.AddPlayer(o)}return 0==i||(this.roomStage=this.room.RefreshRoomView(),this.roomStageActions=this.room.GetRoomStageAction(this.roomStage),a.ScActionMgr.Instance().GetGobalScAction().Reg(this.UUID(),this.update.bind(this)),!1)}},e.prototype.update=function(){0!=this.room.IsRoomStageActionsEnded(this.roomStageActions)&&(a.ScActionMgr.Instance().GetGobalScAction().UnReg(this.UUID()),this.roomStageActions=null,this.ExecuteEnd())},e}(o.Cmd);i.PlayerDataUpdateCmd=s,cc._RF.pop()},{"../../../GameLibs/ScAction/ScActionMgr":"ScActionMgr","../../../GameLibs/ScCmd/Cmd":"Cmd","../Scene/Room/Player":"Player"}],PlayerInfo:[function(t,e,i){"use strict";cc._RF.push(e,"32f7fqg059HYZzY1YCpfm3U","PlayerInfo");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../GameUtils"),a=t("./ServerCardInfo"),r=t("./InfoBase"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.encode=function(t){t.writeInt32(this.uin)},e}(r.InfoBase);i.RequestPlayerAccountInfo=s;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleInfo=new l,e.equipInfo=new h,e.gameSession=new u,e.agentInfo=new p,e.activityInfo=new f,e}return n(e,t),e.prototype.decode=function(t){this.resultID=t.readShort(),this.uin=t.readInt(),0==this.resultID&&(this.roleInfo.decode(t),this.equipInfo.decode(t),this.gameSession.decode(t),this.agentInfo.decode(t),this.activityInfo.decode(t))},e}(r.InfoBase);i.PlayerAccountInfo=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.groupID=t.readInt(),this.sex=t.readInt(),this.name=t.readString(t.readShort()),this.loginTime=t.readInt(),this.loginMask=t.readLong(),this.lastOnlineTime=t.readInt(),this.totalOnlineTime=t.readInt(),this.todayOnlineTime=t.readInt(),this.createTime=t.readInt(),this.avatarURL=t.readString(t.readShort()),this.idCard=t.readString(t.readShort()),this.cellPhone=t.readString(t.readShort()),this.realName=t.readString(t.readShort()),t.offset=e+i},e}(r.InfoBase);i.PlayerRoleInfo=l;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.diamond=t.readInt(),this.coin=t.readInt(),this.roomCard=t.readInt(),this.vipScore=t.readInt(),this.exp=t.readInt(),t.offset=e+i},e}(r.InfoBase);i.PlayerEquipInfo=h;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.tableID=t.readInt(),this.tableNumber=t.readInt(),this.createTime=t.readInt(),this.sequence=t.readInt(),this.gameType=t.readInt(),this.gameMode=t.readInt(),t.offset=e+i},e}(r.InfoBase);i.PlayerGameSession=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){this.uin=t.readInt(),this.playerGameSession=new u,this.playerGameSession.decode(t)},e}(r.InfoBase);i.NotifyPlayerGameSession=d;var p=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.fromAgentID=new Array(e.max_agent_depth),i}return n(e,t),e.prototype.decode=function(t){var i=t.offset,n=t.readShort();this.introduceFrom=t.readInt();for(var o=0;o<e.max_agent_depth;o++)this.fromAgentID.push(t.readInt());this.introducedNumber=t.readInt(),this.introduceAwardMask=t.readInt(),this.isAgent=t.readInt(),t.offset=i+n},e.max_agent_depth=5,e}(r.InfoBase);i.PlayerAgentInfo=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.clientAwardVersionProgress=t.readInt(),this.shareAwardTime=t.readInt(),this.shareAwardCount=t.readInt(),this.shareTotalAwardCount=t.readInt(),t.offset=e+i},e}(r.InfoBase);i.PlayerActivityInfo=f;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerAtTableRoleInfo=new y,e}return n(e,t),e.prototype.encode=function(t){t.writeInt(this.playerID),t.writeInt(this.seatID),t.writeInt(this.playerStatus),t.writeInt(this.remainCoin),t.writeInt(this.unionID),this.playerAtTableRoleInfo.encode(t)},e.prototype.decode=function(t){this.playerID=t.readInt(),this.seatID=t.readInt(),this.playerStatus=t.readInt(),this.remainCoin=t.readInt(),this.unionID=t.readInt(),this.playerAtTableRoleInfo.decode(t)},e}(r.InfoBase);i.PlayerAtTableInfo=S;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.encode=function(t){var e=t.offset;t.offset=t.offset+2,t.writeInt(this.uin),t.writeInt(this.sex);var i=t.offset+2;t.writeString(this.roleName);var n=t.offset-i;t.offset=i-2,t.writeShort(n),o.WriteString(t,this.roleName),o.WriteString(t,this.avatarUrl),o.WriteString(t,this.clientIP);var a=t.offset-e,r=t.offset;t.offset=e,t.writeShort(a),t.offset=r},e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.uin=t.readInt(),this.sex=t.readInt(),this.roleName=o.ReadString(t),this.avatarUrl=o.ReadString(t),this.clientIP=o.ReadString(t),t.offset=e+i},e}(r.InfoBase);i.PlayerAtTableRoleInfo=y;var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.submitCardInfo=new C,e.submitCardResult=new T,e.playerCardInfo=new g,e.roundBalanceDetails=new Array,e}return n(e,t),e.prototype.decode=function(t){this.uin=t.readInt(),this.seatID=t.readInt(),this.balanceScore=t.readInt(),this.isHavSubmit=t.readByte(),this.showSubmitssion=t.readByte(),this.showSubmitssion>=1&&this.submitCardInfo.decode(t),this.showSubmitssion>=2&&this.submitCardResult.decode(t),this.playerCardInfo.decode(t);var e=t.readShort();this.roundBalanceDetails.length=0;for(var i=0;i<e;i++){var n=new w;this.roundBalanceDetails.push(n),n.decode(t)}this.betTimes=t.readInt(),this.unionID=t.readInt(),this.bankerRate=t.readInt()},e}(r.InfoBase);i.PlayerPlayingGameInfo=m;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cards=new Array,e}return n(e,t),e.prototype.decode=function(t){if(this.cards.length=0,this.showHandCardsParam=t.readByte(),this.remainCardsCount=t.readInt(),this.showHandCardsParam>0)for(var e=void 0,i=0;i<this.remainCardsCount;i++)(e=new a.ServerCardInfo).decode(t),this.cards.push(e)},e}(r.InfoBase);i.PlayerPlayingHandCardInfo=g;var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.computedCards=new Array,e.orgCards=new Array,e}return n(e,t),e.prototype.decode=function(t){var e,i=t.offset,n=t.readShort();this.submitType=t.readShort();for(var o=0;o<13;o++)(e=new a.ServerCardInfo).decode(t),this.computedCards.push(e);this.cardCount=t.readShort();for(o=0;o<this.cardCount;o++)(e=new a.ServerCardInfo).decode(t),this.orgCards.push(e);t.offset=i+n},e.prototype.encode=function(t){var e=t.offset;t.offset=t.offset+2,t.writeShort(this.submitType);for(var i=0;i<this.computedCards.length;i++)this.computedCards[i].encode(t);t.writeShort(this.cardCount);for(i=0;i<this.orgCards.length;i++)this.orgCards[i].encode(t);var n=t.offset-e,o=t.offset;t.offset=e,t.writeShort(n),t.offset=o},e}(r.InfoBase);i.PlayerPerRoundSubmitedCardInfo=C;var T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.submitCache=Array(),e.vSeatRoundBalance=new Array,e}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.roundScore=t.readInt();for(var n=0;n<3;n++)this.submitCache.push(new A),this.submitCache[n].decode(t);this.seatRoundBalanceCount=t.readShort(),this.vSeatRoundBalance.length=0;for(n=0;n<this.seatRoundBalanceCount;n++){var o=new v;this.vSeatRoundBalance.push(o),o.decode(t)}t.offset=e+i},e}(r.InfoBase);i.PlayerPerRoundSubmitResult=T;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.balanceScores=new Array(3),e}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.seatID=t.readInt(),this.killAllJudge=t.readInt(),this.judgeScore=t.readInt();for(var n=0;n<3;n++)this.balanceScores[n]=t.readInt();t.offset=e+i},e}(r.InfoBase);i.PlayerPerRoundSubmitBalance=v;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.round=t.readShort(),this.roundScore=t.readInt(),t.offset=e+i},e}(r.InfoBase);i.PlayerPerRoundBalanceDetail=w;var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.param=t.readLong(),this.judgeType=t.readInt(),this.privilege=t.readInt(),this.score=t.readInt(),t.offset=e+i},e}(r.InfoBase);cc._RF.pop()},{"../../GameUtils":"GameUtils","./InfoBase":"InfoBase","./ServerCardInfo":"ServerCardInfo"}],PlayerSeatViewer:[function(t,e,i){"use strict";cc._RF.push(e,"98bd18nDIRFUJyttv/sCu3x","PlayerSeatViewer");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./LayoutCompents/Score"),r=t("./Action/ReadyGameAction"),s=t("./Action/ShowCardsAction"),c=t("./Action/GaiPaiAction"),l=t("./Action/FanPaiAction"),h=t("./Action/WholeFanPaiAction"),u=t("./Action/ShowSlotScoreAction"),d=t("./Action/BeFireAction"),p=t("./Action/BeFireShakeAction"),f=t("./Action/FireAction"),S=t("./Action/ShowCardsTypeAction"),y=t("./Action/ShowTotalScoreAction"),m=t("./Action/DisperseCardsAction"),g=t("../../../../../GameCompents/TableLayout"),C=t("../../../CardsProcesser/CardsViewer"),T=t("../../../../GameTypes"),v=t("../../../../../GameLibs/ScStateMachine/ScStateMachine"),w=t("../../../../../GameLibs/Collections/Dictionary"),A=t("../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes"),b=t("../../../ResMgr/GameRes"),_=t("../../../../../GameLibs/ScStateMachine/ScStateMachineTypes"),P=t("../../../../../GameCompents/Layout"),I=t("../../../../../GameLibs/ScTweener/ScTweenerRun"),E=t("../../../../../GameLibs/ScTweener/ScTweenerUtils"),R=t("../../../ResMgr/Pool/PrefabPool"),L=cc._decorator,M=L.ccclass,D=L.property,G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.invLayout=!1,e.cardsViewerNodes=[],e.avatarbox=null,e.goldInfoTableLayout=null,e.scores=[],e.tableLayout=null,e.cardsViewers=new Array,e.seatIdx=0,e.orgCardPosDict=new w.Dictionary,e.cardFacesList=new Array(3),e.specCardsType=A.CardsType.None,e.isOffFaPaiAnim=!1,e.isFaPaiEndFilpCard=!0,e.isFaPaiFrontFace=!1,e.actionTimeScale=1,e.cardOffsetScale=1,e.isBeFrieShowKong=!0,e.testi=0,e}return n(e,t),e.prototype.onLoad=function(){this.Init(),this.MachineActionInit()},e.prototype.Init=function(){this.cardsViewerGroupNode=this.node.getChildByName("CardsViewerGroup"),this.cardsTypeGroupNode=this.node.getChildByName("CardsTypeGroup"),this.scoresNode=this.node.getChildByName("Scores"),this.specCardsTypeLayoutNode=this.node.getChildByName("SpecCardsTypeLayout"),this.gunLayoutNode=this.node.getChildByName("GunLayout"),this.cardsTypesNode=this.cardsTypeGroupNode.children,this.specCardsTypeNode=this.specCardsTypeLayoutNode.children[0],this.slotScoreNode=this.scoresNode.children,this.gunNode=this.gunLayoutNode.children[0],this.gunKongNode=this.gunNode.children[0],this.gunLineNode=this.gunKongNode.children[0],this.playerNameLable=this.avatarbox.getChildByName("Name").getComponent(cc.Label),this.gameStateNode=this.avatarbox.getChildByName("GameState"),this.handCardPointNode=this.avatarbox.getChildByName("HandCardPoint"),this.gameAtlas=b.GameRes.Instance().LoadSpriteAltas(T.SpriteAtlasIdx.Cards)},e.prototype.MachineActionInit=function(){this.stateMachine=new v.ScStateMachine,this.stateMachine.name="",this.stateMachine.ExeMode=_.StateMachineExeMode.Serial,this.stateMachine.SetData(this),this.readyGameAction=new r.ReadyGameAction,this.readyGameAction.SetStateBaseValue(0),this.stateMachine.Install(this.readyGameAction),this.gaiPaiAction=new c.GaiPaiAction,this.gaiPaiAction.SetStateBaseValue(100),this.stateMachine.Install(this.gaiPaiAction),this.showCardsAction=new s.ShowCardsAction,this.showCardsAction.SetStateBaseValue(200),this.stateMachine.Install(this.showCardsAction),this.fanPaiAction=new l.FanPaiAction,this.fanPaiAction.SetStateBaseValue(300),this.stateMachine.Install(this.fanPaiAction),this.wholeFanPaiAction=new h.WholeFanPaiAction,this.wholeFanPaiAction.SetStateBaseValue(400),this.stateMachine.Install(this.wholeFanPaiAction),this.showSlotScoreAction=new u.ShowSlotScoreAction,this.showSlotScoreAction.SetStateBaseValue(500),this.stateMachine.Install(this.showSlotScoreAction),this.beFireAction=new d.BeFireAction,this.beFireAction.SetStateBaseValue(600),this.stateMachine.Install(this.beFireAction),this.showCardsTypeAction=new S.ShowCardsTypeAction,this.showCardsTypeAction.SetStateBaseValue(800),this.stateMachine.Install(this.showCardsTypeAction),this.disperseCardsAction=new m.DisperseCardsAction,this.disperseCardsAction.SetStateBaseValue(900),this.stateMachine.Install(this.disperseCardsAction),this.stateMachine.DefineStateValueEnded(),this.beFireShakeAction=new p.BeFireShakeAction,this.beFireShakeAction.Install(this),this.showTotalScoreAction=new y.ShowTotalScoreAction,this.showTotalScoreAction.Install(this),this.fireAction=new f.FireAction,this.fireAction.Install(this)},e.prototype.onDestroy=function(){this.PushToPool(),this.stateMachine.Destroy(),this.beFireShakeAction.Destroy(),this.showTotalScoreAction.Destroy(),this.fireAction.Destroy()},e.prototype.PushToPool=function(){this.stateMachine.UnInstall(),this.beFireShakeAction.UnInstall(),this.showTotalScoreAction.UnInstall(),this.fireAction.UnInstall();for(var t=0;t<this.cardsViewers.length;t++)this.cardsViewers[t].Stop(),this.cardsViewers[t].Destory();this.cardsViewers.length=0,this.PushScoreNode(),R.PrefabPool.Instance().Push(this.node,T.PrefabIdx.PlayerSeatViewer)},e.prototype.InvLayout=function(){this.invLayout=!0,this.tableLayout.invLayout=!0,this.goldInfoTableLayout.invLayout=!0,this.tableLayout.ResetProperty(),this.goldInfoTableLayout.ResetProperty();for(var t=0;t<this.scores.length;t++)this.scores[t].alignMode=a.ScoreAlignMode.RightAlign},e.prototype.UnInvLayout=function(){this.invLayout=!1,this.tableLayout.invLayout=!1,this.goldInfoTableLayout.invLayout=!1;for(var t=0;t<this.scores.length;t++)this.scores[t].alignMode=a.ScoreAlignMode.LeftAlign},e.prototype.Layout=function(){for(var t=this.node.getComponents(P.default),e=0;e<t.length;e++)1==t[e].enabled&&t[e].Layout();this.LayoutChild(this.node),this.CreateCardsViewer(),this.Reset()},e.prototype.LayoutChild=function(t){for(var e,i,n=0;n<t.children.length;n++){e=(i=t.children[n]).getComponents(P.default);for(var o=0;o<e.length;o++)1==e[o].enabled&&e[o].Layout();this.LayoutChild(i)}},e.prototype.Reset=function(){I.ScTweenerRun.DoAlpha(this.gameStateNode,0,0),I.ScTweenerRun.DoAlpha(this.cardsViewerGroupNode,0,0),I.ScTweenerRun.DoAlpha(this.specCardsTypeLayoutNode,0,0),I.ScTweenerRun.DoAlpha(this.gunNode,0,0),I.ScTweenerRun.DoAlpha(this.gunLineNode,0,0);for(var t=0;t<this.cardsTypesNode.length;t++)I.ScTweenerRun.DoAlpha(this.cardsTypesNode[t],0,0);for(t=0;t<this.slotScoreNode.length;t++)I.ScTweenerRun.DoAlpha(this.slotScoreNode[t],0,0);var e=E.NodeLocalPositionToParent(this.node,this.avatarbox.parent);I.ScTweenerRun.DoLocalMove(this.avatarbox,e,0),this.PushScoreNode()},e.prototype.SetSeatIdx=function(t){this.seatIdx=t,this.stateMachine.name="seat"+this.seatIdx},e.prototype.GetSeatIdx=function(){return this.seatIdx},e.prototype.SetPlayerName=function(t){this.playerNameLable.string=t},e.prototype.ShowPlayerGameState=function(t){var e;switch(t){case T.PlayerShowGameState.Ready:e="ready";break;case T.PlayerShowGameState.SortPai:e="lipaiing";break;case T.PlayerShowGameState.CompletedSortPai:e="completed"}var i=this.gameAtlas.getSpriteFrame(e);this.gameStateNode.getComponent(cc.Sprite).spriteFrame=i,I.ScTweenerRun.DoAlpha(this.gameStateNode,0,0),I.ScTweenerRun.DoAlpha(this.gameStateNode,1,.1)},e.prototype.HidePlayerGameState=function(){I.ScTweenerRun.DoAlpha(this.gameStateNode,0,.1)},e.prototype.ResetCardFaces=function(t){for(var e=0;e<this.cardsViewers.length&&!(e>=t.length);e++)this.cardsViewers[e].ResetCardFaces(t[e])},e.prototype.Ready=function(){this.readyGameAction.timeScale=this.actionTimeScale,this.readyGameAction.Execute()},e.prototype.ShowCards=function(){this.showCardsAction.cardfaces0=this.cardFacesList[0],this.showCardsAction.cardfaces1=this.cardFacesList[1],this.showCardsAction.cardfaces2=this.cardFacesList[2],this.showCardsAction.commonCardsTypes=this.commonCardsTypes,this.showCardsAction.specType=this.specCardsType,this.showCardsAction.isFaPaiEndFilpCard=this.isFaPaiEndFilpCard,this.showCardsAction.isFaPaiFrontFace=this.isFaPaiFrontFace,this.showCardsAction.isOffFapaiAnimation=this.isOffFaPaiAnim,this.showCardsAction.timeScale=this.actionTimeScale,this.showCardsAction.ShowCardsEnded=this.ShowCardsEnded,this.showCardsAction.Execute()},e.prototype.GaiCards=function(){this.gaiPaiAction.isOffFapaiAnimation=this.isOffFaPaiAnim,this.gaiPaiAction.timeScale=this.actionTimeScale,this.gaiPaiAction.Execute()},e.prototype.IsFilpCardsEnded=function(){return this.gaiPaiAction.ExeState()==_.ActionExeState.EndExecuted},e.prototype.FilpSlotCards=function(){this.fanPaiAction.fanPaiSlotIdx=this.slotIdx,this.fanPaiAction.cardsType=this.slotCardsType,this.fanPaiAction.timeScale=this.actionTimeScale,this.fanPaiAction.isOffFapaiAnimation=this.isOffFaPaiAnim,this.fanPaiAction.Execute()},e.prototype.IsFilpSlotCardsEnded=function(){return this.fanPaiAction.ExeState()==_.ActionExeState.EndExecuted},e.prototype.ShowCardsType=function(){this.showCardsTypeAction.commonCardsTypes=this.commonCardsTypes,this.showCardsTypeAction.specType=this.specCardsType,this.showCardsTypeAction.timeScale=this.actionTimeScale,this.showCardsTypeAction.Execute()},e.prototype.IsShowCardsTypeEnded=function(){return this.showCardsTypeAction.ExeState()==_.ActionExeState.EndExecuted},e.prototype.ShowSlotScore=function(){this.showSlotScoreAction.slotIdx=this.slotIdx,this.showSlotScoreAction.scoreStr=this.slotScoreStr,this.showSlotScoreAction.timeScale=this.actionTimeScale,this.showSlotScoreAction.Execute()},e.prototype.WholeFanCards=function(){this.wholeFanPaiAction.commonCardsTypes=this.commonCardsTypes,this.wholeFanPaiAction.specType=this.specCardsType,this.wholeFanPaiAction.timeScale=this.actionTimeScale,this.wholeFanPaiAction.isOffFapaiAnimation=this.isOffFaPaiAnim,this.wholeFanPaiAction.Execute()},e.prototype.IsWholeFanCardsEnded=function(){return this.wholeFanPaiAction.ExeState()==_.ActionExeState.EndExecuted},e.prototype.ShowTotalScore=function(t,e){this.showTotalScoreAction.scoreStr=t,this.showTotalScoreAction.parent=e,this.showTotalScoreAction.timeScale=this.actionTimeScale,this.showTotalScoreAction.Execute()},e.prototype.BeFire=function(t,e){void 0===t&&(t=1),void 0===e&&(e=0),t<=0||(this.beFireAction.cardOffsetScale=this.cardOffsetScale,this.beFireAction.isShowKong=this.isBeFrieShowKong,this.beFireAction.beFireCount=t,this.beFireAction.timeScale=this.actionTimeScale,this.beFireAction.Execute(null,e,_.StateMachineActionDelayMode.AddActionToQueueDelay))},e.prototype.IsBeFireEnded=function(){return this.beFireAction.ExeState()==_.ActionExeState.EndExecuted},e.prototype.DisperseCards=function(t,e){void 0===t&&(t=1),void 0===e&&(e=0),t<=0||(this.disperseCardsAction.cardOffsetScale=this.cardOffsetScale,this.disperseCardsAction.disperseCount=t,this.disperseCardsAction.timeScale=this.actionTimeScale,this.disperseCardsAction.Execute(null,e,_.StateMachineActionDelayMode.AddActionToQueueDelay))},e.prototype.IsDisperseCardsEnded=function(){return this.disperseCardsAction.ExeState()==_.ActionExeState.EndExecuted},e.prototype.Fire=function(t){for(var e=new Array,i=0;i<t.length;i++)if(null!=t[i]){var n=t[i].node.parent.convertToWorldSpaceAR(t[i].node.position);e.push(n)}this.fireAction.dstFirePlayerSeatViewer=t,this.fireAction.dstFireWorldPos=e,this.fireAction.timeScale=this.actionTimeScale,this.fireAction.Execute()},e.prototype.IsFireEnded=function(){return this.fireAction.ExeState()==_.ActionExeState.EndExecuted},e.prototype.GetSeriesCards=function(){for(var t=new Array,e=0;e<this.cardsViewers.length;e++)for(var i=this.cardsViewers[e].GetAllCards(),n=0;n<i.length;n++)t.push(i[n]);return t},e.prototype.SetCards=function(t,e,i){this.cardFacesList[0]=t,this.cardFacesList[1]=e,this.cardFacesList[2]=i;for(var n=0;n<3;n++)this.cardsViewers[n].Stop(),this.cardsViewers[n].SetCards(this.cardFacesList[n])},e.prototype.CreateCardsViewer=function(){for(var t=[3,5,5],e=0;e<this.cardsViewerNodes.length;e++){var i=this.CreateCardViewer(e,10+5*e,t[e],5);this.cardsViewers.push(i)}},e.prototype.CreateCardViewer=function(t,e,i,n){var o=this.cardsViewerNodes[t],a=new C.CardsViewer(o),r=a.GetCardPixelSize().x*n*a.GetCardScale().x;(r-=r/4)>o.width&&(r=o.width);var s=r-(3-t-1)*r/7;return a.SetAnimScale(.65,.8),a.IsFaPaiFrontFace=!1,a.IsFaPaiEndFilpCard=!0,a.SetLayoutWidth(s),a.ArcLayoutHeightScale=.4,a.ArcLayoutAbsEluerAngleZ=e,a.LayoutCardCount=i,a.PaiDuiPosOffset=new cc.Vec2(.015,.015),a.IsOpenCardWobble=!0,a.CacheFaPaiAnimation(),a},e.prototype.CacheCardsOrgLayoutInfo=function(){this.orgCardPosDict.clear();for(var t=0;t<this.cardsViewers.length;t++)for(var e=this.cardsViewers[t].GetAllCards(),i=0;i<e.length;i++)this.orgCardPosDict.setValue(e[i].node.uuid,e[i].node.position)},e.prototype.PopScoreNode=function(t,e){var i=R.PrefabPool.Instance().Pop(e);return E.SetNodeParent(i,t),i.active=!0,i},e.prototype.PushScoreNode=function(){null!=this.totalScoreNode&&(R.PrefabPool.Instance().Push(this.totalScoreNode,this.totalScorePrefabIdx),this.totalScoreNode=null)},o([D()],e.prototype,"invLayout",void 0),o([D([cc.Node])],e.prototype,"cardsViewerNodes",void 0),o([D(cc.Node)],e.prototype,"avatarbox",void 0),o([D(g.default)],e.prototype,"goldInfoTableLayout",void 0),o([D([a.default])],e.prototype,"scores",void 0),o([D(g.default)],e.prototype,"tableLayout",void 0),e=o([M],e)}(cc.Component);i.default=G,cc._RF.pop()},{"../../../../../GameCompents/Layout":"Layout","../../../../../GameCompents/TableLayout":"TableLayout","../../../../../GameLibs/Collections/Dictionary":"Dictionary","../../../../../GameLibs/ScStateMachine/ScStateMachine":"ScStateMachine","../../../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../../GameTypes":"GameTypes","../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes":"CardAlgoTypes","../../../CardsProcesser/CardsViewer":"CardsViewer","../../../ResMgr/GameRes":"GameRes","../../../ResMgr/Pool/PrefabPool":"PrefabPool","./Action/BeFireAction":"BeFireAction","./Action/BeFireShakeAction":"BeFireShakeAction","./Action/DisperseCardsAction":"DisperseCardsAction","./Action/FanPaiAction":"FanPaiAction","./Action/FireAction":"FireAction","./Action/GaiPaiAction":"GaiPaiAction","./Action/ReadyGameAction":"ReadyGameAction","./Action/ShowCardsAction":"ShowCardsAction","./Action/ShowCardsTypeAction":"ShowCardsTypeAction","./Action/ShowSlotScoreAction":"ShowSlotScoreAction","./Action/ShowTotalScoreAction":"ShowTotalScoreAction","./Action/WholeFanPaiAction":"WholeFanPaiAction","./LayoutCompents/Score":"Score"}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"c9da8eroZlC1KwtBlXqPxki","Player"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("../../../GameTypes"),o=function(){function t(){this.prveGameStatus=n.PlayerGameStatus.Empty,this.gameStatus=n.PlayerGameStatus.Empty}return t.prototype.GetGameStatus=function(){return this.gameStatus},t.prototype.SetGameStatus=function(t,e){void 0===e&&(e=!1),this.prveGameStatus=e?null:this.gameStatus,this.gameStatus=t},t.prototype.AddGameStatus=function(t){this.prveGameStatus=this.gameStatus,this.gameStatus|=t},t.prototype.RemoveGameStatus=function(t){this.prveGameStatus=this.gameStatus,this.gameStatus^=t},t.prototype.IsHavGameStatus=function(t){return(this.gameStatus&t)==t},t.prototype.IsNewedGameStatus=function(){return this.prveGameStatus==n.PlayerGameStatus.Empty&&this.gameStatus!=this.prveGameStatus},t.prototype.IsChangedGameStatus=function(){return this.gameStatus!=this.prveGameStatus},t.prototype.GetStatusChangedPart=function(){return(this.gameStatus^this.prveGameStatus)&this.gameStatus},t.prototype.AlppyChangedGameStatus=function(){this.prveGameStatus=this.gameStatus},t.prototype.SetDataFromPlayerData=function(t){if(this.uin=t.uin,this.sex=t.sex,this.roleName=t.roleName,this.clientIP=t.clientIP,this.playerID=t.playerID,this.tableID=t.tableID,this.seatIdx=t.seatIdx,this.coin=t.coin,this.unionID=t.unionID,this.handCardFaces=null,null!=t.handCardFaces){this.handCardFaces=new Array(t.handCardFaces.length);for(var e=0;e<this.handCardFaces.length;e++)this.handCardFaces[e]=t.handCardFaces[e]}if(this.slotsCardFaces=null,null!=t.slotsCardFaces){this.slotsCardFaces=new Array(t.slotsCardFaces.length);for(e=0;e<this.slotsCardFaces.length;e++){this.slotsCardFaces[e]=new Array(t.slotsCardFaces[e].length);for(var i=0;i<this.slotsCardFaces[e].length;i++)this.slotsCardFaces[e][i]=t.slotsCardFaces[e][i]}}if(this.slotsCardsTypes=null,null!=t.slotsCardsTypes){this.slotsCardsTypes=new Array(t.slotsCardsTypes.length);for(e=0;e<this.slotsCardsTypes.length;e++)this.slotsCardsTypes[e]=t.slotsCardsTypes[e]}if(this.specCardsType=t.specCardsType,this.slotsScores=null,null!=t.slotsCardsTypes){this.slotsScores=new Array(t.slotsScores.length);for(e=0;e<this.slotsScores.length;e++)this.slotsScores[e]=t.slotsScores[e]}if(this.totalScore=t.totalScore,this.killOtherPlayerSeatIdxs=null,null!=t.killOtherPlayerSeatIdxs){this.killOtherPlayerSeatIdxs=new Array(t.killOtherPlayerSeatIdxs.length);for(e=0;e<this.killOtherPlayerSeatIdxs.length;e++)this.killOtherPlayerSeatIdxs[e]=t.killOtherPlayerSeatIdxs[e]}this.SetGameStatus(t.GetGameStatus())},t}();i.Player=o,cc._RF.pop()},{"../../../GameTypes":"GameTypes"}],PosPercentageLayout:[function(t,e,i){"use strict";cc._RF.push(e,"d3e6elIIlJG56ZSwOxp8q3D","PosPercentageLayout");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./Layout"),r=cc._decorator,s=r.ccclass,c=r.property,l=r.executeInEditMode,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftPercent=0,e.bottomPercent=0,e}return n(e,t),e.prototype.update=function(){0},e.prototype.Layout=function(){var t=this.node.parent,e=t.getAnchorPoint(),i=t.position,n=i.x-t.width*e.x,o=i.y-t.height*e.y,a=n+t.width*this.leftPercent,r=o+t.height*this.bottomPercent;this.node.setPosition(new cc.Vec3(a,r,0))},o([c],e.prototype,"leftPercent",void 0),o([c],e.prototype,"bottomPercent",void 0),e=o([s,l],e)}(a.default);i.default=h,cc._RF.pop()},{"./Layout":"Layout"}],PrefabPool:[function(t,e,i){"use strict";cc._RF.push(e,"32eabnmtblKKbEfso1rPj4u","PrefabPool"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("../GameRes"),o=t("../../../../GameLibs/ScTweener/ScTweenerUtils"),a=t("../../../../GameLibs/ScPool/ScPoolMgr"),r=function(){function t(){this.defaultCreateSize=1}return t.Instance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.CreatePool=function(t,e,i){this.prefab=n.GameRes.Instance().LoadPrefab(t),null==this.PoolRoot&&(this.PoolRoot=new cc.Node("PrefabPool"),this.PoolRoot.parent=null,cc.game.addPersistRootNode(this.PoolRoot)),null==e&&(e=this.NewPrefabMethod.bind(this)),this.prefabPoolDict=a.ScPoolMgr.Instance().CreatePoolDict();var o=this.prefabPoolDict.CreatePool(t);o.NewMethod=e.bind(this),o.DestroyCB=this.DestoryNode.bind(this),o.createObjSize=i,o.CreatePool()},t.prototype.NewPrefabMethod=function(){var t=cc.instantiate(this.prefab);return o.SetNodeParent(t,this.PoolRoot),t.active=!1,t},t.prototype.DestoryNode=function(t){for(var e=0;e<t.length;e++)t[e].destroy()},t.prototype.Destory=function(){this.prefabPoolDict.Destory(),this.PoolRoot.destroy()},t.prototype.Pop=function(e){var i;return null!=this.prefabPoolDict&&(i=this.prefabPoolDict.Pop(e)),null==i&&(t.Instance().CreatePool(e,null,this.defaultCreateSize),i=this.prefabPoolDict.Pop(e)),i},t.prototype.Push=function(t,e){null!=this.prefabPoolDict&&null!=t&&(0!=this.prefabPoolDict.Push(t,e)&&(o.SetNodeParent(t,this.PoolRoot),t.active=!1))},t.instance=null,t}();i.PrefabPool=r,cc._RF.pop()},{"../../../../GameLibs/ScPool/ScPoolMgr":"ScPoolMgr","../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../GameRes":"GameRes"}],PriorityQueue:[function(t,e,i){"use strict";cc._RF.push(e,"39d49537E1P1bwVUtOf7KDk","PriorityQueue"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./util"),o=t("./Heap"),a=function(){function t(t){this.heap=new o.default(n.reverseCompareFunction(t))}return t.prototype.enqueue=function(t){return this.heap.add(t)},t.prototype.add=function(t){return this.heap.add(t)},t.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},t.prototype.peek=function(){return this.heap.peek()},t.prototype.contains=function(t){return this.heap.contains(t)},t.prototype.isEmpty=function(){return this.heap.isEmpty()},t.prototype.size=function(){return this.heap.size()},t.prototype.clear=function(){this.heap.clear()},t.prototype.forEach=function(t){this.heap.forEach(t)},t}();i.default=a,cc._RF.pop()},{"./Heap":"Heap","./util":"util"}],PublicPlayerGameInfo:[function(t,e,i){"use strict";cc._RF.push(e,"66b05gMXOlLD7VkcFv9BmcO","PublicPlayerGameInfo");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){this.m_iUin=t.readInt(),this.m_iSeatID=t.readInt(),this.m_iBetTimes=t.readInt(),this.m_bSubmit=t.readByte()},e}(t("./InfoBase").InfoBase);i.PublicPlayerGameInfo=o,cc._RF.pop()},{"./InfoBase":"InfoBase"}],Queue:[function(t,e,i){"use strict";cc._RF.push(e,"dbfb4yb0lNMA4rZbJ8756cb","Queue"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./LinkedList"),o=function(){function t(){this.list=new n.LinkedList}return t.prototype.enqueue=function(t){return this.list.add(t)},t.prototype.add=function(t){return this.list.add(t)},t.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},t.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.size()<=0},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();i.default=o,cc._RF.pop()},{"./LinkedList":"LinkedList"}],ReadyGameAction:[function(t,e,i){"use strict";cc._RF.push(e,"c9cf6fZufJCFIjq4XdRU4F6","ReadyGameAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../../GameLibs/ScTweener/ScTweenerRun"),r=t("../../../../../../GameLibs/ScTweener/ScTweenerUtils"),s=function(t){function e(){var e=t.call(this)||this;return e.Init=e._Init.bind(e),e.isAutoInstallAndUninstall=!0,e.SetStateLifeRange(0,1),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e}return n(e,t),e.prototype._Init=function(){},e.prototype.State0=function(){var t=.1*this.timeScale;a.ScTweenerRun.DoAlpha(this.data.cardsViewerGroupNode,0,t),a.ScTweenerRun.DoAlpha(this.data.specCardsTypeLayoutNode,0,t),a.ScTweenerRun.DoAlpha(this.data.gunNode,0,t),a.ScTweenerRun.DoAlpha(this.data.gunLineNode,0,t);for(var e=0;e<this.data.cardsTypesNode.length;e++)a.ScTweenerRun.DoAlpha(this.data.cardsTypesNode[e],0,t);for(e=0;e<this.data.slotScoreNode.length;e++)a.ScTweenerRun.DoAlpha(this.data.slotScoreNode[e],0,t);null!=this.data.totalScoreNode&&a.ScTweenerRun.DoAlpha(this.data.totalScoreNode,0,t);for(e=0;e<this.data.cardsViewers.length;e++)this.data.cardsViewers[e].Stop();this.GotoState(1,t)},e.prototype.State1=function(){this.data.PushScoreNode();var t=r.NodeLocalPositionToParent(this.data.node,this.data.avatarbox.parent);a.ScTweenerRun.DoLocalMove(this.data.avatarbox,t,.3*this.timeScale),this.GotoState(this.IdleState(),.3)},e}(o.ScDesginAction);i.ReadyGameAction=s,cc._RF.pop()},{"../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils"}],RoomDataUpdateCmd:[function(t,e,i){"use strict";cc._RF.push(e,"42fb20ew1dJ25KtS/0+qyjo","RoomDataUpdateCmd");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;return e.ExecuteCB=e.CmdExecute.bind(e),e}return n(e,t),e.prototype.CmdExecute=function(){if(null!=this.room){this.room.round=this.round;for(var t=0;t<this.room.players.length;t++){var e=this.room.players[t].GetGameStatus();this.room.players[t].SetGameStatus(0),this.room.players[t].AlppyChangedGameStatus(),this.room.players[t].SetGameStatus(e)}}},e}(t("../../../GameLibs/ScCmd/Cmd").Cmd);i.RoomDataUpdateCmd=o,cc._RF.pop()},{"../../../GameLibs/ScCmd/Cmd":"Cmd"}],RoomInfo:[function(t,e,i){"use strict";cc._RF.push(e,"ecb945ILVpEebaoDhS88qEs","RoomInfo");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./PlayerInfo"),a=t("./ServerCardInfo"),r=t("./InfoBase"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tableInfo=new c,e.createTableParam=new d,e.playerInfos=new Array,e.observePlayers=new Array,e.iParam=new Array(32),e}return n(e,t),e.prototype.decode=function(t){this.tableID=t.readInt(),this.tableStatus=t.readInt(),this.round=t.readInt(),this.tableSequence=t.readInt(),this.tableInfo.decode(t),this.createTableParam.decode(t),this.playerCount=t.readInt(),this.playerInfos.length=0;for(var e=0;e<this.playerCount;e++){(i=new o.PlayerAtTableInfo).decode(t),this.playerInfos.push(i)}this.observePlayerCount=t.readInt(),this.observePlayers.length=0;for(e=0;e<this.observePlayerCount;e++){var i;(i=new o.PlayerAtTableInfo).decode(t),this.observePlayers.push(i)}this.admin_uin=t.readInt();for(e=0;e<32;e++)this.iParam[e]=t.readInt()},e}(r.InfoBase);i.RoomInfo=s;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atClubPosInfo=new l,e}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.tableNumber=t.readInt(),this.gameType=t.readInt(),this.gameMode=t.readInt(),this.maxRound=t.readInt(),this.costGoldingot=t.readInt(),this.costRoomCard=t.readInt(),this.maxPlayerCount=t.readInt(),this.minStartGamePlayerCount=t.readInt(),this.pokerMode=t.readInt(),this.balanceMode=t.readInt(),this.createUin=t.readInt(),this.uniqueSequence=t.readLong(),this.maxBetTimes=t.readInt(),this.alterPokerMode=t.readInt(),this.atClubPosInfo=new l,this.atClubPosInfo.decode(t),t.offset=e+i},e}(r.InfoBase);i.RoomTableInfo=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.clubID=t.readInt(),this.floorID=t.readInt(),this.tableIndex=t.readInt(),t.offset=e+i},e}(r.InfoBase);i.TableAtClubPosInfo=l;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.encode=function(t){t.writeInt(this.uin),this.createTableParam.encode(t)},e}(r.InfoBase);i.RequestCreateTable=h;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.createTableParam=new d,e.createTableRecord=new p,e}return n(e,t),e.prototype.decode=function(t){this.resultID=t.readShort(),this.uin=t.readInt(),0==this.resultID&&(this.createTableParam.decode(t),this.createTableRecord.decode(t))},e}(r.InfoBase);i.CreateTable=u;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.preserveParam=new Array(10),e}return n(e,t),e.prototype.SetRoomCostMode=function(t){this.preserveParam[0]=t},e.prototype.SetSuit=function(t){this.preserveParam[1]=t},e.prototype.SetObserverLimit=function(t){this.preserveParam[2]=t},e.prototype.SetCmpCardTimeLimit=function(t){this.preserveParam[3]=t},e.prototype.SetGameRoomType=function(t){this.preserveParam[4]=t},e.prototype.SetCostCoinForPerTurn=function(t){this.preserveParam[5]=t},e.prototype.SetUnionMode=function(t){this.preserveParam[6]=t},e.prototype.SetZhuangMode=function(t){this.preserveParam[7]=t},e.prototype.SetJokerCount=function(t){this.preserveParam[8]=t},e.prototype.encode=function(t){var e=t.offset;t.offset=t.offset+2,t.writeInt(this.gameType),t.writeInt(this.gameMode),t.writeInt(this.paramID),t.writeInt(this.balanceMode),t.writeInt(this.maxRound),t.writeInt(this.maxBetTimes),t.writeInt(this.alterPokerMode);for(var i=0;i<10;i++)t.writeInt(this.preserveParam[i]);var n=t.offset-e,o=t.offset;t.offset=e,t.writeShort(n),t.offset=o},e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.gameType=t.readInt(),this.gameMode=t.readInt(),this.paramID=t.readInt(),this.balanceMode=t.readInt(),this.maxRound=t.readInt(),this.maxBetTimes=t.readInt(),this.alterPokerMode=t.readInt();for(var n=0;n<10;n++)this.preserveParam[n]=t.readInt();t.offset=e+i},e}(r.InfoBase);i.CreateTableParam=d;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.createTime=t.readInt(),this.tableNumber=t.readInt(),this.gameType=t.readInt(),this.gameMode=t.readInt(),this.returnDiamond=t.readInt(),this.returnRoomCards=t.readInt(),this.uniqueSequence=t.readLong(),this.status=t.readByte(),t.offset=e+i},e.prototype.encode=function(t){var e=t.offset;t.offset=t.offset+2,t.writeInt(this.createTime),t.writeInt(this.tableNumber),t.writeInt(this.gameType),t.writeInt(this.gameMode),t.writeInt(this.returnDiamond),t.writeInt(this.returnRoomCards),t.writeLong(this.uniqueSequence),t.writeShort(this.status);var i=t.offset-e,n=t.offset;t.offset=e,t.writeShort(i),t.offset=n},e}(r.InfoBase);i.CreateTableRecord=p;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameTableVote=new y,e.roundBalanceCache=new S,e.gamePlayerInfos=new Array,e}return n(e,t),e.prototype.decode=function(t){var e;this.tableStatus=t.readInt(),this.round=t.readInt(),this.gameRoundStartTime=t.readInt(),this.gameTableVote.decode(t),this.roundBalanceCache.decode(t),this.playerCount=t.readInt(),this.gamePlayerInfos.length=0;for(var i=0;i<this.playerCount;i++)(e=new o.PlayerPlayingGameInfo).decode(t),this.gamePlayerInfos.push(e);if(this.remainCount=t.readShort(),this.remainCount>0){this.remainCardList=new Array;for(i=0;i<this.remainCount;i++){var n=new a.ServerCardInfo;n.decode(t),this.remainCardList.push(n)}}this.bankerSeatID=t.readInt(),this.bankerUIN=t.readInt(),this.bankerRate=t.readInt()},e}(r.InfoBase);i.RoomPlayingGameInfo=f;var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.killAllPlayerSeatID=t.readInt(),t.offset=e+i},e}(r.InfoBase);i.Game13ShuiRoundBalanceCache=S;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.encode=function(t){var e=t.offset;t.offset=t.offset+2,t.writeInt(this.voteType),t.writeInt(this.startVoteTime),t.writeInt(this.voteUin),t.writeInt(this.submitMask),t.writeInt(this.voteMask),t.writeInt(this.voteResult),t.writeInt(this.createUin);var i=t.offset-e,n=t.offset;t.offset=e,t.writeShort(i),t.offset=n},e.prototype.decode=function(t){var e=t.offset,i=t.readShort();i<0&&(i=0),this.voteType=t.readInt(),this.startVoteTime=t.readInt(),this.voteUin=t.readInt(),this.submitMask=t.readInt(),this.voteMask=t.readInt(),this.voteResult=t.readInt(),this.createUin=t.readInt(),t.offset=e+i},e}(r.InfoBase);i.RoomVoteInfo=y,cc._RF.pop()},{"./InfoBase":"InfoBase","./PlayerInfo":"PlayerInfo","./ServerCardInfo":"ServerCardInfo"}],Room:[function(t,e,i){"use strict";cc._RF.push(e,"5efbdK3kv1HLY2gw2bCIe8R","Room");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../GameUtils"),a=t("../../../GameTypes"),r=t("../../../../GameLibs/ScTweener/ScTweenerUtils"),s=t("../../ResMgr/Pool/PrefabPool"),c=t("../../../../GameCompents/TableLayout"),l=t("../../CardsProcesser/CardsViewer"),h=t("../../../../GameLibs/ScStateMachine/ScStateMachine"),u=t("../../../../GameLibs/ScStateMachine/ScStateMachineTypes"),d=t("./Action/SelectCardsStageAction"),p=t("./Action/WaitCmpCardsStageAction"),f=t("./Action/CmpCardsStageAction"),S=t("./Action/OrganizeGameStageAction"),y=t("./Action/WaitNextRoundGameAction"),m=t("../../../../GameLibs/ScTask/GameTaskMgr"),g=t("../../../../GameLibs/ScAction/ScActionMgr"),C=t("../../../../GameLibs/ScTypes/ScObject"),T=t("./PlayerSeatViewer/PlayerSeatViewer"),v=t("../../../../GameLibs/ScTweener/ScTweenerRun"),w=t("./Action/TableFaPaiAction"),A=t("./Action/TableFaPaiAction2"),b=t("../../../../GameCompents/MouseEvents"),_=function(t){function e(){var e=t.call(this)||this;return e.clientUIN=10,e.roomMasterUIN=10,e.round=0,e.isPressCompletedBtn=!1,e.players=new Array,e.playerSeatViewers=new Array,e.observePlayers=new Array,e.MachineActionInit(),e.gobalActions=g.ScActionMgr.Instance().GetGobalScAction(),e.gobalActions.Reg(e.UUID(),e.Update.bind(e)),e}return n(e,t),e.prototype.MachineActionInit=function(){this.stateMachine=new h.ScStateMachine,this.stateMachine.ExeMode=u.StateMachineExeMode.Serial,this.stateMachine.SetData(this),this.organizeGameStageAction=new S.OrganizeGameStageAction,this.stateMachine.Install(this.organizeGameStageAction),this.organizeGameStageAction.SetStateBaseValue(0),this.selectCardsStageAction=new d.SelectCardsStageAction,this.stateMachine.Install(this.selectCardsStageAction),this.selectCardsStageAction.SetStateBaseValue(100),this.waitCmpCardsStageAction=new p.WaitCmpCardsStageAction,this.stateMachine.Install(this.waitCmpCardsStageAction),this.waitCmpCardsStageAction.SetStateBaseValue(200),this.cmpCardsStageAction=new f.CmpCardsStageAction,this.stateMachine.Install(this.cmpCardsStageAction),this.cmpCardsStageAction.SetStateBaseValue(300),this.waitNextRoundGameAction=new y.WaitNextRoundGameAction,this.stateMachine.Install(this.waitNextRoundGameAction),this.waitNextRoundGameAction.SetStateBaseValue(400),this.tableFaPaiAction=new w.TableFaPaiAction,this.tableFaPaiAction.Install(this),this.tableFaPaiAction.UnInstall(),this.tableFaPaiAction2=new A.TableFaPaiAction2,this.tableFaPaiAction2.Install(this),this.tableFaPaiAction2.UnInstall()},e.prototype.Destory=function(){null!=this.cardsAndSlotsBind&&this.cardsAndSlotsBind.Destory(),null!=this.slotsViewer&&this.slotsViewer.Destory(),null!=this.cardsViewer&&this.cardsViewer.Destory();for(var t=0;t<this.playerSeatViewers.length;t++)null!=this.playerSeatViewers[t]&&this.playerSeatViewers[t].PushToPool();s.PrefabPool.Instance().Push(this.roomNode,a.PrefabIdx.Room),this.stateMachine.UnInstall(),this.gobalActions.UnReg(this.UUID()),this.tableFaPaiAction.Destroy(),this.tableFaPaiAction2.Destroy(),this.cardsAndSlotsBind=null,this.slotsViewer=null,this.cardsViewer=null,this.roomNode=null,this.playerSeatViewers.length=0,this.stateMachine.Destroy()},e.prototype.FadeOut=function(t){v.ScTweenerRun.DoAlpha(this.roomNode,0,t).SetCallBackFunc(this.Destory.bind(this))},e.prototype.FadeIn=function(t){this.Show(),v.ScTweenerRun.DoAlpha(this.roomNode,0,0),v.ScTweenerRun.DoAlpha(this.roomNode,1,t)},e.prototype.Show=function(){this.CreateRoom(this.parentNode)},e.prototype.Update=function(){if(this.RefreshOtherPlayerSeatViewer(),this.roomStage==a.RoomStage.SelectCards&&null!=this.slotsViewer){if(null==this.btnCompleted&&this.slotsViewer.IsFullFilling()?this.ShowBtnCompleted():null==this.btnCompleted||this.slotsViewer.IsFullFilling()||this.HideBtnCompleted(),null!=this.btnCompleted&&this.slotsViewer.IsHavCardSelected())this.btnCompleted.getComponent(b.default).enabled=!1;if(null!=this.btnCompleted&&!this.slotsViewer.IsHavCardSelected())this.btnCompleted.getComponent(b.default).enabled=!0}},e.prototype.CreateCompletedCardBtn=function(){if(null==this.btnCompleted){this.btnCompleted=s.PrefabPool.Instance().Pop(a.PrefabIdx.BtnReady),this.btnCompleted.active=!0;var t=this.btnCompleted.getComponent(b.default);t.enabled=!0,t.MouseClickEvent=this.PressCompleteBtn.bind(this),r.SetNodeParent(this.btnCompleted,this.cardsViewer.GetCardsParent()),this.btnCompleted.setPosition(cc.Vec3.ZERO)}},e.prototype.ShowBtnCompleted=function(){this.CreateCompletedCardBtn(),this.btnCompleted.children[0].children[0].getComponent(cc.Label).string="\u5f00\u59cb\u6bd4\u724c",this.btnCompleted.active=!1,this.btnCompleted.active=!0,v.ScTweenerRun.DoAlpha(this.btnCompleted,0,0),v.ScTweenerRun.DoAlpha(this.btnCompleted,1,.2),v.ScTweenerRun.DoLocalScale(this.btnCompleted,cc.Vec3.ONE,.1)},e.prototype.HideBtnCompleted=function(){v.ScTweenerRun.DoAlpha(this.btnCompleted,0,.1).SetCallBackFunc(this.BtnCompletedHideEnded.bind(this),this.btnCompleted);var t=cc.Vec3.ZERO;this.btnCompleted.getScale(t),v.ScTweenerRun.DoLocalScale(this.btnCompleted,t.mul(.9),.1),this.btnCompleted=null},e.prototype.PressCompleteBtn=function(){this.isPressCompletedBtn=!0,m.GameTaskMgr.Instance().SendMsg("SelectCardsCompleted",this.players[0])},e.prototype.BtnCompletedHideEnded=function(t){s.PrefabPool.Instance().Push(t,a.PrefabIdx.BtnReady)},e.prototype.RefreshRoomView=function(t){void 0===t&&(t=!1);var e=this.GetRefreshRoomStage(),i=!1,n=1;if(this.roomStage!=e&&(i=!0),null==this.roomStage&&(t=!0),t&&(i=!1,n=0),this.oldRoomStage=this.roomStage,this.roomStage=e,this.CreateRoom(this.parentNode),this.RefreshOtherPlayerSeatViewer(t),this.RefreshAllPlayerSeatViewerNoStatusData(t),this.oldRoomStage!=this.roomStage){switch(e){case a.RoomStage.OrganizeGame:this.ExecuteOrganizeGameStageAction(t,i,n);break;case a.RoomStage.SelectCards:this.ExecuteSelectCardsStageAction(t,i,n);break;case a.RoomStage.WaitCmpCards:this.ExecuteWaitCmpCardsStagAction(t,i,n);break;case a.RoomStage.CmpCardsBalanced:this.ExecuteCmpCardsStageAction(t,i,n);break;case a.RoomStage.WaitNextRoundGame:this.ExecuteWaitNextRoundGameAction(t,i,n)}return this.roomStage}},e.prototype.GetRoomStageAction=function(t){switch(t){case a.RoomStage.OrganizeGame:return[this.organizeGameStageAction];case a.RoomStage.SelectCards:return[this.organizeGameStageAction,this.selectCardsStageAction];case a.RoomStage.WaitCmpCards:return[this.waitCmpCardsStageAction];case a.RoomStage.CmpCardsBalanced:return[this.waitCmpCardsStageAction,this.cmpCardsStageAction,this.waitNextRoundGameAction];case a.RoomStage.WaitNextRoundGame:return[this.waitNextRoundGameAction]}},e.prototype.GetRefreshRoomStage=function(){var t=a.RoomStage.UnKnown;return(t=o.GetRoomStageByPalyerStatus(this.players[0].GetGameStatus()))==a.RoomStage.UnKnown&&(t=a.RoomStage.NotExist),t},e.prototype.ExecuteOrganizeGameStageAction=function(t,e,i){this.organizeGameStageAction.isFirstEnterStage=e,this.organizeGameStageAction.isDirectEnterStage=t,this.organizeGameStageAction.timeScale=i,this.organizeGameStageAction.isImmediateApplyPlayerGameStatus=!0,this.organizeGameStageAction.Execute()},e.prototype.ExecuteSelectCardsStageAction=function(t,e,i){this.oldRoomStage!=a.RoomStage.OrganizeGame&&(this.organizeGameStageAction.isFirstEnterStage=e,this.organizeGameStageAction.isDirectEnterStage=t,this.organizeGameStageAction.timeScale=i,this.organizeGameStageAction.isImmediateApplyPlayerGameStatus=!0,this.organizeGameStageAction.Execute()),this.selectCardsStageAction.isFirstEnterStage=e,this.selectCardsStageAction.isDirectEnterStage=t,this.selectCardsStageAction.timeScale=i,this.selectCardsStageAction.isImmediateApplyPlayerGameStatus=!0,this.selectCardsStageAction.Execute()},e.prototype.ExecuteWaitCmpCardsStagAction=function(t,e,i){this.waitCmpCardsStageAction.isFirstEnterStage=e,this.waitCmpCardsStageAction.isDirectEnterStage=t,this.waitCmpCardsStageAction.timeScale=i,this.waitCmpCardsStageAction.isPressCompletedBtn=this.isPressCompletedBtn,this.waitCmpCardsStageAction.isImmediateApplyPlayerGameStatus=!0,this.waitCmpCardsStageAction.Execute()},e.prototype.ExecuteCmpCardsStageAction=function(t,e,i){this.oldRoomStage!=a.RoomStage.WaitCmpCards&&(this.waitCmpCardsStageAction.isFirstEnterStage=e,this.waitCmpCardsStageAction.isDirectEnterStage=t,this.waitCmpCardsStageAction.timeScale=i,this.waitCmpCardsStageAction.isImmediateApplyPlayerGameStatus=!0,this.waitCmpCardsStageAction.Execute()),this.cmpCardsStageAction.isFirstEnterStage=e,this.cmpCardsStageAction.isDirectEnterStage=t,this.cmpCardsStageAction.timeScale=i,this.cmpCardsStageAction.isImmediateApplyPlayerGameStatus=!0,this.cmpCardsStageAction.Execute(),this.waitNextRoundGameAction.isFirstEnterStage=e,this.waitNextRoundGameAction.isDirectEnterStage=t,this.waitNextRoundGameAction.timeScale=i,this.waitNextRoundGameAction.isImmediateApplyPlayerGameStatus=!0,this.waitNextRoundGameAction.Execute()},e.prototype.ExecuteWaitNextRoundGameAction=function(t,e,i){this.oldRoomStage!=a.RoomStage.CmpCardsBalanced&&(this.waitCmpCardsStageAction.isFirstEnterStage=e,this.waitCmpCardsStageAction.isDirectEnterStage=t,this.waitCmpCardsStageAction.timeScale=i,this.waitCmpCardsStageAction.isImmediateApplyPlayerGameStatus=!0,this.waitCmpCardsStageAction.Execute(),this.cmpCardsStageAction.isFirstEnterStage=e,this.cmpCardsStageAction.isDirectEnterStage=t,this.cmpCardsStageAction.isImmediateApplyPlayerGameStatus=!0,this.cmpCardsStageAction.timeScale=i,this.cmpCardsStageAction.Execute()),this.waitNextRoundGameAction.isFirstEnterStage=e,this.waitNextRoundGameAction.isDirectEnterStage=t,this.waitNextRoundGameAction.timeScale=i,this.waitNextRoundGameAction.isImmediateApplyPlayerGameStatus=!0,this.waitNextRoundGameAction.Execute()},e.prototype.IsRoomStageEnded=function(t){if(this.roomStage!=t)return!0;var e=this.GetRoomStageAction(this.roomStage);if(null==e)return!0;for(var i=0;i<e.length;i++)if(e[i].ExeState()!=u.ActionExeState.EndExecuted)return!1;return!0},e.prototype.IsRoomStageActionsEnded=function(t){if(null==t)return!0;for(var e=0;e<t.length;e++)if(t[e].ExeState()!=u.ActionExeState.EndExecuted)return!1;return!0},e.prototype.AddPlayer=function(t){if(this.players.length>t.seatIdx)this.players[t.seatIdx]=t,null!=this.playerSeatViewers[t.seatIdx]&&this.playerSeatViewers[t.seatIdx].PushToPool(),this.playerSeatViewers[t.seatIdx]=null;else{for(var e=t.seatIdx-this.players.length+1,i=0;i<e;i++)this.players.push(null),this.playerSeatViewers.push(null);this.players[t.seatIdx]=t,null!=this.playerSeatViewers[t.seatIdx]&&this.playerSeatViewers[t.seatIdx].PushToPool(),this.playerSeatViewers[t.seatIdx]=null}},e.prototype.CreateRoom=function(t){null==this.roomNode&&(this.roomNode=s.PrefabPool.Instance().Pop(a.PrefabIdx.Room),r.SetNodeParent(this.roomNode,t),this.roomNode.setPosition(cc.Vec3.ZERO),this.roomNode.active=!0,this.roomSeatsLayoutTable=this.roomNode.getChildByName("SeatsLayout").getComponent(c.default),this.roomSeatsLayoutTable.Layout(),this.roomSlotsViewerRootNode=this.roomNode.getChildByName("SlotsViewerRoot"),this.roomCardsViewerRootNode=this.roomNode.getChildByName("CardsViewerRoot"),this.roomTableCardsViewerRootNode=this.roomNode.getChildByName("TableCardsViewerRoot"),this.roomTableCardsViewer2RootNode=this.roomNode.getChildByName("TableCardsViewer2Root"),this.roomTableCardsViewer3RootNode=this.roomNode.getChildByName("TableCardsViewer3Root"),this.btnExit=this.roomNode.getChildByName("ExitBtn"),this.btnExit.getComponent(b.default).MouseClickEvent=this.PressExitBtn.bind(this))},e.prototype.PressExitBtn=function(){m.GameTaskMgr.Instance().SendMsg("ExitRoom")},e.prototype.CreatePlayerSeatViewer=function(t){return(0==this.playerSeatViewers.length||t>=this.playerSeatViewers.length||null==this.playerSeatViewers[t])&&(this.playerSeatViewers[t]=this.AddPlayerSeatViewerToSeat(t),this.playerSeatViewers[t].SetSeatIdx(t)),this.playerSeatViewers[t]},e.prototype.AddPlayerSeatViewerToSeat=function(t){var e=s.PrefabPool.Instance().Pop(a.PrefabIdx.PlayerSeatViewer).getComponent(T.default);e.node.active=!0,e.Reset();var i=this.roomNode.getChildByName("SeatsLayout"),n=this.roomSeatsLayoutTable.GetNodeRect(t);return this.PlayerSeatViewerAddToParent(e,n,i),e.SetPlayerName(this.players[t].roleName),this.playerSeatViewers[t]=e,e},e.prototype.PlayerSeatViewerAddToParent=function(t,e,i){var n=t.node;r.SetNodeParent(n,i);var o=e.X()+e.Width()/2,a=e.Y()+e.Height()/2;n.setPosition(new cc.Vec3(o,a,0)),n.width=e.Width(),n.height=e.Height(),t.Layout()},e.prototype.CreateCardsViewer=function(){var t=new l.CardsViewer(this.roomCardsViewerRootNode);return t.animScale=.7,t.fapaiAnimScale=.6,t.IsFaPaiFrontFace=!1,t.IsFaPaiEndFilpCard=!0,t.ArcLayoutHeightScale=0,t.ArcLayoutAbsEluerAngleZ=0,t.LayoutCardCount=13,t.PaiDuiPosOffset=new cc.Vec2(-.005,.0015),t.SortPaiOffset=new cc.Vec2(0,0),t.IsOpenCardWobble=!0,t.IsFaPaiPreRightMove=!0,t.SetLayoutWidth(this.roomCardsViewerRootNode.width),t.UnSelectedAllCardNode=this.roomNode,t.CacheFaPaiAnimation(),t},e.prototype.RefreshOtherPlayerSeatViewer=function(t){void 0===t&&(t=!1);var e=1,i=!1;if(t&&(e=0,i=!0),this.roomStage!=a.RoomStage.CmpCardsBalanced||this.IsRoomStageEnded(this.roomStage))for(var n=1;n<this.players.length;n++)this.CreatePlayerSeatViewer(n),this.RefreshPlayerSeatViewer(n,e,!1,i),this.players[n].AlppyChangedGameStatus()},e.prototype.RefreshPlayerSeatViewer=function(t,e,i,n,o){var r=!1,s=this.playerSeatViewers[t];if(this.players[t].IsChangedGameStatus()){var c=this.players[t].GetStatusChangedPart();null==e&&(e=1),null==i&&(i=!1),null==o&&(o=!1),c&a.PlayerGameStatus.SubmitedCard?(s.cardFacesList=this.players[t].slotsCardFaces,s.commonCardsTypes=null,s.specCardsType=null,s.actionTimeScale=e,s.isFaPaiEndFilpCard=i,s.isFaPaiFrontFace=o,null==n?this.players[t].IsNewedGameStatus()?s.isOffFaPaiAnim=!0:s.isOffFaPaiAnim=!1:s.isOffFaPaiAnim=n,s.ShowCards(),s.ShowPlayerGameState(a.PlayerShowGameState.CompletedSortPai),r=!0):c&a.PlayerGameStatus.GetedCard?(s.actionTimeScale=e,s.Ready(),s.ShowPlayerGameState(a.PlayerShowGameState.SortPai)):c&a.PlayerGameStatus.ReadyGame&&(s.actionTimeScale=e,s.ShowPlayerGameState(a.PlayerShowGameState.Ready),this.players[t].SetGameStatus(0))}return r},e.prototype.RefreshAllPlayerSeatViewerNoStatusData=function(t){void 0===t&&(t=!1);for(var e=0;e<this.players.length;e++)this.CreatePlayerSeatViewer(e),this.RefreshPlayerSeatViewerNoStatusData(e)},e.prototype.RefreshPlayerSeatViewerNoStatusData=function(t){},e}(C.ScObject);i.Room=_,cc._RF.pop()},{"../../../../GameCompents/MouseEvents":"MouseEvents","../../../../GameCompents/TableLayout":"TableLayout","../../../../GameLibs/ScAction/ScActionMgr":"ScActionMgr","../../../../GameLibs/ScStateMachine/ScStateMachine":"ScStateMachine","../../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr","../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../../GameLibs/ScTypes/ScObject":"ScObject","../../../GameTypes":"GameTypes","../../../GameUtils":"GameUtils","../../CardsProcesser/CardsViewer":"CardsViewer","../../ResMgr/Pool/PrefabPool":"PrefabPool","./Action/CmpCardsStageAction":"CmpCardsStageAction","./Action/OrganizeGameStageAction":"OrganizeGameStageAction","./Action/SelectCardsStageAction":"SelectCardsStageAction","./Action/TableFaPaiAction":"TableFaPaiAction","./Action/TableFaPaiAction2":"TableFaPaiAction2","./Action/WaitCmpCardsStageAction":"WaitCmpCardsStageAction","./Action/WaitNextRoundGameAction":"WaitNextRoundGameAction","./PlayerSeatViewer/PlayerSeatViewer":"PlayerSeatViewer"}],ScActionBase:[function(t,e,i){"use strict";cc._RF.push(e,"0e5bega5LBF/5MJTEX8C688","ScActionBase");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node=null,e}return n(e,t),e.prototype.Update=function(){null!=this.node&&this._Update(),null!=this._UnAllRegEnd&&this._UnAllRegEnd(this)},e.prototype.IsNullEndEvent=function(){return null==this._UnAllRegEnd},e.prototype.IsHaveAction=function(){return!1},e}(t("../ScTypes/ScObject").ScObject);i.ScActionBase=o,cc._RF.pop()},{"../ScTypes/ScObject":"ScObject"}],ScActionMgr:[function(t,e,i){"use strict";cc._RF.push(e,"ea292E/Q2VNFrUv70Zua0s9","ScActionMgr");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../ScTask/GameTaskMgr"),a=t("../ScTypes/ScObject"),r=t("../Collections/LinkedListEx"),s=t("../ScPool/ScPoolMgr"),c=t("./ScAction"),l=function(){return function(){}}(),h=function(){return function(){}}(),u=function(t){function e(){var e=t.call(this)||this;return e.actionPriorityLinked=new r.LinkedListEx,e.removeNodeList=new Array,e.actionInfoPool=s.ScPoolMgr.Instance().CreatePool(),e.actionInfoPool.NewMethod=e.NewActionInfo.bind(e),e.actionInfoPool.createObjSize=5,e.actionInfoPool.CreatePool(),e.actionInfoNodePool=s.ScPoolMgr.Instance().CreatePool(),e.actionInfoNodePool.NewMethod=e.NewActionInfoNode.bind(e),e.actionInfoNodePool.createObjSize=5,e.actionInfoNodePool.CreatePool(),e.timer=o.GameTaskMgr.Instance().CreateTimer(e.Update.bind(e),null),e.timer.IsFrameRateSynch=!0,e.timer.Start(),e.globalScAction=e.CreateAction(c.ScAction),e}return n(e,t),e.Instance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.NewActionInfo=function(){return new c.ActionInfo},e.prototype.GetGobalScAction=function(){return this.globalScAction},e.prototype.PopActionInfo=function(){return this.actionInfoPool.Pop()},e.prototype.PushActionInfo=function(t){return this.actionInfoPool.Push(t)},e.prototype.NewActionInfoNode=function(){return new r.LinkedListNode(null)},e.prototype.PopActionInfoNode=function(){var t=this.actionInfoNodePool.Pop();return t.Next=null,t.Previous=null,t.Value=null,t},e.prototype.PushActionInfoNode=function(t){return this.actionInfoNodePool.Push(t)},e.prototype.Stop=function(){this.timer.Stop();for(var t=this.actionPriorityLinked.Last();null!=t;t=t.Previous)for(var e=t.Value.actionLinked.First();null!=e;e=e.Next)this.RemoveAction(e.Value);this.actionPriorityLinked.Clear()},e.prototype.Update=function(){for(var t=this.actionPriorityLinked.Last();null!=t;t=t.Previous)for(var e=(i=t.Value.actionLinked).First();null!=e;e=e.Next)e.Value.Update();if(this.removeNodeList.length>0){for(var i=void 0,n=0;n<this.removeNodeList.length;n++)(i=this.removeNodeList[n].priorityNode.Value.actionLinked).RemoveNode(this.removeNodeList[n].node),0==i.Count()&&this.actionPriorityLinked.RemoveNode(this.removeNodeList[n].priorityNode);this.removeNodeList.length=0}},e.prototype.GetActionMatchPriorityNode=function(t){var e,i;for(i=this.actionPriorityLinked.First();null!=i;i=i.Next){if(i.Value.priority==t)return i;if(i.Value.priority>t)return(e=new l).priority=t,e.actionLinked=new r.LinkedListEx,this.actionPriorityLinked.AddBefore(i,e),i}return(e=new l).priority=t,e.actionLinked=new r.LinkedListEx,this.actionPriorityLinked.AddLast(e),this.actionPriorityLinked.Last()},e.prototype.CreateAction=function(t,e){void 0===e&&(e=0);var i=this.GetActionMatchPriorityNode(e);if(null==i)return null;var n=new t,o=i.Value.actionLinked;o.AddLast(n);var a=new h;return a.priorityNode=i,a.node=o.Last(),n.node=a,n},e.prototype.RemoveAction=function(t){t.IsNullEndEvent()&&(t._UnAllRegEnd=this.UnAllRegEnd.bind(this)),t.UnAllReg()},e.prototype.UnAllRegEnd=function(t){t.IsHaveAction()||this.removeNodeList.push(t.node)},e}(a.ScObject);i.ScActionMgr=u,cc._RF.pop()},{"../Collections/LinkedListEx":"LinkedListEx","../ScPool/ScPoolMgr":"ScPoolMgr","../ScTask/GameTaskMgr":"GameTaskMgr","../ScTypes/ScObject":"ScObject","./ScAction":"ScAction"}],ScAction:[function(t,e,i){"use strict";cc._RF.push(e,"799efe4QxRJFId/jIDNF8fb","ScAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ScActionBase"),a=t("../Collections/LinkedListEx"),r=t("../Collections/Dictionary"),s=t("./ScActionMgr"),c=function(){return function(){}}();i.ActionInfo=c;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actionInfoLinked=new a.LinkedListEx,e.actionInfoNodeDict=new r.Dictionary,e.regDataList=new Array,e}return n(e,t),e.prototype._Update=function(){for(var t=this.actionInfoLinked.Last();null!=t;t=t.Previous)t.Value.isUse&&t.Value.updateFunc(t.Value.data);for(var e=0;e<this.regDataList.length;e++)this.regDataList[e].isReg?null!=(t=this.actionInfoNodeDict.getValue(this.regDataList[e].key))?(s.ScActionMgr.Instance().PushActionInfo(t.Value),t.Value=this.regDataList[e]):((t=this.GetActionMatchPriorityNode(this.regDataList[e].priority)).Value=this.regDataList[e],this.regDataList[e].priority<=-99999&&(null!=t.Previous?this.regDataList[e].priority=t.Previous.Value.priority+1:this.regDataList[e].priority=0),this.actionInfoNodeDict.setValue(this.regDataList[e].key,t)):(null!=(t=this.actionInfoNodeDict.getValue(this.regDataList[e].key))&&(this.actionInfoLinked.RemoveNode(t),this.actionInfoNodeDict.remove(this.regDataList[e].key),s.ScActionMgr.Instance().PushActionInfo(t.Value),s.ScActionMgr.Instance().PushActionInfoNode(t)),null!=this.UnRegEnd&&this.UnRegEnd(this.regDataList[e].key),s.ScActionMgr.Instance().PushActionInfo(this.regDataList[e]));this.regDataList.length=0,0==this.actionInfoLinked.Count()&&null!=this.NotHaveAction&&this.NotHaveAction(this)},e.prototype.GetActionMatchPriorityNode=function(t){var e,i;if(t>-99999)for(e=this.actionInfoLinked.First();null!=e;e=e.Next)if(e.Value.priority>t)return i=s.ScActionMgr.Instance().PopActionInfoNode(),this.actionInfoLinked.AddBeforeNode(e,i),i;return i=s.ScActionMgr.Instance().PopActionInfoNode(),this.actionInfoLinked.AddLastNode(i),i},e.prototype.IsHaveAction=function(){return 0!=this.actionInfoLinked.Count()},e.prototype.UnAllReg=function(){for(var t=0;t<this.regDataList.length;t++)this.regDataList[t].isUse=!1,this.regDataList[t].isReg=!1;var e;for(e=this.actionInfoLinked.First();null!=e;e=e.Next)this.UnReg(e.Value.key)},e.prototype.IsHavKey=function(t){return!!this.actionInfoNodeDict.containsKey(t)},e.prototype.Reg=function(t,e,i,n){void 0===n&&(n=-99999);var o=s.ScActionMgr.Instance().PopActionInfo();o.key=t,o.isReg=!0,o.isUse=!0,o.data=i,o.priority=n,o.updateFunc=e,this.regDataList.push(o)},e.prototype.UnReg=function(t){var e=this.actionInfoNodeDict.getValue(t);null!=e&&(e.Value.isUse=!1);var i=s.ScActionMgr.Instance().PopActionInfo();i.key=t,i.isReg=!1,i.isUse=!1,i.updateFunc=null,this.regDataList.push(i)},e}(o.ScActionBase);i.ScAction=l,cc._RF.pop()},{"../Collections/Dictionary":"Dictionary","../Collections/LinkedListEx":"LinkedListEx","./ScActionBase":"ScActionBase","./ScActionMgr":"ScActionMgr"}],ScDesginAction:[function(t,e,i){"use strict";cc._RF.push(e,"3b0dfijPpJMhLaIryrQaQb6","ScDesginAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ScStateMachine"),a=t("./ScStateMachineTypes"),r=t("../ScTypes/ScObject"),s=t("../ScUtils/ScUtils"),c=t("../Collections/Dictionary"),l=function(t){function e(e,i){void 0===e&&(e=!1),void 0===i&&(i=null);var n=t.call(this)||this;return n.name=null,n.BundleData=null,n.UnBundleData=null,n.ProcessExData=null,n.ActionEndedProcesser=null,n.UnInstallProcesser=null,n.isAutoInstallAndUninstall=!1,n.timeScale=1,n.stateBaseValue=0,n.exeState=a.ActionExeState.EndExecuted,n.exeActionCount=0,n.isSetFirstState=!1,n.isBuiltInStateMachine=!1,n.isWait=!1,n.waitObj=null,n.isRecoverBundleData=!1,n.stateMachine=null,n.stateActionDict=new c.Dictionary,e&&(n.isBuiltInStateMachine=e,n.stateMachine=new o.ScStateMachine(i)),n}return n(e,t),e.prototype.CurtState=function(){return this.stateMachine.ExeMode!=a.StateMachineExeMode.Parallel?this.stateMachine.CurtState():this.curtState},e.prototype.StateStartTime=function(){return this.stateMachine.ExeMode!=a.StateMachineExeMode.Parallel?this.stateMachine.StateStartTime():this.stateStartTime},e.prototype.StateLiveTime=function(){return this.stateMachine.ExeMode!=a.StateMachineExeMode.Parallel?this.stateMachine.StateLiveTime():this.stateLiveTime},e.prototype.StateBaseValue=function(){return this.stateBaseValue},e.prototype.SetStateBaseValue=function(t){this.stateBaseValue=t},e.prototype.ExeState=function(){return this.exeState},e.prototype.SetExeState=function(t){this.exeState=t},e.prototype._AddExeActionCount_SYS=function(){this.exeActionCount++},e.prototype._SubExeActionCount_SYS=function(){this.exeActionCount>0&&this.exeActionCount--},e.prototype.IsBuiltInStateMachine=function(){return this.isBuiltInStateMachine},e.prototype.IdleState=function(){return null!=this.stateMachine?this.stateMachine.IdleState():this.endState+1},e.prototype.IsIdle=function(){return this.GetState()==this.IdleState()},e.prototype.Clear=function(){if(this.stateActionDict.clear(),this.isWait=!1,this.exeActionCount=0,this.isWait=!1,this.waitObj=null,this.bundleData=null,null!=this.StateEndedProcessers){for(var t=0;t<this.StateEndedProcessers.length;t++)this.StateEndedProcessers[t]=null;this.StateEndedProcessers=null}},e.prototype.Destroy=function(){this.UnInstall(),this.Clear(),this.isBuiltInStateMachine&&null!=this.stateMachine&&this.stateMachine.Destroy(),this.stateMachine=null},e.prototype.GetActionEndedState=function(){return this.endState+this.stateBaseValue},e.prototype.SetData=function(t){null!=this.stateMachine&&this.isBuiltInStateMachine&&this.stateMachine.SetData(t)},e.prototype.Install=function(t){null!=t?(this.SetData(t),this.Install()):null!=this.stateMachine&&this.stateMachine.Install(this)},e.prototype.UnInstall=function(){null!=this.UnInstallProcesser&&this.UnInstallProcesser(this),null!=this.stateMachine&&this.stateMachine.UnInstall(this)},e.prototype.DefineIdleState=function(t){null!=this.stateMachine&&this.isBuiltInStateMachine&&this.stateMachine.DefineIdleState(t)},e.prototype.SetFirstState=function(t){this.firstState=t,this.isSetFirstState=!0},e.prototype.GotoMachineState=function(t,e,i){if(null!=this.stateMachine){null==e&&(e=s.Time()),null==i&&(i=0);var n=this.isWait;this.isWait=!1;var o=t+this.StateBaseValue();t==this.IdleState()&&(o=t);var r=!1;this.stateMachine.ExeMode!=a.StateMachineExeMode.Parallel?r=this.stateMachine.GotoState(o,e,i):(this.stateStartTime=e,this.stateLiveTime=i,this.curtState=o,this.stateLiveTime*this.timeScale<=.001&&this._Update_SYS(),r=!0),0==r&&(this.isWait=n)}},e.prototype.GotoState=function(t,e){this.GotoMachineState(t,null,e)},e.prototype.WaitGoToState=function(t,e){if(null==this.waitObj||this.waitObj==t){if(this.waitObj=t,0==this.waitObj.isWait)return this.isWait=!1,this.waitObj.isWait=!0,this.waitObj=null,void this.GotoState(e);this.isWait=!0,this.waitGotoState=e}},e.prototype.ContinueGoto=function(t){if(null==this.waitObj||this.waitObj==t)return this.waitObj=t,this.waitObj.isWait=!1,1==this.isWait?(this.isWait=!1,this.waitObj.isWait=!0,this.waitObj=null,void this.GotoState(this.waitGotoState)):void 0},e.prototype.GetState=function(){return null==this.stateMachine?-1:this.CurtState()},e.prototype.SetStateLifeRange=function(t,e){this.startState=t,this.endState=e,this.isSetFirstState||(this.firstState=t);var i=e-t+1;this.StateEndedProcessers=new Array(i),null!=this.stateMachine&&this.stateMachine._CreateIdleState_SYS()},e.prototype.IsStateIn=function(t,e){void 0===e&&(e=!0);var i=t;return e&&(i=t-this.StateBaseValue()),i>=this.startState&&i<=this.endState},e.prototype.AddStateChildAction=function(t,e){t<this.startState||t>this.endState||(this.stateActionDict.containsKey(t)||this.stateActionDict.setValue(t,new Array),this.stateActionDict.getValue(t).push(e))},e.prototype.SetStateEndedProcesser=function(t,e){var i=t-this.startState;null==this.StateEndedProcessers||this.StateEndedProcessers.length<=i||(this.StateEndedProcessers[i]=e)},e.prototype._Execute_SYS=function(t,e){return!(null==this.stateMachine||!this.IsIdle())&&(this.isAutoInstallAndUninstall&&this.Install(),this.exeState=a.ActionExeState.Executing,null!=this.ProcessExData&&this.ProcessExData(t[0]),null!=this.UnBundleData&&this.UnBundleData(t[1]),null==e&&(e=0),this.GotoState(this.firstState,e),!0)},e.prototype.Execute=function(t,e,i){if(null==this.stateMachine)return!1;this.isAutoInstallAndUninstall&&this.Install();var n=null;null!=this.BundleData&&(n=this.BundleData(),this.ExeState()==a.ActionExeState.EndExecuted?this.bundleData=n:this.ExeState()==a.ActionExeState.Executing&&(this.isRecoverBundleData=!0)),this.stateMachine.Execute(this,[t,n],e,i)},e.prototype.Stop=function(t){void 0===t&&(t=!1),this.exeState!=a.ActionExeState.EndExecuted&&(this.stateMachine.ExeMode!=a.StateMachineExeMode.Parallel&&t&&this.stateMachine._RemoveNotExecutingActionFromQueue_SYS(this),this.EndAction())},e.prototype.EndAction=function(){this.exeState!=a.ActionExeState.EndExecuted&&(this.isWait=!1,this.stateMachine._SetToIdleState_SYS(),this._SubExeActionCount_SYS(),0==this.exeActionCount?this.exeState=a.ActionExeState.EndExecuted:this.stateMachine.ExeMode!=a.StateMachineExeMode.Parallel&&(this.exeState=a.ActionExeState.WaitExecute),null!=this._ActionEndedProcesser_SYS&&this._ActionEndedProcesser_SYS(this),null!=this.ActionEndedProcesser&&this.ActionEndedProcesser(this),this.isAutoInstallAndUninstall&&this.UnInstall())},e.prototype._Update_SYS=function(){var t;if(null==this.stateMachine||this.CurtState()<this.startState+this.stateBaseValue||this.CurtState()>this.endState+this.stateBaseValue){if(this.CurtState()==this.IdleState()&&this.exeState==a.ActionExeState.Executing){if(s.Time()-this.StateStartTime()<this.StateLiveTime()*this.timeScale-.001)return;this.EndAction()}}else if(!(this.isWait||s.Time()-this.StateStartTime()<this.StateLiveTime()*this.timeScale-.001||(this.isRecoverBundleData&&null!=this.UnBundleData&&null!=this.bundleData&&(this.UnBundleData(this.bundleData),this.bundleData=null),null==(t=this.stateActionDict.getValue(this.CurtState()-this.stateBaseValue))))){for(var e=this.CurtState()-this.stateBaseValue,i=0;i<t.length;i++)t[i]();null!=this.StateEndedProcessers&&null!=this.StateEndedProcessers[e-this.startState]&&this.StateEndedProcessers[e-this.startState](this,e)}},e}(r.ScObject);i.ScDesginAction=l,cc._RF.pop()},{"../Collections/Dictionary":"Dictionary","../ScTypes/ScObject":"ScObject","../ScUtils/ScUtils":"ScUtils","./ScStateMachine":"ScStateMachine","./ScStateMachineTypes":"ScStateMachineTypes"}],ScMath:[function(t,e,i){"use strict";cc._RF.push(e,"e0511ilsb9IZaOSgG21Q01E","ScMath"),Object.defineProperty(i,"__esModule",{value:!0}),i.CubicBezierVec2=function(t,e,i,n,o){var a=e.mul(Math.pow(1-t,3)),r=i.mul(3*t*Math.pow(1-t,2)),s=n.mul(3*t*t*(1-t)),c=o.mul(Math.pow(t,3));return a.add(r).add(s).add(c)},i.CubicBezier=function(t,e,i,n,o){var a=e.mul(Math.pow(1-t,3)),r=i.mul(3*t*Math.pow(1-t,2)),s=n.mul(3*t*t*(1-t)),c=o.mul(Math.pow(t,3));return a.add(r).add(s).add(c)},i.SquareBezier=function(t,e,i,n){var o=e.mul(Math.pow(1-t,2)),a=i.mul(2*t*(1-t)),r=n.mul(t*t);return o.add(a).add(r)},i.GetRouteHandles=function(t,e,i){var n=new Array(2),o=e.sub(t).normalize(),a=Math.acos(o.dot(cc.Vec3.UP)),r=Math.acos(o.dot(cc.Vec3.RIGHT)),s=Math.acos(o.dot(cc.Vec3.UP.mul(-1))),c=Math.acos(o.dot(cc.Vec3.RIGHT.mul(-1))),l=a,h=cc.Vec3.UP;r<l&&(l=r,h=cc.Vec3.RIGHT),s<l&&(l=s,h=cc.Vec3.UP.mul(-1)),c<l&&(h=cc.Vec3.RIGHT.mul(-1));var u=cc.Vec3.ZERO,d=this.TestClockWise(o,h);return d<0?u=new cc.Vec3(-o.y,o.x,0):d>0&&(u=new cc.Vec3(o.y,-o.x,0)),n[0]=t.add(u.mul(i[0])),n[1]=e.add(u.mul(i[1])),n},i.TestClockWise=function(t,e){var i=t.cross(e);return i.z>0?1:0==i.z?0:-1},cc._RF.pop()},{}],ScNetTypes:[function(t,e,i){"use strict";cc._RF.push(e,"e9f5ainBWBIN45VhZzOTG2Y","ScNetTypes"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.LOCAL_DATA=0]="LOCAL_DATA",t[t.REMTOE_DATA=1]="REMTOE_DATA"}(i.SocketMode||(i.SocketMode={})),function(t){t[t.MODE_STREAM=0]="MODE_STREAM",t[t.MODE_PACK=1]="MODE_PACK"}(i.DataTransMode||(i.DataTransMode={})),function(t){t[t.ES_PACKET_HEADLEN_NOT_GET=0]="ES_PACKET_HEADLEN_NOT_GET",t[t.ES_PACKET_HEAD_FULL=1]="ES_PACKET_HEAD_FULL",t[t.ES_PACKET_HEAD_NOT_FULL=2]="ES_PACKET_HEAD_NOT_FULL"}(i.ExtractState||(i.ExtractState={})),function(t){t[t.EV_SOCKET_CLOSED=0]="EV_SOCKET_CLOSED",t[t.EV_SOCKET_ERROR=1]="EV_SOCKET_ERROR",t[t.EV_SOCKET_PORT_BEUSED=2]="EV_SOCKET_PORT_BEUSED",t[t.EV_SOCKET_CONNECTED=3]="EV_SOCKET_CONNECTED",t[t.EV_SOCKET_SEND=4]="EV_SOCKET_SEND",t[t.EV_SOCKET_RECV=5]="EV_SOCKET_RECV"}(i.SocketEvent||(i.SocketEvent={})),function(t){t[t.UNKNOWN_SOCKET=0]="UNKNOWN_SOCKET",t[t.CONNECT_SERVER_SOCKET=1]="CONNECT_SERVER_SOCKET"}(i.NetSocketType||(i.NetSocketType={})),function(t){t[t.INIT_FAILD=0]="INIT_FAILD",t[t.NEW_CREATE=1]="NEW_CREATE",t[t.CONNECTTING_SERVER=2]="CONNECTTING_SERVER",t[t.CONNECTED_SERVER=3]="CONNECTED_SERVER",t[t.PORT_BEUSED=4]="PORT_BEUSED",t[t.RESPONSE_TIMEOUT=5]="RESPONSE_TIMEOUT",t[t.CLOSEING=6]="CLOSEING",t[t.CLOSED=7]="CLOSED"}(i.SocketState||(i.SocketState={})),cc._RF.pop()},{}],ScObject:[function(t,e,i){"use strict";cc._RF.push(e,"3c67dabXdlJ7Lmpi/yZW7m9","ScObject"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("../ScUtils/UniqueSingleMachineID"),o=function(){function t(){var t=n.UniqueSingleMachineID.Instance().gen();this.uuid=t.toString()}return t.prototype.UUID=function(){return this.uuid},t}();i.ScObject=o,cc._RF.pop()},{"../ScUtils/UniqueSingleMachineID":"UniqueSingleMachineID"}],ScPoolDict:[function(t,e,i){"use strict";cc._RF.push(e,"02f46GR0EhFqYoFN1iHvEdS","ScPoolDict");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ScPool"),a=t("../ScTypes/ScObject"),r=t("../Collections/Dictionary"),s=t("./ScPoolMgr"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.Destory=function(){},e}(a.ScObject);i.ScPoolDictBase=c;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NewMethod=null,e.DestroyCB=null,e.createObjSize=5,e.poolDict=new r.Dictionary,e}return n(e,t),e.prototype.CreatePool=function(t){var e=this.poolDict.getValue(t);if(null==e){e=new o.ScPool;null==t&&e.UUID(),this.poolDict.setValue(t,e),e.poolDict=this,e.key=t,e.NewMethod=this.NewMethod,e.DestroyCB=this.DestroyCB,e.createObjSize=this.createObjSize,e.newObjParam=t,null!=this.NewMethod&&null!=this.createObjSize&&e.CreatePool()}return e},e.prototype.Destory=function(){s.ScPoolMgr.Instance().DestoryPoolDict(this.dictkey)},e.prototype._Destory=function(){this.poolDict.forEach(function(t,e){e.Destory()}),this.poolDict.clear()},e.prototype.DestoryPool=function(t){var e=this.poolDict.getValue(t);this.poolDict.remove(t),null!=e&&e.Destory()},e.prototype.Pop=function(t){var e=this.poolDict.getValue(t);return null==e?null:e.Pop()},e.prototype.Push=function(t,e){var i=this.poolDict.getValue(e);if(null==i)return null;i.Push(t)},e}(c);i.ScPoolDict=l,cc._RF.pop()},{"../Collections/Dictionary":"Dictionary","../ScTypes/ScObject":"ScObject","./ScPool":"ScPool","./ScPoolMgr":"ScPoolMgr"}],ScPoolMgr:[function(t,e,i){"use strict";cc._RF.push(e,"e1ffbWItlBN0YPrM+1fSGoO","ScPoolMgr");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ScPoolDict"),a=t("../ScTypes/ScObject"),r=t("../Collections/Dictionary"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.poolDictDict=new r.Dictionary,e}return n(e,t),e.Instance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.Destory=function(){this.poolDictDict.forEach(function(t,e){e.Destory()}),this.poolDictDict.clear()},e.prototype.DestoryPoolDict=function(t){var e=this.poolDictDict.getValue(t);this.poolDictDict.remove(t),null!=e&&e.Destory()},e.prototype.CreatePoolDict=function(t){var e=this.poolDictDict.getValue(t);if(null==e){var i=new o.ScPoolDict;e=i,null==t&&(t=e.UUID()),i.dictkey=t,this.poolDictDict.setValue(t,e)}return e},e.prototype.CreatePool=function(t,e){return this.CreatePoolDict(t).CreatePool(e)},e.instance=null,e}(a.ScObject);i.ScPoolMgr=s,cc._RF.pop()},{"../Collections/Dictionary":"Dictionary","../ScTypes/ScObject":"ScObject","./ScPoolDict":"ScPoolDict"}],ScPool:[function(t,e,i){"use strict";cc._RF.push(e,"06b40WMQbpFjoXT1XrayCHF","ScPool");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function e(e){var i=t.call(this)||this;return i.createObjSize=5,i.newObjParam=null,i.objectInfoList=new Array,i.pos=-1,i.name=e,i}return n(e,t),e.prototype.CreatePool=function(){for(var t,e=0;e<this.createObjSize;e++)this.objectInfoList.push(null);for(e=0;e<this.createObjSize;e++)t=this.NewMethod(this.newObjParam),this.pos++,this.pos<this.objectInfoList.length&&(this.objectInfoList[this.pos]=t)},e.prototype.Pop=function(){this.pos<0&&this.CreatePool();var t=this.objectInfoList[this.pos];return this.objectInfoList[this.pos]=null,this.pos--,t},e.prototype.Push=function(t){this.pos++,this.pos>=this.objectInfoList.length?(cc.log("\u6ce8\u610f\u6b64\u5904\u662f\u5426\u6709obj\u5728pool\u4e2d\u91cd\u590d\u88ab\u5b58\u53d6"),this.objectInfoList.push(t)):this.objectInfoList[this.pos]=t},e.prototype.Destory=function(){null!=this.poolDict&&null!=this.key?this.poolDict.DestoryPool(this.key):this._Destory()},e.prototype._Destory=function(){null!=this.DestroyCB&&this.DestroyCB(this.objectInfoList),this.objectInfoList.length=0,this.pos=-1},e}(t("../ScTypes/ScObject").ScObject);i.ScPool=o,cc._RF.pop()},{"../ScTypes/ScObject":"ScObject"}],ScStateMachineTypes:[function(t,e,i){"use strict";cc._RF.push(e,"0904ecp7C1JM5JhAjcWYLwr","ScStateMachineTypes"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.WaitExecute=0]="WaitExecute",t[t.Executing=1]="Executing",t[t.EndExecuted=2]="EndExecuted"}(i.ActionExeState||(i.ActionExeState={})),function(t){t[t.Serial=0]="Serial",t[t.Mutex=1]="Mutex",t[t.Parallel=2]="Parallel",t[t.IsFreeExe=3]="IsFreeExe"}(i.StateMachineExeMode||(i.StateMachineExeMode={})),function(t){t[t.AddActionToQueueDelay=0]="AddActionToQueueDelay",t[t.PrevActionEndDelay=1]="PrevActionEndDelay"}(i.StateMachineActionDelayMode||(i.StateMachineActionDelayMode={}));var n=function(){function t(){this.isWait=!0}return t.prototype.Reset=function(){this.isWait=!0},t}();i.WaitObj=n,cc._RF.pop()},{}],ScStateMachine:[function(t,e,i){"use strict";cc._RF.push(e,"6537d2GQoVMXZECphheNNdk","ScStateMachine"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./ScStateMachineTypes"),o=t("../ScAction/ScActionMgr"),a=t("../ScUtils/ScUtils"),r=t("../Collections/LinkedListEx"),s=t("../ScTask/GameTaskMgr"),c=function(){return function(){}}(),l=function(){function t(t){void 0===t&&(t=null),this.ExeMode=n.StateMachineExeMode.Serial,this.isDefineIdleState=!1,this.idleState=-1,this.isBuildInActionMgr=!0,this.waitExcuteActionQueue=new r.LinkedListEx,this.actionList=new Array,null==t?(this.stateMachineActionMgr=o.ScActionMgr.Instance().GetGobalScAction(),this.isBuildInActionMgr=!0):(this.stateMachineActionMgr=t,this.isBuildInActionMgr=!1)}return t.prototype.Data=function(){return this.data},t.prototype.CurtState=function(){return this.state},t.prototype.SetCurtState=function(t){this.state=t},t.prototype.IdleState=function(){return this.idleState},t.prototype.IsIdle=function(){return this.CurtState()==this.idleState},t.prototype.StateStartTime=function(){return this.stateStartTime},t.prototype.StateLiveTime=function(){return this.stateLiveTime},t.prototype.Destroy=function(){this.waitExcuteActionQueue.Clear(),this.stateMachineActionMgr=null;for(var t=0;t<this.actionList.length;t++)this.actionList[t].IsBuiltInStateMachine||this.actionList[t].Destroy();this.actionList.length=0},t.prototype.SetData=function(t){this.data=t;for(var e=0;e<this.actionList.length;e++)this.actionList[e].SetData(this.Data())},t.prototype.Install=function(t){null!=this.stateMachineActionMgr&&null!=t&&1!=this.FindActionByInstalled(t)&&(t.stateMachine=this,t.data=this.Data(),this.actionList.push(t),this.stateMachineActionMgr.Reg(t.UUID(),t._Update_SYS.bind(t)),t._ActionEndedProcesser_SYS=this.ActionEnded.bind(this),this._CreateIdleState_SYS(),null!=t.Init&&t.Init())},t.prototype.UnInstall=function(t){if(void 0===t&&(t=null),null!=t){if(t.Stop(!0),0!=this.FindActionByInstalled(t)){var e=this.actionList.indexOf(t);-1!=e&&(this.actionList.splice(e,1),this.stateMachineActionMgr.UnReg(t.UUID()))}}else{for(var i=0;i<this.actionList.length;i++)this.actionList[i].Stop(!0),this.stateMachineActionMgr.UnReg(this.actionList[i].UUID());this.actionList.length=0}},t.prototype.ActionEnded=function(t){null!=t&&this.waitExcuteActionQueue.RemoveFirst();for(var e=!1;0==e&&this.waitExcuteActionQueue.Count()>0;){var i=this.waitExcuteActionQueue.First().Value;0==(e=i.action._Execute_SYS(i.exData,i.delayExcuteTime))&&this.waitExcuteActionQueue.RemoveFirst()}},t.prototype.StopAction=function(t){t.Stop()},t.prototype._RemoveNotExecutingActionFromQueue_SYS=function(t){if(0==this.waitExcuteActionQueue.Count())return!0;var e,i=this.waitExcuteActionQueue.First(),o=!0;for(i.Value.action==t&&t.ExeState()==n.ActionExeState.Executing&&(i=i.Next,o=!1);null!=i;)i.Value.action==t?(t._SubExeActionCount_SYS(),e=i.Next,this.waitExcuteActionQueue.RemoveNode(i),i=e):i=i.Next;return o},t.prototype.Execute=function(t,e,i,o){if(this.ExeMode==n.StateMachineExeMode.IsFreeExe&&!this.IsIdle())return!1;null==i&&(i=0),null==o&&(o=n.StateMachineActionDelayMode.PrevActionEndDelay),t._AddExeActionCount_SYS(),t.ExeState()==n.ActionExeState.EndExecuted&&t.SetExeState(n.ActionExeState.WaitExecute);var a=new c;return a.action=t,a.exData=e,a.delayExcuteTime=i,a.delayMode=o,i>0&&(o==n.StateMachineActionDelayMode.AddActionToQueueDelay||this.ExeMode==n.StateMachineExeMode.Parallel)?(this.DelayExecute(a),!0):this._Execute(a)},t.prototype._Execute=function(t){return this.ExeMode==n.StateMachineExeMode.Parallel?(t.action._Execute_SYS(t.exData,t.delayExcuteTime),!0):(this.ExeMode!=n.StateMachineExeMode.Mutex&&t.delayMode!=n.StateMachineActionDelayMode.AddActionToQueueDelay||this.StopAllActions(),this.AddActionInfoToActionQueue(t),!0)},t.prototype.AddActionInfoToActionQueue=function(t){this.waitExcuteActionQueue.AddLast(t),1==this.waitExcuteActionQueue.Count()&&this.ActionEnded(null)},t.prototype.DelayExecute=function(t){var e=t.delayExcuteTime;t.delayExcuteTime=0,s.GameTaskMgr.Instance().PostTask(this.DelayExecuteTaskProcesser.bind(this),t,null,1e3*e)},t.prototype.DelayExecuteTaskProcesser=function(t){this._Execute(t)},t.prototype.StopAllActions=function(){0!=this.waitExcuteActionQueue.Count()&&(this.waitExcuteActionQueue.First().Value.action.Stop(!0),this.waitExcuteActionQueue.Clear())},t.prototype.FindActionByInstalled=function(t){for(var e=0;e<this.actionList.length;e++)if(this.actionList[e]==t)return!0;return!1},t.prototype.DefineIdleState=function(t){1!=this.isDefineIdleState&&(this.idleState=t,this.state=t)},t.prototype.DefineStateValueEnded=function(){this.isDefineIdleState=!0},t.prototype._CreateIdleState_SYS=function(){if(!this.isDefineIdleState){for(var t=0,e=0,i=0;i<this.actionList.length;i++)t<(e=this.actionList[i].GetActionEndedState())&&(t=e);this.idleState=t+1,this.state=this.idleState}},t.prototype._SetToIdleState_SYS=function(){this.state=this.IdleState()},t.prototype.GetStateAtActionIdx=function(t){for(var e=0;e<this.actionList.length;e++)if(this.actionList[e].IsStateIn(t))return e;return-1},t.prototype.StatesInSameActionIdx=function(t,e){for(var i=0;i<this.actionList.length;i++)if(this.actionList[i].IsStateIn(t)&&this.actionList[i].IsStateIn(e))return i;return-1},t.prototype.WaitGoToState=function(t,e){var i=this.GetStateAtActionIdx(e);-1!=i&&this.actionList[i].WaitGoToState(t,e)},t.prototype.ContinueGoto=function(t){var e=this.GetStateAtActionIdx(this.CurtState());-1!=e&&this.actionList[e].ContinueGoto(t)},t.prototype.GotoState=function(){for(var t,e,i,o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(null!=this.data){if(t=o[0],1==o.length?(e=0,i=a.Time()):2==o.length?(e=o[1],i=a.Time()):(i=o[1],e=o[2]),this.CurtState()==this.IdleState()&&t==this.IdleState())return!1;var s=-1;return-1!=(s=this.CurtState()==this.IdleState()?this.GetStateAtActionIdx(t):t==this.IdleState()?this.GetStateAtActionIdx(this.CurtState()):this.StatesInSameActionIdx(this.CurtState(),t))&&(this.actionList[s].ExeState()!=n.ActionExeState.EndExecuted&&(this.stateStartTime=i,this.stateLiveTime=e,this.SetCurtState(t),this.stateLiveTime*this.actionList[s].timeScale<=.001&&this.actionList[s]._Update_SYS(),!0))}this.StopAllActions()},t}();i.ScStateMachine=l,cc._RF.pop()},{"../Collections/LinkedListEx":"LinkedListEx","../ScAction/ScActionMgr":"ScActionMgr","../ScTask/GameTaskMgr":"GameTaskMgr","../ScUtils/ScUtils":"ScUtils","./ScStateMachineTypes":"ScStateMachineTypes"}],ScTaskTypes:[function(t,e,i){"use strict";cc._RF.push(e,"86250KrBTtIo68B2DetcTR1","ScTaskTypes"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.TMSG_DATA=0]="TMSG_DATA",t[t.TMSG_QUIT=1]="TMSG_QUIT",t[t.TMSG_TIMER_START=2]="TMSG_TIMER_START",t[t.TMSG_TIMER_RUN=3]="TMSG_TIMER_RUN",t[t.TMSG_TIMER_STOP=4]="TMSG_TIMER_STOP"}(i.TaskMsg||(i.TaskMsg={})),cc._RF.pop()},{}],ScTweenerAction:[function(t,e,i){"use strict";cc._RF.push(e,"0ce12jEjaxPI6e65dkNhgTN","ScTweenerAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ScTweenerTypes"),a=t("../ScTypes/ScObject"),r=t("./ScTweenerUtils"),s=function(t){function e(e){var i=t.call(this)||this;return i.tweener=e,i.actionList=new Array(o.ScTweenerType.End),i.actionList[o.ScTweenerType.Position]=i.Position.bind(i),i.actionList[o.ScTweenerType.PositionX]=i.PositionX.bind(i),i.actionList[o.ScTweenerType.PositionY]=i.PositionY.bind(i),i.actionList[o.ScTweenerType.PositionZ]=i.PositionZ.bind(i),i.actionList[o.ScTweenerType.LocalPosition]=i.LocalPosition.bind(i),i.actionList[o.ScTweenerType.LocalPositionX]=i.LocalPositionX.bind(i),i.actionList[o.ScTweenerType.LocalPositionY]=i.LocalPositionY.bind(i),i.actionList[o.ScTweenerType.LocalPositionZ]=i.LocalPositionZ.bind(i),i.actionList[o.ScTweenerType.Scale]=i.Scale.bind(i),i.actionList[o.ScTweenerType.ScaleX]=i.ScaleX.bind(i),i.actionList[o.ScTweenerType.ScaleY]=i.ScaleY.bind(i),i.actionList[o.ScTweenerType.ScaleZ]=i.ScaleZ.bind(i),i.actionList[o.ScTweenerType.LocalScale]=i.LocalScale.bind(i),i.actionList[o.ScTweenerType.LocalScaleX]=i.LocalScaleX.bind(i),i.actionList[o.ScTweenerType.LocalScaleY]=i.LocalScaleY.bind(i),i.actionList[o.ScTweenerType.LocalScaleZ]=i.LocalScaleZ.bind(i),i.actionList[o.ScTweenerType.EulerAngles]=i.EulerAngles.bind(i),i.actionList[o.ScTweenerType.LocalEulerAngles]=i.LocalEulerAngles.bind(i),i.actionList[o.ScTweenerType.RotateBySelfAxis]=i.RotateBySelfAxis.bind(i),i.actionList[o.ScTweenerType.RotateByLocalAxis]=i.RotateByLocalAxis.bind(i),i.actionList[o.ScTweenerType.RotateByQuat]=i.RotateByQuat.bind(i),i.actionList[o.ScTweenerType.NodeAlpha]=i.NodeAlpha.bind(i),i.actionList[o.ScTweenerType.NodeColor]=i.NodeColor.bind(i),i}return n(e,t),e.prototype.Update=function(t){this.actionList[this.tweener.Type()](t)},e.prototype.Position=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t)),n=e.parent.convertToNodeSpaceAR(i);e.setPosition(n)}},e.prototype.PositionX=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t)),n=e.parent.convertToNodeSpaceAR(i);e.x=n.x}},e.prototype.PositionY=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t)),n=e.parent.convertToNodeSpaceAR(i);e.y=n.y}},e.prototype.PositionZ=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t)),n=e.parent.convertToNodeSpaceAR(i);e.z=n.z}},e.prototype.LocalPosition=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));e.setPosition(i)}},e.prototype.LocalPositionX=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));e.x=i.x}},e.prototype.LocalPositionY=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));e.y=i.y}},e.prototype.LocalPositionZ=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));e.z=i.z}},e.prototype.Scale=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t)),n=r.WorldScaleToNodeSpace(e.parent,i);e.setScale(n)}},e.prototype.ScaleX=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t)),n=r.WorldScaleToNodeSpace(e.parent,i);e.scaleX=n.x}},e.prototype.ScaleY=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t)),n=r.WorldScaleToNodeSpace(e.parent,i);e.scaleY=n.y}},e.prototype.ScaleZ=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t)),n=r.WorldScaleToNodeSpace(e.parent,i);e.scaleZ=n.z}},e.prototype.LocalScale=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));e.setScale(i)}},e.prototype.LocalScaleX=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));e.scaleX=i.x}},e.prototype.LocalScaleY=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));e.scaleY=i.y}},e.prototype.LocalScaleZ=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));e.scaleZ=i.z}},e.prototype.EulerAngles=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));r.Rotate(e,i,r.Space.World)}},e.prototype.LocalEulerAngles=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));r.Rotate(e,i,r.Space.Parent)}},e.prototype.RotateBySelfAxis=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));e.eulerAngles=this.tweener.OrgLocalEulerAngles(),r.Rotate(e,i,r.Space.Self)}},e.prototype.RotateByLocalAxis=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t));e.eulerAngles=this.tweener.OrgLocalEulerAngles();var n=cc.quat();e.getRotation(n),r.RotateByAxis(e,this.tweener.Axis(),i.x,n)}},e.prototype.RotateByQuat=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.StartValue().add(this.tweener.ComputeRouteRelativeValue(t)),n=this.tweener.OrgQuat(),o=this.tweener.DstQuat(),a=cc.quat();n.lerp(o,i.x,a),e.setRotation(a)}},e.prototype.NodeAlpha=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.ComputeRouteRelativeValue(t);e.opacity=this.tweener.StartValue().x+i.x}},e.prototype.NodeColor=function(t){var e=this.tweener.target;if(null!=e){var i=this.tweener.ComputeRouteRelativeValue2(t);i=this.tweener.StartColorValue().add(i);var n=cc.color();if(this.tweener.IsHSVMode()){var o=cc.color();o=o.fromHSV(i.x,i.y,i.z),n.setA(i.w),n.setR(o.getR()),n.setG(o.getG()),n.setB(o.getB())}else n.setA(i.w),n.setR(i.x),n.setG(i.y),n.setB(i.z);e.color=n}},e}(a.ScObject);i.ScTweenerAction=s,cc._RF.pop()},{"../ScTypes/ScObject":"ScObject","./ScTweenerTypes":"ScTweenerTypes","./ScTweenerUtils":"ScTweenerUtils"}],ScTweenerMgr:[function(t,e,i){"use strict";cc._RF.push(e,"cb061kFw1JCP4KV68v04AfO","ScTweenerMgr");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ScTweener"),a=t("../ScAction/ScAction"),r=t("../ScAction/ScActionMgr"),s=t("./ScTweenerTypes"),c=t("../ScTypes/ScObject"),l=t("../ScPool/ScPoolMgr"),h=t("../Collections/Dictionary"),u=t("./ScTweenerSequence"),d=function(t){function e(){var e=t.call(this)||this;return e.IsUsePool=!0,e.runningTweenerSequenceList=new Array,e.runningTweenerList=new Array,e.runningTweenerDict=new h.Dictionary,e.pushToPoolTweenerList=new Array,e.runningTweenerList.length=0,e.scTweenerPool=l.ScPoolMgr.Instance().CreatePool(),e.scTweenerPool.NewMethod=e.NewScTweener.bind(e),e.scTweenerPool.createObjSize=10,e.scTweenerPool.CreatePool(),e.scTweenerSeqPool=l.ScPoolMgr.Instance().CreatePool(),e.scTweenerSeqPool.NewMethod=e.NewScTweenerSeq.bind(e),e.scTweenerSeqPool.createObjSize=10,e.scTweenerSeqPool.CreatePool(),e.IsUsePool&&(e.MonitorUpdater=r.ScActionMgr.Instance().CreateAction(a.ScAction),e.MonitorUpdater.Reg(0,e.MonitorUpdate.bind(e))),e.updater=r.ScActionMgr.Instance().CreateAction(a.ScAction),e.updater.UnRegEnd=e.UnRegEnd.bind(e),e}return n(e,t),e.Instance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.NewScTweener=function(){return new o.ScTweener},e.prototype.NewScTweenerSeq=function(){return new u.ScTweenerSequence},e.prototype.CreateScTweener=function(t){var i;return e.Instance().IsUsePool?((i=this.scTweenerPool.Pop()).Init(),i.isFromPool=!0,i.target=t):i=new o.ScTweener(t),i},e.prototype.CreateScTweenerSeq=function(){var t;return e.Instance().IsUsePool?(t=this.scTweenerSeqPool.Pop()).isFromPool=!0:t=new u.ScTweenerSequence,t},e.prototype.Destroy=function(){this.MonitorUpdate(),this.DestroyAllTweenerSeq(),this.runningTweenerList.length=0,this.runningTweenerSequenceList.length=0,r.ScActionMgr.Instance().RemoveAction(this.MonitorUpdater),r.ScActionMgr.Instance().RemoveAction(this.updater),this.scTweenerPool.Destory(),this.scTweenerSeqPool.Destory()},e.prototype.MonitorUpdate=function(){if(this.IsUsePool)for(var t=0;t<this.pushToPoolTweenerList.length;t++)this.scTweenerPool.Push(this.pushToPoolTweenerList[t]);this.pushToPoolTweenerList.length=0},e.prototype.UnRegEnd=function(t){var e=this.runningTweenerDict.getValue(t);null==e||e.isManualMemoryMgr||(this.RemoveRunningTweener(e),this.PushTweener(e),this.runningTweenerDict.remove(t))},e.prototype.PushTweener=function(t){t.isManualMemoryMgr||this.IsUsePool&&t.isFromPool&&this.pushToPoolTweenerList.push(t)},e.prototype.Reg=function(t,e){null!=t&&(this.AddToRunningTweeners(t),this.updater.Reg(t.UUID(),e))},e.prototype.UnReg=function(t){t instanceof o.ScTweener?this.updater.UnReg(t.UUID()):t.UnReg()},e.prototype.RegTweenerSeq=function(t){this.runningTweenerSequenceList.push(t)},e.prototype.DestroyAllTweenerSeq=function(){for(var t=new Array,e=0;e<this.runningTweenerSequenceList.length;e++)t.push(this.runningTweenerSequenceList[e]);for(e=0;e<t.length;e++)t[e].Destroy()},e.prototype.UnRegTweenerSeq=function(t){for(var e=0;e<this.runningTweenerSequenceList.length;e++)if(this.runningTweenerSequenceList[e]==t){this.runningTweenerSequenceList.splice(e,1);break}this.IsUsePool&&t.isFromPool&&this.scTweenerSeqPool.Push(t)},e.prototype.RemoveTweenerCollisionTweenerSeq=function(t){for(var e=new Array,i=0;i<this.runningTweenerSequenceList.length;i++){var n=this.runningTweenerSequenceList[i];if(!n.HavTweener(t))for(var o=n.GetTweenerList(),a=0;a<o.length;a++)if(this.IsTweenerCollision(t,o[a])){e.push(n);break}}for(i=0;i<e.length;i++)e[i].UnReg()},e.prototype.AddToRunningTweeners=function(t){this.RemoveTweenerCollisionTweenerSeq(t);var e=this.FindTweenerTargetTweenerIdx(t);if(-1==e){var i=new Array;return this.runningTweenerList.push(i),i.push(t),void this.runningTweenerDict.setValue(t.UUID(),t)}for(var n=this.runningTweenerList[e],o=0;o<n.length;o++)if(n[o]!=t&&this.IsTweenerCollision(n[o],t)){this.UnReg(n[o]),n.splice(o,1);break}this.runningTweenerDict.setValue(t.UUID(),t),n.push(t)},e.prototype.RemoveRunningTweener=function(t){var i=this.FindTweenerTargetTweenerIdx(t);if(-1!=i){for(var n=this.runningTweenerList[i],o=0;o<n.length;o++)if(n[o]===t){e.Instance().UnReg(t),n.splice(o,1);break}0==n.length&&this.runningTweenerList.splice(i,1)}},e.prototype.RemoveSameTweeners=function(t){this.RemoveTweenerCollisionTweenerSeq(t);var i=this.FindTweenerTargetTweenerIdx(t);if(-1!=i)for(var n=this.runningTweenerList[i],o=0;o<n.length;o++)if(n[o]!=t&&this.IsTweenerCollision(n[o],t)){e.Instance().UnReg(n[o]),n.splice(o,1),0==n.length&&this.runningTweenerList.splice(i,1);break}},e.prototype.FindTweenerTargetTweenerIdx=function(t){for(var e=0;e<this.runningTweenerList.length;e++)if(this.runningTweenerList[e][0].target==t.target)return e;return-1},e.prototype.IsTweenerCollision=function(t,e){if(t.target!=e.target)return!1;if(t.ParamType()==e.ParamType()){if(null==t.ParamName()||null==e.ParamName())return!0;if(0==t.ParamName().localeCompare(e.ParamName()))return!0}else{if(this._IsTweenerCollision(t,e))return!0;if(this._IsTweenerCollision(e,t))return!0}return!1},e.prototype._IsTweenerCollision=function(t,e){return t.ParamType()==s.ScTweenerParamType.Pos&&(e.ParamType()==s.ScTweenerParamType.PosX||e.ParamType()==s.ScTweenerParamType.PosY||e.ParamType()==s.ScTweenerParamType.PosZ)||(t.ParamType()==s.ScTweenerParamType.Scale&&(e.ParamType()==s.ScTweenerParamType.ScaleX||e.ParamType()==s.ScTweenerParamType.ScaleY||e.ParamType()==s.ScTweenerParamType.ScaleZ)||t.ParamType()==s.ScTweenerParamType.Alpha&&e.ParamType()==s.ScTweenerParamType.Color)},e}(c.ScObject);i.ScTweenerMgr=d,cc._RF.pop()},{"../Collections/Dictionary":"Dictionary","../ScAction/ScAction":"ScAction","../ScAction/ScActionMgr":"ScActionMgr","../ScPool/ScPoolMgr":"ScPoolMgr","../ScTypes/ScObject":"ScObject","./ScTweener":"ScTweener","./ScTweenerSequence":"ScTweenerSequence","./ScTweenerTypes":"ScTweenerTypes"}],ScTweenerPreset:[function(t,e,i){"use strict";cc._RF.push(e,"ddaddo2wR1GjJLDFpYLIZJL","ScTweenerPreset"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./ScTweenerRun"),o=t("./ScTweenerUtils"),a=t("../Collections/Dictionary"),r=function(){function t(){}return t.DragWobble=function(e,i,a,r,s,c,l){if(void 0===r&&(r=null),void 0===s&&(s=.08),void 0===c&&(c=.05),void 0===l&&(l=50),null!=e&&null!=i&&null!=a){var h=a*c;h>l&&(h=l);var u=cc.Vec3.FORWARD.cross(i),d=o.CreateQuat(u,h);null!=r&&(d=o.MulQuat(d,r));var p=t.rotQuatsDict.getValue(e.uuid);if(null==p&&(p=new Array,t.rotQuatsDict.setValue(e.uuid,p)),p.length>=2){var f=p[0];p.length=0,p.push(f)}p.push(d),1==p.length&&n.ScTweenerRun.DoRotateByQuat(e,p[0],s).SetCallBackFunc(t.RotateEnded,[e,s,r])}},t.StopDragWobble=function(e){if(null!=e){var i=t.rotQuatsDict.getValue(e.uuid);null!=i&&(i.length=0)}},t.RotateEnded=function(e){var i=e[0],o=e[1],a=t.rotQuatsDict.getValue(i.uuid);if(a.splice(0,1),a.length>=1)n.ScTweenerRun.DoRotateByQuat(i,a[0],o).SetCallBackFunc(t.RotateEnded,e);else{var r=void 0;r=null==e[2]?cc.quat():e[2],t.rotQuatsDict.remove(i.uuid),n.ScTweenerRun.DoRotateByQuat(i,r,.3)}},t.rotQuatsDict=new a.Dictionary,t}();i.ScTweenerPreset=r,cc._RF.pop()},{"../Collections/Dictionary":"Dictionary","./ScTweenerRun":"ScTweenerRun","./ScTweenerUtils":"ScTweenerUtils"}],ScTweenerRun:[function(t,e,i){"use strict";cc._RF.push(e,"ed5d6V5FDlMcKR8PaMlK+u4","ScTweenerRun"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./ScTweenerMgr"),o=t("./ScTweenerUtils"),a=function(){function t(){}return t.CreateTweenerSeq=function(){return n.ScTweenerMgr.Instance().CreateScTweenerSeq()},t.DoTweenerSeq=function(t,e,i){if(void 0===e&&(e=!1),null==t)return null;var o=n.ScTweenerMgr.Instance().CreateScTweenerSeq();o.isLoop=e;for(var a=!1,r=0;r<t.length;r++)null==i?a=!1:(r>=i.length&&(r=i.length-1),a=i[r]),o.AddTweener(t[r],a);return o.Execute(),o},t.DoMove=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoMove(e,i),o&&a.Execute(),a},t.DoLocalMove=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoLocalMove(e,i),o&&a.Execute(),a},t.DoMoveX=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoMoveX(e,i),o&&a.Execute(),a},t.DoMoveY=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoMoveY(e,i),o&&a.Execute(),a},t.DoMoveZ=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoMoveZ(e,i),o&&a.Execute(),a},t.DoLocalMoveX=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoLocalMoveX(e,i),o&&a.Execute(),a},t.DoLocalMoveY=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoLocalMoveY(e,i),o&&a.Execute(),a},t.DoLocalMoveZ=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoLocalMoveZ(e,i),o&&a.Execute(),a},t.DoScale=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoScale(e,i),o&&a.Execute(),a},t.DoScaleX=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoScaleX(e,i),o&&a.Execute(),a},t.DoScaleY=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoScaleY(e,i),o&&a.Execute(),a},t.DoScaleZ=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoScaleZ(e,i),o&&a.Execute(),a},t.DoLocalScale=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoLocalScale(e,i),o&&a.Execute(),a},t.DoLocalScaleX=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoLocalScaleX(e,i),o&&a.Execute(),a},t.DoLocalScaleY=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoLocalScaleY(e,i),o&&a.Execute(),a},t.DoLocalScaleZ=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoLocalScaleZ(e,i),o&&a.Execute(),a},t.DoEluerAngles=function(t,e,i,o,a){void 0===a&&(a=!0);var r=n.ScTweenerMgr.Instance().CreateScTweener(t);return r.DoEluerAngles(e,i,o),a&&r.Execute(),r},t.DoEluerAnglesX=function(t,e,i,a,r){void 0===r&&(r=!0);var s=n.ScTweenerMgr.Instance().CreateScTweener(t),c=o.NodeLocalEulerAnglesToWorld(t);return s.DoEluerAngles(new cc.Vec3(e,c.y,c.z),i,a),r&&s.Execute(),s},t.DoEluerAnglesY=function(t,e,i,a,r){void 0===r&&(r=!0);var s=n.ScTweenerMgr.Instance().CreateScTweener(t),c=o.NodeLocalEulerAnglesToWorld(t);return s.DoEluerAngles(new cc.Vec3(c.x,e,c.z),i,a),r&&s.Execute(),s},t.DoEluerAnglesZ=function(t,e,i,a,r){void 0===r&&(r=!0);var s=n.ScTweenerMgr.Instance().CreateScTweener(t),c=o.NodeLocalEulerAnglesToWorld(t);return s.DoEluerAngles(new cc.Vec3(c.x,c.y,e),i,a),r&&s.Execute(),s},t.DoLocalEluerAngles=function(t,e,i,o,a){void 0===a&&(a=!0);var r=n.ScTweenerMgr.Instance().CreateScTweener(t);return r.DoLocalEluerAngles(e,i,o),a&&r.Execute(),r},t.DoLocalEluerAnglesX=function(t,e,i,o,a){void 0===a&&(a=!0);var r=n.ScTweenerMgr.Instance().CreateScTweener(t);return r.DoLocalEluerAngles(new cc.Vec3(e,t.eulerAngles.y,t.eulerAngles.z),i,o),a&&r.Execute(),r},t.DoLocalEluerAnglesY=function(t,e,i,o,a){void 0===a&&(a=!0);var r=n.ScTweenerMgr.Instance().CreateScTweener(t);return r.DoLocalEluerAngles(new cc.Vec3(t.eulerAngles.x,e,t.eulerAngles.z),i,o),a&&r.Execute(),r},t.DoLocalEluerAnglesZ=function(t,e,i,o,a){void 0===a&&(a=!0);var r=n.ScTweenerMgr.Instance().CreateScTweener(t);return r.DoLocalEluerAngles(new cc.Vec3(t.eulerAngles.x,t.eulerAngles.y,e),i,o),a&&r.Execute(),r},t.DoRotateBySelfAxis=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoRotateBySelfAxis(e,i),o&&a.Execute(),a},t.DoRotateBySelfAxisX=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoRotateBySelfAxis(new cc.Vec3(e,0,0),i),o&&a.Execute(),a},t.DoRotateBySelfAxisY=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoRotateBySelfAxis(new cc.Vec3(0,e,0),i),o&&a.Execute(),a},t.DoRotateBySelfAxisZ=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoRotateBySelfAxis(new cc.Vec3(0,0,e),i),o&&a.Execute(),a},t.DoRotateByLocalAxis=function(t,e,i,o,a){void 0===a&&(a=!0);var r=n.ScTweenerMgr.Instance().CreateScTweener(t);return r.DoRotateByLocalAxis(e,i,o),a&&r.Execute(),r},t.DoRotateByQuat=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return a.DoRotateByQuat(e,i),o&&a.Execute(),a},t.DoAlpha=function(t,e,i,o){void 0===o&&(o=!0);var a=n.ScTweenerMgr.Instance().CreateScTweener(t);return e*=255,a.DoAlpha(e,i),o&&a.Execute(),a},t.DoColor=function(t,e,i,o,a){void 0===o&&(o=!0),void 0===a&&(a=!0);var r=n.ScTweenerMgr.Instance().CreateScTweener(t);return r.DoColor(e,i,o),a&&r.Execute(),r},t}();i.ScTweenerRun=a,cc._RF.pop()},{"./ScTweenerMgr":"ScTweenerMgr","./ScTweenerUtils":"ScTweenerUtils"}],ScTweenerSequence:[function(t,e,i){"use strict";cc._RF.push(e,"4eb07acpHhLqphcl5Sjm4SU","ScTweenerSequence");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../ScStateMachine/ScDesginAction"),a=t("./ScTweenerMgr"),r=function(t){function e(){var e=t.call(this)||this;return e.isFromPool=!1,e.isLoop=!1,e.tweenerList=new Array,e.isTogetherList=new Array,e.action=new o.ScDesginAction(!0),e.action.SetData(e),e.action.ActionEndedProcesser=e.ActionEnded.bind(e),e.action.SetStateLifeRange(0,2),e.action.AddStateChildAction(0,e.State0.bind(e)),e.action.AddStateChildAction(1,e.State1.bind(e)),e.action.AddStateChildAction(2,e.State2.bind(e)),e}return n(e,t),e.prototype.ActionEnded=function(t){for(var e=0;e<this.tweenerList.length;e++)this.tweenerList[e].isManualMemoryMgr=!1,a.ScTweenerMgr.Instance().UnReg(this.tweenerList[e]);this.idx=0,this.isLoop=!1,this.tweenerList.length=0,this.isTogetherList.length=0,a.ScTweenerMgr.Instance().UnRegTweenerSeq(this)},e.prototype.UnReg=function(){this.action.UnInstall()},e.prototype.Destroy=function(){this.action.Destroy()},e.prototype.Execute=function(){return this.action.Install(),a.ScTweenerMgr.Instance().RegTweenerSeq(this),this.action.Execute(),!0},e.prototype.AddTweener=function(t,e){void 0===e&&(e=!1),t.isManualMemoryMgr=!0,this.tweenerList.push(t),this.isTogetherList.push(e)},e.prototype.GetTweenerList=function(){return this.tweenerList},e.prototype.HavTweener=function(t){for(var e=0;e<this.tweenerList.length;e++)if(this.tweenerList[e]===t)return!0;return!1},e.prototype.State0=function(){this.idx=0,this.action.GotoState(1)},e.prototype.State1=function(){for(var t=0;;){var e=this.tweenerList[this.idx].Duration()+this.tweenerList[this.idx].Delay();if(t=Math.max(t,e),this.tweenerList[this.idx].Execute(),this.idx++,!(this.idx<this.isTogetherList.length&&1==this.isTogetherList[this.idx]))break}this.idx==this.tweenerList.length?this.isLoop&&t>0?this.action.GotoState(0,t):this.action.GotoState(2,t):this.action.GotoState(1,t)},e.prototype.State2=function(){this.action.GotoState(this.action.IdleState()),this.action.UnInstall()},e}(t("../ScTypes/ScObject").ScObject);i.ScTweenerSequence=r,cc._RF.pop()},{"../ScStateMachine/ScDesginAction":"ScDesginAction","../ScTypes/ScObject":"ScObject","./ScTweenerMgr":"ScTweenerMgr"}],ScTweenerTypes:[function(t,e,i){"use strict";cc._RF.push(e,"7d9cfcqJUdFd55V+vGFXFZb","ScTweenerTypes"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.Linear=0]="Linear",t[t.Bezier=1]="Bezier",t[t.EaseInQuint=2]="EaseInQuint",t[t.EaseOutQuint=3]="EaseOutQuint",t[t.EaseOutBack=4]="EaseOutBack",t[t.EaseInOutBack=5]="EaseInOutBack",t[t.EaseInBack=6]="EaseInBack",t[t.EaseInOutCirc=7]="EaseInOutCirc",t[t.EaseOutCirc=8]="EaseOutCirc",t[t.EaseInCirc=9]="EaseInCirc",t[t.EaseInOutExpo=10]="EaseInOutExpo",t[t.EaseOutExpo=11]="EaseOutExpo",t[t.EaseInExpo=12]="EaseInExpo"}(i.ScEasingType||(i.ScEasingType={})),function(t){t[t.Linear=0]="Linear",t[t.Bezier=1]="Bezier"}(i.ScRouteType||(i.ScRouteType={})),function(t){t[t.Position=0]="Position",t[t.PositionX=1]="PositionX",t[t.PositionY=2]="PositionY",t[t.PositionZ=3]="PositionZ",t[t.LocalPosition=4]="LocalPosition",t[t.LocalPositionX=5]="LocalPositionX",t[t.LocalPositionY=6]="LocalPositionY",t[t.LocalPositionZ=7]="LocalPositionZ",t[t.Scale=8]="Scale",t[t.ScaleX=9]="ScaleX",t[t.ScaleY=10]="ScaleY",t[t.ScaleZ=11]="ScaleZ",t[t.LocalScale=12]="LocalScale",t[t.LocalScaleX=13]="LocalScaleX",t[t.LocalScaleY=14]="LocalScaleY",t[t.LocalScaleZ=15]="LocalScaleZ",t[t.EulerAngles=16]="EulerAngles",t[t.LocalEulerAngles=17]="LocalEulerAngles",t[t.RotateBySelfAxis=18]="RotateBySelfAxis",t[t.RotateByLocalAxis=19]="RotateByLocalAxis",t[t.RotateByQuat=20]="RotateByQuat",t[t.NodeAlpha=21]="NodeAlpha",t[t.NodeColor=22]="NodeColor",t[t.MatFloat=23]="MatFloat",t[t.MatColor=24]="MatColor",t[t.MatTexScale=25]="MatTexScale",t[t.End=26]="End"}(i.ScTweenerType||(i.ScTweenerType={})),function(t){t[t.PosX=0]="PosX",t[t.PosY=1]="PosY",t[t.PosZ=2]="PosZ",t[t.Pos=3]="Pos",t[t.ScaleX=4]="ScaleX",t[t.ScaleY=5]="ScaleY",t[t.ScaleZ=6]="ScaleZ",t[t.Scale=7]="Scale",t[t.Rot=8]="Rot",t[t.Alpha=9]="Alpha",t[t.Color=10]="Color",t[t.MatFloat=11]="MatFloat",t[t.MatColor=12]="MatColor",t[t.MatTexScale=13]="MatTexScale"}(i.ScTweenerParamType||(i.ScTweenerParamType={})),cc._RF.pop()},{}],ScTweenerUtils:[function(t,e,i){"use strict";var n,o,a;function r(t,e){var i=t.convertToNodeSpaceAR(e),n=t.convertToNodeSpaceAR(new cc.Vec3(0,0,0)),o=i.sub(n);return o.normalizeSelf(),o}function s(t){return r(t,cc.Vec3.UP)}function c(t){return r(t,cc.Vec3.FORWARD)}function l(t){return r(t,cc.Vec3.RIGHT)}function h(t,e){var i=t.convertToWorldSpaceAR(e),n=t.convertToWorldSpaceAR(new cc.Vec3(0,0,0)),o=i.sub(n);return o.normalizeSelf(),o}function u(t){return h(t,cc.Vec3.UP)}function d(t){return h(t,cc.Vec3.FORWARD)}function p(t){return h(t,cc.Vec3.RIGHT)}function f(t,e){var i=t.convertToWorldSpaceAR(e),n=t.convertToWorldSpaceAR(new cc.Vec3(0,0,0));i=t.parent.convertToNodeSpaceAR(i),n=t.parent.convertToNodeSpaceAR(n);var o=i.sub(n);return o.normalizeSelf(),o}function S(t){return f(t,cc.Vec3.UP)}function y(t){return f(t,cc.Vec3.FORWARD)}function m(t){return f(t,cc.Vec3.RIGHT)}function g(t){return[l(t),s(t),c(t)]}function C(t){return[p(t),u(t),d(t)]}function T(t){return w(t,C)}function v(t){return w(t,g)}function w(t,e){var i,n=1e-4,o=e(t),a=cc.Vec3.UP.cross(o[1]).normalize(),r=cc.Vec3.UP.angle(o[1]);if(r>-n&&r<n)i=(r=cc.Vec3.RIGHT.angle(o[0]))>=n||r<=-n?L(a=r>Math.PI-n&&r<Math.PI+n?o[1]:cc.Vec3.RIGHT.cross(o[0]).normalize(),r,!0):cc.quat(0,0,0,1);else{r>Math.PI-n&&r<Math.PI+n&&(a=cc.Vec3.FORWARD),i=L(a,r,!0);var s=G(cc.Vec3.RIGHT,i).normalize();if((r=s.angle(o[0]))>=n||r<=-n)i=M(L(a=r>Math.PI-n&&r<Math.PI+n?o[1]:s.cross(o[0]).normalize(),r,!0),i)}return i}function A(t,e){var i=T(t.parent),n=cc.quat();t.getRotation(n),n=M(i,n),n=M(v(e),n);var o=cc.Vec3.ZERO;return n.toEuler(o)}function b(t,e){return P(e,_(t))}function _(t){var e=t.parent,i=cc.Vec3.ZERO,n=cc.Vec3.ZERO;for(t.getScale(n);null!=e;)e.getScale(i),n.x*=i.x,n.y*=i.y,n.z*=i.z,e=e.parent;return n}function P(t,e){for(var i=cc.Vec3.ZERO,n=cc.Vec3.ONE,o=t;null!=o;)o.getScale(i),n.x*=i.x,n.y*=i.y,n.z*=i.z,o=o.parent;var a=e.x/n.x,r=e.y/n.y,s=e.z/n.z;return new cc.Vec3(a,r,s)}function I(t,e){if(e==n.World)return T(t.parent);if(e==n.Self){var i=cc.quat();return t.getRotation(i),i}return cc.quat()}function E(t,e,i){if(i==n.World)switch(e){case o.Up:return s(t.parent);case o.Right:return l(t.parent);case o.Front:return c(t.parent)}else if(i==n.Self)switch(e){case o.Up:return S(t);case o.Right:return m(t);case o.Front:return y(t)}else switch(e){case o.Up:return cc.Vec3.UP;case o.Right:return cc.Vec3.RIGHT;case o.Front:return cc.Vec3.FORWARD}return cc.Vec3.FORWARD}function R(t,e,i,n){var o=L(e,i);null!=n&&(o=M(o,n)),t.setRotation(o)}function L(t,e,i){var n=e/2;null==i&&(n=e/360*Math.PI);var o=Math.sin(n),a=o*t.x,r=o*t.y,s=o*t.z,c=Math.cos(n);return new cc.Quat(a,r,s,c)}function M(t,e){var i=t.w,n=t.x,o=t.y,a=t.z,r=e.w,s=e.x,c=e.y,l=e.z,h=i*r-n*s-o*c-a*l,u=n*r+i*s+o*l-a*c,d=o*r+i*c+a*s-n*l,p=a*r+i*l+n*c-s*o;return new cc.Quat(u,d,p,h)}function D(t,e,i){return G(t,L(e,i))}function G(t,e){var i=new cc.Vec3(e.x,e.y,e.z),n=e.w,o=i.mul(i.dot(t)).mul(2),a=t.mul(n*n-i.dot(i)),r=i.cross(t).mul(2*n);return o.add(a).add(r)}function x(t){return new cc.Quat(-t.x,-t.y,-t.z,t.w)}function O(t){return Math.sqrt(t.w^2+t.x^2+t.y^2+t.z^2)}cc._RF.push(e,"636c1+OQwRDu7Vy2pfRUdI2","ScTweenerUtils"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.World=0]="World",t[t.Parent=1]="Parent",t[t.Self=2]="Self"}(n=i.Space||(i.Space={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Front=2]="Front"}(o=i.AxisDirection||(i.AxisDirection={})),function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"}(a=i.AxisXYZ||(i.AxisXYZ={})),i.GetRotParentAxisZAngleSelectedStatePosVector=function(t,e,i,n,o){void 0===n&&(n=.3333);var a=1;null!=o&&1==o&&(a=-1);var r=i*e*n*a;return D(cc.Vec3.UP,cc.Vec3.FORWARD,t).mul(r)},i.GetNodeLocalPosition=function(t){var e=cc.Vec3.ZERO;return t.getPosition(e),e},i.SetNodeParent=function(t,e,i){if(void 0===i&&(i=!0),null!=t){if(i&&null!=t.parent){var n=cc.Vec3.ZERO;t.getPosition(n),n=t.parent.convertToWorldSpaceAR(n),n=e.convertToNodeSpaceAR(n),t.setPosition(n);var o=A(t,e);t.eulerAngles=o;var a=cc.Vec3.ZERO;a=b(t,e),t.setScale(a)}t.setParent(e)}},i.WorldDirectionInNodeSpace=r,i.WorldUpInNodeSpace=s,i.WorldFrontInNodeSpace=c,i.WorldRightInNodeSpace=l,i.NodeDirectionInWorldSpace=h,i.NodeUpInWorldSpace=u,i.NodeFrontInWorldSpace=d,i.NodeRightInWorldSpace=p,i.NodeDirectionInParentSpace=f,i.NodeUpInParentSpace=S,i.NodeFrontInParentSpace=y,i.NodeRightInParentSpace=m,i.WorldAxisToNodeSpace=g,i.NodeAxisToParentSpace=function(t){return[m(t),S(t),y(t)]},i.NodeAxisToWorldSpace=C,i.CreateNodeSpaceToWorldSpaceQuat=T,i.CreateWorldSpaceToNodeSpaceQuat=v,i.CreateNodeSpaceToWorldSpaceEulerAngles=function(t){var e=T(t),i=cc.Vec3.ZERO;return e.toEuler(i),i},i.NodeLocalPositionToParent=function(t,e){var i=t.parent.convertToWorldSpaceAR(t.position);return e.convertToNodeSpaceAR(i)},i.NodeSpacePositionToParent=function(t,e,i){null==i&&(i=cc.Vec3.ZERO);var n=t.convertToWorldSpaceAR(i);return e.convertToNodeSpaceAR(n)},i.NodeLocalEulerAnglesToParent=A,i.NodeLocalEulerAnglesToWorld=function(t){var e=T(t.parent),i=cc.quat();t.getRotation(i),i=M(i,e);var n=cc.Vec3.ZERO;return i.toEuler(n)},i.NodeLocalScaleToParent=b,i.NodeLocalScaleToWorld=_,i.WorldScaleToNodeSpace=P,i.CreateWorldSpaceRotQuat=function(t){var e=T(t.parent),i=cc.quat();return t.getRotation(i),i=M(e,i)},i.RotateByAxis=R,i.Rotate=function(t,e,i){var n,a=cc.quat();a=I(t,i),R(t,n=E(t,o.Right,i),e.x,a),n=E(t,o.Front,i),t.getRotation(a),R(t,n,e.z,a),n=E(t,o.Up,i),t.getRotation(a),R(t,n,e.y,a)},i.RotateByAxisXYZ=function(t,e,i,n){var r,s;s=n==a.X?o.Right:n==a.Y?o.Up:o.Front,r=I(t,i),R(t,E(t,s,i),e,r)},i.RotateByAxisX=function(t,e,i){var n=I(t,i);R(t,E(t,o.Right,i),e,n)},i.RotateByAxisY=function(t,e,i){var n=I(t,i);R(t,E(t,o.Up,i),e,n)},i.RotateByAxisZ=function(t,e,i){var n=I(t,i);R(t,E(t,o.Front,i),e,n)},i.CreateQuat=L,i.MulQuat=M,i.RotateVectorByAxis=D,i.RotateVectorByQuat=G,i.ConjugateQuat=x,i.InverseQuat=function(t){var e=x(t),i=O(t);return cc.quat(e.x/i,e.y/i,e.z/i,e.w/i)},i.QuatMod=O,i.ComputeWorldPosAtNodeUpDirectionDist=function(t,e,i){var n=cc.Vec3.ZERO;t.getPosition(n);var o=i;null==o&&(o=S(t));var a=t.parent.convertToNodeSpaceAR(e).sub(n),r=a.mag(),s=a.angle(o),c=0;return s<Math.PI/2?c=r*Math.cos(s):s>Math.PI/2&&(c=r*Math.cos(Math.PI-s)),c},cc._RF.pop()},{}],ScTweener:[function(t,e,i){"use strict";cc._RF.push(e,"7f4e6zw2bpMUYb94q/pK4Hi","ScTweener");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ScTweenerTypes"),a=t("./ScTweenerAction"),r=t("./ScTweenerMgr"),s=t("../ScTypes/ScObject"),c=t("./ScTweenerUtils"),l=t("../ScUtils/ScUtils"),h=t("../ScMath/ScMath"),u=function(t){function e(e){var i=t.call(this)||this;return i.isManualMemoryMgr=!1,i.isFromPool=!1,i.Callback=null,i.esp=1e-4,i.delay=0,i.startValue=cc.Vec3.ZERO,i.startColorValue=new cc.Vec4(0,0,0,0),i.endColorValue=new cc.Vec4(0,0,0,0),i.isNearAngle=!0,i.isHsvMode=!1,i.paramName=null,i.orgQuat=cc.quat(),i.type=o.ScTweenerType.Position,i.paramType=o.ScTweenerParamType.Pos,i.easingType=o.ScEasingType.Linear,i.routeType=o.ScRouteType.Linear,i.Init(),i.tweenerAction=new a.ScTweenerAction(i),i.target=e,i}return n(e,t),e.prototype.Duration=function(){return this.duration},e.prototype.Delay=function(){return this.delay},e.prototype.StartValue=function(){return this.startValue},e.prototype.Axis=function(){return this.axis},e.prototype.StartColorValue=function(){return this.startColorValue},e.prototype.EndColorValue=function(){return this.endColorValue},e.prototype.IsNearAngle=function(){return this.isNearAngle},e.prototype.IsHSVMode=function(){return this.isHsvMode},e.prototype.ParamName=function(){return this.paramName},e.prototype.StartQuaternion=function(){return this.startQuaternion},e.prototype.EndQuaternion=function(){return this.endQuaternion},e.prototype.OrgLocalEulerAngles=function(){return this.orgLocalEulerAngles},e.prototype.OrgQuat=function(){return this.orgQuat},e.prototype.DstQuat=function(){return this.dstQuat},e.prototype.Type=function(){return this.type},e.prototype.ParamType=function(){return this.paramType},e.prototype.Init=function(){this.Callback=null,this.startTime=0,this.duration=0,this.delay=0,this.startValue=cc.Vec3.ZERO,this.endValue=cc.Vec3.ZERO,this.totalValue=cc.Vec3.ZERO,this.startColorValue=new cc.Vec4(0,0,0,0),this.endColorValue=new cc.Vec4(0,0,0,0),this.totalColorValue=new cc.Vec4(0,0,0,0),this.target=null,this.datas=null,this.paramName=null,this.easingType=o.ScEasingType.Linear,this.routeType=o.ScRouteType.Linear},e.prototype.IsDirectCompute=function(){return this.duration<.005},e.prototype.Execute=function(){return this._Execute(),this.IsDirectCompute()?(r.ScTweenerMgr.Instance().RemoveSameTweeners(this),this.tweenerAction.Update(1),r.ScTweenerMgr.Instance().PushTweener(this),this):(r.ScTweenerMgr.Instance().Reg(this,this.Update.bind(this)),this)},e.prototype._Execute=function(){switch(this.type){case o.ScTweenerType.Position:return void this.DoMoveExecute();case o.ScTweenerType.PositionX:return void this.DoMoveXExecute();case o.ScTweenerType.PositionY:return void this.DoMoveYExecute();case o.ScTweenerType.PositionZ:return void this.DoMoveZExecute();case o.ScTweenerType.LocalPosition:return void this.DoLocalMoveExecute();case o.ScTweenerType.LocalPositionX:return void this.DoLocalMoveXExecute();case o.ScTweenerType.LocalPositionY:return void this.DoLocalMoveYExecute();case o.ScTweenerType.LocalPositionZ:return void this.DoLocalMoveZExecute();case o.ScTweenerType.Scale:return void this.DoScaleExecute();case o.ScTweenerType.ScaleX:return void this.DoScaleXExecute();case o.ScTweenerType.ScaleY:return void this.DoScaleYExecute();case o.ScTweenerType.ScaleZ:return void this.DoScaleZExecute();case o.ScTweenerType.LocalScale:return void this.DoLocalScaleExecute();case o.ScTweenerType.LocalScaleX:return void this.DoLocalScaleXExecute();case o.ScTweenerType.LocalScaleY:return void this.DoLocalScaleYExecute();case o.ScTweenerType.LocalScaleZ:return void this.DoLocalScaleZExecute();case o.ScTweenerType.EulerAngles:return void this.DoEluerAnglesExecute();case o.ScTweenerType.LocalEulerAngles:return void this.DoLocalEluerAnglesExecute();case o.ScTweenerType.RotateBySelfAxis:return void this.DoRotateBySelfAxisExecute();case o.ScTweenerType.RotateByLocalAxis:return void this.DoRotateByLocalAxisExecute();case o.ScTweenerType.RotateByQuat:return void this.DoRotateByQuatExecute();case o.ScTweenerType.NodeAlpha:return void this.DoAlphaExecute();case o.ScTweenerType.NodeColor:return void this.DoColorExecute()}},e.prototype.DoMove=function(t,e){this.endValue=t,this.duration=e,this.type=o.ScTweenerType.Position,this.paramType=o.ScTweenerParamType.Pos},e.prototype.DoMoveExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time();var e=new cc.Vec3(t.x,t.y,t.z);this.startValue=t.parent.convertToWorldSpaceAR(e),this.totalValue=this.endValue.sub(this.startValue)}},e.prototype.DoMoveX=function(t,e){this.endValue.x=t,this.duration=e,this.type=o.ScTweenerType.PositionX,this.paramType=o.ScTweenerParamType.PosX},e.prototype.DoMoveXExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time();var e=new cc.Vec3(t.x,t.y,t.z);e=t.parent.convertToWorldSpaceAR(e),this.startValue.x=e.x,this.totalValue.x=this.endValue.x-this.startValue.x}},e.prototype.DoMoveY=function(t,e){this.endValue.y=t,this.duration=e,this.type=o.ScTweenerType.PositionY,this.paramType=o.ScTweenerParamType.PosY},e.prototype.DoMoveYExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time();var e=new cc.Vec3(t.x,t.y,t.z);e=t.parent.convertToWorldSpaceAR(e),this.startValue.y=e.y,this.totalValue.y=this.endValue.y-this.startValue.y}},e.prototype.DoMoveZ=function(t,e){this.endValue.z=t,this.duration=e,this.type=o.ScTweenerType.PositionZ,this.paramType=o.ScTweenerParamType.PosZ},e.prototype.DoMoveZExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time();var e=new cc.Vec3(t.x,t.y,t.z);e=t.parent.convertToWorldSpaceAR(e),this.startValue.z=e.z,this.totalValue.z=this.endValue.z-this.startValue.z}},e.prototype.DoLocalMove=function(t,e){this.endValue=t,this.duration=e,this.type=o.ScTweenerType.LocalPosition,this.paramType=o.ScTweenerParamType.Pos},e.prototype.DoLocalMoveExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time();var e=new cc.Vec3(t.x,t.y,t.z);this.startValue=e,this.totalValue=this.endValue.sub(this.startValue)}},e.prototype.DoLocalMoveX=function(t,e){this.endValue.x=t,this.duration=e,this.type=o.ScTweenerType.LocalPositionX,this.paramType=o.ScTweenerParamType.PosX},e.prototype.DoLocalMoveXExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue.x=t.x,this.totalValue.x=this.endValue.x-this.startValue.x}},e.prototype.DoLocalMoveY=function(t,e){this.endValue.y=t,this.duration=e,this.type=o.ScTweenerType.LocalPositionY,this.paramType=o.ScTweenerParamType.PosY},e.prototype.DoLocalMoveYExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue.y=t.y,this.totalValue.y=this.endValue.y-this.startValue.y}},e.prototype.DoLocalMoveZ=function(t,e){this.endValue.z=t,this.duration=e,this.type=o.ScTweenerType.LocalPositionZ,this.paramType=o.ScTweenerParamType.PosZ},e.prototype.DoLocalMoveZExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue.z=t.z,this.totalValue.z=this.endValue.y-this.startValue.z}},e.prototype.DoScale=function(t,e){this.endValue=t,this.duration=e,this.type=o.ScTweenerType.Scale,this.paramType=o.ScTweenerParamType.Scale},e.prototype.DoScaleExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue=c.NodeLocalScaleToWorld(t),this.totalValue=this.endValue.sub(this.startValue)}},e.prototype.DoScaleX=function(t,e){if(null!=this.target){var i=this.target;this.startTime=l.Time(),this.startValue=c.NodeLocalScaleToWorld(i),this.endValue.x=t,this.duration=e,this.totalValue.x=t-this.startValue.x,this.type=o.ScTweenerType.ScaleX,this.paramType=o.ScTweenerParamType.ScaleX}},e.prototype.DoScaleXExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue=c.NodeLocalScaleToWorld(t),this.totalValue.x=this.endValue.x-this.startValue.x}},e.prototype.DoScaleY=function(t,e){this.endValue.y=t,this.duration=e,this.type=o.ScTweenerType.ScaleY,this.paramType=o.ScTweenerParamType.ScaleY},e.prototype.DoScaleYExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue=c.NodeLocalScaleToWorld(t),this.totalValue.y=this.endValue.y-this.startValue.y}},e.prototype.DoScaleZ=function(t,e){this.endValue.z=t,this.duration=e,this.type=o.ScTweenerType.ScaleZ,this.paramType=o.ScTweenerParamType.ScaleZ},e.prototype.DoScaleZExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue=c.NodeLocalScaleToWorld(t),this.totalValue.z=this.endValue.z-this.startValue.z}},e.prototype.DoLocalScale=function(t,e){this.endValue=t,this.duration=e,this.type=o.ScTweenerType.LocalScale,this.paramType=o.ScTweenerParamType.Scale},e.prototype.DoLocalScaleExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue=new cc.Vec3(t.scaleX,t.scaleY,t.scaleZ),this.totalValue=this.endValue.sub(this.startValue)}},e.prototype.DoLocalScaleX=function(t,e){this.endValue.x=t,this.duration=e,this.type=o.ScTweenerType.LocalScaleX,this.paramType=o.ScTweenerParamType.ScaleX},e.prototype.DoLocalScaleXExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue.x=t.scaleX,this.totalValue.x=this.endValue.x-this.startValue.x}},e.prototype.DoLocalScaleY=function(t,e){this.endValue.y=t,this.duration=e,this.type=o.ScTweenerType.LocalScaleY,this.paramType=o.ScTweenerParamType.ScaleY},e.prototype.DoLocalScaleYExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue.y=t.scaleY,this.totalValue.y=this.endValue.y-this.startValue.y}},e.prototype.DoLocalScaleZ=function(t,e){this.endValue.z=t,this.duration=e,this.type=o.ScTweenerType.LocalScaleZ,this.paramType=o.ScTweenerParamType.ScaleZ},e.prototype.DoLocalScaleZExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue.z=t.scaleZ,this.totalValue.z=this.endValue.z-this.startValue.z}},e.prototype.DoEluerAngles=function(t,e,i){this.endValue=t,this.duration=i,this.isNearAngle=e,this.type=o.ScTweenerType.EulerAngles,this.paramType=o.ScTweenerParamType.Rot},e.prototype.DoEluerAnglesExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue=c.NodeLocalEulerAnglesToWorld(t),this.startValue=this.FormatEulerAngles(this.startValue),this.GetGoodEulerAngles(this.startValue,this.endValue,this.isNearAngle,this.startValue,this.totalValue),this.endValue=this.startValue.add(this.totalValue)}},e.prototype.DoLocalEluerAngles=function(t,e,i){this.endValue=t,this.duration=i,this.type=o.ScTweenerType.LocalEulerAngles,this.paramType=o.ScTweenerParamType.Rot},e.prototype.DoLocalEluerAnglesExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue=this.FormatEulerAngles(t.eulerAngles),this.GetGoodEulerAngles(this.startValue,this.endValue,this.isNearAngle,this.startValue,this.totalValue),this.endValue=this.startValue.add(this.totalValue)}},e.prototype.DoRotateBySelfAxis=function(t,e){this.endValue=t,this.duration=e,this.type=o.ScTweenerType.RotateBySelfAxis,this.paramType=o.ScTweenerParamType.Rot},e.prototype.DoRotateBySelfAxisExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue=cc.Vec3.ZERO,this.totalValue.x=this.CalDiffValue(this.startValue.x,this.endValue.x,!0),this.totalValue.y=this.CalDiffValue(this.startValue.y,this.endValue.y,!0),this.totalValue.z=this.CalDiffValue(this.startValue.z,this.endValue.z,!0),this.endValue=this.startValue.add(this.totalValue),this.orgLocalEulerAngles=t.eulerAngles}},e.prototype.DoRotateByLocalAxis=function(t,e,i){this.axis=e,this.endValue.x=t,this.duration=i,this.type=o.ScTweenerType.RotateByLocalAxis,this.paramType=o.ScTweenerParamType.Rot},e.prototype.DoRotateByLocalAxisExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue=cc.Vec3.ZERO,this.totalValue.x=this.endValue.x-this.startValue.x,this.orgLocalEulerAngles=t.eulerAngles}},e.prototype.DoRotateByQuat=function(t,e){this.dstQuat=t,this.endValue.x=1,this.duration=e,this.type=o.ScTweenerType.RotateByQuat,this.paramType=o.ScTweenerParamType.Rot},e.prototype.DoRotateByQuatExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue.x=0,this.totalValue.x=1,t.getRotation(this.orgQuat)}},e.prototype.DoAlpha=function(t,e){this.duration=e,this.endValue.x=t,this.duration=e,this.type=o.ScTweenerType.NodeAlpha,this.paramType=o.ScTweenerParamType.Alpha},e.prototype.DoAlphaExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time(),this.startValue=cc.Vec3.ZERO,this.startValue.x=t.opacity,this.totalValue.x=this.endValue.x-this.startValue.x}},e.prototype.DoColor=function(t,e,i){this.duration=e,this.isHsvMode=i,this.endColourValue=t,this.type=o.ScTweenerType.NodeColor,this.paramType=o.ScTweenerParamType.Color},e.prototype.DoColorExecute=function(){if(null!=this.target){var t=this.target;this.startTime=l.Time();var e=t.color;if(this.isHsvMode){var i=e.toHSV(),n=this.endColourValue.toHSV();this.startColorValue.x=i.h,this.startColorValue.y=i.s,this.startColorValue.z=i.v,this.startColorValue.w=e.getA(),this.endColorValue.x=n.h,this.endColorValue.y=n.s,this.endColorValue.z=n.v,this.endColorValue.w=this.endColourValue.getA()}else this.startColorValue.x=e.getR(),this.startColorValue.y=e.getG(),this.startColorValue.z=e.getB(),this.startColorValue.w=e.getA(),this.endColorValue.x=this.endColourValue.getR(),this.endColorValue.y=this.endColourValue.getG(),this.endColorValue.z=this.endColourValue.getB(),this.endColorValue.w=this.endColourValue.getA();this.totalColorValue=this.endColorValue.sub(this.startColorValue)}},e.prototype.CalDiffValue=function(t,e,i){var n=0,o=1,a=1;t<0&&(o=-1),e<0&&(a=-1);var r,s=o*Math.abs(t)%360,c=Math.floor(Math.abs(t)/360),l=a*Math.abs(e)%360,h=Math.floor(Math.abs(e)/360),u=l-s;return r=s<l?Math.abs(u)-360:360-Math.abs(u),0==u&&(r=0),n=i?Math.abs(u)<Math.abs(r)?u:r:Math.abs(u)>Math.abs(r)?u:r,s<=0&&l>=0?n+=360*(c+h):s>=0&&l<=0&&(n-=360*(c+h)),n},e.prototype.GetGoodEulerAngles=function(t,e,i,n,o){var a=new cc.Vec3(180,180,180);a=a.sub(t),a=this.FormatEulerAngles(a);var r=cc.Vec3.ZERO;r.x=this.CalDiffValue(t.x,e.x,i),r.y=this.CalDiffValue(t.y,e.y,i),r.z=this.CalDiffValue(t.z,e.z,i);var s=cc.Vec3.ZERO;s.x=this.CalDiffValue(a.x,e.x,i),s.y=this.CalDiffValue(a.y,e.y,i),s.z=this.CalDiffValue(a.z,e.z,i),Math.abs(r.x)+Math.abs(r.y)+ +Math.abs(r.z)>Math.abs(s.x)+Math.abs(s.y)+ +Math.abs(s.z)?(n.x=a.x,n.y=a.y,n.z=a.z,o.x=s.x,o.y=s.y,o.z=s.z):(n.x=t.x,n.y=t.y,n.z=t.z,o.x=r.x,o.y=r.y,o.z=r.z)},e.prototype.FormatEulerAngles=function(t){var e=this.FormatEulerAngle(t.x),i=this.FormatEulerAngle(t.y),n=this.FormatEulerAngle(t.z);return new cc.Vec3(e,i,n)},e.prototype.FormatEulerAngle=function(t){var e=1;return t<0&&(e=-1),e*Math.abs(t)%360},e.prototype.SetEast=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1==t.length?this.easingType=t[0]:(this.easingType=o.ScEasingType.Bezier,this.easeBezierCtrl1=new cc.Vec2(t[0],t[1]),this.easeBezierCtrl2=new cc.Vec2(t[2],t[3])),this},e.prototype.SetDelay=function(t){return this.delay=t,this},e.prototype.SetCallBackFunc=function(t,e){return this.Callback=t,this.datas=e,this.IsDirectCompute()&&this.ExecuteCallBack(),this},e.prototype.SetBezierRoute=function(t,e){return this.routeType=o.ScRouteType.Bezier,this.bezCtrlPt1=t,this.bezCtrlPt2=e,this},e.prototype.ExecuteCallBack=function(){null!=this.Callback&&this.Callback(this.datas)},e.prototype.Update=function(){var t=l.Time();if(!(t<this.delay+this.startTime)){if(t>=this.delay+this.duration+this.startTime-.001)return this.tweenerAction.Update(1),this.ExecuteCallBack(),void r.ScTweenerMgr.Instance().UnReg(this);var e=(t-this.startTime-this.delay)/this.duration,i=this.GetScale(e);this.tweenerAction.Update(i)}},e.prototype.GetScale=function(t){switch(this.easingType){case o.ScEasingType.Linear:return this.Linear(t);case o.ScEasingType.Bezier:return this.EaseBezier(t);case o.ScEasingType.EaseInQuint:return this.EaseInQuint(t);case o.ScEasingType.EaseOutQuint:return this.EaseOutQuint(t);case o.ScEasingType.EaseOutBack:return this.EaseOutBack(t);case o.ScEasingType.EaseInOutBack:return this.EaseInOutBack(t);case o.ScEasingType.EaseInBack:return this.EaseInBack(t);case o.ScEasingType.EaseInOutCirc:return this.EaseInOutCirc(t);case o.ScEasingType.EaseOutCirc:return this.EaseOutCirc(t);case o.ScEasingType.EaseInCirc:return this.EaseInCirc(t);case o.ScEasingType.EaseInOutExpo:return this.EaseInOutExpo(t);case o.ScEasingType.EaseOutExpo:return this.EaseOutExpo(t);case o.ScEasingType.EaseInExpo:return this.EaseInExpo(t)}return 0},e.prototype.Linear=function(t){return t},e.prototype.EaseInQuint=function(t){return Math.pow(t,5)},e.prototype.EaseOutQuint=function(t){return 1-Math.pow(1-t,5)},e.prototype.EaseOutBack=function(t){return this.CubicBezierNormal(t,.175,.885,.32,1.275)},e.prototype.EaseInOutBack=function(t){return this.CubicBezierNormal(t,.68,-.55,.265,1.55)},e.prototype.EaseInBack=function(t){return this.CubicBezierNormal(t,.6,-.28,.735,.0455)},e.prototype.EaseInOutCirc=function(t){return this.CubicBezierNormal(t,.785,.135,.15,.86)},e.prototype.EaseOutCirc=function(t){return this.CubicBezierNormal(t,.075,.82,.165,1)},e.prototype.EaseInCirc=function(t){return this.CubicBezierNormal(t,.6,.04,.98,.335)},e.prototype.EaseInOutExpo=function(t){return this.CubicBezierNormal(t,1,0,0,1)},e.prototype.EaseOutExpo=function(t){return this.CubicBezierNormal(t,.19,1,.22,1)},e.prototype.EaseInExpo=function(t){return this.CubicBezierNormal(t,.95,.05,.795,.035)},e.prototype.EaseBezier=function(t){return this.CubicBezierNormal2(t,this.easeBezierCtrl1,this.easeBezierCtrl2)},e.prototype.CubicBezierNormal=function(t,e,i,n,o){return h.CubicBezierVec2(t,cc.Vec2.ZERO,new cc.Vec2(e,i),new cc.Vec2(n,o),new cc.Vec2(1,1)).y},e.prototype.CubicBezierNormal2=function(t,e,i){return h.CubicBezierVec2(t,cc.Vec2.ZERO,e,i,new cc.Vec2(1,1)).y},e.prototype.ComputeRouteRelativeValue=function(t){var e=cc.Vec3.ZERO;switch(this.routeType){case o.ScRouteType.Linear:e=this.totalValue.mul(t);break;case o.ScRouteType.Bezier:e=this.ComputeBezierRoutePt(t).sub(this.startValue)}return e},e.prototype.ComputeRouteRelativeValue2=function(t){var e=new cc.Vec4(0,0,0,0);switch(this.routeType){case o.ScRouteType.Linear:e=this.totalColorValue.mul(t)}return e},e.prototype.ComputeBezierRoutePt=function(t){return t=Math.max(0,t),t=Math.min(1,t),h.CubicBezier(t,this.startValue,this.bezCtrlPt1,this.bezCtrlPt2,this.startValue.add(this.totalValue))},e}(s.ScObject);i.ScTweener=u,cc._RF.pop()},{"../ScMath/ScMath":"ScMath","../ScTypes/ScObject":"ScObject","../ScUtils/ScUtils":"ScUtils","./ScTweenerAction":"ScTweenerAction","./ScTweenerMgr":"ScTweenerMgr","./ScTweenerTypes":"ScTweenerTypes","./ScTweenerUtils":"ScTweenerUtils"}],ScTypes:[function(t,e,i){"use strict";cc._RF.push(e,"7ac29D9aJJMB5q7pS+8mctQ","ScTypes"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ScUtils:[function(t,e,i){"use strict";function n(t){return null!==t&&"object"==typeof t}cc._RF.push(e,"326dbt0PYRA5aJCrDu5X3DB","ScUtils"),Object.defineProperty(i,"__esModule",{value:!0}),i.TimeMS=function(){return(new Date).getTime()},i.Time=function(){return(new Date).getTime()/1e3},i.RandomFloat=function(t,e){var i=e-t;return t+Math.random()*i},i.RandomInt=function(t,e){var i=e-t,n=t+Math.random()*i;return Math.round(n)},i.IsObject=n,i.LooseEqual=function t(e,i){if(e===i)return!0;var o=n(e),a=n(i);if(!o||!a)return!o&&!a&&String(e)===String(i);try{var r=Array.isArray(e),s=Array.isArray(i);if(r&&s)return e.length===i.length&&e.every(function(e,n){return t(e,i[n])});if(e instanceof Date&&i instanceof Date)return e.getTime()===i.getTime();if(r||s)return!1;var c=Object.keys(e),l=Object.keys(i);return c.length===l.length&&c.every(function(n){return t(e[n],i[n])})}catch(t){return!1}},cc._RF.pop()},{}],SceneSwitch:[function(t,e,i){"use strict";cc._RF.push(e,"678c7hawyZBs6wzrgLroEFV","SceneSwitch"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Login/Login"),o=t("./Room/Room"),a=t("../../../GameLibs/Collections/Dictionary"),r=function(){function t(){this.sceneDict=new a.Dictionary}return t.prototype.Switch=function(t){if(this.curtSceneName!=t){if(null!=this.curtSceneName)this.sceneDict.getValue(this.curtSceneName).FadeOut(.2);var e=this.CreateScene(t);return e.FadeIn(.2),this.sceneDict.setValue(t,e),this.curtSceneName=t,e}},t.prototype.CreateScene=function(t){switch(t){case"Login":var e=new n.Login;return e.parentNode=this.sceneHookNode,e.Show(),e;case"Room":var i=new o.Room;return i.parentNode=this.sceneHookNode,i}},t}();i.SceneSwitch=r,cc._RF.pop()},{"../../../GameLibs/Collections/Dictionary":"Dictionary","./Login/Login":"Login","./Room/Room":"Room"}],Scene:[function(t,e,i){"use strict";cc._RF.push(e,"b67124oKvlPhYVIf4khz2MH","Scene"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],Score:[function(t,e,i){"use strict";cc._RF.push(e,"ce74dyNLBdN2bTfbIyAxk+n","Score");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a,r=t("../../../../../../GameLibs/ScLayout/TableLayoutCore"),s=t("../../../../ResMgr/GameRes"),c=t("../../../../../GameTypes"),l=t("../../../../../../GameCompents/Layout"),h=t("../../../../../../GameLibs/ScLayout/TableTypes"),u=cc._decorator,d=u.ccclass,p=u.property;u.executeInEditMode;(function(t){t[t.LeftAlign=0]="LeftAlign",t[t.RightAlign=1]="RightAlign"})(a=i.ScoreAlignMode||(i.ScoreAlignMode={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score="",e.color=cc.Color.WHITE,e.alignMode=a.LeftAlign,e}return n(e,t),e.prototype.CreateTableLayoutCore=function(){this.tableLayout=new r.TableLayoutCore,this.tableLayout.childrenCount=this.node.childrenCount,this.tableLayout.width=this.node.width,this.tableLayout.height=this.node.height,this.tableLayout.pos=new cc.Vec2(-this.node.width/2,-this.node.height/2)},e.prototype.Layout=function(){this.CreateTableLayoutCore(),this.tableLayout.layoutType=h.LayoutType.HORIZONTAL;var t=s.GameRes.Instance().LoadSpriteAltas(c.SpriteAtlasIdx.Cards);this.tableLayout.ClearTableRow();var e=new h.TableLine(h.LineDir.HORIZONTAL);e.lineComputeMode=h.LineComputeMode.PERCENTAGE,e.computeParam=1,e.spacing=0,this.tableLayout.AddTableRowLine(e);for(var i=this.score.length-this.tableLayout.GetTableColCount(),n=0;n<i;n++){var o=new h.TableLine(h.LineDir.VERTICAL);o.lineComputeMode=h.LineComputeMode.PERCENTAGE,o.spacing=0,this.tableLayout.AddColTableLine(o)}i=this.tableLayout.GetTableColCount()-this.score.length;for(n=0;n<i;n++)this.tableLayout.PopColTableLine();var r,l=this.score.length-this.node.children.length;for(n=0;n<l;n++){var u=new cc.Node;u.setParent(this.node),u.addComponent(cc.Sprite)}this.tableLayout.childrenCount=this.node.childrenCount;var d=0,p=0,f=0,S=0,y=new Array;for(n=0;n<this.score.length;n++){if(0==this.score[n].localeCompare("-"))S++,(m=new h.CellMargin).cellCrood=new h.CellCoord(0,n),m.margin=new h.Margin(0,.3,0,.3),this.tableLayout.cellMargins.push(m),r="sz_a_"+this.score[n],y.push(1.5);else if(0==this.score[n].localeCompare("+"))f++,r="sz_a_"+this.score[n],y.push(1.5);else if(0==this.score[n].localeCompare("\u4e07"))p++,r="sz_a_wang",y.push(2);else if(0==this.score[n].localeCompare(".")){var m;d++,r="sz_a_dot",(m=new h.CellMargin).cellCrood=new h.CellCoord(0,n),m.margin=new h.Margin(.02,0,.02,.5),this.tableLayout.cellMargins.push(m),y.push(1)}else r="sz_a_"+this.score[n],y.push(1);this.node.children[n].getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(r),this.node.children[n].color=this.color}var g=this.score.length;this.score.length<=4&&(g=5);var C=1/(1.5*f+1*d+2*p+1.5*S+g-f-d-p-S);for(n=0;n<this.score.length;n++)this.tableLayout.columnTableLines[n].computeParam=C*y[n];if(this.score.length<=4){var T=(5-this.score.length)/5;this.alignMode==a.LeftAlign?this.tableLayout.tableMargin=new h.Margin(0,0,T,0):this.tableLayout.tableMargin=new h.Margin(T,0,0,0)}else this.tableLayout.tableMargin=new h.Margin(0,0,0,0);this.tableLayout.Layout(),this.SetNodesToDsts();var v=this.node.childrenCount-this.score.length;for(n=0;n<v;n++){this.node.children[this.node.children.length-n-1].destroy()}},e.prototype.SetNodesToDsts=function(){for(var t,e=this.node.children,i=0;i<e.length;i++)null!=(t=this.tableLayout.GetNodeRect(i))&&this.SetNodeToDst(e[i],t)},e.prototype.SetNodeToDst=function(t,e){var i=e.X()+e.Width()/2,n=e.Y()+e.Height()/2;t.setPosition(new cc.Vec3(i,n,0)),t.width=e.Width(),t.height=e.Height()},o([p],e.prototype,"score",void 0),o([p(cc.Color)],e.prototype,"color",void 0),o([p({type:cc.Enum(a)})],e.prototype,"alignMode",void 0),e=o([d],e)}(l.default);i.default=f,cc._RF.pop()},{"../../../../../../GameCompents/Layout":"Layout","../../../../../../GameLibs/ScLayout/TableLayoutCore":"TableLayoutCore","../../../../../../GameLibs/ScLayout/TableTypes":"TableTypes","../../../../../GameTypes":"GameTypes","../../../../ResMgr/GameRes":"GameRes"}],ScreenTouchEvents:[function(t,e,i){"use strict";cc._RF.push(e,"b0dbaNm/XlIKbeVIt+y6pDP","ScreenTouchEvents");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./MouseEvents"),r=t("../GameLibs/Collections/Dictionary"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.raycastRoot=null,e.IsComputeMouseMoveInfo=!1,e.screenTouchEventDict=new r.Dictionary,e.isOnlyScreenTouchEvent=!1,e}return n(e,t),e.prototype.onLoad=function(){this.CreateSceenCamera(),this.selfMouseEvents=this.addComponent(a.default),this.selfMouseEvents.IsFirstMouseDownCheckDrag=!0,this.selfMouseEvents.IsComputeMouseMoveInfo=this.IsComputeMouseMoveInfo,this.node.on(cc.Node.EventType.TOUCH_START,this.TouchDown,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.TouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.TouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.TouchEnd,this)},e.prototype.SetComputeMouseMoveInfo=function(t){this.selfMouseEvents.IsComputeMouseMoveInfo=t},e.prototype.SetIsOnlyScreenTouchEvents=function(t){this.isOnlyScreenTouchEvent=t},e.prototype.RegTouchEvent=function(t,e,i){var n=this.screenTouchEventDict.getValue(t);if(null==n&&(n=new Array,this.screenTouchEventDict.setValue(t,n)),-1==this.FindEventActionIdx(n,e,i)){var o=new u;o.target=i,o.eventAction=e,n.push(o)}},e.prototype.UnRegTouchEvent=function(t,e,i){var n=this.screenTouchEventDict.getValue(t);if(null!=n){var o=this.FindEventActionIdx(n,e,i);-1!=o&&n.splice(o,1)}},e.prototype.ProcessTouchEvent=function(t,e){var i=this.screenTouchEventDict.getValue(t);if(null!=i)for(var n=0;n<i.length;n++){i[n].eventAction.bind(i[n].target)(e)}},e.prototype.FindEventActionIdx=function(t,e,i){for(var n=0;n<t.length;n++)if(t[n].target==i&&t[n].eventAction==e)return n;return-1},e.prototype.CreateSceenCamera=function(){var t=new cc.Node("ScreenCamera");t.position=cc.Vec3.ZERO,this.screenCamera=t.addComponent(cc.Camera),this.screenCamera.ortho=!0,this.screenCamera.alignWithScreen=!0,this.screenCamera.depth=-5,this.screenCamera.clearFlags=0,this.screenCamera.cullingMask=0,t.setParent(this.node)},e.prototype.TouchDown=function(t){this.RayCastNode(t.getLocation()),null!=this.lastMouseEvents&&this.lastMouseEvents.isValid&&this.lastMouseEvents!=this.rayCastMouseEvent&&this.lastMouseEvents.ProcessEvent(cc.Node.EventType.TOUCH_CANCEL,t),this.ProcessEvent(t,this.rayCastMouseEvent,this.rayCastSystemEventNode),this.lastMouseEvents=this.rayCastMouseEvent,this.lastSystemEventsNode=this.rayCastSystemEventNode},e.prototype.TouchMove=function(t){this.RayCastNode(t.getLocation()),null!=this.lastMouseEvents&&this.lastMouseEvents.isValid&&this.lastMouseEvents!=this.rayCastMouseEvent&&this.lastMouseEvents.ProcessEvent(cc.Node.EventType.TOUCH_CANCEL,t),this.ProcessEvent(t,this.rayCastMouseEvent,this.rayCastSystemEventNode),this.lastMouseEvents=this.rayCastMouseEvent,this.lastSystemEventsNode=this.rayCastSystemEventNode},e.prototype.TouchEnd=function(t){this.ProcessEvent(t,this.lastMouseEvents,this.lastSystemEventsNode),this.lastMouseEvents=null,this.lastSystemEventsNode=null},e.prototype.ProcessEvent=function(t,e,i){this.selfMouseEvents.ProcessEvent(t.getType(),t),null!=e&&e.isValid?this.selfMouseEvents.respEventNode=e.node:null!=i&&i.isValid?this.selfMouseEvents.respEventNode=i:this.selfMouseEvents.respEventNode=null,this.ProcessTouchEvent(t.getType(),this.selfMouseEvents),(0==this.isOnlyScreenTouchEvent||this.selfMouseEvents.isProcessRespEventNode)&&(null!=i&&i.isValid&&i.dispatchEvent(t),null!=e&&e.isValid&&e.ProcessEvent(t.getType(),t),this.selfMouseEvents.isProcessRespEventNode=!1)},e.prototype.RayCastNode=function(t){this.rayCastSystemEventNode=null,this.rayCastMouseEvent=null;var e=this.screenCamera.getRay(t);null==this.raycastRoot&&(this.raycastRoot=cc.director.getScene());for(var i,n,o=cc.geomUtils.intersect.raycast(this.raycastRoot,e,null,null),r=0;r<o.length;r++){if((i=o[r].node)!=this.node&&0!=i.active&&0!=i.activeInHierarchy)if(i.hasEventListener(cc.Node.EventType.TOUCH_START)&&(this.rayCastSystemEventNode=i),null!=(n=i.getComponent(a.default))&&1==n.enabled&&(this.rayCastMouseEvent=n),null!=this.rayCastSystemEventNode||null!=this.rayCastMouseEvent)break}},o([l(cc.Node)],e.prototype,"raycastRoot",void 0),o([l],e.prototype,"IsComputeMouseMoveInfo",void 0),e=o([c],e)}(cc.Component);i.default=h;var u=function(){return function(){}}(),d=function(){function t(){var t=new cc.Node("ScreenTouchLayer"),e=t.addComponent(cc.Widget);e.isAlignLeft=!0,e.isAlignTop=!0,e.isAlignRight=!0,e.isAlignBottom=!0,e.left=0,e.top=0,e.right=0,e.bottom=0,e.isAlignOnce=!0,this.screenTouchEvents=t.addComponent(h),t.setParent(cc.director.getScene())}return t.Instance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.SetCastRoot=function(t){this.screenTouchEvents.raycastRoot=t},t.prototype.SetComputeMouseMoveInfo=function(t){this.screenTouchEvents.SetComputeMouseMoveInfo(t)},t.prototype.SetIsOnlyScreenTouchEvents=function(t){this.screenTouchEvents.SetIsOnlyScreenTouchEvents(t)},t.prototype.RegTouchEvent=function(t,e,i){this.screenTouchEvents.RegTouchEvent(t,e,i)},t.prototype.UnRegTouchEvent=function(t,e,i){this.screenTouchEvents.UnRegTouchEvent(t,e,i)},t.instance=null,t}();i.ScreenTouchEventsMgr=d,cc._RF.pop()},{"../GameLibs/Collections/Dictionary":"Dictionary","./MouseEvents":"MouseEvents"}],SelectCardsStageAction:[function(t,e,i){"use strict";cc._RF.push(e,"49469EC1xNOi6w2BAiwMaFg","SelectCardsStageAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../CardsProcesser/SlotsViewer"),r=t("../../../../../GameLibs/ScTweener/ScTweenerRun"),s=t("../../../CardsProcesser/CardsAndSlotsBind"),c=t("../../../../GameTypes"),l=t("../../../../../GameLibs/ScTweener/ScTweenerTypes"),h=t("../../../ResMgr/Pool/PrefabPool"),u=t("../../../../../GameLibs/ScStateMachine/ScStateMachineTypes"),d=function(t){function e(){var e=t.call(this)||this;return e.isFirstEnterStage=!1,e.isDirectEnterStage=!0,e.isImmediateApplyPlayerGameStatus=!0,e.havActionPlayer=!1,e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,2),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e.AddStateChildAction(2,e.State2.bind(e)),e}return n(e,t),e.prototype._BundleData=function(){return[this.isFirstEnterStage,this.isDirectEnterStage,this.isImmediateApplyPlayerGameStatus,this.timeScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.isFirstEnterStage=t[0],this.isDirectEnterStage=t[1],this.isImmediateApplyPlayerGameStatus=t[2],this.timeScale=t[3])},e.prototype.State0=function(){this.ClearPrefab(),1==this.data.round?this.tableFapaiAction=this.data.tableFaPaiAction:this.tableFapaiAction=this.data.tableFaPaiAction2,this.tableFapaiAction.Execute(),null==this.data.roomNode&&this.data.CreateRoom(this.data.parentNode),this.havActionPlayer=!1,this.data.CreatePlayerSeatViewer(0),this.data.RefreshPlayerSeatViewer(0,this.timeScale),this.havActionPlayer&&!this.isDirectEnterStage?this.GotoState(1,1):this.GotoState(1)},e.prototype.State1=function(){if(null==this.tableFapaiAction||this.tableFapaiAction.ExeState()==u.ActionExeState.EndExecuted)if(null==this.data.slotsViewer&&(this.data.slotsViewer=new a.SlotsViewer(this.data.roomSlotsViewerRootNode,c.PrefabIdx.SlotsViewer),this.data.slotsViewer.Clear(),this.data.slotsViewer.SetUnSelectCardsNode(this.data.roomNode)),this.isFirstEnterStage){this.data.slotsViewer.Show();var t=this.data.slotsViewer.GetNode(),e=t.position,i=e.mul(1);i.y+=t.height*t.scaleY,r.ScTweenerRun.DoAlpha(t,0,0),r.ScTweenerRun.DoLocalMove(t,i,0),r.ScTweenerRun.DoAlpha(t,1,.3),r.ScTweenerRun.DoLocalMove(t,e,.3).SetEast(l.ScEasingType.EaseOutCirc);var n=cc.Vec3.ZERO;t.getScale(n);var o=n.mul(.9);r.ScTweenerRun.DoLocalScale(t,o,0);var s=r.ScTweenerRun.DoLocalScale(t,n.mul(1.2),.3,!1).SetEast(l.ScEasingType.EaseOutQuint),h=r.ScTweenerRun.DoLocalScale(t,n,.3,!1).SetEast(l.ScEasingType.EaseInOutBack);r.ScTweenerRun.DoTweenerSeq([s,h]),this.GotoState(2,.3)}else this.isDirectEnterStage?(this.data.slotsViewer.Show(),this.GotoState(2,0)):this.GotoState(2,0)},e.prototype.State2=function(){null==this.data.cardsAndSlotsBind&&(this.data.cardsAndSlotsBind=new s.CardsAndSlotsBind,this.data.cardsAndSlotsBind.SetFlyCardsNode(this.data.roomNode),this.data.cardsAndSlotsBind.SetCardsAreaNode(this.data.cardsViewer.GetCardsParent()),this.data.cardsAndSlotsBind.Bind(this.data.cardsViewer,this.data.slotsViewer),this.data.cardsViewer.ExetureSlotsBind()),this.isFirstEnterStage||this.isDirectEnterStage,this.isImmediateApplyPlayerGameStatus&&this.data.players[0].AlppyChangedGameStatus(),this.GotoState(this.IdleState())},e.prototype.ClearPrefab=function(){if(null!=this.data.btnReady){r.ScTweenerRun.DoAlpha(this.data.btnReady,0,.1).SetCallBackFunc(this.BtnReadyHideEnded.bind(this),this.data.btnReady);var t=cc.Vec3.ZERO;this.data.btnReady.getScale(t),r.ScTweenerRun.DoLocalScale(this.data.btnReady,t.mul(.9),.1),this.data.btnReady=null}if(null!=this.data.btnStartGame){r.ScTweenerRun.DoAlpha(this.data.btnStartGame,0,.1).SetCallBackFunc(this.BtnStartGameHideEnded.bind(this),this.data.btnStartGame);t=cc.Vec3.ZERO;this.data.btnStartGame.getScale(t),r.ScTweenerRun.DoLocalScale(this.data.btnStartGame,t.mul(.9),.1),this.data.btnStartGame=null}},e.prototype.BtnReadyHideEnded=function(t){h.PrefabPool.Instance().Push(t,c.PrefabIdx.BtnReady)},e.prototype.BtnStartGameHideEnded=function(t){h.PrefabPool.Instance().Push(t,c.PrefabIdx.BtnStartGame)},e}(o.ScDesginAction);i.SelectCardsStageAction=d,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes","../../../../GameTypes":"GameTypes","../../../CardsProcesser/CardsAndSlotsBind":"CardsAndSlotsBind","../../../CardsProcesser/SlotsViewer":"SlotsViewer","../../../ResMgr/Pool/PrefabPool":"PrefabPool"}],ServerCardInfo:[function(t,e,i){"use strict";cc._RF.push(e,"4a244Ml3alL4a93m4cXVQU3","ServerCardInfo");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.encode=function(t){var e=t.offset;t.offset=t.offset+2,t.writeByte(this.point),t.writeByte(this.suit),t.writeShort(this.id);var i=t.offset-e,n=t.offset;t.offset=e,t.writeShort(i),t.offset=n},e.prototype.decode=function(t){var e=t.offset,i=t.readShort();this.suit=t.readByte(),this.point=t.readByte(),this.id=t.readShort(),t.offset=e+i},e}(t("./InfoBase").InfoBase);i.ServerCardInfo=o,cc._RF.pop()},{"./InfoBase":"InfoBase"}],Set:[function(t,e,i){"use strict";cc._RF.push(e,"fcb3cLwQvlM56DhodJ1k1Ce","Set"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./util"),o=t("./arrays"),a=t("./Dictionary"),r=function(){function t(t){this.dictionary=new a.Dictionary(t)}return t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.add=function(t){return!this.contains(t)&&!n.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},t.prototype.intersection=function(t){var e=this;this.forEach(function(i){return t.contains(i)||e.remove(i),!0})},t.prototype.union=function(t){var e=this;t.forEach(function(t){return e.add(t),!0})},t.prototype.difference=function(t){var e=this;t.forEach(function(t){return e.remove(t),!0})},t.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach(function(i){return!!t.contains(i)||(e=!1,!1)}),e},t.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},t.prototype.forEach=function(t){this.dictionary.forEach(function(e,i){return t(i)})},t.prototype.toArray=function(){return this.dictionary.values()},t.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.prototype.size=function(){return this.dictionary.size()},t.prototype.clear=function(){this.dictionary.clear()},t.prototype.toString=function(){return o.toString(this.toArray())},t}();i.default=r,cc._RF.pop()},{"./Dictionary":"Dictionary","./arrays":"arrays","./util":"util"}],ShowCardsAction:[function(t,e,i){"use strict";cc._RF.push(e,"4d8afFa7DNAqItv2xk96F+y","ShowCardsAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes"),a=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),r=t("../../../../../../GameLibs/ScStateMachine/ScStateMachineTypes"),s=t("../../../../../../GameLibs/ScTweener/ScTweenerRun"),c=t("../../../../ResMgr/CardsTypeSpriteAsset"),l=function(t){function e(){var e=t.call(this)||this;return e.commonCardsTypes=[o.CardsType.SanTiao,o.CardsType.ShunZi,o.CardsType.WuTong],e.specType=o.CardsType.None,e.isFaPaiFrontFace=!0,e.isFaPaiEndFilpCard=!1,e.isOffFapaiAnimation=!1,e.completeFaPaiCount=0,e.wait=new r.WaitObj,e.isAutoInstallAndUninstall=!0,e.Init=e._Init.bind(e),e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.ActionEndedProcesser=e._Clear.bind(e),e.SetStateLifeRange(0,3),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e.AddStateChildAction(2,e.State2.bind(e)),e.AddStateChildAction(3,e.State3.bind(e)),e}return n(e,t),e.prototype._Init=function(){},e.prototype._BundleData=function(){return[this.ShowCardsEnded,this.cardfaces0,this.cardfaces1,this.cardfaces2,this.commonCardsTypes,this.specType,this.isFaPaiFrontFace,this.isFaPaiEndFilpCard,this.isOffFapaiAnimation,this.timeScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.ShowCardsEnded=t[0],this.cardfaces0=t[1],this.cardfaces1=t[2],this.cardfaces2=t[3],this.commonCardsTypes=t[4],this.specType=t[5],this.isFaPaiFrontFace=t[6],this.isFaPaiEndFilpCard=t[7],this.isOffFapaiAnimation=t[8],this.timeScale=t[9])},e.prototype._Clear=function(){},e.prototype.State0=function(){this.wait.Reset();var t=cc.Vec3.ZERO;s.ScTweenerRun.DoLocalMove(this.data.avatarbox,t,.3*this.timeScale),s.ScTweenerRun.DoAlpha(this.data.cardsViewerGroupNode,1,0),this.completeFaPaiCount=0,this.data.SetCards(this.cardfaces0,this.cardfaces1,this.cardfaces2),this.GotoState(1,.3)},e.prototype.State1=function(){for(var t=0;t<this.data.cardsViewers.length;t++)this.data.cardsViewers[t].IsFaPaiFrontFace=this.isFaPaiFrontFace,this.data.cardsViewers[t].IsFaPaiEndFilpCard=this.isFaPaiEndFilpCard,this.data.cardsViewers[t].AddFaPaiEndEvent(this.UUID(),this.FaPaiEnd.bind(this)),this.isOffFapaiAnimation?this.data.cardsViewers[t].OffFaPaiAnimation():this.data.cardsViewers[t].OnFaPaiAnimation(),this.data.cardsViewers[t].Run();this.WaitGoToState(this.wait,2)},e.prototype.FaPaiEnd=function(t){t.RemoveFaPaiEndEvent(this.UUID()),this.completeFaPaiCount++,3==this.completeFaPaiCount&&this.ContinueGoto(this.wait)},e.prototype.State2=function(){this.data.CacheCardsOrgLayoutInfo();var t=.2;if(null!=this.specType)this.data.specCardsTypeNode.getComponent(cc.Sprite).spriteFrame=c.CardsTypeSpriteAsset.Instance().GetSpriteFrame(this.specType),s.ScTweenerRun.DoAlpha(this.data.specCardsTypeLayoutNode,1,t*this.timeScale);else if(null!=this.commonCardsTypes)for(var e=0;e<this.data.cardsTypesNode.length;e++){this.data.cardsTypesNode[e].getComponent(cc.Sprite).spriteFrame=c.CardsTypeSpriteAsset.Instance().GetSpriteFrame(this.commonCardsTypes[e]),s.ScTweenerRun.DoLocalScale(this.data.cardsTypesNode[e],new cc.Vec3(2,2,1),0),s.ScTweenerRun.DoLocalScale(this.data.cardsTypesNode[e],new cc.Vec3(1,1,1),t*this.timeScale),s.ScTweenerRun.DoAlpha(this.data.cardsTypesNode[e],1,t*this.timeScale)}else t=0;this.GotoState(3,t)},e.prototype.State3=function(){null!=this.ShowCardsEnded&&this.ShowCardsEnded(this.data),this.GotoState(this.IdleState())},e}(a.ScDesginAction);i.ShowCardsAction=l,cc._RF.pop()},{"../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes":"CardAlgoTypes","../../../../ResMgr/CardsTypeSpriteAsset":"CardsTypeSpriteAsset"}],ShowCardsTypeAction:[function(t,e,i){"use strict";cc._RF.push(e,"9759ak/JuhKhKRNU9qu2j0x","ShowCardsTypeAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../../GameLibs/ScTweener/ScTweenerRun"),r=t("../../../../ResMgr/CardsTypeSpriteAsset"),s=function(t){function e(){var e=t.call(this)||this;return e.commonCardsTypes=null,e.specType=null,e.isAutoInstallAndUninstall=!0,e.Init=e._Init.bind(e),e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,2),e.AddStateChildAction(0,e.State0.bind(e)),e}return n(e,t),e.prototype._Init=function(){},e.prototype._BundleData=function(){return[this.commonCardsTypes,this.specType,this.timeScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.commonCardsTypes=t[0],this.specType=t[1],this.timeScale=t[2])},e.prototype.State0=function(){var t=.2;if(null!=this.specType)this.data.specCardsTypeNode.getComponent(cc.Sprite).spriteFrame=r.CardsTypeSpriteAsset.Instance().GetSpriteFrame(this.specType),a.ScTweenerRun.DoAlpha(this.data.specCardsTypeLayoutNode,0,0),a.ScTweenerRun.DoAlpha(this.data.specCardsTypeLayoutNode,1,t*this.timeScale);else if(null!=this.commonCardsTypes)for(var e=0;e<this.data.cardsTypesNode.length;e++){this.data.cardsTypesNode[e].getComponent(cc.Sprite).spriteFrame=r.CardsTypeSpriteAsset.Instance().GetSpriteFrame(this.commonCardsTypes[e]),a.ScTweenerRun.DoAlpha(this.data.cardsTypesNode[e],0,0),a.ScTweenerRun.DoLocalScale(this.data.cardsTypesNode[e],new cc.Vec3(2,2,1),0),a.ScTweenerRun.DoLocalScale(this.data.cardsTypesNode[e],new cc.Vec3(1,1,1),t*this.timeScale),a.ScTweenerRun.DoAlpha(this.data.cardsTypesNode[e],1,t*this.timeScale)}else t=0;this.GotoState(this.IdleState(),t)},e}(o.ScDesginAction);i.ShowCardsTypeAction=s,cc._RF.pop()},{"../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../ResMgr/CardsTypeSpriteAsset":"CardsTypeSpriteAsset"}],ShowSlotScoreAction:[function(t,e,i){"use strict";cc._RF.push(e,"3a942vtt0dGR6tkF/LhvyQ+","ShowSlotScoreAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../../GameLibs/ScTweener/ScTweenerRun"),r=t("../../../../../../GameLibs/ScTweener/ScTweenerTypes"),s=t("../LayoutCompents/Score"),c=function(t){function e(){var e=t.call(this)||this;return e.slotIdx=0,e.scoreStr="",e.isAutoInstallAndUninstall=!0,e.Init=e._Init.bind(e),e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,0),e.AddStateChildAction(0,e.State0.bind(e)),e}return n(e,t),e.prototype._Init=function(){},e.prototype._BundleData=function(){return[this.slotIdx,this.scoreStr,this.timeScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.slotIdx=t[0],this.scoreStr=t[1],this.timeScale=t[2])},e.prototype.State0=function(){var t=this.data.slotScoreNode[this.slotIdx].width/2*3,e=this.data.slotScoreNode[this.slotIdx].getComponent(s.default);e.score=this.scoreStr.toString(),e.Layout(),a.ScTweenerRun.DoLocalScale(this.data.slotScoreNode[this.slotIdx],new cc.Vec3(3,3,1),0),a.ScTweenerRun.DoLocalMoveX(this.data.slotScoreNode[this.slotIdx],t/2,0),a.ScTweenerRun.DoLocalScale(this.data.slotScoreNode[this.slotIdx],new cc.Vec3(1,1,1),.4*this.timeScale).SetEast(r.ScEasingType.EaseOutBack),a.ScTweenerRun.DoLocalMoveX(this.data.slotScoreNode[this.slotIdx],0,0),a.ScTweenerRun.DoAlpha(this.data.slotScoreNode[this.slotIdx],1,.4*this.timeScale).SetEast(r.ScEasingType.EaseOutQuint),this.GotoState(this.IdleState(),.4)},e}(o.ScDesginAction);i.ShowSlotScoreAction=c,cc._RF.pop()},{"../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes","../LayoutCompents/Score":"Score"}],ShowTotalScoreAction:[function(t,e,i){"use strict";cc._RF.push(e,"bcd9bRv4sRHj5c8IG+U+VKI","ShowTotalScoreAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../../GameLibs/ScTweener/ScTweenerRun"),r=t("../../../../../../GameLibs/ScTweener/ScTweenerTypes"),s=t("../../../../../../GameLibs/ScTweener/ScTweenerUtils"),c=t("../../../../../../GameCompents/BMFont"),l=t("../../../../ResMgr/GameRes"),h=t("../../../../../GameTypes"),u=function(t){function e(){var e=t.call(this,!0)||this;return e.scoreStr="",e.ActionEndedProcesser=e.ActionEnded.bind(e),e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,2),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e}return n(e,t),e.prototype.ActionEnded=function(t){},e.prototype._BundleData=function(){return[this.scoreStr,this.timeScale,this.parent]},e.prototype._UnBundleData=function(t){null!=t&&(this.scoreStr=t[0],this.timeScale=t[1],this.parent=t[2])},e.prototype.State0=function(){null==this.data.totalScoreNode&&(this.data.totalScorePrefabIdx=h.PrefabIdx.BlueScore,null!=this.scoreStr&&"+"==this.scoreStr[0]&&(this.data.totalScorePrefabIdx=h.PrefabIdx.OrangeScore),this.data.totalScoreNode=this.data.PopScoreNode(this.parent,this.data.totalScorePrefabIdx));var t=s.NodeLocalPositionToParent(this.data.cardsViewerGroupNode,this.parent),e=s.NodeLocalPositionToParent(this.data.avatarbox,this.parent);this.data.totalScoreNode.setPosition(e);var i=this.data.totalScoreNode.getComponent(c.default);i.text=this.scoreStr,i.fontSize=this.data.cardsViewerNodes[1].height/1.6,i.atlas=l.GameRes.Instance().LoadSpriteAltas(h.SpriteAtlasIdx.Cards),i.Layout(),a.ScTweenerRun.DoAlpha(this.data.totalScoreNode,0,0*this.timeScale),a.ScTweenerRun.DoAlpha(this.data.totalScoreNode,1,.5*this.timeScale),a.ScTweenerRun.DoLocalMove(this.data.totalScoreNode,t,.5*this.timeScale).SetEast(r.ScEasingType.EaseOutCirc),this.GotoState(this.IdleState(),2)},e.prototype.State1=function(){var t=this.data.totalScoreNode.position.x+this.data.cardsViewerGroupNode.width;a.ScTweenerRun.DoLocalMoveX(this.data.totalScoreNode,t,.5*this.timeScale).SetEast(r.ScEasingType.EaseOutCirc),a.ScTweenerRun.DoAlpha(this.data.totalScoreNode,0,.5*this.timeScale),this.GotoState(this.IdleState(),.5)},e}(o.ScDesginAction);i.ShowTotalScoreAction=u,cc._RF.pop()},{"../../../../../../GameCompents/BMFont":"BMFont","../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes","../../../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../../../GameTypes":"GameTypes","../../../../ResMgr/GameRes":"GameRes"}],SlotsUI:[function(t,e,i){"use strict";cc._RF.push(e,"0b3b1te3nhFk6kBkJdPEHFn","SlotsUI");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=a.property,c=function(){function t(){this.slotElems=[]}return o([s([cc.Node])],t.prototype,"slotElems",void 0),t=o([r("SlotGroup")],t)}();i.SlotGroup=c;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.slotGroup=[],e}return n(e,t),o([s([c])],e.prototype,"slotGroup",void 0),e=o([r],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],SlotsViewer:[function(t,e,i){"use strict";cc._RF.push(e,"fbf425kca9Puolwe78jHxnf","SlotsViewer");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../GameLibs/ScAction/ScActionMgr"),a=t("../../../GameLibs/ScAction/ScAction"),r=t("../../../GameLibs/ScTypes/ScObject"),s=t("../../GameTypes"),c=t("./CardsProcesserTypes"),l=t("../ResMgr/GameAudios"),h=t("./CardsAlgorithm/CardsTransform"),u=t("../../../GameLibs/ScTweener/ScTweenerRun"),d=t("../../../GameLibs/ScTweener/ScTweenerTypes"),p=t("../ResMgr/Pool/PrefabPool"),f=t("../ResMgr/Pool/CardPool"),S=t("../../../GameLibs/ScUtils/ScUtils"),y=t("../../../GameLibs/ScTweener/ScTweenerUtils"),m=t("../../../GameLibs/ScMath/ScMath"),g=t("../../../GameCompents/MouseEvents"),C=t("./SlotsUI"),T=t("./Slot"),v=function(t){function e(e,i){var n=t.call(this)||this;return n.slots=new Array,n.slotFlyingCards=new Array,n.animScale=.6,n.SoundScale=.8,n.sortCardsInSlotAnimDuration=.5,n.sortCardsDelayTime=2,n.UseFlyCardScale=!0,n.Init(e,i),n}return n(e,t),e.prototype.AddSlotClickAction=function(t,e){this.AddSlotRespMouseAction(t,e,0)},e.prototype.RemoveSlotClickAction=function(t){this.RemoveSlotRespMouseAction(t,0)},e.prototype.AddSlotDoubleClickAction=function(t,e){this.AddSlotRespMouseAction(t,e,1)},e.prototype.RemoveSlotDoubleClickAction=function(t){this.RemoveSlotRespMouseAction(t,1)},e.prototype.AddSlotDragAction=function(t,e){this.AddSlotRespMouseAction(t,e,2)},e.prototype.RemoveSlotDragAction=function(t){this.RemoveSlotRespMouseAction(t,2)},e.prototype.AddSlotRespMouseAction=function(t,e,i){for(var n=0;n<this.slots.length;n++)switch(i){case 0:this.slots[n].AddOnClickEvent(t,e);break;case 1:this.slots[n].AddOnDoubleClickEvent(t,e);break;case 2:this.slots[n].AddOnDragEvent(t,e)}},e.prototype.RemoveSlotRespMouseAction=function(t,e){for(var i=0;i<this.slots.length;i++)switch(e){case 0:this.slots[i].RemoveOnClickEvent(t);break;case 1:this.slots[i].RemoveOnDoubleClickEvent(t);break;case 2:this.slots[i].RemoveOnDragEvent(t)}},e.prototype.Init=function(t,e){this.parent=t,this.slotViewerNode=p.PrefabPool.Instance().Pop(e);var i=this.slotViewerNode.getComponent(C.default);if(null!=i){y.SetNodeParent(this.slotViewerNode,t,!1),this.slotViewerNode.setPosition(cc.Vec3.ZERO);for(var n=0;n<i.slotGroup.length;n++){var r=new T.Slot(i.slotGroup[n].slotElems,n);this.slots.push(r),this.slotFlyingCards.push(new Array(r.GetElemSlotCount()))}this.updater=o.ScActionMgr.Instance().CreateAction(a.ScAction),this.Clear()}else cc.log("slotsUIPrefabIdx\u4e0d\u7b26\u5408SlotsViewer\u7684\u7ec4\u4ef6\u7279\u6027!")},e.prototype.SetUnSelectCardsNode=function(t){null!=this.mouseUnSelectNodeEvents&&this.mouseUnSelectNodeEvents.destroy(),this.unSelectedAllCardNode=t,this.mouseUnSelectNodeEvents=this.unSelectedAllCardNode.addComponent(g.default),this.mouseUnSelectNodeEvents.MouseClickEvent=this.MouseDownUnSelectCardsNode.bind(this)},e.prototype.MouseDownUnSelectCardsNode=function(){this.UnSelectAllCard()},e.prototype.GetNode=function(){return this.slotViewerNode},e.prototype.Show=function(){this.slotViewerNode.active=!0},e.prototype.Hide=function(){this.slotViewerNode.active=!1},e.prototype.Destory=function(){this.Clear(),o.ScActionMgr.Instance().RemoveAction(this.updater),p.PrefabPool.Instance().Push(this.slotViewerNode,s.PrefabIdx.SlotsViewer)},e.prototype.Clear=function(){if(this.ClearAllFlyingCards(),this.ClearAllCards(),null!=this.slotAnimState)for(var t=0;t<this.slotAnimState.length;t++)this.slotAnimState[t]=c.SlotState.EmptyFull;if(null!=this.isCanSortCard)for(t=0;t<this.isCanSortCard.length;t++)this.isCanSortCard[t]=!0;this.updater.UnAllReg(),null!=this.mouseUnSelectNodeEvents&&(this.mouseUnSelectNodeEvents.destroy(),this.mouseUnSelectNodeEvents=null),this.unSelectedAllCardNode=null},e.prototype.ClearAllFlyingCards=function(){for(var t=0;t<this.slotFlyingCards.length;t++)if(null!=this.slotFlyingCards[t])for(var e=0;e<this.slotFlyingCards[t].length;e++)null!=this.slotFlyingCards[t][e]&&(f.CardPool.Instance().Push(this.slotFlyingCards[t][e].node),this.slotFlyingCards[t][e]=null)},e.prototype.ClearAllCards=function(){for(var t=0;t<this.slots.length;t++)this.ClearSlotCards(t)},e.prototype.ClearSlotCards=function(t){null!=this.slots[t]&&this.slots[t].Clear()},e.prototype.SetAnimScale=function(t){this.animScale=t},e.prototype.GetSlotsCount=function(){return this.slots.length},e.prototype.GetSlot=function(t){return this.slots[t]},e.prototype.GetAllSlot=function(){return this.slots},e.prototype.GetCardFace=function(t,e){return this.slots[t].GetCardFace(e)},e.prototype.GetAllCardFaces=function(t){return this.slots[t].GetAllCardFaces()},e.prototype.GetCard=function(t,e){return this.slots[t].GetCard(e)},e.prototype.GetAllCard=function(t){return this.slots[t].GetAllCard()},e.prototype.GetSeriesCards=function(){for(var t=new Array,e=0;e<this.GetSlotsCount();e++)for(var i=this.GetAllCard(e),n=0;n<i.length;n++)t.push(i[n]);return t},e.prototype.GetSeriesCardSlots=function(){for(var t=new Array,e=0;e<this.slots.length;e++)for(var i=this.slots[e].GetAllCardChildSlots(),n=0;n<i.length;n++)t.push(i[n]);return t},e.prototype.GetSlotPosKey=function(t){for(var e=0,i=0,n=0;n<this.slots.length;n++)if(e=i,!(t>=(i+=this.slots[n].GetAllCardChildSlots().length)))return n<<12|t-e;return-1},e.prototype.GetSlotMaxCardCount=function(t){return this.slots[t].GetAllCardChildSlots().length},e.prototype.GetSlotAllCardIdxs=function(t){return this.slots[t].GetAllCardIdxs()},e.prototype.AddCardToSlot=function(t,e,i){this.slots[e].AddCard(t,i)},e.prototype.DisconnectSlotCards=function(t,e,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),this.slots[t].DisconnectCards(e,i,n)},e.prototype.SelectSlotCard=function(t,e){this.slots[t].SelectCard(e)},e.prototype.UnSelectSlotCard=function(t,e){this.slots[t].UnSelectCard(e)},e.prototype.UnSelectAllCard=function(){for(var t=0;t<this.slots.length;t++)this.slots[t].UnSelectAllCard()},e.prototype.HideSlotCardsEffects=function(t){this.slots[t].HideCardsEffects()},e.prototype.HideAllSlotsCardsEffects=function(t){void 0===t&&(t=.05);for(var e=0;e<this.GetSlotsCount();e++)this.slots[e].HideCardsEffects(t)},e.prototype.FilpSelectSlotCard=function(t,e){this.slots[t].FilpSelectCard(e)},e.prototype.ShakeSlotCards=function(t,e){return this.slots[t].Shake(e)},e.prototype.SingleSelectSlotCard=function(t,e){if(null==this.slots[t].GetCard(e))return!1;for(var i=!1,n=0;n<this.slots.length;n++)if(n!=t)this.slots[n].UnSelectAllCard();else{var o=this.slots[n].GetSelectedCardIdxs();0==o.length?(this.slots[n].SelectCard(e),i=!0):o[0]!=e?(this.slots[n].UnSelectAllCard(),this.slots[n].SelectCard(e),i=!0):(this.slots[n].FilpSelectCard(e),i=null!=(o=this.slots[n].GetSelectedCardIdxs())&&o.length>0&&o[0]==e)}return i&&l.GameAudios.Instance().PlayEffect(s.AudioClipIdx.Select,this.SoundScale),i},e.prototype.MltipleSelectSlotCard=function(t,e){if(null!=this.slots[t].GetCard(e))for(var i=0;i<this.slots.length;i++){if(i!=t)this.slots[i].UnSelectAllCard();else this.slots[i].FilpSelectCard(e)&&l.GameAudios.Instance().PlayEffect(s.AudioClipIdx.OUT_CARD,.8*this.SoundScale)}},e.prototype.GetSelectedCardSlotPosInfo=function(){for(var t,e,i=new Array,n=0;n<this.slots.length;n++)if(0!=(t=this.slots[n].GetSelectedCardIdxs()).length)for(var o=0;o<t.length;o++)(e=new c.SlotPosIdxInfo).slotIdx=n,e.posIdx=t[o],i.push(e);return i},e.prototype.GetSelectedCardsSlotPosIdxInfo=function(){for(var t=0;t<this.slots.length;t++){var e=this.GetSelectedIdxs(t);if(null!=e){var i=new c.SelectedSlotPosIdxInfo;return i.slotIdx=t,i.posIdxs=e,i}}return null},e.prototype.IsCardSelected=function(t,e){return this.slots[t].IsSelected(e)},e.prototype.IsHavCardSelected=function(t){if(null==t){for(var e=0;e<this.slots.length;e++)if(this.IsHavCardSelected(e))return!0;return!1}return this.slots[t].IsHavCardSelected()},e.prototype.GetSelectedIdxs=function(t){var e=this.slots[t].GetSelectedCardIdxs();return null==e||0==e.length?null:e},e.prototype.CreateSlotSortPosIdxs=function(t){return null},e.prototype.IsFilledFull=function(t){if(null==t){for(var e=1,i=0;i<this.slots.length;i++)e&=this.IsFilledFull(i);return 0!=e}return this.slots[t].IsFilledFull()},e.prototype.IsEmptyedFull=function(t){if(null==t){for(var e=1,i=0;i<this.slots.length;i++)e&=this.IsEmptyedFull(i);return 0!=e}return this.slots[t].IsEmptyedFull()},e.prototype.IsFullFilling=function(){for(var t=0;t<this.slots.length;t++)if(!this.slots[t].IsFilledFull())for(var e=this.GetSlotMaxCardCount(t),i=0;i<e;i++)if(null==this.slots[t].GetCard(i)&&0==this.IsHavCardFlyingToSlot(t,i))return!1;return!0},e.prototype.ComputeSlotState=function(t){return this.IsHavCardFlyingToSlot(t)?c.SlotState.NullState:this.slots[t].ComputeSlotState()},e.prototype.GetCardChildSlot=function(t,e){return this.slots[t].GetCardChildSlot(e)},e.prototype.GetSlotPosition=function(t,e){return this.slots[t].GetSlotPosition(e)},e.prototype.GetSlotEulerAngles=function(t,e){return this.slots[t].GetSlotEulerAngles(e)},e.prototype.IsHavCardFlyingToSlots=function(){for(var t=0;t<this.slots.length;t++)if(this.IsHavCardFlyingToSlot(t))return!0;return!1},e.prototype.IsHavCardFlyingToSlot=function(t,e){if(null==e||e<0){for(var i=0;i<this.slotFlyingCards[t].length;i++)if(null!=this.slotFlyingCards[t][i])return!0;return!1}if(null==t){for(i=0;i<this.GetSlotsCount();i++)if(null!=this.slotFlyingCards[i][e])return!0;return!1}return null!=this.slotFlyingCards[t][e]},e.prototype.CancelFlyingCardsSelectedState=function(){for(var t=0;t<this.slots.length;t++)for(var e=0;e<this.slotFlyingCards[t].length;e++)null!=this.slotFlyingCards[t][e]&&this.slotFlyingCards[t][e].Unselect(!1,!1)},e.prototype.IsHavCardFlyingToAllSlot=function(){for(var t=1,e=0;e<this.slots.length;e++)t&=this.IsHavCardFlyingToSlot(e);return 0!=t},e.prototype.GetSlotPosIdx=function(t){for(var e=-1,i=0;i<this.slots.length;i++)if(-1!=(e=this.slots[i].GetCardChildSlotPosIdx(t)))return[i,e];return null},e.prototype.GetSwapSlotAndSlotCards=function(t,e,i,n){var o=!1;if(e.length>=2&&e.length<=4&&(o=!0,(d=this.GetSlotMaxCardCount(i))-n>=e.length)){for(var a=this.GetCard(t,e[0]),r=h.CardsTransform.Instance().GetValue(a.cardFace),s=1;s<e.length;s++)if(a=this.GetCard(t,e[s]),h.CardsTransform.Instance().GetValue(a.cardFace)!=r){o=!1;break}if(null!=(a=this.GetCard(i,n))){r=h.CardsTransform.Instance().GetValue(a.cardFace);for(s=n+1;s<n+e.length;s++)if(null==(a=this.GetCard(i,s))||h.CardsTransform.Instance().GetValue(a.cardFace)!=r){o=!1;break}}else o=!1;if(o){(S=new c.SlotCardsSwapInfo).slotA_idx=t,S.slotB_idx=i,S.slotA_posIdx=new Array(e.length),S.slotB_posIdx=new Array(e.length);for(s=0;s<e.length;s++)S.slotA_posIdx[s]=e[s],S.slotB_posIdx[s]=n+s;return S}}var l=!0,u=this.ComputeSlotUsePosIdxGroup(e.length,i,n,null,!0);if(u.length==e.length&&(l=!1),l){var d=this.GetSlotMaxCardCount(i);if(e.length==d&&this.IsFilledFull(i)){(S=new c.SlotCardsSwapInfo).slotA_idx=t,S.slotB_idx=i,S.slotA_posIdx=new Array(e.length),S.slotB_posIdx=new Array(e.length);for(s=0;s<e.length;s++)S.slotA_posIdx[s]=e[s],S.slotB_posIdx[s]=s;return S}var p=this.GetSlotMaxCardCount(t);if(p==d)if(this.GetSlotAllCardIdxs(t).length==e.length){var f=new Array(p);for(s=0;s<p;s++)f[s]=s;var S;(S=new c.SlotCardsSwapInfo).slotA_idx=t,S.slotB_idx=i,S.slotA_posIdx=new Array(f.length),S.slotB_posIdx=new Array(f.length);for(s=0;s<e.length;s++)S.slotA_posIdx[s]=f[s],S.slotB_posIdx[s]=f[s];return S}}var y=new c.SlotCardsSwapInfo;y.slotA_idx=t,y.slotB_idx=i,y.slotA_posIdx=new Array(u.length),y.slotB_posIdx=new Array(u.length);for(s=0;s<u.length;s++)y.slotA_posIdx[s]=e[s],y.slotB_posIdx[s]=u[s];return y},e.prototype.SwapSlotAndSlotCards=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(2==t.length)for(var i=t[0],n=t[1],o=0;o<i.slotA_posIdx.length;o++)this.SwapSlotCard(i.slotA_idx,i.slotA_posIdx[o],i.slotB_idx,i.slotB_posIdx[o],n);if(5==t.length){var a=t[0],r=t[1],s=t[2],c=t[3];for(n=t[4],i=this.GetSwapSlotAndSlotCards(a,r,s,c),o=0;o<i.slotA_posIdx.length;o++)this.SwapSlotCard(i.slotA_idx,i.slotA_posIdx[o],i.slotB_idx,i.slotB_posIdx[o],n)}},e.prototype.SwapSlotCard=function(t,e,i,n,o){if(void 0===o&&(o=.2),(t!=i||e!=n)&&!this.IsHavCardFlyingToSlot(i,n)){var a=this.DisconnectSlotCards(t,[e],!0,!1),r=this.DisconnectSlotCards(i,[n],!0,!1),s=!1;i==t&&(s=!0),null!=a&&a.length>0&&this.SlotCardFlyToSlot(a[0],i,n,o,s),null!=r&&r.length>0&&this.SlotCardFlyToSlot(r[0],t,e,o,s)}},e.prototype.SortSlotCards=function(t,e){if(void 0===e&&(e=.2),this.IsHavCardFlyingToSlot(t))return!1;var i=this.CreateSlotSortPosIdxs(t);if(null==i)return!0;for(var n=this.DisconnectSlotCards(t,[0,1,2,3,4],!1,!1),o=0;o<n.length;o++)this.SlotCardFlyToSlot(n[o],t,i[o],e,!0);return!0},e.prototype.SuspendSlotCards=function(t){if(!this.IsHavCardFlyingToSlot(t))for(var e=this.GetSlotAllCardIdxs(t),i=this.DisconnectSlotCards(t,e),n=0;n<i.length;n++)this.SlotCardFlyToSlot(i[n],t,e[n])},e.prototype.SlotCardFlyToSlot=function(t,e,i,n,o){void 0===n&&(n=.2),void 0===o&&(o=!1),null!=t&&(this.IsHavCardFlyingToSlot(e,i)||(o||y.SetNodeParent(t.node,this.parent),this.CardFlyToSlot(t,e,i,n,1)))},e.prototype.CardFlyToSlot=function(t,e,i,n,o){if(void 0===n&&(n=.7),void 0===o&&(o=0),null!=t){if(0==o){var a=this.GetSlotEulerAngles(e,i),r=this.GetSlotPosition(e,i),s=cc.Vec3.ZERO;t.node.getPosition(s),s=t.node.parent.convertToWorldSpaceAR(s);var c=m.GetRouteHandles(s,r,[50,80]);this.slotFlyingCards[e][i]=t,u.ScTweenerRun.DoEluerAngles(t.node,a,!0,n*this.animScale).SetCallBackFunc(this.ActionEndForSlot.bind(this),[e,i]).SetEast(d.ScEasingType.EaseOutQuint),u.ScTweenerRun.DoMove(t.node,r,n*this.animScale).SetBezierRoute(c[0],c[1]).SetEast(d.ScEasingType.EaseOutQuint)}else{t.StopShake(),this.slotFlyingCards[e][i]=t;r=this.GetSlotPosition(e,i);u.ScTweenerRun.DoMove(t.node,r,n*this.animScale).SetCallBackFunc(this.ActionEndForSlot.bind(this),[e,i]),u.ScTweenerRun.DoLocalEluerAngles(t.node,cc.Vec3.ZERO,!0,n*this.animScale).SetEast(d.ScEasingType.EaseOutQuint)}this.FadeCardScaleFixSlotPos(t,e,i,n*this.animScale)}},e.prototype.ActionEndForSlot=function(t){var e=t[0],i=t[1],n=this.slotFlyingCards[e][i];null!=n&&(n.SetSelectMode(c.CardSelectMode.Shadow),this.AddCardToSlot(n,e,i),this.FadeCardScaleFixSlotPos(n,e,i),n.SetEffectSortingOrder(505),this.slotFlyingCards[e][i]=null)},e.prototype.FadeCardScaleFixSlotPos=function(t,e,i,n){void 0===n&&(n=0);var o=this.GetCardChildSlot(e,i),a=y.NodeLocalScaleToWorld(o),r=o.width/t.GetPixelSize().x,s=o.height/t.GetPixelSize().y;if(a.x*=r,a.y*=s,1==this.UseFlyCardScale){var c=u.ScTweenerRun.DoScale(t.node,a.mul(1.2),n/2,!1).SetEast(d.ScEasingType.EaseOutBack),l=u.ScTweenerRun.DoScale(t.node,a,n/2,!1);u.ScTweenerRun.DoTweenerSeq([c,l])}else{var h=this.GetCardChildSlot(e,i),p=y.NodeLocalScaleToWorld(h),f=h.width/t.GetPixelSize().x,S=h.height/t.GetPixelSize().y;p.x*=f,p.y*=S,u.ScTweenerRun.DoScale(t.node,p,n).SetEast(d.ScEasingType.EaseInOutBack)}},e.prototype.SortCardsTimer=function(t){S.Time()-this.sortCardsStartTime[t]<this.sortCardsLiveTime[t]||(this.isCanSortCard[t]=!0,this.updater.UnReg(t))},e.prototype.ChangeSlotState=function(t,e){switch(e){case c.SlotState.NonChangedFillFull:this.isCanSortCard[t]&&this.SortSlotCards(t,this.sortCardsInSlotAnimDuration)&&(this.isCanSortCard[t]=!1),this.slotAnimState[t]=e;break;case c.SlotState.FillFull:this.isCanSortCard[t]?this.SortSlotCards(t,this.sortCardsInSlotAnimDuration)&&(this.isCanSortCard[t]=!1):(this.updater.IsHavKey(t)||this.updater.Reg(t,this.SortCardsTimer.bind(this),t),this.sortCardsStartTime[t]=S.Time(),this.sortCardsLiveTime[t]=this.sortCardsDelayTime),this.slotAnimState[t]=e;break;case c.SlotState.EmptyFull:this.slotAnimState[t]!=e&&(this.slotAnimState[t]=e,this.isCanSortCard[t]=!0,this.updater.UnReg(t));break;case c.SlotState.NonEmpty:this.slotAnimState[t]=e}},e.prototype.ComputeSlotUsePosIdxGroup=function(t,e,i,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!1),0==t)return null;null==n&&(n=[!1,!1,!1,!1,!1]);var a,r=this.GetSlotMaxCardCount(e),s=!0;if(t>=r&&0==this.IsHavCardFlyingToSlot(e)&&this.IsEmptyedFull(e)){a=new Array(r);for(var c=0;c<r;c++)a[c]=c;return a}for(var l=0,h=[!1,!1,!1,!1,!1],u=[0,0,0,0,0],d=i,p=Math.min(r,t);s;){if(d==i&&o){if(this.IsHavCardFlyingToSlot(e,d)||1==h[d]){h[d]=!0,d++,d%=r,s=!1;for(c=0;c<r;c++)if(0==h[c]){s=!0;break}continue}u[l++]=d,h[d]=!0,d++,d%=r}else{if(this.IsHavCardFlyingToSlot(e,d)||null!=this.GetCard(e,d)&&0==n[d]||1==h[d]){h[d]=!0,d++,d%=r,s=!1;for(c=0;c<r;c++)if(0==h[c]){s=!0;break}continue}u[l++]=d,h[d]=!0,d++,d%=r}if(l==p)break;s=!1;for(c=0;c<r;c++)if(0==h[c]){s=!0;break}}a=new Array(l);for(c=0;c<l;c++)a[c]=u[c];return a},e}(r.ScObject);i.SlotsViewer=v,cc._RF.pop()},{"../../../GameCompents/MouseEvents":"MouseEvents","../../../GameLibs/ScAction/ScAction":"ScAction","../../../GameLibs/ScAction/ScActionMgr":"ScActionMgr","../../../GameLibs/ScMath/ScMath":"ScMath","../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes","../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../GameLibs/ScTypes/ScObject":"ScObject","../../../GameLibs/ScUtils/ScUtils":"ScUtils","../../GameTypes":"GameTypes","../ResMgr/GameAudios":"GameAudios","../ResMgr/Pool/CardPool":"CardPool","../ResMgr/Pool/PrefabPool":"PrefabPool","./CardsAlgorithm/CardsTransform":"CardsTransform","./CardsProcesserTypes":"CardsProcesserTypes","./Slot":"Slot","./SlotsUI":"SlotsUI"}],Slot:[function(t,e,i){"use strict";cc._RF.push(e,"cfe9d/6QJxMtpsBbAa1p9eL","Slot");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./CardsProcesserTypes"),a=t("../../../GameCompents/MouseEvents"),r=t("../ResMgr/Pool/CardPool"),s=t("../../../GameLibs/ScTweener/ScTweenerUtils"),c=t("../../../GameLibs/Collections/Dictionary"),l=function(t){function e(e,i){var n=t.call(this)||this;return n.slotIndex=0,n.onClickEventList=new c.Dictionary,n.onDragEventList=new c.Dictionary,n.onDoubleClickEventList=new c.Dictionary,n.slotIndex=i,n.cardSlots=e,n.cards=new Array(n.cardSlots.length),n.AddGameMouseEventsComponets(),n}return n(e,t),e.prototype.AddGameMouseEventsComponets=function(){for(var t,e=0;e<this.cardSlots.length;e++)(t=this.cardSlots[e].addComponent(a.default)).IsFirstMouseDownCheckDrag=!0,t.MouseClickEvent=this._OnMouseClick.bind(this),t.MouseDragEvent=this._OnMouseDrag.bind(this),t.MouseDoubleClickEvent=this._OnMouseDoubleClick.bind(this)},e.prototype.RemoveAllEvent=function(){this.onClickEventList.clear(),this.onDragEventList.clear(),this.onDoubleClickEventList.clear()},e.prototype.AddOnClickEvent=function(t,e){this.onClickEventList.setValue(t,e)},e.prototype.RemoveOnClickEvent=function(t){this.onClickEventList.remove(t)},e.prototype.ProcessOnClickEvents=function(t){var e,i=this,n=0,o=this.IsSelected(t);this.onClickEventList.forEach(function(a,r){if(e=r(i.slotIndex,t),0==n&&(i.IsSelected(t)&&0==o?n=1:0==i.IsSelected(t)&&1==o&&(n=2)),1!=n||i.IsSelected(t)?2==n&&i.IsSelected(t)&&i.UnSelectCard(t):i.SelectCard(t),1==e)return!1})},e.prototype.AddOnDragEvent=function(t,e){this.onDragEventList.setValue(t,e)},e.prototype.RemoveOnDragEvent=function(t){this.onDragEventList.remove(t)},e.prototype.ProcessOnDragEvents=function(t){var e=this;this.onDragEventList.forEach(function(i,n){if(1==n(e.slotIndex,t))return!1})},e.prototype.AddOnDoubleClickEvent=function(t,e){this.onDoubleClickEventList.setValue(t,e)},e.prototype.RemoveOnDoubleClickEvent=function(t){this.onDoubleClickEventList.remove(t)},e.prototype.ProcessOnDoubleClickEvents=function(t){var e=this;this.onDoubleClickEventList.forEach(function(i,n){if(1==n(e.slotIndex,t))return!1})},e.prototype._OnMouseClick=function(t){var e=this.FindSameNodeIdxAtCardSlots(t.node);-1!=e&&this.ProcessOnClickEvents(e)},e.prototype._OnMouseDrag=function(t){var e=this.FindSameNodeIdxAtCardSlots(t.node);-1!=e&&this.ProcessOnDragEvents(e)},e.prototype._OnMouseDoubleClick=function(t){var e=this.FindSameNodeIdxAtCardSlots(t.node);-1!=e&&this.ProcessOnDoubleClickEvents(e)},e.prototype.FindSameNodeIdxAtCardSlots=function(t){for(var e=0;e<this.cardSlots.length;e++)if(this.cardSlots[e]==t)return e;return-1},e.prototype.onDestroy=function(){this.Clear()},e.prototype.Clear=function(){for(var t=0;t<this.cards.length;t++)null!=this.cards[t]&&r.CardPool.Instance().Push(this.cards[t].node),this.cards[t]=null;this.RemoveAllEvent()},e.prototype.AddCard=function(t,e){s.SetNodeParent(t.node,this.cardSlots[e]),this.cards[e]=t},e.prototype.GetElemSlotCount=function(){return this.cardSlots.length},e.prototype.GetAllCardFaces=function(){for(var t=new Array,e=0;e<this.cards.length;e++)null!=this.cards[e]&&t.push(this.cards[e].cardFace);return t},e.prototype.CreateHaveEmptyCardFaces=function(){for(var t=new Array,e=0;e<this.cards.length;e++)null==this.cards[e]?t.push(null):t.push(this.cards[e].cardFace);return t},e.prototype.GetCardChildSlot=function(t){return this.cardSlots[t]},e.prototype.GetCardChildSlotPosIdx=function(t){for(var e=0;e<this.cardSlots.length;e++)if(this.cardSlots[e]==t)return e;return-1},e.prototype.GetAllCardChildSlots=function(){return this.cardSlots},e.prototype.GetSlotPosition=function(t){var e=this.cardSlots[t],i=cc.Vec3.ZERO;return e.getPosition(i),e.parent.convertToWorldSpaceAR(i)},e.prototype.GetSlotEulerAngles=function(t){return s.NodeLocalEulerAnglesToWorld(this.cardSlots[t])},e.prototype.GetAllCard=function(){for(var t=new Array,e=0;e<this.cards.length;e++)null!=this.cards[e]&&t.push(this.cards[e]);return t},e.prototype.GetAllCardIdxs=function(){for(var t=new Array,e=0;e<this.cards.length;e++)null!=this.cards[e]&&t.push(e);return t},e.prototype.GetCardFace=function(t){return this.cards[t].cardFace},e.prototype.GetCard=function(t){return this.cards[t]},e.prototype.SetCard=function(t,e){this.cards[t]=e},e.prototype.SelectCard=function(t){null!=this.cards[t]&&this.cards[t].Select(!0,!1)},e.prototype.UnSelectCard=function(t){null!=this.cards[t]&&this.cards[t].Unselect(!0,!1)},e.prototype.UnSelectAllCard=function(){for(var t=0;t<this.cards.length;t++)null!=this.cards[t]&&this.cards[t].Unselect(!0,!1)},e.prototype.FilpSelectCard=function(t){return null!=this.cards[t]&&(this.cards[t].FilpSelect(!0,!1),this.cards[t].IsSelected())},e.prototype.HideCardsEffects=function(t){void 0===t&&(t=.05);for(var e=0;e<this.cards.length;e++)null!=this.cards[e]&&this.cards[e].HideEffect(!0,t)},e.prototype.Shake=function(t){if(null==t)return 0;for(var e=0,i=0;i<t.length;i++)null!=this.cards[t[i]]&&(e|=this.cards[t[i]].Shake());return e},e.prototype.StopShake=function(t){if(null!=t)for(var e=0;e<t.length;e++)t[e]<0||t[e]>=this.cards.length||null!=this.cards[t[e]]&&this.cards[t[e]].StopShake()},e.prototype.GetSelectedCardIdxs=function(){for(var t=new Array,e=0;e<this.cards.length;e++)null!=this.cards[e]&&this.cards[e].IsSelected()&&t.push(e);return t},e.prototype.IsSelected=function(t){return null!=this.cards[t]&&this.cards[t].IsSelected()},e.prototype.IsHavCardSelected=function(){for(var t=0;t<this.cards.length;t++)if(null!=this.cards[t]&&this.cards[t].IsSelected())return!0;return!1},e.prototype.DisconnectCards=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0);for(var n=new Array,o=0;o<t.length;o++)t[o]>=0&&t[o]<this.cards.length&&null!=this.cards[t[o]]&&(n.push(this.cards[t[o]]),i&&s.SetNodeParent(this.cards[t[o]].node,r.CardPool.Instance().CardPoolRoot),e&&this.cards[t[o]].Unselect(!1,!1),this.cards[t[o]]=null);return 0==n.length?null:n},e.prototype.IsFilledFull=function(){for(var t=0;t<this.cards.length;t++)if(null==this.cards[t])return!1;return!0},e.prototype.IsEmptyedFull=function(){for(var t=0;t<this.cards.length;t++)if(this.cards[t])return!1;return!0},e.prototype.ComputeSlotState=function(){return this.IsEmptyedFull()?o.SlotState.EmptyFull:this.IsFilledFull()?o.SlotState.FillFull:o.SlotState.NonEmpty},e}(t("../../../GameLibs/ScTypes/ScObject").ScObject);i.Slot=l,cc._RF.pop()},{"../../../GameCompents/MouseEvents":"MouseEvents","../../../GameLibs/Collections/Dictionary":"Dictionary","../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../GameLibs/ScTypes/ScObject":"ScObject","../ResMgr/Pool/CardPool":"CardPool","./CardsProcesserTypes":"CardsProcesserTypes"}],SocketMgr:[function(t,e,i){"use strict";cc._RF.push(e,"eca1cO3xn9G5rWZ2BDqibqB","SocketMgr");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../ScUtils/UniqueID"),a=t("./SocketTask"),r=function(t){function e(){var e=t.call(this,!1)||this;return e.useDefTaskProcesser=!0,e.isCheckHeartBeat=!1,e.childLifeDelayTime=11e3,e.useSingleSendTaskProcesser=!1,e.socketTask=null,e.socketTask=new a.SocketTask(e),e.task=e.socketTask,e.SetUseSingleSendTaskProcesser(e.useSingleSendTaskProcesser),e}return n(e,t),e.prototype.ConnectServer=function(t,e){return this.Start(),this.socketTask.ConnectServer(t,e)},e.prototype.CreateLocalSocket=function(){return this.Start(),this.socketTask.CreateLocalSocket()},e.prototype.SetServerMachineID=function(t){o.UniqueID.Instance().set_workid(t)},e.prototype.SetUseSingleSendTaskProcesser=function(t){this.isStop&&(this.socketTask.SetUseSingleSendDataTaskProcesser(t),this.useSingleSendTaskProcesser=t)},e.prototype.GetSocket=function(t){return this.socketTask.GetSocket(t)},e}(t("../ScTask/TaskMgr").TaskMgr);i.SocketMgr=r,cc._RF.pop()},{"../ScTask/TaskMgr":"TaskMgr","../ScUtils/UniqueID":"UniqueID","./SocketTask":"SocketTask"}],SocketTask:[function(t,e,i){"use strict";cc._RF.push(e,"4c2fcNLR19JTrP3vI6fn9EM","SocketTask");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../ScTask/TaskProcesser"),a=t("./ScNetTypes"),r=t("./Socket"),s=t("../ScTask/Task"),c=t("../ScTask/ScTaskTypes"),l=t("../Collections/Dictionary"),h=function(t){function e(e){var i=t.call(this,null)||this;return i.socketMap=new l.Dictionary,i.sendTaskProcesser=null,i.useSingleSendDataTaskProcesser=!1,i.useSendedEvent=!1,i.socketMgr=null,i.socketMgr=e,i}return n(e,t),e.prototype.ConnectServer=function(t,e){var i=new r.Socket(this);this.socketMap.setValue(i.GetID(),i);var n=i.ConnectServer(t,e);return null==n&&this.SocketError(i),n},e.prototype.CreateLocalSocket=function(){var t=new r.Socket(this);return this.socketMap.setValue(t.GetID(),t),t},e.prototype.GetSocket=function(t){return this.socketMap.containsKey(t)?this.socketMap.getValue(t):null},e.prototype.SocketMgr=function(){return this.socketMgr},e.prototype.CheckingPacketVaild=function(t){return null==this.GetSocket(t.socketID)?0:1},e.prototype.PostSendDataTask=function(t,e,i,n){return this.sendTaskProcesser.PostTask(t,e,i,c.TaskMsg.TMSG_DATA,n)},e.prototype.Start=function(){t.prototype.Start.call(this),null!=this.sendTaskProcesser&&this.sendTaskProcesser.Start()},e.prototype.Stop=function(){t.prototype.Stop.call(this),null!=this.sendTaskProcesser&&this.sendTaskProcesser.Stop(),this.RemoveSocketMap()},e.prototype.CreateTaskProcesser=function(t){void 0===t&&(t=null),this.Stop(),this.useSingleSendDataTaskProcesser&&(this.sendTaskProcesser=new o.CommonTaskProcesser);var e=this.SocketMgr();null==t||e.useDefTaskProcesser?this.taskProcesser=new o.CommonTaskProcesser:this.taskProcesser=t},e.prototype.SetUseSingleSendDataTaskProcesser=function(t){this.useSingleSendDataTaskProcesser=t,this.useSingleSendDataTaskProcesser&&null==this.sendTaskProcesser&&(this.sendTaskProcesser=new o.CommonTaskProcesser)},e.prototype.PostConnectedSocketTask=function(t){return this.PostTask(this.ConnectedSocketTask.bind(this),t)},e.prototype.ConnectedSocketTask=function(t){var e=t.socket;this.SocketMgr();0!=this.CheckingPacketVaild(t)&&(0==e.ProcessConnectedData()&&this.SocketError(e),e.PostRecv())},e.prototype.PostRecvedTask=function(t){return this.PostTask(this.RecvedTask.bind(this),t)},e.prototype.RecvedTask=function(t){var e=t.socket;0!=this.CheckingPacketVaild(t)&&(e.ProcessData(t.buf),e.PostRecv())},e.prototype.PostSendTask=function(t,e){if(this.useSingleSendDataTaskProcesser)return this.PostSendDataTask(this.SendTask,t,null,e);this.PostTask(this.SendTask.bind(this),t,null,e)},e.prototype.SendTask=function(t){var e=t.socket;0!=this.CheckingPacketVaild(t)&&e.ProcessSendData(t)},e.prototype.PostSendedTask=function(t){if(this.useSingleSendDataTaskProcesser)return this.PostSendDataTask(this.SendedTask,t);this.PostTask(this.SendedTask.bind(this),t)},e.prototype.SendedTask=function(t){var e=t.socket;0!=this.CheckingPacketVaild(t)&&(this.useSendedEvent&&(this.useSingleSendDataTaskProcesser?this.PostTask(this.ProcessSendedMsgTask,t.socketID):e.DePacketor().UnPack(a.SocketEvent.EV_SOCKET_SEND,e)),null!=(t=e.TakeFirstReadySendData())&&null!=(t=e.PeekFirstReadySendData())&&e.SendData(t))},e.prototype.ProcessSendedMsgTask=function(t){if(null!=this.GetSocket(t)){var e=this.socketMap.getValue(t);e.DePacketor().UnPack(a.SocketEvent.EV_SOCKET_SEND,e)}},e.prototype.PostHeartBeatCheckTask=function(){var t=this.SocketMgr();return this.PostTask(this.HeartBeatCheckTask.bind(this),this,null,t.childLifeDelayTime-1e3)},e.prototype.HeartBeatCheckTask=function(t){this.SocketMgr().isCheckHeartBeat&&(this.HeartBeatCheck(),this.PostHeartBeatCheckTask())},e.prototype.HeartBeatCheck=function(){var t=(new Date).getTime(),e=this.SocketMgr(),i=new Array;this.socketMap.forEach(function(n,o){t-o.timeStamp>e.childLifeDelayTime&&(o.SetSocketState(a.SocketState.RESPONSE_TIMEOUT),i.push(o))});for(var n=0;n<i.length;n++)this.SocketError(i[n])},e.prototype.PostSocketClosedTask=function(t,e){return this.PostTask(this.SocketClosed.bind(this),t,null,e)},e.prototype.SocketClosed=function(t){return t.SetSocketState(a.SocketState.CLOSED),t.DePacketor().UnPack(a.SocketEvent.EV_SOCKET_CLOSED,t),this.socketMap.remove(t.GetID()),t.Clear(),0},e.prototype.PostSocketErrorTask=function(t,e){return this.PostTask(this.SocketError.bind(this),t,null,e)},e.prototype.SocketError=function(t){return t.SetSocketState(a.SocketState.CLOSED),t.DePacketor().UnPack(a.SocketEvent.EV_SOCKET_ERROR,t),this.socketMap.remove(t.GetID()),t.Clear(),0},e.prototype.RemoveSocketMap=function(){null!=this.socketMap&&this.socketMap.clear()},e}(s.Task);i.SocketTask=h,cc._RF.pop()},{"../Collections/Dictionary":"Dictionary","../ScTask/ScTaskTypes":"ScTaskTypes","../ScTask/Task":"Task","../ScTask/TaskProcesser":"TaskProcesser","./ScNetTypes":"ScNetTypes","./Socket":"Socket"}],Socket:[function(t,e,i){"use strict";cc._RF.push(e,"72907FLMOtO4oWFT/GjpVzR","Socket");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ScNetTypes"),a=t("../ByteBuffer/bytebuffer"),r=t("./Packet"),s=t("../ScUtils/UniqueID"),c=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.mode=o.SocketMode.REMTOE_DATA,i.joinDataCache=new a,i.remainJoinDataOffset=0,i.remainJoinDataSize=0,i.unPackCalcLen=-1,i.unPackHeadLen=0,i.extractState=o.ExtractState.ES_PACKET_HEADLEN_NOT_GET,i.joinFrameDataStream=null,i.joinFrameHeader=null,i.dataTransMode=o.DataTransMode.MODE_PACK,i.dePacketor=null,i.msgProcesser=null,i.pack=null,i.tag=null,i.socketType=o.NetSocketType.UNKNOWN_SOCKET,i.socketState=o.SocketState.NEW_CREATE,i.sendDataList=new Array,i.msgBuf=new a(30720),i.msgBufReadOffset=0,i.msgBufLimit=0,i.isPostRecved=!1,i.socketTask=e,i.joinDataCache=null,i.id=s.UniqueID.Instance().gen().toString(),i.recvPacket=new r.Packet(i,1024),i}return n(e,t),e.prototype.Clear=function(){this.ClearCachePackBuf(),this.sock=null,this.msgBuf.clear()},e.prototype.ClearCachePackBuf=function(){this.sendDataList.length=0,null!=this.joinDataCache&&this.joinDataCache.clear(),this.remainJoinDataOffset=0,this.remainJoinDataSize=0,this.unPackCalcLen=-1,null!=this.dePacketor&&(this.unPackHeadLen=this.dePacketor.GetPackHeadPreLength())},e.prototype.SetDePacketor=function(t){t!=this.dePacketor&&(this.dePacketor=t,null!=this.dePacketor&&(this.unPackHeadLen=this.dePacketor.GetPackHeadPreLength()),this.RemovePack(),null!=this.joinDataCache&&this.joinDataCache.clear(),this.unPackCalcLen=0,this.remainJoinDataSize=0)},e.prototype.DePacketor=function(){return this.dePacketor},e.prototype.SetMsgProcesser=function(t,e){if(t!=this.msgProcesser&&(this.joinFrameHeader=null,this.msgProcesser=t,null!=e&&e)){var i=this.msgProcesser.CreateDepacktor();null!=i&&this.SetDePacketor(i)}},e.prototype.MsgProcesser=function(){return this.msgProcesser},e.prototype.ConnectServer=function(t,e){if(this.mode!=o.SocketMode.LOCAL_DATA){this.SetRemoteURL(t,e);var i=new WebSocket(this.remoteUrl);return this.dataTransMode==o.DataTransMode.MODE_PACK?i.binaryType="arraybuffer":i.binaryType="blob",this.sock=i,this.SetSocketType(o.NetSocketType.CONNECT_SERVER_SOCKET),null==this.sock?(this.SetSocketState(o.SocketState.INIT_FAILD),null):(this.UpdataTimeStamp(),this.SetSocketState(o.SocketState.CONNECTTING_SERVER),this.sock.onopen=this.OnOpen.bind(this),this.sock.onmessage=this.OnMessage.bind(this),this.sock.onclose=this.OnClose.bind(this),this.sock.onerror=this.OnError.bind(this),this)}},e.prototype.SetDataTransMode=function(t){this.dataTransMode=t},e.prototype.DataTransMode=function(){return this.dataTransMode},e.prototype.SocketMgr=function(){return this.socketTask.SocketMgr()},e.prototype.SetSocketType=function(t){this.socketType=t},e.prototype.SetSocketState=function(t){this.socketState=t},e.prototype.SocketState=function(){return this.socketState},e.prototype.CreatePacket=function(t){return void 0===t&&(t=1024),new r.Packet(this,t)},e.prototype.Close=function(){if(null==this.sock||1!=this.sock.readyState)return this.SetSocketState(o.SocketState.CLOSEING),void this.socketTask.PostSocketErrorTask(this);this.SetSocketState(o.SocketState.CLOSEING),this.sock.close()},e.prototype.OnOpen=function(t){this.socketTask.PostConnectedSocketTask(this.recvPacket)},e.prototype.ProcessConnectedData=function(){return 1==this.sock.readyState&&(this.SetSocketState(o.SocketState.CONNECTED_SERVER),this.UpdataTimeStamp(),null!=this.dePacketor&&this.dePacketor.UnPack(o.SocketEvent.EV_SOCKET_CONNECTED,this),!0)},e.prototype.OnMessage=function(t){if("arraybuffer"==this.sock.binaryType)if(t.data instanceof ArrayBuffer)this.CacheDataToMsgBuf(t.data);else{var e=new a;e.writeString(t.data),e.limit=e.offset,e.offset=0;var i=e.toArrayBuffer();this.CacheDataToMsgBuf(i)}else this.SetPack(t.data),this.dePacketor.UnPack(o.SocketEvent.EV_SOCKET_RECV,this),this.RemovePack()},e.prototype.CacheDataToMsgBuf=function(t){t.byteLength>=this.msgBuf.limit-this.msgBuf.offset?(this.msgBufLimit=this.msgBuf.offset,this.msgBuf.offset=0):this.msgBufReadOffset<=this.msgBufLimit&&this.msgBufLimit<this.msgBuf.offset+t.byteLength&&(this.msgBufLimit=this.msgBuf.offset+t.byteLength),this.msgBuf.writeBytes(t),1==this.isPostRecved&&(this.socketTask.PostTask(this.ReadMsgBufTask.bind(this),null,null),this.isPostRecved=!1)},e.prototype.ReadMsgBufTask=function(t){if(this.isPostRecved=!1,null!=this.socketTask.GetSocket(this.id)){var e=this.msgBufReadOffset,i=this.msgBufLimit-this.msgBufReadOffset,n=this.recvPacket.buf.view.byteLength;i<=this.recvPacket.buf.view.byteLength&&(n=i),this.msgBufReadOffset+=n,this.msgBufReadOffset==this.msgBufLimit&&(this.msgBufReadOffset=0,this.msgBufLimit=0,this.msgBuf.offset=0),this.recvPacket.ResetBuffer(this.msgBuf,e,e+n),this.recvPacket.SetOffset(n),this.socketTask.PostRecvedTask(this.recvPacket)}},e.prototype.PostRecv=function(){this.isPostRecved=!0,this.msgBuf.offset!=this.msgBufReadOffset&&(this.socketTask.PostTask(this.ReadMsgBufTask.bind(this),null,null),this.isPostRecved=!1)},e.prototype.ProcessData=function(t){if(this.mode==o.SocketMode.REMTOE_DATA&&this.UpdataTimeStamp(),null!=this.msgProcesser)if(this.dataTransMode==o.DataTransMode.MODE_PACK){if(null==this.dePacketor)return;this.dePacketor.SetPack(this,t),this.dePacketor.Extract()}else this.SetPack(t),this.msgProcesser.UnPack(o.SocketEvent.EV_SOCKET_RECV,this),this.RemovePack()},e.prototype.OnClose=function(t){this.socketTask.PostSocketClosedTask(this)},e.prototype.OnError=function(t){this.socketTask.PostSocketErrorTask(this)},e.prototype.Send=function(t,e,i,n){if(this.mode==o.SocketMode.LOCAL_DATA)return 0;if(t instanceof r.Packet)return this.socketTask.PostSendTask(t,n);if("string"==typeof t){var a=this.CreatePacket(16);return a.ResetBuffer(t,e,i),this.socketTask.PostSendTask(a,n)}t=t,(null==e||e<0)&&(e=0),(null==i||i<=e)&&(i=t.offset);var s=this.CreatePacket(16);return s.ResetBuffer(t,e,i),this.socketTask.PostSendTask(s,n)},e.prototype.ProcessSendData=function(t){0==this.GetReadySendDataLength()&&this.SendData(t),this.AddReadySendData(t)},e.prototype.SendData=function(t){if(null!=this.sock&&this.mode!=o.SocketMode.LOCAL_DATA){var e=t.buf;"arraybuffer"==this.sock.binaryType?this.sock.send(e.toArrayBuffer()):this.sock.send(e.toUTF8()),this.socketTask.PostSendedTask(t)}},e.prototype.AddReadySendData=function(t){this.sendDataList.push(t)},e.prototype.TakeFirstReadySendData=function(){if(0==this.GetReadySendDataLength())return null;var t=this.sendDataList[0];return this.sendDataList.splice(0,1),t},e.prototype.PeekFirstReadySendData=function(){return 0==this.GetReadySendDataLength()?null:this.sendDataList[0]},e.prototype.GetReadySendDataLength=function(){return this.sendDataList.length},e.prototype.SetPack=function(t){this.pack=t},e.prototype.RemovePack=function(){this.pack=null},e.prototype.GetRecvedPack=function(){return this.pack},e.prototype.GetID=function(){return this.id},e.prototype.ResetGenID=function(){var t=s.UniqueID.Instance();this.id=t.gen().toString()},e.prototype.GetSocketType=function(){return this.socketType},e.prototype.GetSocketState=function(){return this.socketState},e.prototype.UpdataTimeStamp=function(t){if(null==t){var e=(new Date).getTime();this.timeStamp=e}else this.timeStamp=t},e.prototype.SetRemoteURL=function(t,e){var i=t.split(":");3==i.length?(this.remoteIp=i[1].substring(2),this.remotePort=Number(i[2]),this.remoteUrl=t):2==i.length?"ws"===i[0]&&(this.remoteIp=i[1].substring(2),null==e?(this.remotePort=null,this.remoteUrl=t):(this.remotePort="string"==typeof e?Number(e):e,this.remoteUrl=this.remoteIp+":"+this.remotePort)):1==i.length&&(this.remoteIp=i[0],null==e?(this.remotePort=null,this.remoteUrl="ws://"+this.remoteIp):(this.remotePort="string"==typeof e?Number(e):e,this.remoteUrl="ws://"+this.remoteIp+":"+this.remotePort))},e}(t("../ScTypes/ScObject").ScObject);i.Socket=c,cc._RF.pop()},{"../ByteBuffer/bytebuffer":"bytebuffer","../ScTypes/ScObject":"ScObject","../ScUtils/UniqueID":"UniqueID","./Packet":"Packet","./ScNetTypes":"ScNetTypes"}],SoundAction:[function(t,e,i){"use strict";cc._RF.push(e,"066a3dwSgJHNrUeaysbJQUP","SoundAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../ResMgr/GameAudios"),r=t("../../../../GameTypes"),s=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this,!0,e)||this;return i.soundPlayCount=0,i.Init=i._Init.bind(i),i.DefineIdleState(2),i.SetStateLifeRange(0,1),i.AddStateChildAction(0,i.State0.bind(i)),i.AddStateChildAction(1,i.State1.bind(i)),i}return n(e,t),e.prototype._Init=function(){this.AssignSoundTime()},e.prototype.State0=function(){a.GameAudios.Instance().PlayEffect(r.AudioClipIdx.Shuffle,this.data.SoundScale),this.SetState(2,2)},e.prototype.State1=function(){a.GameAudios.Instance().PlayEffect(r.AudioClipIdx.GAME_CARD),this.soundPlayCount++,4==this.soundPlayCount?(this.soundPlayCount=0,this.SetState(2,0),this.soundPlayCount=0,this.UnInstall()):this.SetState(1,this.soundPart2Tm)},e.prototype.AssignSoundTime=function(){var t=3.5/13*this.data.cardFaces.length,e=4.5/13*this.data.cardFaces.length,i=this.data.faPaiTotalCostTime*(t/10),n=this.data.faPaiTotalCostTime*(e/10);this.soundPart1Tm=i/6,this.soundPart2Tm=n/4},e.prototype.SetState=function(t,e){this.GotoState(t,e*this.data.fapaiAnimScale)},e}(o.ScDesginAction);i.SoundAction=s,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../GameTypes":"GameTypes","../../../ResMgr/GameAudios":"GameAudios"}],SpecCardsTypeLayout:[function(t,e,i){"use strict";cc._RF.push(e,"34788o4EytE+6m6A8DpGGvz","SpecCardsTypeLayout");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../../../../GameCompents/Layout"),r=t("../../../../../../GameCompents/TableLayout"),s=cc._decorator,c=s.ccclass,l=s.property,h=s.executeInEditMode,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardsViewerGroup=null,e.tableLayout=null,e}return n(e,t),e.prototype.update=function(){0},e.prototype.Layout=function(){this.node.height=this.cardsViewerGroup.height/3,this.node.width=this.cardsViewerGroup.width;var t=this.cardsViewerGroup.position;t.y=t.y-this.cardsViewerGroup.height/2+this.node.height/3;var e=this.cardsViewerGroup.parent.convertToWorldSpaceAR(t);this.node.parent.convertToNodeSpaceAR(e);this.node.setPosition(t),this.tableLayout.Layout()},o([l(cc.Node)],e.prototype,"cardsViewerGroup",void 0),o([l(r.default)],e.prototype,"tableLayout",void 0),e=o([c,h],e)}(a.default);i.default=u,cc._RF.pop()},{"../../../../../../GameCompents/Layout":"Layout","../../../../../../GameCompents/TableLayout":"TableLayout"}],Stack:[function(t,e,i){"use strict";cc._RF.push(e,"19d8db6r+JNcbkCLN82khDg","Stack"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./LinkedList"),o=function(){function t(){this.list=new n.LinkedList}return t.prototype.push=function(t){return this.list.add(t,0)},t.prototype.add=function(t){return this.list.add(t,0)},t.prototype.pop=function(){return this.list.removeElementAtIndex(0)},t.prototype.peek=function(){return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.isEmpty()},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();i.default=o,cc._RF.pop()},{"./LinkedList":"LinkedList"}],TableFaPaiAction2:[function(t,e,i){"use strict";cc._RF.push(e,"070d9dVI/ZIbJjKB+QHzeub","TableFaPaiAction2");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../CardsProcesser/CardsViewer"),r=t("../../../CardsProcesser/CardsAndCardsBind"),s=t("../../../CardsProcesser/CardsProcesserTypes"),c=t("../../../../../GameLibs/ScTask/GameTaskMgr"),l=function(t){function e(){var e=t.call(this,!0)||this;return e.isFirstEnterStage=!0,e.isDirectEnterStage=!1,e.isAutoInstallAndUninstall=!0,e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.ActionEndedProcesser=e.ActionEnded.bind(e),e.SetStateLifeRange(0,5),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e.AddStateChildAction(2,e.State2.bind(e)),e.AddStateChildAction(3,e.State3.bind(e)),e.AddStateChildAction(4,e.State4.bind(e)),e.AddStateChildAction(5,e.State5.bind(e)),e}return n(e,t),e.prototype.ActionEnded=function(){null!=this.playerCardsViewerBind&&this.playerCardsViewerBind.Destory(),null!=this.tableCardsViewerBind&&this.tableCardsViewerBind.Destory(),null!=this.tableCardsViewer&&this.tableCardsViewer.Destory(),null!=this.tableCardsViewer2&&this.tableCardsViewer2.Destory(),this.tableCardsViewer=null,this.tableCardsViewer2=null,this.playerCardsViewerBind=null,c.GameTaskMgr.Instance().UnRegMsg("SendCardToPlayer")},e.prototype._BundleData=function(){return[this.isFirstEnterStage,this.isDirectEnterStage,this.timeScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.isFirstEnterStage=t[0],this.isDirectEnterStage=t[1],this.timeScale=t[2])},e.prototype.State0=function(){this.tableCardsViewer=this.CreateTableCardsViewer(this.data.roomTableCardsViewer3RootNode,.6,0,0),this.tableCardsViewer.SetCards(this.data.players[0].handCardFaces),this.tableCardsViewer2=this.CreateTableCardsViewer(this.data.roomTableCardsViewer2RootNode,.2,30,.4),this.tableCardsViewer2.SetCards(null),this.tableCardsViewerBind=new r.CardsAndCardsBind,this.tableCardsViewerBind.SetBindMode(s.BindMode.AtoB),this.tableCardsViewerBind.Bind(this.tableCardsViewer,this.tableCardsViewer2),this.tableCardsViewer.Show(),this.tableCardsViewer.Run(),this.tableCardsViewer2.Show(),this.tableCardsViewer2.Run(),this.GotoState(1)},e.prototype.State1=function(){this.tableCardsViewer.IsFaPaiEnded()&&this.GotoState(2)},e.prototype.State2=function(){c.GameTaskMgr.Instance().RegMsg("SendCardToPlayer",this.SendCardToPlayer,this);for(var t,e=this.tableCardsViewer.cardFaces.length,i=0;i<e;i++)t=this.tableCardsViewer.GetCardsByIdxs(i),c.GameTaskMgr.Instance().SendMsg("SendCardToPlayer",t,.1*i*1e3);this.GotoState(3)},e.prototype.SendCardToPlayer=function(t){null!=this.tableCardsViewer&&null!=this.tableCardsViewerBind&&(this.tableCardsViewer.SelectCardByCard(t),this.tableCardsViewerBind.ClickedCardsAreaB())},e.prototype.State3=function(){this.tableCardsViewer2.GetCardsCount()!=this.data.players[0].handCardFaces.length||this.tableCardsViewer2.IsHavFlyingToHandCards()||(null==this.data.cardsViewer&&(this.data.cardsViewer=this.data.CreateCardsViewer()),this.playerCardsViewerBind=new r.CardsAndCardsBind,this.playerCardsViewerBind.SetBindMode(s.BindMode.AtoB),this.playerCardsViewerBind.Bind(this.tableCardsViewer2,this.data.cardsViewer),this.data.cardsViewer.Show(),this.data.cardsViewer.SetCards(null),this.data.cardsViewer.Run(),this.GotoState(4,.3))},e.prototype.State4=function(){c.GameTaskMgr.Instance().UnRegMsg("SendCardToPlayer"),c.GameTaskMgr.Instance().RegMsg("SendCardToPlayer",this.SendCardToPlayer2,this);for(var t,e=this.tableCardsViewer2.GetCardsCount(),i=0;i<e;i++)t=this.tableCardsViewer2.GetCardsByIdxs(i),c.GameTaskMgr.Instance().SendMsg("SendCardToPlayer",t,.25*i*1e3);this.GotoState(5)},e.prototype.SendCardToPlayer2=function(t){null!=this.tableCardsViewer2&&null!=this.playerCardsViewerBind&&(this.tableCardsViewer2.SelectCardByCard(t),this.playerCardsViewerBind.ClickedCardsAreaB())},e.prototype.State5=function(){this.data.cardsViewer.GetCardsCount()==this.data.players[0].handCardFaces.length&&this.GotoState(this.IdleState())},e.prototype.CreateTableCardsViewer=function(t,e,i,n){void 0===e&&(e=.6),void 0===i&&(i=30),void 0===n&&(n=.6);var o=new a.CardsViewer(t);return o.animScale=e,o.fapaiAnimScale=.3,o.IsFaPaiFrontFace=!0,o.IsFaPaiEndFilpCard=!1,o.ArcLayoutHeightScale=n,o.ArcLayoutAbsEluerAngleZ=i,o.LayoutCardCount=13,o.PaiDuiPosOffset=new cc.Vec2(0,0),o.SortPaiOffset=new cc.Vec2(0,0),o.IsOpenCardWobble=!0,o.IsFaPaiPreRightMove=!0,o.IsResponseMouseOp=!1,o.SetLayoutWidth(t.width),o.UnSelectedAllCardNode=this.data.roomNode,o.CacheFaPaiAnimation(),o},e}(o.ScDesginAction);i.TableFaPaiAction2=l,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr","../../../CardsProcesser/CardsAndCardsBind":"CardsAndCardsBind","../../../CardsProcesser/CardsProcesserTypes":"CardsProcesserTypes","../../../CardsProcesser/CardsViewer":"CardsViewer"}],TableFaPaiAction:[function(t,e,i){"use strict";cc._RF.push(e,"647647dDCBHW72l9wYJFdIy","TableFaPaiAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../CardsProcesser/CardsViewer"),r=t("../../../../../GameLibs/ScUtils/ScUtils"),s=t("../../../CardsProcesser/CardsAndCardsBind"),c=t("../../../CardsProcesser/CardsProcesserTypes"),l=t("../../../../../GameLibs/ScTask/GameTaskMgr"),h=function(t){function e(){var e=t.call(this,!0)||this;return e.isFirstEnterStage=!0,e.isDirectEnterStage=!1,e.isAutoInstallAndUninstall=!0,e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.ActionEndedProcesser=e.ActionEnded.bind(e),e.SetStateLifeRange(0,2),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e.AddStateChildAction(2,e.State2.bind(e)),e}return n(e,t),e.prototype.ActionEnded=function(){if(null!=this.playerCardsViewerBind)for(var t=0;t<this.playerCardsViewerBind.length;t++)this.playerCardsViewerBind[t].Destory();if(null!=this.playerCardsViewer)for(t=1;t<this.playerCardsViewer.length;t++)this.playerCardsViewer[t].Destory();null!=this.tableCardsViewer&&this.tableCardsViewer.Destory(),this.tableCardsViewer=null,this.playerCardsViewerBind=null,this.playerCardsViewer=null,l.GameTaskMgr.Instance().UnRegMsg("SendCardToPlayer")},e.prototype._BundleData=function(){return[this.isFirstEnterStage,this.isDirectEnterStage,this.timeScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.isFirstEnterStage=t[0],this.isDirectEnterStage=t[1],this.timeScale=t[2])},e.prototype.State0=function(){var t=this.data.players.length,e=this.CreateTableCardFaces(this.data.players[0].handCardFaces.length*t);this.tableCardsViewer=this.CreateTableCardsViewer(this.data.roomTableCardsViewerRootNode,.2),this.tableCardsViewer.Show(),this.tableCardsViewer.SetCards(e),this.tableCardsViewer.Run(),this.playerCardsViewer=new Array(this.data.players.length),this.playerCardsViewerBind=new Array(this.data.players.length),null==this.data.cardsViewer&&(this.data.cardsViewer=this.data.CreateCardsViewer()),this.playerCardsViewerBind[0]=new s.CardsAndCardsBind,this.playerCardsViewerBind[0].Bind(this.tableCardsViewer,this.data.cardsViewer),this.playerCardsViewerBind[0].SetBindMode(c.BindMode.AtoB),this.data.cardsViewer.Show(),this.data.cardsViewer.SetCards(null),this.data.cardsViewer.Run(),this.playerCardsViewer[0]=this.data.cardsViewer;for(var i=1;i<this.data.players.length;i++)this.playerCardsViewer[i]=this.CreateTableCardsViewer(this.data.playerSeatViewers[i].handCardPointNode,1,1),this.playerCardsViewerBind[i]=new s.CardsAndCardsBind,this.playerCardsViewerBind[i].Bind(this.tableCardsViewer,this.playerCardsViewer[i]),this.playerCardsViewerBind[i].SetBindMode(c.BindMode.AtoB),this.playerCardsViewer[i].Show(),this.playerCardsViewer[i].Run();this.GotoState(1)},e.prototype.State1=function(){if(this.tableCardsViewer.IsFaPaiEnded()){l.GameTaskMgr.Instance().UnRegMsg("SendCardToPlayer"),l.GameTaskMgr.Instance().RegMsg("SendCardToPlayer",this.SendCardToPlayer,this);for(var t,e=this.tableCardsViewer.cardFaces.length,i=[.3,.2,.2],n=0,o=0;o<this.data.players.length;o++){n=0;for(var a=o;a<e;)t=this.tableCardsViewer.GetCardsByIdxs(a),l.GameTaskMgr.Instance().SendMsg("SendCardToPlayer",[o,t],i[o]*n*1e3),a+=this.data.players.length,n++}this.GotoState(2)}},e.prototype.SendCardToPlayer=function(t){var e=t[0],i=t[1];null!=this.tableCardsViewer&&(this.tableCardsViewer.SelectCardByCard(i),this.playerCardsViewerBind[e].ClickedCardsAreaB())},e.prototype.State2=function(){this.data.cardsViewer.GetCardsCount()==this.data.players[0].handCardFaces.length&&this.GotoState(this.IdleState())},e.prototype.CreateTableCardFaces=function(t){var e=this.data.players.length;t<this.data.players[0].handCardFaces.length*e&&(t=this.data.players[0].handCardFaces.length*e);for(var i=new Array(t),n=0;n<t;n++)i[n]=r.RandomInt(0,53);var o=0;for(n=0;n<t;n+=this.data.players.length)i[n]=this.data.players[0].handCardFaces[o++];return i},e.prototype.CreateTableCardsViewer=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1.5);var n=new a.CardsViewer(t);return n.animScale=1,n.fapaiAnimScale=.6,n.IsFaPaiFrontFace=!1,n.IsFaPaiEndFilpCard=!1,n.ArcLayoutHeightScale=0,n.ArcLayoutAbsEluerAngleZ=0,n.LayoutCardCount=13,n.PaiDuiPosOffset=new cc.Vec2(0,0),n.SortPaiOffset=new cc.Vec2(-.005,.005),n.IsOpenCardWobble=!0,n.IsFaPaiPreRightMove=!1,n.IsFaPaiLeftMove=!1,n.IsSortCards=!1,n.CardBackShadowAlpha=0,n.CardAlpha=e,n.CardFlyScaleMul=i,n.IsResponseMouseOp=!1,n.SetLayoutWidth(this.data.roomTableCardsViewerRootNode.width),n.CacheFaPaiAnimation(),n},e}(o.ScDesginAction);i.TableFaPaiAction=h,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScTask/GameTaskMgr":"GameTaskMgr","../../../../../GameLibs/ScUtils/ScUtils":"ScUtils","../../../CardsProcesser/CardsAndCardsBind":"CardsAndCardsBind","../../../CardsProcesser/CardsProcesserTypes":"CardsProcesserTypes","../../../CardsProcesser/CardsViewer":"CardsViewer"}],TableLayoutCore:[function(t,e,i){"use strict";cc._RF.push(e,"4b720qCAaBPE5BbnyD1Rtev","TableLayoutCore"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Table"),o=t("./TableTypes"),a=function(){function t(){this.layoutType=o.LayoutType.HORIZONTAL,this.invLayout=!1,this.columnTableLines=Array(),this.rowTableLines=Array(),this.tableMargin=new o.Margin(0,0,0,0),this.defaultCellMargin=new o.Margin(0,0,0,0),this.cellMargins=new Array,this.cellContentRatios=new Array,this.mapNodeIdx=Array()}return t.prototype.Clear=function(){this.ClearTableRow(),this.ClearTableCol(),this.cellContentRatios.length=0,this.cellMargins.length=0},t.prototype.ClearTableRow=function(){this.rowTableLines.length=0},t.prototype.ClearTableCol=function(){this.columnTableLines.length=0},t.prototype.GetTableRowColCount=function(){return new cc.Vec2(this.rowTableLines.length,this.columnTableLines.length)},t.prototype.GetTableColCount=function(){return this.columnTableLines.length},t.prototype.GetTableRowCount=function(){return this.rowTableLines.length},t.prototype.AddTableRowLine=function(t){this.rowTableLines.push(t)},t.prototype.PopRowTableLine=function(){this.rowTableLines.pop()},t.prototype.AddColTableLine=function(t){this.columnTableLines.push(t)},t.prototype.PopColTableLine=function(){this.columnTableLines.pop()},t.prototype.AddCellMargin=function(t,e,i){var n=new o.CellMargin;n.cellCrood=new o.CellCoord(t,e),n.margin=i,this.cellMargins.push(n)},t.prototype.AddCellContentRatio=function(t,e,i){var n=new o.CellContentRatio;n.cellCrood=new o.CellCoord(t,e),n.ratio=i,this.cellContentRatios.push(n)},t.prototype.GetNodeRect=function(t){switch(this.layoutType){case o.LayoutType.HORIZONTAL:case o.LayoutType.VERTICAL:return this.GetNodeRectFromCommonLayout(t);case o.LayoutType.CustomLayoutCount4:return this.GetNodeRectFromCustomCount4(t);case o.LayoutType.CustomLayoutCount9:return this.GetNodeRectFromCustomCount9(t)}},t.prototype.Layout=function(){switch(this.layoutType){case o.LayoutType.HORIZONTAL:case o.LayoutType.VERTICAL:this.LayoutCommon();break;case o.LayoutType.CustomLayoutCount4:this.LayoutCustomCount4();break;case o.LayoutType.CustomLayoutCount9:this.LayoutCustomCount9()}},t.prototype.LayoutCommon=function(){var t=new o.Rectangle(this.pos.x,this.pos.y,this.width,this.height);this.tableRoot=new n.Table(t);var e=t.Width()*this.tableMargin.left,i=t.Height()*this.tableMargin.top,a=t.Width()*this.tableMargin.right,r=t.Height()*this.tableMargin.bottom,s=new o.Margin(e,i,a,r);this.tableRoot.SetDefaultCellMargin(s),this.table=new n.Table,this.table.dockType=o.DockType.LeftTop,this.tableRoot.AddCellChildTable(0,0,this.table),e=t.Width()*this.defaultCellMargin.left,i=t.Height()*this.defaultCellMargin.top,a=t.Width()*this.defaultCellMargin.right,r=t.Height()*this.defaultCellMargin.bottom,s=new o.Margin(e,i,a,r),this.table.SetDefaultCellMargin(s);for(var c=0;c<this.cellMargins.length;c++){var l=this.cellMargins[c].cellCrood,h=this.cellMargins[c].margin;e=t.Width()*h.left,i=t.Height()*h.top,a=t.Width()*h.right,r=t.Height()*h.bottom,s=new o.Margin(e,i,a,r),this.table.SetCellMargin(l.rowIdx,l.colIdx,s)}if(this.invLayout){var u=void 0,d=this.rowTableLines[0].spacing;for(c=0;c<this.rowTableLines.length-1;c++)u=this.rowTableLines[c+1].spacing,this.rowTableLines[c+1].spacing=d,d=u;this.rowTableLines[0].spacing=d;for(c=0;c<this.rowTableLines.length;c++)this.table.SetTableLine(c,this.rowTableLines[this.rowTableLines.length-c-1]);d=this.columnTableLines[0].spacing;for(c=0;c<this.columnTableLines.length-1;c++)u=this.columnTableLines[c+1].spacing,this.columnTableLines[c+1].spacing=d,d=u;this.columnTableLines[0].spacing=d;for(c=0;c<this.columnTableLines.length;c++)this.table.SetTableLine(c,this.columnTableLines[this.columnTableLines.length-c-1]);for(c=0;c<this.cellContentRatios.length;c++){(l=this.cellContentRatios[c].cellCrood).rowIdx=this.rowTableLines.length-l.rowIdx-1,l.colIdx=this.columnTableLines.length-l.colIdx-1,this.table.SetCellContentWHRatio(l.rowIdx,l.colIdx,this.cellContentRatios[c].ratio)}}else{for(c=0;c<this.rowTableLines.length;c++)this.table.SetTableLine(c,this.rowTableLines[c]);for(c=0;c<this.columnTableLines.length;c++)this.table.SetTableLine(c,this.columnTableLines[c]);for(c=0;c<this.cellContentRatios.length;c++){l=this.cellContentRatios[c].cellCrood;this.table.SetCellContentWHRatio(l.rowIdx,l.colIdx,this.cellContentRatios[c].ratio)}}this.tableRoot.Layout();var p=this.rowTableLines.length*this.columnTableLines.length,f=Math.min(this.childrenCount,p);this.cellIdxToNodeIdxMap=new Array(this.rowTableLines.length);for(c=0;c<this.rowTableLines.length;c++)this.cellIdxToNodeIdxMap[c]=new Array(this.columnTableLines.length);for(c=0;c<this.rowTableLines.length;c++)for(var S=0;S<this.columnTableLines.length;S++)this.cellIdxToNodeIdxMap[c][S]=-1;this.mapToTableCellIdx=new Array(f);for(c=0;c<this.mapToTableCellIdx.length;c++)this.mapToTableCellIdx[c]=null;for(c=0;c<this.mapNodeIdx.length;c++)this.mapToTableCellIdx[this.mapNodeIdx[c].z]=new o.CellCoord(this.mapNodeIdx[c].x,this.mapNodeIdx[c].y);var y,m=new Array;for(c=0;c<f;c++){var g=this.mapToTableCellIdx[c];null!=g?this.cellIdxToNodeIdxMap[g.rowIdx][g.colIdx]=c:m.push(c)}c=0;for(var C=0,T=0;c<m.length;c++){for(y=!1;C<this.rowTableLines.length;C++){for(;T<this.columnTableLines.length;T++)if(-1==this.cellIdxToNodeIdxMap[C][T]){y=!0;break}if(y)break}(w=C*this.columnTableLines.length+T)<p&&(this.cellIdxToNodeIdxMap[C][T]=m[c],this.mapToTableCellIdx[m[c]]=new o.CellCoord(C,T)),++T>=this.columnTableLines.length&&(T=0,C++)}if(this.invLayout){var v=Math.floor(this.columnTableLines.length/2);for(c=0;c<this.rowTableLines.length;c++)for(S=0;S<v;S++){u=this.cellIdxToNodeIdxMap[c][S];this.cellIdxToNodeIdxMap[c][S]=this.cellIdxToNodeIdxMap[c][this.columnTableLines.length-S-1],this.cellIdxToNodeIdxMap[c][this.columnTableLines.length-S-1]=u}v=Math.floor(this.rowTableLines.length/2);for(c=0;c<this.columnTableLines.length;c++)for(S=0;S<v;S++){u=this.cellIdxToNodeIdxMap[S][c];this.cellIdxToNodeIdxMap[S][c]=this.cellIdxToNodeIdxMap[this.rowTableLines.length-S-1][c],this.cellIdxToNodeIdxMap[this.rowTableLines.length-S-1][c]=u}var w=void 0;for(c=0;c<this.GetTableRowCount();c++)for(S=0;S<this.GetTableColCount();S++)(w=this.GetNodeIdxByLayoutedCellIdxFromCommonLayout(c,S))<0||(this.mapToTableCellIdx[w]=new o.CellCoord(c,S))}},t.prototype.GetNodeRectFromCommonLayout=function(t){if(t>=this.mapToTableCellIdx.length)return null;var e=this.mapToTableCellIdx[t];return null==e?null:this.GetLayoutedCellRectFromCommonLayout(e.rowIdx,e.colIdx)},t.prototype.GetNodeIdxByLayoutedCellIdxFromCommonLayout=function(t,e){return this.cellIdxToNodeIdxMap[t][e]},t.prototype.GetLayoutedCellRectFromCommonLayout=function(t,e){if(-1==this.cellIdxToNodeIdxMap[t][e])return null;var i=this.table.GetCellContentRect(t,e);return i=this.table.TransToGlobalRect(i)},t.prototype.LayoutCustomCount4=function(){var t=new Array(3),e=new o.Rectangle(this.pos.x,this.pos.y,this.width,this.height),i=new n.Table(e),a=this.width*(20/1136);i.SetDefaultCellMargin(new o.Margin(a,0,a,0));var r=new o.TableLine(o.LineDir.HORIZONTAL);r.lineComputeMode=o.LineComputeMode.PERCENTAGE,r.computeParam=1/3,i.SetTableLine(2,r),r.computeParam=1/3,i.SetTableLine(1,r),r.computeParam=1/3,i.SetTableLine(0,r),(r=new o.TableLine(o.LineDir.VERTICAL)).lineComputeMode=o.LineComputeMode.PERCENTAGE,r.computeParam=1,i.SetTableLine(0,r),t[0]=new n.Table,(r=new o.TableLine(o.LineDir.VERTICAL)).lineComputeMode=o.LineComputeMode.PERCENTAGE,r.computeParam=1/3,t[0].SetTableLine(2,r),r.computeParam=1/3,t[0].SetTableLine(1,r),r.computeParam=1/3,t[0].SetTableLine(0,r),(r=new o.TableLine(o.LineDir.HORIZONTAL)).lineComputeMode=o.LineComputeMode.PERCENTAGE,r.computeParam=1,t[0].SetTableLine(0,r),i.AddCellChildTable(0,0,t[0]),t[1]=new n.Table,(r=new o.TableLine(o.LineDir.VERTICAL)).lineComputeMode=o.LineComputeMode.PERCENTAGE,r.computeParam=1/3,t[1].SetTableLine(2,r),r.computeParam=1/3,t[1].SetTableLine(1,r),r.computeParam=1/3,t[1].SetTableLine(0,r),(r=new o.TableLine(o.LineDir.HORIZONTAL)).lineComputeMode=o.LineComputeMode.PERCENTAGE,r.computeParam=1,t[1].SetTableLine(0,r),i.AddCellChildTable(1,0,t[1]),t[2]=new n.Table,(r=new o.TableLine(o.LineDir.VERTICAL)).lineComputeMode=o.LineComputeMode.PERCENTAGE,r.computeParam=1/3,t[2].SetTableLine(2,r),r.computeParam=1/3,t[2].SetTableLine(1,r),r.computeParam=1/3,t[2].SetTableLine(0,r),(r=new o.TableLine(o.LineDir.HORIZONTAL)).lineComputeMode=o.LineComputeMode.PERCENTAGE,r.computeParam=1,t[2].SetTableLine(0,r),i.AddCellChildTable(2,0,t[2]),i.Layout();var s=[t[0],t[1],t[1],t[2]],c=[new o.CellCoord(0,1),new o.CellCoord(0,0),new o.CellCoord(0,2),new o.CellCoord(0,1)];this.mapToTableCellIdx=new Array(4);for(var l=0;l<this.mapToTableCellIdx.length;l++)this.mapToTableCellIdx[l]=c[l];this.mapToTableIdx=new Array(4);for(l=0;l<this.mapToTableIdx.length;l++)this.mapToTableIdx[l]=s[l]},t.prototype.GetNodeRectFromCustomCount4=function(t){if(t>=this.mapToTableCellIdx.length)return null;var e=this.mapToTableIdx[t];if(null==e)return null;var i=this.mapToTableCellIdx[t];return null==i?null:e.GetCellContentGlobalRect(i.rowIdx,i.colIdx)},t.prototype.LayoutCustomCount9=function(){var t=new o.Rectangle(this.pos.x,this.pos.y,this.width,this.height);this.table=new n.Table(t);var e=this.width*(20/1136);this.table.SetDefaultCellMargin(new o.Margin(e,e,e,e));var i=new o.TableLine(o.LineDir.HORIZONTAL);i.lineComputeMode=o.LineComputeMode.PERCENTAGE,i.computeParam=1/3,this.table.SetTableLine(2,i),i.computeParam=1/3,this.table.SetTableLine(0,i),i.computeParam=1/3,this.table.SetTableLine(1,i),(i=new o.TableLine(o.LineDir.VERTICAL)).lineComputeMode=o.LineComputeMode.PERCENTAGE,i.computeParam=1/3,this.table.SetTableLine(2,i),i.computeParam=1/3,this.table.SetTableLine(0,i),i.computeParam=1/3,this.table.SetTableLine(1,i),this.table.Layout();var a=[new o.CellCoord(0,1),new o.CellCoord(1,0),new o.CellCoord(1,2),new o.CellCoord(2,1),new o.CellCoord(0,0),new o.CellCoord(0,2),new o.CellCoord(2,0),new o.CellCoord(2,2),new o.CellCoord(1,1)];this.mapToTableCellIdx=new Array(9);for(var r=0;r<this.mapToTableCellIdx.length;r++)this.mapToTableCellIdx[r]=a[r]},t.prototype.GetNodeRectFromCustomCount9=function(t){if(t>=this.mapToTableCellIdx.length)return null;var e=this.mapToTableCellIdx[t];return null==e?null:this.table.GetCellContentGlobalRect(e.rowIdx,e.colIdx)},t}();i.TableLayoutCore=a,cc._RF.pop()},{"./Table":"Table","./TableTypes":"TableTypes"}],TableLayout:[function(t,e,i){"use strict";cc._RF.push(e,"938c5Sj6kVLxqarD1nw6hj5","TableLayout");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../GameLibs/ScLayout/TableTypes"),r=t("./Layout"),s=t("../GameLibs/ScLayout/TableLayoutCore"),c=cc._decorator,l=c.ccclass,h=c.property,u=c.executeInEditMode,d=function(){function t(){this.percentage=0,this.spacing=0}return o([h()],t.prototype,"percentage",void 0),o([h()],t.prototype,"spacing",void 0),t=o([l("CCTableLine")],t)}();i.CCTableLine=d;var p=function(){function t(){this.cellCrood=new cc.Vec2,this.margin=new cc.Vec4(0,0,0,0)}return o([h(cc.Vec2)],t.prototype,"cellCrood",void 0),o([h(cc.Vec4)],t.prototype,"margin",void 0),t=o([l("DstCellMargin")],t)}();i.DstCellMargin=p;var f=function(){function t(){this.cellCrood=new cc.Vec2,this.ratio=0}return o([h(cc.Vec2)],t.prototype,"cellCrood",void 0),o([h()],t.prototype,"ratio",void 0),t=o([l("CellContentRatio")],t)}();i.CellContentRatio=f;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutType=a.LayoutType.HORIZONTAL,e.invLayout=!1,e.rowTableLines=[],e.columnTableLines=[],e.tableMargin=new cc.Vec4(0,0,0,0),e.cellMargin=new cc.Vec4(0,0,0,0),e.dstCellMargins=[],e.cellContentRatios=[],e}return n(e,t),e.prototype.CreateTableLayoutCore=function(){null==this.core&&(this.core=new s.TableLayoutCore),this.core.childrenCount=this.node.childrenCount,this.core.width=this.node.width,this.core.height=this.node.height,this.core.pos=new cc.Vec2(-this.node.width/2,-this.node.height/2)},e.prototype.ResetProperty=function(){this.core.Clear();var t=0,e=0;if(this.layoutType==a.LayoutType.HORIZONTAL)t=this.columnTableLines.length,e=0,(n=new a.TableLine(a.LineDir.HORIZONTAL)).lineComputeMode=a.LineComputeMode.PERCENTAGE,n.computeParam=1,n.spacing=0,this.core.AddTableRowLine(n);else if(this.layoutType==a.LayoutType.VERTICAL){t=0,e=this.rowTableLines.length,(n=new a.TableLine(a.LineDir.VERTICAL)).lineComputeMode=a.LineComputeMode.PERCENTAGE,n.computeParam=1,n.spacing=0,this.core.AddColTableLine(n)}for(var i=0;i<t;i++){(n=new a.TableLine(a.LineDir.VERTICAL)).lineComputeMode=a.LineComputeMode.PERCENTAGE,n.computeParam=this.columnTableLines[i].percentage,n.spacing=this.columnTableLines[i].spacing,this.core.AddColTableLine(n)}for(i=0;i<e;i++){var n;(n=new a.TableLine(a.LineDir.HORIZONTAL)).lineComputeMode=a.LineComputeMode.PERCENTAGE,n.computeParam=this.rowTableLines[i].percentage,n.spacing=this.rowTableLines[i].spacing,this.core.AddTableRowLine(n)}for(i=0;i<this.dstCellMargins.length;i++){var o=this.dstCellMargins[i].margin,r=new a.Margin(o.x,o.y,o.z,o.w);this.core.AddCellMargin(this.dstCellMargins[i].cellCrood.x,this.dstCellMargins[i].cellCrood.y,r)}for(i=0;i<this.cellContentRatios.length;i++)this.core.AddCellContentRatio(this.cellContentRatios[i].cellCrood.x,this.cellContentRatios[i].cellCrood.y,this.cellContentRatios[i].ratio);this.core.tableMargin=new a.Margin(this.tableMargin.x,this.tableMargin.y,this.tableMargin.z,this.tableMargin.w),this.core.defaultCellMargin=new a.Margin(this.cellMargin.x,this.cellMargin.y,this.cellMargin.z,this.cellMargin.w),this.core.invLayout=this.invLayout,this.core.layoutType=this.layoutType},e.prototype.update=function(){0},e.prototype.Layout=function(){this.CreateTableLayoutCore(),this.ResetProperty(),this.core.Layout(),this.SetNodesToDsts()},e.prototype.GetNodeRect=function(t){return this.core.GetNodeRect(t)},e.prototype.SetNodesToDsts=function(){for(var t,e=this.node.children,i=0;i<e.length;i++)null!=(t=this.core.GetNodeRect(i))&&this.SetNodeToDst(e[i],t)},e.prototype.SetNodeToDst=function(t,e){var i=e.X()+e.Width()/2,n=e.Y()+e.Height()/2;t.setPosition(new cc.Vec3(i,n,0)),t.width=e.Width(),t.height=e.Height()},o([h({type:cc.Enum(a.LayoutType)})],e.prototype,"layoutType",void 0),o([h({visible:function(){return this.layoutType==a.LayoutType.VERTICAL||this.layoutType==a.LayoutType.HORIZONTAL}})],e.prototype,"invLayout",void 0),o([h({type:[d],visible:function(){return this.layoutType==a.LayoutType.VERTICAL}})],e.prototype,"rowTableLines",void 0),o([h({type:[d],visible:function(){return this.layoutType==a.LayoutType.HORIZONTAL}})],e.prototype,"columnTableLines",void 0),o([h({visible:function(){return this.layoutType==a.LayoutType.VERTICAL||this.layoutType==a.LayoutType.HORIZONTAL}})],e.prototype,"tableMargin",void 0),o([h({visible:function(){return this.layoutType==a.LayoutType.VERTICAL||this.layoutType==a.LayoutType.HORIZONTAL}})],e.prototype,"cellMargin",void 0),o([h({type:[p],visible:function(){return this.layoutType==a.LayoutType.VERTICAL||this.layoutType==a.LayoutType.HORIZONTAL}})],e.prototype,"dstCellMargins",void 0),o([h({type:[f],visible:function(){return this.layoutType==a.LayoutType.VERTICAL||this.layoutType==a.LayoutType.HORIZONTAL}})],e.prototype,"cellContentRatios",void 0),e=o([l,u],e)}(r.default);i.default=S,cc._RF.pop()},{"../GameLibs/ScLayout/TableLayoutCore":"TableLayoutCore","../GameLibs/ScLayout/TableTypes":"TableTypes","./Layout":"Layout"}],TableTypes:[function(t,e,i){"use strict";var n,o,a;cc._RF.push(e,"478ea1ctSBB4Lz/dxeQZAoK","TableTypes"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(n=i.LineDir||(i.LineDir={})),function(t){t[t.AUTO=0]="AUTO",t[t.PERCENTAGE=1]="PERCENTAGE",t[t.ABSOLUTE=2]="ABSOLUTE"}(o=i.LineComputeMode||(i.LineComputeMode={})),function(t){t[t.UP_OR_LEFT=0]="UP_OR_LEFT",t[t.BOTTOM_OR_RIGHT=1]="BOTTOM_OR_RIGHT"}(i.DirectionMode||(i.DirectionMode={})),function(t){t[t.None=0]="None",t[t.LeftTop=1]="LeftTop",t[t.Top=2]="Top",t[t.RightTop=3]="RightTop",t[t.Left=4]="Left",t[t.Center=5]="Center",t[t.HoriCenter=6]="HoriCenter",t[t.VertCenter=7]="VertCenter",t[t.Right=8]="Right",t[t.LeftBottom=9]="LeftBottom",t[t.Bottom=10]="Bottom",t[t.RightBottom=11]="RightBottom"}(i.DockType||(i.DockType={})),function(t){t[t.None=0]="None",t[t.FixedSize=1]="FixedSize",t[t.MatchParentSize=2]="MatchParentSize",t[t.MatchParentWidth=3]="MatchParentWidth",t[t.MatchParentHeight=4]="MatchParentHeight"}(i.MatchType||(i.MatchType={})),function(t){t[t.FixedSize=0]="FixedSize",t[t.Table=1]="Table"}(a=i.TableCellDataType||(i.TableCellDataType={}));var r=function(){return function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n}}();i.Margin=r;var s=function(){return function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n}}();i.SpanOffset=s;var c=function(){return function(){}}();i.LinePos=c;var l=function(){return function(t){this.lineDir=n.HORIZONTAL,this.lineComputeMode=o.PERCENTAGE,this.computeParam=0,this.computedDistance=0,this.maxComputedValue=-1,this.minComputedValue=-1,this.spacing=0,this.spacingComputeMode=o.PERCENTAGE,this.enableAutoAdjustRichSize=!0,this.lineDir=t}}();i.TableLine=l;var h=function(){return function(t,e){this.rowIdx=t,this.colIdx=e}}();i.CellCoord=h;var u=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.left=t,this.top=e,this.right=t+i,this.bottom=e+n,this.width=i,this.height=n}return t.prototype.X=function(){return this.x},t.prototype.Y=function(){return this.y},t.prototype.Width=function(){return this.width},t.prototype.Height=function(){return this.height},t.prototype.Left=function(){return this.left},t.prototype.Right=function(){return this.right},t.prototype.Top=function(){return this.top},t.prototype.Bottom=function(){return this.bottom},t.prototype.SetX=function(t){this.x=t,this.left=this.x,this.right=this.x+this.width},t.prototype.SetY=function(t){this.y=t,this.top=this.y,this.bottom=this.y+this.height},t.prototype.SetWidth=function(t){this.width=t,this.right=this.x+this.width},t.prototype.SetHeight=function(t){this.height=t,this.bottom=this.y+this.height},t}();i.Rectangle=u;var d=function(){return function(){this.type=a.FixedSize,this.isLimitWidth=!1}}();i.TableCellData=d,function(t){t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL",t[t.CustomLayoutCount4=3]="CustomLayoutCount4",t[t.CustomLayoutCount9=4]="CustomLayoutCount9"}(i.LayoutType||(i.LayoutType={}));var p=function(){return function(){}}();i.CellMargin=p;var f=function(){return function(){}}();i.CellContentRatio=f,cc._RF.pop()},{}],Table:[function(t,e,i){"use strict";cc._RF.push(e,"4537fYKI/FNeYx2vLNdga+I","Table"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./TableTypes"),o=t("../Collections/Dictionary"),a=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.tbPos=cc.Vec2.ZERO,this.dockType=n.DockType.None,this.matchType=n.MatchType.MatchParentSize,this.defaultCellMargin=new n.Margin(0,0,0,0),this.cellMarginDict=new o.Dictionary,this.cellContentWHRatioDict=new o.Dictionary,this.cellSpanDict=new o.Dictionary,this.cellValueInfoDict=new o.Dictionary,this.rowLineList=new Array,this.colLineList=new Array,6==t.length?this._Table1(t[0],t[1],t[2],t[3],t[4],t[5]):3==t.length?this._Table2(t[0],t[1],t[2]):2==t.length?this._Table3(t[0],t[1]):1==t.length?this._Table2(t[0],1,1):0==t.length&&this._Table3(1,1)}return t.prototype.Width=function(){return this.tbWidth},t.prototype.SetWidth=function(t){this.tbWidth=t},t.prototype.Height=function(){return this.tbHeight},t.prototype.SetHeight=function(t){this.tbHeight=t},t.prototype.RowAmount=function(){return this.rowAmount},t.prototype.ColAmount=function(){return this.colAmount},t.prototype._Table1=function(t,e,i,o,a,r){var s;this.tbPos.x=t,this.tbPos.y=e,this.tbHeight=o,this.tbWidth=i,this.rowAmount=a,this.colAmount=r;for(var c=o/a,l=1/a,h=0;h<a;h++)(s=new n.TableLine(n.LineDir.HORIZONTAL)).lineComputeMode=n.LineComputeMode.PERCENTAGE,s.computeParam=l,s.computedDistance=c,s.maxComputedValue=-1,s.minComputedValue=-1,s.spacing=0,this.rowLineList.push(s);var u=i/r,d=1/r;for(h=0;h<r;h++)(s=new n.TableLine(n.LineDir.VERTICAL)).lineComputeMode=n.LineComputeMode.PERCENTAGE,s.computeParam=d,s.computedDistance=u,s.maxComputedValue=-1,s.minComputedValue=-1,s.spacing=0,this.colLineList.push(s)},t.prototype._Table2=function(t,e,i){this._Table1(t.X(),t.Y(),t.Width(),t.Height(),e,i)},t.prototype._Table3=function(t,e){var i;void 0===t&&(t=1),void 0===e&&(e=1),this.tbPos.x=0,this.tbPos.y=0,this.tbHeight=0,this.tbWidth=0,this.rowAmount=t,this.colAmount=e,this.matchType=n.MatchType.MatchParentSize;for(var o=0;o<t;o++)(i=new n.TableLine(n.LineDir.HORIZONTAL)).lineComputeMode=n.LineComputeMode.AUTO,i.maxComputedValue=-1,i.minComputedValue=-1,i.spacing=0,this.rowLineList.push(i);for(o=0;o<e;o++)(i=new n.TableLine(n.LineDir.VERTICAL)).lineComputeMode=n.LineComputeMode.AUTO,i.maxComputedValue=-1,i.minComputedValue=-1,i.spacing=0,this.colLineList.push(i)},t.prototype.GetTableLine=function(t,e){var i;return t>=(i=e==n.LineDir.HORIZONTAL?this.rowLineList:this.colLineList).length?null:i[t]},t.prototype.EnableTableLineAutoAdjustRichSize=function(t,e,i){var o;i==n.LineDir.HORIZONTAL?(o=this.rowLineList,this.rowAmount):(o=this.colLineList,this.colAmount),t<o.length&&(o[t].enableAutoAdjustRichSize=e)},t.prototype.EnableTableAllLineAutoAdjustRichSize=function(t,e){var i;e==n.LineDir.HORIZONTAL?(i=this.rowLineList,this.rowAmount):(i=this.colLineList,this.colAmount);for(var o=0;o<i.length;o++)i[o].enableAutoAdjustRichSize=t},t.prototype.SetExistedTableLine=function(t,e){var i;e.lineDir==n.LineDir.HORIZONTAL?(i=this.rowLineList,this.tbHeight):(i=this.colLineList,this.tbWidth);var o=i[t];o.lineComputeMode=e.lineComputeMode,o.computeParam=e.computeParam,o.enableAutoAdjustRichSize=e.enableAutoAdjustRichSize,o.lineDir=e.lineDir,o.minComputedValue=e.minComputedValue,o.maxComputedValue=e.maxComputedValue,o.spacing=e.spacing},t.prototype.SetTableLine=function(t,e){var i,o;if(e.lineDir==n.LineDir.HORIZONTAL?(i=this.rowLineList,o=this.rowAmount):(i=this.colLineList,o=this.colAmount),t<i.length){(s=new n.TableLine(e.lineDir)).computeParam=e.computeParam,s.computedDistance=e.computedDistance,s.lineComputeMode=e.lineComputeMode,s.minComputedValue=e.minComputedValue,s.maxComputedValue=e.maxComputedValue,s.spacing=e.spacing,i[t]=s}else{for(var a=t+1-i.length,r=0;r<a;r++){var s;(s=new n.TableLine(e.lineDir)).computeParam=e.computeParam,s.computedDistance=e.computedDistance,s.lineComputeMode=e.lineComputeMode,s.minComputedValue=e.minComputedValue,s.maxComputedValue=e.maxComputedValue,s.spacing=e.spacing,i.push(s),o++}e.lineDir==n.LineDir.HORIZONTAL?this.rowAmount=o:this.colAmount=o}},t.prototype.SetAutoTableLine=function(t,e){var i=new n.TableLine(e);i.lineComputeMode=n.LineComputeMode.AUTO,i.maxComputedValue=-1,i.minComputedValue=-1,this.SetTableLine(t,i)},t.prototype.GetTablePosition=function(){return this.tbPos},t.prototype.SetTablePosition=function(t,e){this.tbPos.x=t,this.tbPos.y=e},t.prototype.SetTableSize=function(t,e){this.tbWidth=t,this.tbHeight=e},t.prototype.GetRowColKey=function(t,e){return t<<12|e},t.prototype.GetKeyRowCol=function(t,e){if(null!=e)return e[0]=t>>12,e[1]=4095&t,e;var i=new Array(2);return i[0]=t>>12,i[1]=4095&t,i},t.prototype.SetDefaultCellMargin=function(t){this.defaultCellMargin.left=t.left,this.defaultCellMargin.top=t.top,this.defaultCellMargin.right=t.right,this.defaultCellMargin.bottom=t.bottom},t.prototype.SetCellMargin=function(t,e,i){var n=this.GetRowColKey(t,e);this.cellMarginDict.setValue(n,i)},t.prototype.GetCellMargin=function(t,e,i){void 0===i&&(i=!0);var n=this.GetRowColKey(t,e);return 0==this.cellMarginDict.containsKey(n)?i?this.defaultCellMargin:null:this.cellMarginDict.getValue(n)},t.prototype.SetCellContentWHRatio=function(t,e,i){var n=this.GetRowColKey(t,e);this.cellContentWHRatioDict.setValue(n,i)},t.prototype.GetCellContentWHRatio=function(t,e){var i=this.GetRowColKey(t,e);return this.cellContentWHRatioDict.getValue(i)},t.prototype.SetCellSpan=function(t,e,i){var n=this.GetRowColKey(t,e);this.cellSpanDict.setValue(n,i)},t.prototype.GetCellSpan=function(t,e){var i=this.GetRowColKey(t,e);return 0==this.cellSpanDict.containsKey(i)?null:this.cellSpanDict.getValue(i)},t.prototype.SetLinesComputedValueRange=function(t,e,i,o){o==n.LineDir.HORIZONTAL?(this.rowLineList[t].minComputedValue=e,this.rowLineList[t].maxComputedValue=i):(this.colLineList[t].minComputedValue=e,this.colLineList[t].maxComputedValue=i)},t.prototype.SetCellValue=function(t,e,i){var n=this.GetRowColKey(t,e);this.cellValueInfoDict.setValue(n,i)},t.prototype.SetCellFixedSizeValue=function(t,e,i){var o;(o=new n.TableCellData).type=n.TableCellDataType.FixedSize,o.fixedSize=i;var a=this.GetRowColKey(t,e);this.cellValueInfoDict.setValue(a,o)},t.prototype.AddCellChildTable=function(t,e,i){var o=new n.TableCellData;o.type=n.TableCellDataType.Table,o.data=i,o.rowIdx=t,o.colIdx=e;var a=this.GetRowColKey(t,e);this.cellValueInfoDict.setValue(a,o),i.parentTable=this,i.inParentCellCoord=new n.CellCoord(t,e)},t.prototype.GetCellChildTable=function(t,e){var i=this.GetRowColKey(t,e);if(0==this.cellValueInfoDict.containsKey(i))return null;var o=this.cellValueInfoDict.getValue(i);return o.type==n.TableCellDataType.Table?o.data:null},t.prototype.GetCellValueInfo=function(t,e){var i=this.GetRowColKey(t,e);return 0==this.cellValueInfoDict.containsKey(i)?null:this.cellValueInfoDict.getValue(i)},t.prototype.Layout=function(){this.ModifyTableDockAndMatch(this.dockType),this.LayoutLinesArea(n.LineDir.HORIZONTAL),this.LayoutLinesArea(n.LineDir.VERTICAL),this.cellValueInfoDict.forEach(function(t,e){e.type==n.TableCellDataType.Table&&e.data.Layout()})},t.prototype.LayoutLinesArea=function(t){var e,i,o;t==n.LineDir.HORIZONTAL?(i=this.rowLineList,o=this.tbHeight):(i=this.colLineList,o=this.tbWidth);var a=0;0!=o&&(o-=a=this.ComputeTotalSpacing(i,o));for(var r,s,c,l=0,h=0,u=0,d=0,p=0;p<i.length;p++)switch((e=i[p]).lineComputeMode){case n.LineComputeMode.AUTO:e.computeParam=this.ComputeLineAreaSize(p,t),l+=e.computeParam,e.computedDistance=e.computeParam,e.enableAutoAdjustRichSize&&d++;break;case n.LineComputeMode.ABSOLUTE:l+=e.computeParam,e.computedDistance=e.computeParam,l=this.ModifyTableSize(t,e,l,o);break;case n.LineComputeMode.PERCENTAGE:u++;var f=h+e.computeParam;if(f>1.001){e.computeParam=1-h,h=1;for(var S=p+1;S<i.length;S++)u++,(e=i[S]).computeParam=0,e.computedDistance=0;break}h=f}if(this.matchType!=n.MatchType.FixedSize&&this.matchType!=n.MatchType.MatchParentSize&&(this.matchType!=n.MatchType.MatchParentHeight&&t==n.LineDir.HORIZONTAL||this.matchType!=n.MatchType.MatchParentWidth&&t==n.LineDir.VERTICAL)&&(0==o&&(a=this.ComputeTotalSpacing(i,l)),o=l,t==n.LineDir.HORIZONTAL?this.tbHeight=l+a:this.tbWidth=l+a),u>0){r=o-l,s=(1-h)/u;for(p=0;p<i.length;p++)(e=i[p]).lineComputeMode==n.LineComputeMode.PERCENTAGE&&(e.computeParam+=s,e.computedDistance=r*e.computeParam)}else if(d>0){c=(r=o-l)/d;var y=0,m=0;for(p=0;p<i.length;p++)(e=i[p]).lineComputeMode==n.LineComputeMode.AUTO&&1==e.enableAutoAdjustRichSize&&(0==e.computeParam?(e.computeParam=c,y+=c):(y+=e.computeParam,m+=e.computeParam));var g=m+r;for(p=0;p<i.length;p++)(e=i[p]).lineComputeMode==n.LineComputeMode.AUTO&&1==e.enableAutoAdjustRichSize&&(y>-1e-4&&y<1e-4?(e.computeParam=0,e.computedDistance=0):(e.computeParam=e.computeParam/y*g,e.computedDistance=e.computeParam))}},t.prototype.ComputeTotalSpacing=function(t,e){for(var i,o=0,a=0;a<t.length-1;a++)switch((i=t[a]).spacingComputeMode){case n.LineComputeMode.ABSOLUTE:case n.LineComputeMode.AUTO:o+=i.spacing;break;case n.LineComputeMode.PERCENTAGE:o+=i.spacing*e}return o},t.prototype.ModifyTableDockAndMatch=function(t){var e=new n.Rectangle(this.tbPos.x,this.tbPos.y,this.tbWidth,this.tbHeight);switch(null!=this.parentTable&&(e=this.parentTable.GetCellContentRect(this.inParentCellCoord.rowIdx,this.inParentCellCoord.colIdx)),this.matchType){case n.MatchType.MatchParentSize:this.tbHeight=e.Height(),this.tbWidth=e.Width();break;case n.MatchType.MatchParentWidth:this.tbWidth=e.Width();break;case n.MatchType.MatchParentHeight:this.tbHeight=e.Height()}switch(t){case n.DockType.Center:return this.tbPos.x=e.Width()/2-this.tbWidth/2,void(this.tbPos.y=e.Height()/2-this.tbHeight/2);case n.DockType.HoriCenter:return void(this.tbPos.x=e.Width()/2-this.tbWidth/2);case n.DockType.VertCenter:return void(this.tbPos.y=e.Height()/2-this.tbHeight/2);case n.DockType.Left:return this.tbPos.x=0,void(this.tbPos.y=e.Height()/2-this.tbHeight/2);case n.DockType.LeftTop:return this.tbPos.x=0,void(this.tbPos.y=0);case n.DockType.Top:return this.tbPos.x=e.Width()/2-this.tbWidth/2,void(this.tbPos.y=0);case n.DockType.RightTop:return this.tbPos.x=e.Width()-this.tbWidth,void(this.tbPos.y=0);case n.DockType.Right:return this.tbPos.x=e.Width()-this.tbWidth,void(this.tbPos.y=e.Height()/2-this.tbHeight/2);case n.DockType.RightBottom:return this.tbPos.x=e.Width()-this.tbWidth,void(this.tbPos.y=e.Height()-this.tbHeight);case n.DockType.Bottom:return this.tbPos.x=e.Width()/2-this.tbWidth/2,void(this.tbPos.y=e.Height()-this.tbHeight);case n.DockType.LeftBottom:return this.tbPos.x=0,void(this.tbPos.y=e.Height()-this.tbHeight)}},t.prototype.ModifyTableSize=function(t,e,i,o){return this.matchType==n.MatchType.MatchParentSize||this.matchType==n.MatchType.MatchParentHeight&&t==n.LineDir.HORIZONTAL||this.matchType==n.MatchType.MatchParentWidth&&t==n.LineDir.VERTICAL?i:(i>o&&(i-=e.computeParam,e.computeParam=o-i,i+=e.computeParam,e.computedDistance=e.computeParam),i)},t.prototype.ComputeLineAreaSize=function(t,e){var i,o,a,r,s,c,l=0,h=0,u=0;u=e==n.LineDir.HORIZONTAL?this.colAmount:this.rowAmount;for(var d=0;d<u;d++){if(e==n.LineDir.HORIZONTAL?(r=t,s=d):(r=d,s=t),i=this.GetCellMargin(r,s),null==(a=this.GetCellValueInfo(r,s)))h=e==n.LineDir.HORIZONTAL?i.top+i.bottom:i.left+i.right;else switch(a.type){case n.TableCellDataType.FixedSize:null!=a.GetLayoutSize?(h=a.GetLayoutSize(a,e),e==n.LineDir.HORIZONTAL?h+=i.top+i.bottom:h+=i.left+i.right):(c=a.fixedSize,h=e==n.LineDir.HORIZONTAL?c.y+i.top+i.bottom:c.x+i.left+i.right);break;case n.TableCellDataType.Table:if(null==(o=a.data))continue;null!=a.GetLayoutSize?(h=a.GetLayoutSize(a,e),e==n.LineDir.HORIZONTAL?h+=i.top+i.bottom:h+=i.left+i.right):e==n.LineDir.HORIZONTAL?(0==o.tbHeight&&o.Layout(),h=o.tbHeight+i.top+i.bottom):(0==o.tbWidth&&o.Layout(),h=o.tbWidth+i.left+i.right)}l=Math.max(l,h)}return this.GetLimitLength(l,t,e)},t.prototype.GetLimitLength=function(t,e,i){var o,a,r=t;return i==n.LineDir.HORIZONTAL?(o=this.rowLineList[e].minComputedValue,a=this.rowLineList[e].maxComputedValue):(o=this.colLineList[e].minComputedValue,a=this.colLineList[e].maxComputedValue),t<o&&-1!=o?r=o:t>a&&-1!=a&&(r=a),r},t.prototype.GetRowTableLine=function(t){return t>=this.rowLineList.length?t=this.rowLineList.length-1:t<0&&(t=0),this.rowLineList[t]},t.prototype.GetColTableLine=function(t){return t>=this.colLineList.length?t=this.colLineList.length-1:t<0&&(t=0),this.colLineList[t]},t.prototype.TransToGlobalPoint=function(t){var e,i=t.x,n=t.y,o=this.inParentCellCoord;i+=this.tbPos.x,n+=this.tbPos.y;for(var a=this.parentTable;null!=a;a=a.parentTable)i+=(e=a.GetCellContentRect(o.rowIdx,o.colIdx)).X()+a.tbPos.x,n+=e.Y()+a.tbPos.y,o=a.inParentCellCoord;return new cc.Vec2(i,n)},t.prototype.TransToGlobalRect=function(t){var e,i=this.inParentCellCoord,o=t.X(),a=t.Y();o+=this.tbPos.x,a+=this.tbPos.y;for(var r=this.parentTable;null!=r;r=r.parentTable)o+=(e=r.GetCellContentRect(i.rowIdx,i.colIdx)).X()+r.tbPos.x,a+=e.Y()+r.tbPos.y,i=r.inParentCellCoord;return new n.Rectangle(o,a,t.Width(),t.Height())},t.prototype.GetRowLinePos=function(t,e){void 0===e&&(e=n.DirectionMode.BOTTOM_OR_RIGHT);var i,o,a=this.GetOriginalCellRect(t,0),r=new n.LinePos;return e==n.DirectionMode.UP_OR_LEFT?(i=new cc.Vec2(a.Left(),a.Top()),o=new cc.Vec2(a.Left()+this.tbWidth,a.Top())):(i=new cc.Vec2(a.Left(),a.Bottom()),o=new cc.Vec2(a.Left()+this.tbWidth,a.Bottom())),r.start=i,r.end=o,r},t.prototype.GetColLinePos=function(t,e){void 0===e&&(e=n.DirectionMode.BOTTOM_OR_RIGHT);var i,o,a=this.GetOriginalCellRect(0,t),r=new n.LinePos;return e==n.DirectionMode.UP_OR_LEFT?(i=new cc.Vec2(a.Left(),a.Top()),o=new cc.Vec2(a.Left(),a.Top()+this.tbHeight)):(i=new cc.Vec2(a.Right(),a.Top()),o=new cc.Vec2(a.Right(),a.Top()+this.tbHeight)),r.start=i,r.end=o,r},t.prototype.GetRect=function(t,e,i,o){var a=this.GetOriginalCellRect(t,e),r=this.GetOriginalCellRect(i,o),s=r.Left(),c=r.Top(),l=r.Right(),h=r.Bottom();return a.Left<r.Left&&(s=a.Left()),a.Top()<r.Top()&&(c=a.Top()),a.Right()>r.Right()&&(l=a.Right()),a.Bottom()>r.Bottom()&&(h=a.Bottom()),new n.Rectangle(s,c,l-s,h-c)},t.prototype.GetRectLinePos=function(t,e,i,o){var a=this.GetRect(t,e,i,o),r=new Array(4),s=new n.LinePos;return s.start=new cc.Vec2(a.Left(),a.Top()),s.end=new cc.Vec2(a.Left(),a.Bottom()),r[0]=s,(s=new n.LinePos).start=new cc.Vec2(a.Left(),a.Top()),s.end=new cc.Vec2(a.Right(),a.Top()),r[1]=s,(s=new n.LinePos).start=new cc.Vec2(a.Right(),a.Top()),s.end=new cc.Vec2(a.Right(),a.Bottom()),r[2]=s,(s=new n.LinePos).start=new cc.Vec2(a.Left(),a.Bottom()),s.end=new cc.Vec2(a.Right(),a.Bottom()),r[3]=s,r},t.prototype.GetTableRect=function(){return new n.Rectangle(0,0,this.tbWidth,this.tbHeight)},t.prototype.GetRowRect=function(t){var e=this.GetOriginalCellRect(t,0);return e.SetWidth(this.tbWidth),e},t.prototype.GetColRect=function(t){var e=this.GetOriginalCellRect(0,t);return e.Height=this.tbHeight,e},t.prototype.GetCellContentGlobalRect=function(t,e){var i=this.GetCellContentRect(t,e);return this.TransToGlobalRect(i)},t.prototype.GetCellContentRect=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1==t.length){var i=t[0],o=this.GetCellRect(i),a=this.GetCellMargin(i.rowIdx,i.colIdx);o.SetX(o.X()+a.left),o.SetY(o.Y()+a.top),o.SetWidth(o.Width()-(a.left+a.right)),o.SetHeight(o.Height()-(a.top+a.bottom));var r=this.GetCellContentWHRatio(i.rowIdx,i.colIdx);if(null==r||r>=-1e-4&&r<=1e-4)return o;var s=o.Width(),c=o.Height(),l=s/c;if(l>r-1e-4&&l<r+1e-4)return o;var h=void 0,u=void 0,d=void 0,p=void 0,f=void 0,S=void 0;l<=1?(d=l,p=1):(d=1,p=1/l),r<=1?(h=r,u=1):(h=1,u=1/r),p<=d&&u<=h&&p>=u?f=(S=s*u)*r:p<=d&&u<=h&&p<=u||p<=d&&u>=h?f=(S=c)*r:p>=d&&u>=h&&p<=u||p>=d&&u<=h?S=(f=s)/r:p>=d&&u>=h&&p>=u&&(S=(f=c*h)/r);var y=o.X()+o.Width()/2-f/2,m=o.Y()+o.Height()/2-S/2;return o=new n.Rectangle(y,m,f,S)}return this.GetCellContentRect(new n.CellCoord(t[0],t[1]))},t.prototype.GetCellGlobalRect=function(t,e){var i=this.GetCellRect(t,e);return this.TransToGlobalRect(i)},t.prototype.GetCellRect=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1==t.length){var i=t[0],o=this.GetCellSpan(i.rowIdx,i.colIdx);if(null==o)return this.GetOriginalCellRect(i);var a=i.rowIdx-o.top,r=i.colIdx-o.left,s=this.GetOriginalCellRect(a,r);a=i.rowIdx+o.bottom,r=i.colIdx+o.right;var c=this.GetOriginalCellRect(a,r);return new n.Rectangle(s.Left(),s.Top(),c.Right()-s.Left(),c.Bottom()-s.Top())}return this.GetCellRect(new n.CellCoord(t[0],t[1]))},t.prototype.GetOriginalCellRect=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1==t.length){for(var i=void 0,o=new n.Rectangle,a=0,r=0,s=t[0],c=0,l=0;l<this.colLineList.length&&(i=this.colLineList[l],l!=s.colIdx);l++)c=i.spacingComputeMode==n.LineComputeMode.PERCENTAGE?i.spacing*this.tbWidth:i.spacing,a+=i.computedDistance+c;o.SetX(a),o.SetWidth(this.colLineList[s.colIdx].computedDistance);for(l=0;l<this.rowLineList.length&&(i=this.rowLineList[l],l!=s.rowIdx);l++)c=i.spacingComputeMode==n.LineComputeMode.PERCENTAGE?i.spacing*this.tbHeight:i.spacing,r+=i.computedDistance+c;return o.SetY(r),o.SetHeight(this.rowLineList[s.rowIdx].computedDistance),o}return this.GetOriginalCellRect(new n.CellCoord(t[0],t[1]))},t.prototype.AddNewAutoRow=function(t){void 0===t&&(t=null),this.AddNewRow(t)},t.prototype.AddNewRow=function(t,e,i,o,a){if(void 0===e&&(e=!1),void 0===i&&(i=n.LineComputeMode.AUTO),void 0===o&&(o=0),void 0===a&&(a=0),this._AddNewRow(e,i,o,a),null!=t)for(var r=0;r<this.colAmount;r++)r<t.length&&this.SetCellValue(this.rowAmount-1,r,t[r])},t.prototype._AddNewRow=function(t,e,i,o){void 0===t&&(t=!1),void 0===e&&(e=n.LineComputeMode.AUTO),void 0===i&&(i=0),void 0===o&&(o=0),this.rowAmount+=1;var a=new n.TableLine(n.LineDir.HORIZONTAL);a.enableAutoAdjustRichSize=t,a.lineComputeMode=e,a.computeParam=i,a.computedDistance=o,a.maxComputedValue=-1,a.minComputedValue=-1,this.rowLineList.push(a)},t.prototype.AddNewAutoCol=function(t){void 0===t&&(t=null),this.AddNewCol(t)},t.prototype.AddNewCol=function(t,e,i,o,a){if(void 0===e&&(e=!1),void 0===i&&(i=n.LineComputeMode.AUTO),void 0===o&&(o=0),void 0===a&&(a=0),this._AddNewCol(e,i,o,a),null!=t)for(var r=0;r<this.rowAmount;r++)r<t.length&&this.SetCellValue(r,this.colAmount-1,t[r])},t.prototype._AddNewCol=function(t,e,i,o){void 0===t&&(t=!1),void 0===e&&(e=n.LineComputeMode.AUTO),void 0===i&&(i=0),void 0===o&&(o=0),this.colAmount+=1;var a=new n.TableLine(n.LineDir.VERTICAL);a.enableAutoAdjustRichSize=t,a.lineComputeMode=e,a.computeParam=i,a.computedDistance=o,a.maxComputedValue=-1,a.minComputedValue=-1,this.colLineList.push(a)},t}();i.Table=a,cc._RF.pop()},{"../Collections/Dictionary":"Dictionary","./TableTypes":"TableTypes"}],TaskMgr:[function(t,e,i){"use strict";cc._RF.push(e,"96bc18bE89Ek7ouRrr+DuEd","TaskMgr");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Timer"),a=t("./Task"),r=function(t){function e(e){void 0===e&&(e=!0);var i=t.call(this)||this;return i.isStop=!0,i.task=null,i.frameRate=60,e&&(i.task=new a.Task(i),i.task.SetFrameRate(i.frameRate)),i}return n(e,t),e.prototype.SetFrameRate=function(t){this.frameRate=t,null!=this.task&&this.task.SetFrameRate(this.frameRate)},e.prototype.GetFrameRate=function(){return this.frameRate},e.prototype.Start=function(){return!this.isStop||(this.task.Start(),this.isStop=!1,!0)},e.prototype.Stop=function(){this.isStop||(this.task.Stop(),this.isStop=!0)},e.prototype.SetTaskProcess=function(t){this.isStop&&this.task.CreateTaskProcesser(t)},e.prototype.CreateTimer=function(t,e,i,n){var a=this.task.GetTaskProcesser();return new o.Timer(a,i,t,e,n)},e.prototype.PostTask=function(t,e,i,n){return this.task.PostTask(t,e,i,n)},e.prototype.RegMsg=function(t,e,i){this.task.RegMsg(t,e,i)},e.prototype.UnRegMsgFunc=function(t,e,i){this.task.UnRegMsgFunc(t,e,i)},e.prototype.UnRegMsg=function(t){this.task.UnRegMsg(t)},e.prototype.UnRegAllMsg=function(){this.task.UnRegAllMsg()},e.prototype.SendMsg=function(t,e,i){this.task.SendMsg(t,e,i)},e}(t("../ScTypes/ScObject").ScObject);i.TaskMgr=r,cc._RF.pop()},{"../ScTypes/ScObject":"ScObject","./Task":"Task","./Timer":"Timer"}],TaskProcesser:[function(t,e,i){"use strict";cc._RF.push(e,"a205cKdMU1NeJ/vbM4uv2Rn","TaskProcesser");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./TaskPump"),a=t("./ScTaskTypes"),r=t("../ScTypes/ScObject"),s=t("../Collections/Dictionary"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msgTaskInfoDict=new s.Dictionary,e.frameRate=60,e}return n(e,t),e.prototype.RegMsg=function(t,e,i){if(null!=e){this.msgTaskInfoDict.containsKey(t)||this.msgTaskInfoDict.setValue(t,new Array);var n=this.msgTaskInfoDict.getValue(t);return-1==this.FindMsgInfoIdx(n,e,i)&&n.push([e,i]),0}return 1},e.prototype.UnRegMsgFunc=function(t,e,i){if(null!=i||null!=e){var n=this.msgTaskInfoDict.getValue(t);if(null!=n){var o=this.FindMsgInfoIdx(n,e,i);-1!=o&&n.splice(o,1)}}else this.UnRegMsg(t)},e.prototype.UnRegMsg=function(t){this.msgTaskInfoDict.remove(t)},e.prototype.UnRegAllMsg=function(){this.msgTaskInfoDict.clear()},e.prototype.FindMsgInfoIdx=function(t,e,i){for(var n=0;n<t.length;n++)if(t[n][1]==i&&t[n][0]==e)return n;return-1},e.prototype.SendMsg=function(t,e,i){this.ProcessMsg(t,e,i)},e.prototype.ProcessMsg=function(t,e,i){var n;if(null!=(n=this.msgTaskInfoDict.getValue(t)))for(var o=0;o<n.length;o++){var r=n[o][0].bind(n[o][1]);this.PostTask(r,e,null,a.TaskMsg.TMSG_DATA,i)}},e.prototype.SetFrameRate=function(t){this.frameRate=t},e.prototype.GetFrameRate=function(){return this.frameRate},e}(r.ScObject);i.TaskProcesser=c;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.taskPump=null,e}return n(e,t),e.prototype.Start=function(){return null!=this.taskPump||(this.taskPump=new o.TaskPump,this.taskPump.SetFrameRate(this.frameRate),!0)},e.prototype.Stop=function(){null!=this.taskPump&&(this.taskPump.Quit(),this.taskPump=null)},e.prototype.PostTask=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(null==this.taskPump||t.length<=0||t.length>5)return-1;var i=0;if(t[0]instanceof o.TaskNode&&t.length<=2)return null==t[0].processDataCallBack&&null==t[0].releaseDataCallBack?-1:(2==t.length&&(i=t[1]),this.taskPump.PostTask(t[0],i));if(null==t[0]&&null==t[2])return-1;5==t.length&&(i=t[4]);var n=new o.TaskNode(t[0],t[1],t[2],t[3]);return this.taskPump.PostTask(n,i)},e}(c);i.CommonTaskProcesser=l,cc._RF.pop()},{"../Collections/Dictionary":"Dictionary","../ScTypes/ScObject":"ScObject","./ScTaskTypes":"ScTaskTypes","./TaskPump":"TaskPump"}],TaskPump:[function(t,e,i){"use strict";cc._RF.push(e,"1423d+mGJ9O5pvQ/R/xjon8","TaskPump");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(r,s)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return c([t,e])}}function c(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(t){a=[6,t],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./ScTaskTypes"),s=t("../ScTypes/ScObject"),c=t("../ScUtils/ScUtils"),l=function(t){function e(){var e=t.call(this)||this;return e.frameRate=60,e.perFrameDurationMS=1e3/e.frameRate,e.taskQue=new u,e.Run(),e}return n(e,t),e.prototype.SetFrameRate=function(t){this.frameRate=t,this.perFrameDurationMS=1e3/t},e.prototype.GetFrameRate=function(){return this.frameRate},e.prototype.Run=function(){return o(this,void 0,void 0,function(){var t,i,n,o,s,l,h,u,d,p,f,S,y,m;return a(this,function(a){switch(a.label){case 0:l=new Array,h=this.taskQue.timerReadList,u=this.taskQue.dataReadList,d=function(e,i){var n=t-e.startTime-e.delayMS;return t-i.startTime-i.delayMS-n},a.label=1;case 1:for(s=0,t=c.TimeMS(),h.length>0&&h.sort(d),f=0;f<h.length&&(o=h[f],i=t-o.startTime,!(o.delayMS>0&&i<o.delayMS));f++)o.msg==r.TaskMsg.TMSG_TIMER_STOP&&null!=(n=o.data).taskNode&&l.push(n.taskNode),s|=this.ProcessTaskNodeData(o),l.push(o);if(l.length>0)for(f=0;f<l.length;f++)p=h.indexOf(l[f]),h.splice(p,1);for(l.length=0,f=0;f<u.length;f++)o=u[f],s|=this.ProcessTaskNodeData(o);return u.length=0,0!=h.length?0!=this.taskQue.timerWriteList.length&&(h=this.taskQue.timerReadList=h.concat(this.taskQue.timerWriteList),this.taskQue.timerWriteList.length=0):0!=this.taskQue.timerWriteList.length&&(S=this.taskQue.timerWriteList,this.taskQue.timerWriteList=this.taskQue.timerReadList,this.taskQue.timerReadList=S,h=this.taskQue.timerReadList),0!=this.taskQue.dataWriteList.length&&(S=this.taskQue.dataWriteList,this.taskQue.dataWriteList=this.taskQue.dataReadList,this.taskQue.dataReadList=S,u=this.taskQue.dataReadList),0!=s?[3,3]:(y=c.TimeMS(),(m=this.perFrameDurationMS-(y-t))>0?[4,e.wait(m)]:[3,3]);case 2:a.sent(),a.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.ProcessTaskNodeData=function(t){switch(null!=t.processDataCallBack&&t.processDataCallBack(t.data),null!=t.releaseDataCallBack&&t.releaseDataCallBack(t.data),t.msg){case r.TaskMsg.TMSG_QUIT:return 1}return 0},e.prototype.PostTask=function(t,e){var i=0;switch(t.msg){case r.TaskMsg.TMSG_TIMER_START:i=this.PostTimerTask(t,-2e3);break;case r.TaskMsg.TMSG_TIMER_RUN:i=this.PostTimerTask(t,e);break;case r.TaskMsg.TMSG_TIMER_STOP:i=this.PostCommonTask(t,-1e3);break;default:i=this.PostCommonTask(t,e)}return i},e.prototype.PostCommonTask=function(t,e){return null==e&&(e=0),t.delayMS=e,0!=e&&(t.startTime=c.TimeMS()),0==e?this.taskQue.dataWriteList.push(t):this.taskQue.timerWriteList.push(t),0},e.prototype.PostTimerTask=function(t,e){return null==e&&(e=0),t.delayMS=e,t.startTime=c.TimeMS(),this.taskQue.timerWriteList.push(t),0},e.prototype.Quit=function(){var t=new h(null,null,null,r.TaskMsg.TMSG_QUIT);return 0!=this.PostTask(t,0)?-1:0},e.wait=function(t){return o(this,void 0,void 0,function(){return a(this,function(e){return[2,new Promise(function(e){setTimeout(function(){e("")},t)})]})})},e}(s.ScObject);i.TaskPump=l;var h=function(){return function(t,e,i,n){void 0===n&&(n=r.TaskMsg.TMSG_DATA),this.processDataCallBack=t,this.releaseDataCallBack=i,this.data=e,this.msg=n}}();i.TaskNode=h;var u=function(){return function(){this.dataWriteList=new Array,this.dataReadList=new Array,this.timerWriteList=new Array,this.timerReadList=new Array}}();cc._RF.pop()},{"../ScTypes/ScObject":"ScObject","../ScUtils/ScUtils":"ScUtils","./ScTaskTypes":"ScTaskTypes"}],Task:[function(t,e,i){"use strict";cc._RF.push(e,"86e26t1j0FHiITnq7YjFmYF","Task");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./TaskProcesser"),a=t("./ScTaskTypes"),r=function(t){function e(e){var i=t.call(this)||this;return i.taskProcesser=null,i.eventMgr=null,i.frameRate=60,i.eventMgr=e,i.CreateTaskProcesser(),i}return n(e,t),e.prototype.SetFrameRate=function(t){this.frameRate=t,null!=this.taskProcesser&&this.taskProcesser.SetFrameRate(this.frameRate)},e.prototype.GetFrameRate=function(){return this.frameRate},e.prototype.TaskMgr=function(){return this.eventMgr},e.prototype.PostTask=function(t,e,i,n){return this.taskProcesser.PostTask(t,e,i,a.TaskMsg.TMSG_DATA,n)},e.prototype.RegMsg=function(t,e,i){this.taskProcesser.RegMsg(t,e,i)},e.prototype.UnRegMsgFunc=function(t,e,i){this.taskProcesser.UnRegMsgFunc(t,e,i)},e.prototype.UnRegMsg=function(t){this.taskProcesser.UnRegMsg(t)},e.prototype.UnRegAllMsg=function(){this.taskProcesser.UnRegAllMsg()},e.prototype.SendMsg=function(t,e,i){this.taskProcesser.SendMsg(t,e,i)},e.prototype.Start=function(){null!=this.taskProcesser&&this.taskProcesser.Start()},e.prototype.Stop=function(){null!=this.taskProcesser&&this.taskProcesser.Stop()},e.prototype.CreateTaskProcesser=function(t){void 0===t&&(t=null),this.Stop();this.TaskMgr();this.taskProcesser=null==t?new o.CommonTaskProcesser:t,this.taskProcesser.SetFrameRate(this.frameRate)},e.prototype.GetTaskProcesser=function(){return this.taskProcesser},e}(t("../ScTypes/ScObject").ScObject);i.Task=r,cc._RF.pop()},{"../ScTypes/ScObject":"ScObject","./ScTaskTypes":"ScTaskTypes","./TaskProcesser":"TaskProcesser"}],Timer:[function(t,e,i){"use strict";cc._RF.push(e,"1f52ckHRZ9J4aHfpTOI26PG","Timer");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("./TaskPump"),a=t("./ScTaskTypes"),r=function(t){function e(e,i,n,o,a){var r=t.call(this)||this;if(r.IsFrameRateSynch=!1,r.taskNode=null,r.durationMS=0,r.taskProcesser=null,r.timerCB=null,r.param=null,r.isStop=!0,r.isRepeat=!0,r.param=o,r.timerCB=n,r.taskProcesser=e,null==i){var s=e.GetFrameRate();r.durationMS=1/s}else r.durationMS=i;return r.isRepeat=null==a||a,r}return n(e,t),e.prototype.Start=function(){this.taskProcesser.PostTask(this.StartTask.bind(this),this,null,a.TaskMsg.TMSG_TIMER_START)},e.prototype.Stop=function(){this.isStop=!0,this.taskProcesser.PostTask(this.StopTask.bind(this),this,null,a.TaskMsg.TMSG_TIMER_STOP)},e.prototype.PostTask=function(t){this.taskNode=new o.TaskNode(this.RunTask.bind(this),t,null,a.TaskMsg.TMSG_TIMER_RUN);var e=this.durationMS;this.IsFrameRateSynch&&(e=-2e3),this.taskProcesser.PostTask(this.taskNode,e)},e.prototype.RunTask=function(t){this.isStop||(this.timerCB(this.param),this.taskNode=null,this.isRepeat?this.PostTask(t):this.isStop=!0)},e.prototype.StartTask=function(t){0!=this.isStop&&(this.isStop=!1,this.PostTask(t))},e.prototype.StopTask=function(t){this.taskNode=null,this.isStop||(this.isStop=!0)},e}(t("../ScTypes/ScObject").ScObject);i.Timer=r,cc._RF.pop()},{"../ScTypes/ScObject":"ScObject","./ScTaskTypes":"ScTaskTypes","./TaskPump":"TaskPump"}],UniqueID:[function(t,e,i){"use strict";cc._RF.push(e,"08ed8g09PhJR6AZxREfjmSP","UniqueID"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("../ByteBuffer/long"),o=function(){function t(){this.last_stamp=0,this.workid=0,this.seqid=0}return t.Instance=function(){return null==t.uniqueInstance&&(t.uniqueInstance=new t),t.uniqueInstance},t.prototype.set_workid=function(t){this.workid=t},t.prototype.get_curr_ms=function(){return(new Date).getTime()},t.prototype.wait_next_ms=function(t){var e=0;do{e=this.get_curr_ms()}while(e<=t);return e},t.prototype.gen=function(){var e,i=this.get_curr_ms(),o=n.fromNumber(i);return e=(e=o.shiftLeft(22)).or((1023&this.workid)<<12),i<this.last_stamp?n.ZERO:(i==this.last_stamp?(this.seqid=this.seqid+1&t.sequenceMask,0==this.seqid&&(i=this.wait_next_ms(this.last_stamp),e=(e=(o=n.fromNumber(i)).shiftLeft(22)).or((1023&this.workid)<<12))):this.seqid=0,this.last_stamp=i,(e=e.or(this.seqid)).unsigned=!0,e)},t.sequenceMask=4095,t}();i.UniqueID=o,cc._RF.pop()},{"../ByteBuffer/long":"long"}],UniqueSingleMachineID:[function(t,e,i){"use strict";cc._RF.push(e,"0251fpa64lOyoyaSXsfDex0","UniqueSingleMachineID"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("../ByteBuffer/long"),o=function(){function t(){this.last_stamp=0,this.workid=0,this.seqid=0}return t.Instance=function(){return null==t.uniqueInstance&&(t.uniqueInstance=new t),t.uniqueInstance},t.prototype.set_workid=function(t){this.workid=t},t.prototype.get_curr_ms=function(){return(new Date).getTime()},t.prototype.wait_next_ms=function(t){var e=0;do{e=this.get_curr_ms()}while(e<=t);return e},t.prototype.gen=function(){var e,i=this.get_curr_ms(),o=n.fromNumber(i);return e=(e=o.shiftLeft(22)).or((1023&this.workid)<<17),i<this.last_stamp?n.ZERO:(i==this.last_stamp?(this.seqid=this.seqid+1&t.sequenceMask,0==this.seqid&&(i=this.wait_next_ms(this.last_stamp),e=(e=(o=n.fromNumber(i)).shiftLeft(22)).or((1023&this.workid)<<17))):this.seqid=0,this.last_stamp=i,(e=e.or(this.seqid)).unsigned=!0,e)},t.sequenceMask=131071,t}();i.UniqueSingleMachineID=o,cc._RF.pop()},{"../ByteBuffer/long":"long"}],WaitCmpCardsStageAction:[function(t,e,i){"use strict";cc._RF.push(e,"9dacc0m7v1NqrmPTkG+44Op","WaitCmpCardsStageAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../GameLibs/ScTweener/ScTweenerRun"),r=t("../../../../../GameLibs/ScTweener/ScTweenerTypes"),s=t("../../../../../GameLibs/ScTweener/ScTweenerUtils"),c=t("../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes"),l=t("../../../../../GameLibs/ScStateMachine/ScStateMachineTypes"),h=t("../../../ResMgr/Pool/PrefabPool"),u=t("../../../../GameTypes"),d=function(t){function e(){var e=t.call(this)||this;return e.isFirstEnterStage=!0,e.isDirectEnterStage=!1,e.isPressCompletedBtn=!1,e.isImmediateApplyPlayerGameStatus=!0,e.avatarboxOrgPos=cc.Vec3.ZERO,e.avatarboxDstPos=cc.Vec3.ZERO,e.wait=new l.WaitObj,e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,5),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e.AddStateChildAction(2,e.State2.bind(e)),e.AddStateChildAction(3,e.State3.bind(e)),e.AddStateChildAction(4,e.State0_1.bind(e)),e.AddStateChildAction(5,e.State5.bind(e)),e}return n(e,t),e.prototype._BundleData=function(){return[this.isFirstEnterStage,this.isDirectEnterStage,this.isPressCompletedBtn,this.isImmediateApplyPlayerGameStatus,this.timeScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.isFirstEnterStage=t[0],this.isDirectEnterStage=t[1],this.isPressCompletedBtn=t[2],this.isImmediateApplyPlayerGameStatus=t[3],this.timeScale=t[4])},e.prototype.State0=function(){if(this.wait.Reset(),this.ClearPrefab(),null==this.data.roomNode&&this.data.CreateRoom(this.data.parentNode),this.isFirstEnterStage){if(1==this.isPressCompletedBtn){var t=this.data.CreatePlayerSeatViewer(0);return t.cardsViewerGroupNode.active=!1,a.ScTweenerRun.DoAlpha(t.cardsViewerGroupNode,0,0*this.timeScale),null!=this.data.slotsViewer&&1==this.data.slotsViewer.GetNode().active?(t.avatarbox.getPosition(this.avatarboxOrgPos),t.ShowCardsEnded=this.ShowCardsEnded.bind(this),this.data.RefreshPlayerSeatViewer(0,0,!0,!0),void this.WaitGoToState(this.wait,4)):(this.data.RefreshPlayerSeatViewer(0,this.timeScale),void this.GotoState(3,.1))}var e=this.data.slotsViewer.GetNode(),i=e.position;return i.y+=e.height*e.scaleY,a.ScTweenerRun.DoAlpha(e,0,.3*this.timeScale),a.ScTweenerRun.DoLocalMove(e,i,.3*this.timeScale).SetEast(r.ScEasingType.EaseOutCirc),this.data.CreatePlayerSeatViewer(0),this.data.RefreshPlayerSeatViewer(0,this.timeScale,!1,!1,!0),void this.GotoState(3,.3)}this.data.CreatePlayerSeatViewer(0),this.data.RefreshPlayerSeatViewer(0,this.timeScale,!0),this.GotoState(3,.1)},e.prototype.ShowCardsEnded=function(){this.ContinueGoto(this.wait)},e.prototype.State0_1=function(){var t=this.data.playerSeatViewers[0];t.avatarbox.getPosition(this.avatarboxDstPos),a.ScTweenerRun.DoLocalMove(t.avatarbox,this.avatarboxOrgPos,0*this.timeScale),this.slotCards=this.data.slotsViewer.GetSeriesCards();for(var e=0;e<this.slotCards.length;e++)s.SetNodeParent(this.slotCards[e].node,this.data.roomNode);var i=this.data.slotsViewer.GetNode(),n=i.position;n.y+=i.height*i.scaleY,a.ScTweenerRun.DoAlpha(i,0,.3*this.timeScale),a.ScTweenerRun.DoLocalMove(i,n,.3*this.timeScale).SetEast(r.ScEasingType.EaseOutCirc);var o=cc.Vec3.ZERO;i.getScale(o);var c=o.mul(.9);a.ScTweenerRun.DoLocalScale(i,c,.3*this.timeScale).SetEast(r.ScEasingType.EaseInOutBack),this.GotoState(1,.1)},e.prototype.State1=function(){var t=this.data.playerSeatViewers[0],e=cc.Vec3.ZERO,i=cc.Vec3.ZERO;a.ScTweenerRun.DoLocalMove(t.avatarbox,this.avatarboxDstPos,.2*this.timeScale);for(var n=0;n<this.slotCards.length;n++)this.slotCards[n].node.getPosition(e),e.y+=70,a.ScTweenerRun.DoLocalMove(this.slotCards[n].node,e,.3*this.timeScale).SetEast(r.ScEasingType.EaseOutBack),this.slotCards[n].node.getScale(i),i=i.mul(1.2),a.ScTweenerRun.DoLocalScale(this.slotCards[n].node,i,.3*this.timeScale).SetEast(r.ScEasingType.EaseOutBack);this.GotoState(2,.3)},e.prototype.State2=function(){for(var t=this.data.playerSeatViewers[0].GetSeriesCards(),e=0;e<this.slotCards.length;e++){var i=t[e].node.parent.convertToWorldSpaceAR(t[e].node.position);a.ScTweenerRun.DoMove(this.slotCards[e].node,i,.6*this.timeScale).SetEast(r.ScEasingType.EaseInBack);var n=s.NodeLocalScaleToWorld(t[e].node);a.ScTweenerRun.DoScale(this.slotCards[e].node,n,.6*this.timeScale);var o=s.NodeLocalEulerAnglesToWorld(t[e].node);a.ScTweenerRun.DoEluerAngles(this.slotCards[e].node,o,!0,.6*this.timeScale).SetEast(r.ScEasingType.EaseOutBack)}this.GotoState(3,.6)},e.prototype.State3=function(){var t=this.data.playerSeatViewers[0];t.cardsViewerGroupNode.active=!0,a.ScTweenerRun.DoAlpha(t.cardsViewerGroupNode,1,0*this.timeScale),null!=this.data.slotsViewer&&(this.data.slotsViewer.Destory(),this.data.slotsViewer=null),null!=this.data.cardsViewer&&(this.data.cardsViewer.Destory(),this.data.cardsViewer=null),null!=this.data.cardsAndSlotsBind&&(this.data.cardsAndSlotsBind.Destory(),this.data.cardsAndSlotsBind=null),this.data.players[0].slotsCardsTypes=[c.CardsType.WuTong,c.CardsType.DuiZi,c.CardsType.HuLu],t.commonCardsTypes=this.data.players[0].slotsCardsTypes,t.specCardsType=this.data.players[0].specCardsType,this.isDirectEnterStage?t.actionTimeScale=0:t.actionTimeScale=1,t.ShowCardsType(),this.GotoState(5)},e.prototype.State5=function(){this.data.playerSeatViewers[0].IsShowCardsTypeEnded()&&(this.isImmediateApplyPlayerGameStatus&&this.data.players[0].AlppyChangedGameStatus(),this.GotoState(this.IdleState(),.5))},e.prototype.ClearPrefab=function(){if(null!=this.data.btnCompleted){a.ScTweenerRun.DoAlpha(this.data.btnCompleted,0,.1).SetCallBackFunc(this.BtnHideEnded.bind(this),this.data.btnCompleted);var t=cc.Vec3.ZERO;this.data.btnCompleted.getScale(t),a.ScTweenerRun.DoLocalScale(this.data.btnCompleted,t.mul(.9),.1),this.data.btnCompleted=null}},e.prototype.BtnHideEnded=function(t){h.PrefabPool.Instance().Push(t,u.PrefabIdx.BtnReady)},e}(o.ScDesginAction);i.WaitCmpCardsStageAction=d,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes","../../../../../GameLibs/ScTweener/ScTweenerUtils":"ScTweenerUtils","../../../../GameTypes":"GameTypes","../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes":"CardAlgoTypes","../../../ResMgr/Pool/PrefabPool":"PrefabPool"}],WaitNextRoundGameAction:[function(t,e,i){"use strict";cc._RF.push(e,"ddb1dj2Rk1An7VlhH9QyGXG","WaitNextRoundGameAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../GameTypes"),r=t("../../../ResMgr/Pool/PrefabPool"),s=t("../../../../../GameLibs/ScTweener/ScTweenerRun"),c=function(t){function e(){var e=t.call(this)||this;return e.isFirstEnterStage=!0,e.isDirectEnterStage=!1,e.isImmediateApplyPlayerGameStatus=!0,e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,2),e.AddStateChildAction(0,e.State0.bind(e)),e}return n(e,t),e.prototype._BundleData=function(){return[this.isFirstEnterStage,this.isDirectEnterStage,this.isImmediateApplyPlayerGameStatus,this.timeScale]},e.prototype._UnBundleData=function(t){null!=t&&(this.isFirstEnterStage=t[0],this.isDirectEnterStage=t[1],this.isImmediateApplyPlayerGameStatus=t[2],this.timeScale=t[3])},e.prototype.State0=function(){if(null==this.data.roomNode&&this.data.CreateRoom(this.data.parentNode),this.data.roomStage==a.RoomStage.WaitNextRoundGame&&(this.data.CreatePlayerSeatViewer(0),this.data.RefreshPlayerSeatViewer(this.data.players[0].seatIdx,this.timeScale)),null!=this.data.btnReady&&this.data.players[0].IsHavGameStatus(a.PlayerGameStatus.ReadyGame)){s.ScTweenerRun.DoAlpha(this.data.btnReady,0,.1).SetCallBackFunc(this.BtnReadyHideEnded.bind(this),this.data.btnReady);var t=cc.Vec3.ZERO;this.data.btnReady.getScale(t),s.ScTweenerRun.DoLocalScale(this.data.btnReady,t.mul(.9),.1),this.data.btnReady=null}this.isImmediateApplyPlayerGameStatus&&this.data.players[0].AlppyChangedGameStatus(),this.GotoState(this.IdleState())},e.prototype.BtnReadyHideEnded=function(t){r.PrefabPool.Instance().Push(t,a.PrefabIdx.BtnReady)},e}(o.ScDesginAction);i.WaitNextRoundGameAction=c,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../GameTypes":"GameTypes","../../../ResMgr/Pool/PrefabPool":"PrefabPool"}],WholeFanPaiAction:[function(t,e,i){"use strict";cc._RF.push(e,"41cbfMGZO1Kkraz9NrFzwSh","WholeFanPaiAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../../GameLibs/ScTweener/ScTweenerRun"),r=t("../../../../ResMgr/CardsTypeSpriteAsset"),s=t("../../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes"),c=t("../../../../../../GameLibs/ScStateMachine/ScStateMachineTypes"),l=function(t){function e(){var e=t.call(this)||this;return e.commonCardsTypes=[s.CardsType.SanTiao,s.CardsType.ShunZi,s.CardsType.WuTong],e.specType=null,e.isOffFapaiAnimation=!1,e.completeActionCount=0,e.wait=new c.WaitObj,e.isAutoInstallAndUninstall=!0,e.Init=e._Init.bind(e),e.BundleData=e._BundleData.bind(e),e.UnBundleData=e._UnBundleData.bind(e),e.SetStateLifeRange(0,1),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e}return n(e,t),e.prototype._Init=function(){},e.prototype._BundleData=function(){return[this.commonCardsTypes,this.specType,this.timeScale,this.isOffFapaiAnimation]},e.prototype._UnBundleData=function(t){null!=t&&(this.commonCardsTypes=t[0],this.specType=t[1],this.timeScale=t[2],this.isOffFapaiAnimation=t[3])},e.prototype.State0=function(){this.wait.Reset(),this.completeActionCount=0;for(var t=0;t<this.data.cardsViewers.length;t++)this.isOffFapaiAnimation?this.data.cardsViewers[t].OffFaPaiAnimation():this.data.cardsViewers[t].OnFaPaiAnimation(),this.data.cardsViewers[t].AddFilpCardsEndEvent(this.UUID(),this.FlipPaiEnd.bind(this)),this.data.cardsViewers[t].HandCardsFilpping();this.WaitGoToState(this.wait,1)},e.prototype.FlipPaiEnd=function(t){this.completeActionCount++,t.RemoveFilpCardsEndEvent(this.UUID()),3==this.completeActionCount&&this.ContinueGoto(this.wait)},e.prototype.State1=function(){var t=.2;if(null!=this.specType)this.data.specCardsTypeNode.getComponent(cc.Sprite).spriteFrame=r.CardsTypeSpriteAsset.Instance().GetSpriteFrame(this.specType),a.ScTweenerRun.DoAlpha(this.data.specCardsTypeLayoutNode,1,t*this.timeScale);else if(null!=this.commonCardsTypes)for(var e=0;e<this.data.cardsTypesNode.length;e++){this.data.cardsTypesNode[e].getComponent(cc.Sprite).spriteFrame=r.CardsTypeSpriteAsset.Instance().GetSpriteFrame(this.commonCardsTypes[e]),a.ScTweenerRun.DoLocalScale(this.data.cardsTypesNode[e],new cc.Vec3(1,1,1),t*this.timeScale),a.ScTweenerRun.DoAlpha(this.data.cardsTypesNode[e],1,t*this.timeScale)}else t=0;this.GotoState(this.IdleState(),t)},e}(o.ScDesginAction);i.WholeFanPaiAction=l,cc._RF.pop()},{"../../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../../GameLibs/ScStateMachine/ScStateMachineTypes":"ScStateMachineTypes","../../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../CardsProcesser/CardsAlgorithm/CardAlgoTypes":"CardAlgoTypes","../../../../ResMgr/CardsTypeSpriteAsset":"CardsTypeSpriteAsset"}],WidgetPercentage:[function(t,e,i){"use strict";cc._RF.push(e,"116a1ibHDJCGKhmQu5wDXAJ","WidgetPercentage");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./Layout"),r=cc._decorator,s=r.ccclass,c=r.property,l=r.executeInEditMode,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.left=0,e.top=0,e.right=0,e.bottom=0,e.widget=null,e}return n(e,t),e.prototype.update=function(){0},e.prototype.Layout=function(){null!=this.widget&&(this.widget.left=this.node.parent.width*this.left/100,this.widget.top=this.node.parent.height*this.top/100,this.widget.right=this.node.parent.width*this.right/100,this.widget.bottom=this.node.parent.height*this.bottom/100)},o([c],e.prototype,"left",void 0),o([c],e.prototype,"top",void 0),o([c],e.prototype,"right",void 0),o([c],e.prototype,"bottom",void 0),o([c(cc.Widget)],e.prototype,"widget",void 0),e=o([s,l],e)}(a.default);i.default=h,cc._RF.pop()},{"./Layout":"Layout"}],XiPaiAction:[function(t,e,i){"use strict";cc._RF.push(e,"18010oshZhH2a0D4sZr8U8i","XiPaiAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../GameLibs/ScTweener/ScTweenerRun"),r=t("../../../../../GameLibs/ScTweener/ScTweenerTypes"),s=function(t){function e(){var e=t.call(this)||this;return e.SetStateLifeRange(0,4),e.AddStateChildAction(0,e.FaPaiStart.bind(e)),e.AddStateChildAction(1,e.FaPaiTanKaiLeft.bind(e)),e.AddStateChildAction(2,e.FaPaiTanKaiPreRight.bind(e)),e.AddStateChildAction(3,e.FaPaiTanKaiRight.bind(e)),e.AddStateChildAction(4,e.FaPaiEnd.bind(e)),e}return n(e,t),e.prototype.FaPaiStart=function(){this.data.CreatePaiDui(this.data.cardFaces,this.data.isLaiziReplaceCards);var t=this.data.GetLeftFirstCardPos();this.data.ShowPaiDuiAnim(t,this.data.paiDuiShowTime),this.data.IsFaPaiLeftMove?this.SetState(1,this.data.paiDuiShowTime):this.data.IsFaPaiPreRightMove?this.SetState(2,this.data.paiDuiShowTime):this.SetState(3,this.data.paiDuiShowTime)},e.prototype.FaPaiTanKaiLeft=function(){for(var t=0;t<this.data.handCardUICaches.length;t++){var e=this.data.handCardUICaches[t].node.position.x-1*t;a.ScTweenerRun.DoLocalMoveX(this.data.handCardUICaches[t].node,e,this.data.faPaiPreMoveTime*this.data.fapaiAnimScale),t<this.data.handCardUICaches.length-1&&this.data.IsFaPaiFrontFace&&a.ScTweenerRun.DoAlpha(this.data.handCardUICaches[t].node,.5,this.data.faPaiPreMoveTime*this.data.fapaiAnimScale)}this.data.IsFaPaiPreRightMove?this.SetState(2,this.data.faPaiPreMoveTime):this.SetState(3,this.data.faPaiPreMoveTime)},e.prototype.FaPaiTanKaiPreRight=function(){for(var t=.2*this.data.GetCardsParent().width/this.data.handCardUICaches.length,e=0;e<this.data.handCardUICaches.length;e++){var i=this.data.handCardUICaches[e].node.position.x+t*e;a.ScTweenerRun.DoLocalMoveX(this.data.handCardUICaches[e].node,i,this.data.faPaiPreMoveTime*this.data.fapaiAnimScale),e<this.data.handCardUICaches.length-1&&a.ScTweenerRun.DoAlpha(this.data.handCardUICaches[e].node,.8,this.data.faPaiPreMoveTime*this.data.fapaiAnimScale)}this.SetState(3,this.data.faPaiPreMoveTime)},e.prototype.FaPaiTanKaiRight=function(){this.data.ComputeCardsDstLayoutPos(!this.data.IsFaPaiFrontFace);for(var t=0;t<this.data.handCardUICaches.length;t++)a.ScTweenerRun.DoAlpha(this.data.handCardUICaches[t].shadowBack,this.data.CardBackShadowAlpha,this.data.faPaiRightMoveTime*this.data.fapaiAnimScale),this.data.cardDstEluerAngleList.length>0&&a.ScTweenerRun.DoLocalEluerAngles(this.data.handCardUICaches[t].node,this.data.cardDstEluerAngleList[t],!0,this.data.faPaiRightMoveTime*this.data.fapaiAnimScale).SetEast(r.ScEasingType.EaseOutQuint).SetDelay((this.data.handCardUICaches.length-t-1)*this.data.faPaiRightMoveDealy*this.data.fapaiAnimScale),a.ScTweenerRun.DoLocalMove(this.data.handCardUICaches[t].node,this.data.cardDstPosList[t],this.data.faPaiRightMoveTime*this.data.fapaiAnimScale).SetEast(r.ScEasingType.EaseOutQuint).SetDelay((this.data.handCardUICaches.length-t-1)*this.data.faPaiRightMoveDealy*this.data.fapaiAnimScale),t<this.data.handCardUICaches.length-1&&a.ScTweenerRun.DoAlpha(this.data.handCardUICaches[t].node,this.data.CardAlpha,this.data.faPaiRightMoveTime*this.data.fapaiAnimScale/2);var e=0;1==this.data.IsFaPaiEndFilpCard&&(e=this.data.DelayFilpCardTime),this.SetState(4,this.data.faPaiRightMoveTime+this.data.faPaiRightMoveDealy*(this.data.handCardUICaches.length-1)+e-.3)},e.prototype.FaPaiEnd=function(){if(this.data._ProcessFaPaiEndAndNoFilpCardsEventCB_SYS(),this.SetState(this.IdleState(),-1),this.data.IsFaPaiEndFilpCard)this.data.HandCardsFilpping();else{for(var t=0;t<this.data.handCardUICaches.length;t++)this.data.handCardUICaches[t].EnableOp();this.data._FaPaiEnded_Processer_SYS(),this.data._ProcessFaPaiEndEventCB_SYS(),this.data.IsOpenCardWobble&&this.data.Wobble()}this.stateMachine.UnInstall(this)},e.prototype.SetState=function(t,e){this.GotoState(t,e*this.data.fapaiAnimScale)},e}(o.ScDesginAction);i.XiPaiAction=s,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun","../../../../../GameLibs/ScTweener/ScTweenerTypes":"ScTweenerTypes"}],XiPaiDstPosAction:[function(t,e,i){"use strict";cc._RF.push(e,"50b02AA1sFGC7iL/sFloB85","XiPaiDstPosAction");var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../../../GameLibs/ScStateMachine/ScDesginAction"),a=t("../../../../../GameLibs/ScTweener/ScTweenerRun"),r=function(t){function e(){var e=t.call(this)||this;return e.SetStateLifeRange(0,2),e.AddStateChildAction(0,e.State0.bind(e)),e.AddStateChildAction(1,e.State1.bind(e)),e.AddStateChildAction(2,e.FaPaiEnd.bind(e)),e}return n(e,t),e.prototype.State0=function(){this.data.CreatePaiDui(this.data.cardFaces,this.data.isLaiziReplaceCards);var t=this.data.SetHandCardsStartPos(this.data);this.data.ShowPaiDuiAnim(t,this.data.paiDuiShowTime),this.SetState(1,this.data.paiDuiShowTime)},e.prototype.State1=function(){this.data.ComputeCardsDstLayoutPos(!this.data.IsFaPaiFrontFace);for(var t=0;t<this.data.handCardUICaches.length;t++)a.ScTweenerRun.DoAlpha(this.data.handCardUICaches[t].shadowBack,this.data.CardBackShadowAlpha,this.data.faPaiRightMoveTime*this.data.fapaiAnimScale),this.data.cardDstEluerAngleList.length>0&&a.ScTweenerRun.DoLocalEluerAngles(this.data.handCardUICaches[t].node,this.data.cardDstEluerAngleList[t],!0,this.data.faPaiRightMoveTime*this.data.fapaiAnimScale),a.ScTweenerRun.DoLocalMove(this.data.handCardUICaches[t].node,this.data.cardDstPosList[t],this.data.faPaiRightMoveTime*this.data.fapaiAnimScale),t<this.data.handCardUICaches.length-1&&this.data.IsFaPaiFrontFace&&a.ScTweenerRun.DoAlpha(this.data.handCardUICaches[t].node,this.data.CardAlpha,this.data.faPaiRightMoveTime*this.data.fapaiAnimScale/2);var e=0;1==this.data.IsFaPaiEndFilpCard&&(e=this.data.DelayFilpCardTime),this.SetState(2,this.data.faPaiRightMoveTime+e)},e.prototype.FaPaiEnd=function(){if(this.data._ProcessFaPaiEndAndNoFilpCardsEventCB_SYS(),this.SetState(this.IdleState(),0),this.data.IsFaPaiEndFilpCard)this.data.HandCardsFilpping();else{for(var t=0;t<this.data.handCardUICaches.length;t++)this.data.handCardUICaches[t].EnableOp();this.data._FaPaiEnded_Processer_SYS(),this.data._ProcessFaPaiEndEventCB_SYS(),this.data.IsOpenCardWobble&&this.data.Wobble()}this.stateMachine.UnInstall(this)},e.prototype.SetState=function(t,e){this.GotoState(t,e*this.data.fapaiAnimScale)},e}(o.ScDesginAction);i.XiPaiDstPosAction=r,cc._RF.pop()},{"../../../../../GameLibs/ScStateMachine/ScDesginAction":"ScDesginAction","../../../../../GameLibs/ScTweener/ScTweenerRun":"ScTweenerRun"}],arrays:[function(t,e,i){"use strict";cc._RF.push(e,"e6f2ee1+UFLs7r8X0BbIWyC","arrays"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./util");function o(t,e,i){for(var o=i||n.defaultEquals,a=t.length,r=0;r<a;r++)if(o(t[r],e))return r;return-1}i.indexOf=o,i.lastIndexOf=function(t,e,i){for(var o=i||n.defaultEquals,a=t.length-1;a>=0;a--)if(o(t[a],e))return a;return-1},i.contains=function(t,e,i){return o(t,e,i)>=0},i.remove=function(t,e,i){var n=o(t,e,i);return!(n<0||(t.splice(n,1),0))},i.frequency=function(t,e,i){for(var o=i||n.defaultEquals,a=t.length,r=0,s=0;s<a;s++)o(t[s],e)&&r++;return r},i.equals=function(t,e,i){var o=i||n.defaultEquals;if(t.length!==e.length)return!1;for(var a=t.length,r=0;r<a;r++)if(!o(t[r],e[r]))return!1;return!0},i.copy=function(t){return t.concat()},i.swap=function(t,e,i){if(e<0||e>=t.length||i<0||i>=t.length)return!1;var n=t[e];return t[e]=t[i],t[i]=n,!0},i.toString=function(t){return"["+t.toString()+"]"},i.forEach=function(t,e){for(var i=0,n=t;i<n.length;i++)if(!1===e(n[i]))return},cc._RF.pop()},{"./util":"util"}],bytebuffer:[function(t,e,i){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6837dgW1PBMIpXxw8ZOSTW8","bytebuffer"),function(i,o){"function"==typeof define&&define.amd?define(["long"],o):"function"==typeof t&&"object"===(void 0===e?"undefined":n(e))&&e&&e.exports?e.exports=function(){var e;try{e=t("long")}catch(t){}return o(e)}():((void 0).dcodeIO=(void 0).dcodeIO||{}).ByteBuffer=o((void 0).dcodeIO.Long)}(0,function(t){var e=function t(e,i,n){if(void 0===e&&(e=t.DEFAULT_CAPACITY),void 0===i&&(i=t.DEFAULT_ENDIAN),void 0===n&&(n=t.DEFAULT_NOASSERT),!n){if((e|=0)<0)throw RangeError("Illegal capacity");i=!!i,n=!!n}this.buffer=0===e?o:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=i,this.noAssert=n};e.VERSION="5.0.1",e.LITTLE_ENDIAN=!0,e.BIG_ENDIAN=!1,e.DEFAULT_CAPACITY=16,e.DEFAULT_ENDIAN=e.BIG_ENDIAN,e.DEFAULT_NOASSERT=!1,e.Long=t||null;var i=e.prototype;i.__isByteBuffer__,Object.defineProperty(i,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var o=new ArrayBuffer(0),a=String.fromCharCode;function r(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function s(){var t=[],e=[];return function(){if(0===arguments.length)return e.join("")+a.apply(String,t);t.length+arguments.length>1024&&(e.push(a.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}}function c(t,e,i,n,o){var a,r,s=8*o-n-1,c=(1<<s)-1,l=c>>1,h=-7,u=i?o-1:0,d=i?-1:1,p=t[e+u];for(u+=d,a=p&(1<<-h)-1,p>>=-h,h+=s;h>0;a=256*a+t[e+u],u+=d,h-=8);for(r=a&(1<<-h)-1,a>>=-h,h+=n;h>0;r=256*r+t[e+u],u+=d,h-=8);if(0===a)a=1-l;else{if(a===c)return r?NaN:1/0*(p?-1:1);r+=Math.pow(2,n),a-=l}return(p?-1:1)*r*Math.pow(2,a-n)}function l(t,e,i,n,o,a){var r,s,c,l=8*a-o-1,h=(1<<l)-1,u=h>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,f=n?1:-1,S=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,r=h):(r=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-r))<1&&(r--,c*=2),(e+=r+u>=1?d/c:d*Math.pow(2,1-u))*c>=2&&(r++,c/=2),r+u>=h?(s=0,r=h):r+u>=1?(s=(e*c-1)*Math.pow(2,o),r+=u):(s=e*Math.pow(2,u-1)*Math.pow(2,o),r=0));o>=8;t[i+p]=255&s,p+=f,s/=256,o-=8);for(r=r<<o|s,l+=o;l>0;t[i+p]=255&r,p+=f,r/=256,l-=8);t[i+p-f]|=128*S}e.accessor=function(){return Uint8Array},e.allocate=function(t,i,n){return new e(t,i,n)},e.concat=function(t,i,n,o){"boolean"!=typeof i&&"string"==typeof i||(o=n,n=i,i=void 0);for(var a,r=0,s=0,c=t.length;s<c;++s)e.isByteBuffer(t[s])||(t[s]=e.wrap(t[s],i)),(a=t[s].limit-t[s].offset)>0&&(r+=a);if(0===r)return new e(0,n,o);var l,h=new e(r,n,o);for(s=0;s<c;)(a=(l=t[s++]).limit-l.offset)<=0||(h.view.set(l.view.subarray(l.offset,l.limit),h.offset),h.offset+=a);return h.limit=h.offset,h.offset=0,h},e.isByteBuffer=function(t){return!0===(t&&t.__isByteBuffer__)},e.type=function(){return ArrayBuffer},e.wrap=function(t,o,a,r){if("string"!=typeof o&&(r=a,a=o,o=void 0),"string"==typeof t)switch(void 0===o&&(o="utf8"),o){case"base64":return e.fromBase64(t,a);case"hex":return e.fromHex(t,a);case"binary":return e.fromBinary(t,a);case"utf8":return e.fromUTF8(t,a);case"debug":return e.fromDebug(t,a);default:throw Error("Unsupported encoding: "+o)}if(null===t||"object"!==n(t))throw TypeError("Illegal buffer");var s;if(e.isByteBuffer(t))return(s=i.clone.call(t)).markedOffset=-1,s;if(t instanceof Uint8Array)s=new e(0,a,r),t.length>0&&(s.buffer=t.buffer,s.offset=t.byteOffset,s.limit=t.byteOffset+t.byteLength,s.view=new Uint8Array(t.buffer));else if(t instanceof ArrayBuffer)s=new e(0,a,r),t.byteLength>0&&(s.buffer=t,s.offset=0,s.limit=t.byteLength,s.view=t.byteLength>0?new Uint8Array(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");(s=new e(t.length,a,r)).limit=t.length;for(var c=0;c<t.length;++c)s.view[c]=t[c]}return s},i.writeBitSet=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if(!(t instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,o=e,a=t.length,r=a>>3,s=0;for(e+=this.writeVarint32(a,e);r--;)n=1&!!t[s++]|(1&!!t[s++])<<1|(1&!!t[s++])<<2|(1&!!t[s++])<<3|(1&!!t[s++])<<4|(1&!!t[s++])<<5|(1&!!t[s++])<<6|(1&!!t[s++])<<7,this.writeByte(n,e++);if(s<a){var c=0;for(n=0;s<a;)n|=(1&!!t[s++])<<c++;this.writeByte(n,e++)}return i?(this.offset=e,this):e-o},i.readBitSet=function(t){var e=void 0===t;e&&(t=this.offset);var i,n=this.readVarint32(t),o=n.value,a=o>>3,r=0,s=[];for(t+=n.length;a--;)i=this.readByte(t++),s[r++]=!!(1&i),s[r++]=!!(2&i),s[r++]=!!(4&i),s[r++]=!!(8&i),s[r++]=!!(16&i),s[r++]=!!(32&i),s[r++]=!!(64&i),s[r++]=!!(128&i);if(r<o){var c=0;for(i=this.readByte(t++);r<o;)s[r++]=!!(i>>c++&1)}return e&&(this.offset=t),s},i.readBytes=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+t+") <= "+this.buffer.byteLength)}var n=this.slice(e,e+t);return i&&(this.offset+=t),n},i.writeInt8=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view[e]=t,i&&(this.offset+=1),this},i.writeByte=i.writeInt8,i.readInt8=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view[t];return 128==(128&i)&&(i=-(255-i+1)),e&&(this.offset+=1),i},i.readByte=i.readInt8,i.writeUint8=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view[e]=t,i&&(this.offset+=1),this},i.writeUInt8=i.writeUint8,i.readUint8=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view[t];return e&&(this.offset+=1),i},i.readUInt8=i.readUint8,i.writeInt16=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),i&&(this.offset+=2),this},i.writeShort=i.writeInt16,i.readInt16=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t],i|=this.view[t+1]<<8):(i=this.view[t]<<8,i|=this.view[t+1]),32768==(32768&i)&&(i=-(65535-i+1)),e&&(this.offset+=2),i},i.readShort=i.readInt16,i.writeUint16=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),i&&(this.offset+=2),this},i.writeUInt16=i.writeUint16,i.readUint16=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t],i|=this.view[t+1]<<8):(i=this.view[t]<<8,i|=this.view[t+1]),e&&(this.offset+=2),i},i.readUInt16=i.readUint16,i.writeInt32=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),i&&(this.offset+=4),this},i.writeInt=i.writeInt32,i.readInt32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0),i|=0,e&&(this.offset+=4),i},i.readInt=i.readInt32,i.writeUint32=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),i&&(this.offset+=4),this},i.writeUInt32=i.writeUint32,i.readUint32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0),e&&(this.offset+=4),i},i.readUInt32=i.readUint32,t&&(i.writeInt64=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),i+=8;var o=this.buffer.byteLength;i>o&&this.resize((o*=2)>i?o:i),i-=8;var a=e.low,r=e.high;return this.littleEndian?(this.view[i+3]=a>>>24&255,this.view[i+2]=a>>>16&255,this.view[i+1]=a>>>8&255,this.view[i]=255&a,i+=4,this.view[i+3]=r>>>24&255,this.view[i+2]=r>>>16&255,this.view[i+1]=r>>>8&255,this.view[i]=255&r):(this.view[i]=r>>>24&255,this.view[i+1]=r>>>16&255,this.view[i+2]=r>>>8&255,this.view[i+3]=255&r,i+=4,this.view[i]=a>>>24&255,this.view[i+1]=a>>>16&255,this.view[i+2]=a>>>8&255,this.view[i+3]=255&a),n&&(this.offset+=8),this},i.writeLong=i.writeInt64,i.readInt64=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=0,o=0;this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0,e+=4,o=this.view[e+2]<<16,o|=this.view[e+1]<<8,o|=this.view[e],o+=this.view[e+3]<<24>>>0):(o=this.view[e+1]<<16,o|=this.view[e+2]<<8,o|=this.view[e+3],o+=this.view[e]<<24>>>0,e+=4,n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0);var a=new t(n,o,!1);return i&&(this.offset+=8),a},i.readLong=i.readInt64,i.writeUint64=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),i+=8;var o=this.buffer.byteLength;i>o&&this.resize((o*=2)>i?o:i),i-=8;var a=e.low,r=e.high;return this.littleEndian?(this.view[i+3]=a>>>24&255,this.view[i+2]=a>>>16&255,this.view[i+1]=a>>>8&255,this.view[i]=255&a,i+=4,this.view[i+3]=r>>>24&255,this.view[i+2]=r>>>16&255,this.view[i+1]=r>>>8&255,this.view[i]=255&r):(this.view[i]=r>>>24&255,this.view[i+1]=r>>>16&255,this.view[i+2]=r>>>8&255,this.view[i+3]=255&r,i+=4,this.view[i]=a>>>24&255,this.view[i+1]=a>>>16&255,this.view[i+2]=a>>>8&255,this.view[i+3]=255&a),n&&(this.offset+=8),this},i.writeUInt64=i.writeUint64,i.readUint64=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=0,o=0;this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0,e+=4,o=this.view[e+2]<<16,o|=this.view[e+1]<<8,o|=this.view[e],o+=this.view[e+3]<<24>>>0):(o=this.view[e+1]<<16,o|=this.view[e+2]<<8,o|=this.view[e+3],o+=this.view[e]<<24>>>0,e+=4,n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0);var a=new t(n,o,!0);return i&&(this.offset+=8),a},i.readUInt64=i.readUint64),i.writeFloat32=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,l(this.view,t,e,this.littleEndian,23,4),i&&(this.offset+=4),this},i.writeFloat=i.writeFloat32,i.readFloat32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=c(this.view,t,this.littleEndian,23,4);return e&&(this.offset+=4),i},i.readFloat=i.readFloat32,i.writeFloat64=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=8,l(this.view,t,e,this.littleEndian,52,8),i&&(this.offset+=8),this},i.writeDouble=i.writeFloat64,i.readFloat64=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=c(this.view,t,this.littleEndian,52,8);return e&&(this.offset+=8),i},i.readDouble=i.readFloat64,e.MAX_VARINT32_BYTES=5,e.calculateVarint32=function(t){return(t>>>=0)<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},e.zigZagEncode32=function(t){return((t|=0)<<1^t>>31)>>>0},e.zigZagDecode32=function(t){return t>>>1^-(1&t)|0},i.writeVarint32=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,a=e.calculateVarint32(t);i+=a;var r=this.buffer.byteLength;for(i>r&&this.resize((r*=2)>i?r:i),i-=a,t>>>=0;t>=128;)o=127&t|128,this.view[i++]=o,t>>>=7;return this.view[i++]=t,n?(this.offset=i,this):a},i.writeVarint32ZigZag=function(t,i){return this.writeVarint32(e.zigZagEncode32(t),i)},i.readVarint32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,n=0,o=0;do{if(!this.noAssert&&t>this.limit){var a=Error("Truncated");throw a.truncated=!0,a}i=this.view[t++],n<5&&(o|=(127&i)<<7*n),++n}while(0!=(128&i));return o|=0,e?(this.offset=t,o):{value:o,length:n}},i.readVarint32ZigZag=function(t){var i=this.readVarint32(t);return"object"===n(i)?i.value=e.zigZagDecode32(i.value):i=e.zigZagDecode32(i),i},t&&(e.MAX_VARINT64_BYTES=10,e.calculateVarint64=function(e){"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e));var i=e.toInt()>>>0,n=e.shiftRightUnsigned(28).toInt()>>>0,o=e.shiftRightUnsigned(56).toInt()>>>0;return 0==o?0==n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:o<128?9:10},e.zigZagEncode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftLeft(1).xor(e.shiftRight(63)).toUnsigned()},e.zigZagDecode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftRightUnsigned(1).xor(e.and(t.ONE).toSigned().negate()).toSigned()},i.writeVarint64=function(i,n){var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"==typeof i)i=t.fromNumber(i);else if("string"==typeof i)i=t.fromString(i);else if(!(i&&i instanceof t))throw TypeError("Illegal value: "+i+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof i?i=t.fromNumber(i,!1):"string"==typeof i?i=t.fromString(i,!1):!1!==i.unsigned&&(i=i.toSigned());var a=e.calculateVarint64(i),r=i.toInt()>>>0,s=i.shiftRightUnsigned(28).toInt()>>>0,c=i.shiftRightUnsigned(56).toInt()>>>0;n+=a;var l=this.buffer.byteLength;switch(n>l&&this.resize((l*=2)>n?l:n),n-=a,a){case 10:this.view[n+9]=c>>>7&1;case 9:this.view[n+8]=9!==a?128|c:127&c;case 8:this.view[n+7]=8!==a?s>>>21|128:s>>>21&127;case 7:this.view[n+6]=7!==a?s>>>14|128:s>>>14&127;case 6:this.view[n+5]=6!==a?s>>>7|128:s>>>7&127;case 5:this.view[n+4]=5!==a?128|s:127&s;case 4:this.view[n+3]=4!==a?r>>>21|128:r>>>21&127;case 3:this.view[n+2]=3!==a?r>>>14|128:r>>>14&127;case 2:this.view[n+1]=2!==a?r>>>7|128:r>>>7&127;case 1:this.view[n]=1!==a?128|r:127&r}return o?(this.offset+=a,this):a},i.writeVarint64ZigZag=function(t,i){return this.writeVarint64(e.zigZagEncode64(t),i)},i.readVarint64=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=e,o=0,a=0,r=0,s=0;if(o=127&(s=this.view[e++]),128&s&&(o|=(127&(s=this.view[e++]))<<7,(128&s||this.noAssert&&void 0===s)&&(o|=(127&(s=this.view[e++]))<<14,(128&s||this.noAssert&&void 0===s)&&(o|=(127&(s=this.view[e++]))<<21,(128&s||this.noAssert&&void 0===s)&&(a=127&(s=this.view[e++]),(128&s||this.noAssert&&void 0===s)&&(a|=(127&(s=this.view[e++]))<<7,(128&s||this.noAssert&&void 0===s)&&(a|=(127&(s=this.view[e++]))<<14,(128&s||this.noAssert&&void 0===s)&&(a|=(127&(s=this.view[e++]))<<21,(128&s||this.noAssert&&void 0===s)&&(r=127&(s=this.view[e++]),(128&s||this.noAssert&&void 0===s)&&(r|=(127&(s=this.view[e++]))<<7,128&s||this.noAssert&&void 0===s))))))))))throw Error("Buffer overrun");var c=t.fromBits(o|a<<28,a>>>4|r<<24,!1);return i?(this.offset=e,c):{value:c,length:e-n}},i.readVarint64ZigZag=function(i){var n=this.readVarint64(i);return n&&n.value instanceof t?n.value=e.zigZagDecode64(n.value):n=e.zigZagDecode64(n),n}),i.writeCString=function(t,e){var i=void 0===e;i&&(e=this.offset);var n,o=t.length;if(!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(n=0;n<o;++n)if(0===t.charCodeAt(n))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}o=u.calculateUTF16asUTF8(r(t))[1],e+=o+1;var a=this.buffer.byteLength;return e>a&&this.resize((a*=2)>e?a:e),e-=o+1,u.encodeUTF16toUTF8(r(t),function(t){this.view[e++]=t}.bind(this)),this.view[e++]=0,i?(this.offset=e,this):o},i.readCString=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,n=t,o=-1;return u.decodeUTF8toUTF16(function(){if(0===o)return null;if(t>=this.limit)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.limit);return 0===(o=this.view[t++])?null:o}.bind(this),i=s(),!0),e?(this.offset=t,i()):{string:i(),length:t-n}},i.writeIString=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,o=e;n=u.calculateUTF16asUTF8(r(t),this.noAssert)[1],e+=4+n;var a=this.buffer.byteLength;if(e>a&&this.resize((a*=2)>e?a:e),e-=4+n,this.littleEndian?(this.view[e+3]=n>>>24&255,this.view[e+2]=n>>>16&255,this.view[e+1]=n>>>8&255,this.view[e]=255&n):(this.view[e]=n>>>24&255,this.view[e+1]=n>>>16&255,this.view[e+2]=n>>>8&255,this.view[e+3]=255&n),e+=4,u.encodeUTF16toUTF8(r(t),function(t){this.view[e++]=t}.bind(this)),e!==o+4+n)throw RangeError("Illegal range: Truncated data, "+e+" == "+(e+4+n));return i?(this.offset=e,this):e-o},i.readIString=function(t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var n=t,o=this.readUint32(t),a=this.readUTF8String(o,e.METRICS_BYTES,t+=4);return t+=a.length,i?(this.offset=t,a.string):{string:a.string,length:t-n}},e.METRICS_CHARS="c",e.METRICS_BYTES="b",i.writeUTF8String=function(t,e){var i,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var o=e;i=u.calculateUTF16asUTF8(r(t))[1],e+=i;var a=this.buffer.byteLength;return e>a&&this.resize((a*=2)>e?a:e),e-=i,u.encodeUTF16toUTF8(r(t),function(t){this.view[e++]=t}.bind(this)),n?(this.offset=e,this):e-o},i.writeString=i.writeUTF8String,e.calculateUTF8Chars=function(t){return u.calculateUTF16asUTF8(r(t))[0]},e.calculateString=e.calculateUTF8Bytes=function(t){return u.calculateUTF16asUTF8(r(t))[1]},i.readUTF8String=function(t,i,n){"number"==typeof i&&(n=i,i=void 0);var o=void 0===n;if(o&&(n=this.offset),void 0===i&&(i=e.METRICS_CHARS),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var a,r=0,c=n;if(i===e.METRICS_CHARS){if(a=s(),u.decodeUTF8(function(){return r<t&&n<this.limit?this.view[n++]:null}.bind(this),function(t){++r,u.UTF8toUTF16(t,a)}),r!==t)throw RangeError("Illegal range: Truncated data, "+r+" == "+t);return o?(this.offset=n,a()):{string:a(),length:n-c}}if(i===e.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+t+") <= "+this.buffer.byteLength)}var l=n+t;if(u.decodeUTF8toUTF16(function(){return n<l?this.view[n++]:null}.bind(this),a=s(),this.noAssert),n!==l)throw RangeError("Illegal range: Truncated data, "+n+" == "+l);return o?(this.offset=n,a()):{string:a(),length:n-c}}throw TypeError("Unsupported metrics: "+i)},i.readString=i.readUTF8String,i.writeVString=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,a,s=i;o=u.calculateUTF16asUTF8(r(t),this.noAssert)[1],a=e.calculateVarint32(o),i+=a+o;var c=this.buffer.byteLength;if(i>c&&this.resize((c*=2)>i?c:i),i-=a+o,i+=this.writeVarint32(o,i),u.encodeUTF16toUTF8(r(t),function(t){this.view[i++]=t}.bind(this)),i!==s+o+a)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+o+a));return n?(this.offset=i,this):i-s},i.readVString=function(t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n=t,o=this.readVarint32(t),a=this.readUTF8String(o.value,e.METRICS_BYTES,t+=o.length);return t+=a.length,i?(this.offset=t,a.string):{string:a.string,length:t-n}},i.append=function(t,i,n){"number"!=typeof i&&"string"==typeof i||(n=i,i=void 0);var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}t instanceof e||(t=e.wrap(t,i));var a=t.limit-t.offset;if(a<=0)return this;n+=a;var r=this.buffer.byteLength;return n>r&&this.resize((r*=2)>n?r:n),n-=a,this.view.set(t.view.subarray(t.offset,t.limit),n),t.offset+=a,o&&(this.offset+=a),this},i.appendTo=function(t,e){return t.append(this,e),this},i.writeBytes=i.append,i.assert=function(t){return this.noAssert=!t,this},i.capacity=function(){return this.buffer.byteLength},i.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},i.clone=function(t){var i=new e(0,this.littleEndian,this.noAssert);return t?(i.buffer=new ArrayBuffer(this.buffer.byteLength),i.view=new Uint8Array(i.buffer)):(i.buffer=this.buffer,i.view=this.view),i.offset=this.offset,i.markedOffset=this.markedOffset,i.limit=this.limit,i},i.compact=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var i=e-t;if(0===i)return this.buffer=o,this.view=null,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=0,this;var n=new ArrayBuffer(i),a=new Uint8Array(n);return a.set(this.view.subarray(t,e)),this.buffer=n,this.view=a,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=i,this},i.copy=function(t,i){if(void 0===t&&(t=this.offset),void 0===i&&(i=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,t<0||t>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+i+" <= "+this.buffer.byteLength)}if(t===i)return new e(0,this.littleEndian,this.noAssert);var n=i-t,o=new e(n,this.littleEndian,this.noAssert);return o.offset=0,o.limit=n,o.markedOffset>=0&&(o.markedOffset-=t),this.copyTo(o,0,t,i),o},i.copyTo=function(t,i,n,o){var a,r;if(!this.noAssert&&!e.isByteBuffer(t))throw TypeError("Illegal target: Not a ByteBuffer");if(i=(r=void 0===i)?t.offset:0|i,n=(a=void 0===n)?this.offset:0|n,o=void 0===o?this.limit:0|o,i<0||i>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+i+" <= "+t.buffer.byteLength);if(n<0||o>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+n+" <= "+this.buffer.byteLength);var s=o-n;return 0===s?t:(t.ensureCapacity(i+s),t.view.set(this.view.subarray(n,o),i),a&&(this.offset+=s),r&&(t.offset+=s),this)},i.ensureCapacity=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},i.fill=function(t,e,i){var n=void 0===e;if(n&&(e=this.offset),"string"==typeof t&&t.length>0&&(t=t.charCodeAt(0)),void 0===e&&(e=this.offset),void 0===i&&(i=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(e>=i)return this;for(;e<i;)this.view[e++]=t;return n&&(this.offset=e),this},i.flip=function(){return this.limit=this.offset,this.offset=0,this},i.mark=function(t){if(t=void 0===t?this.offset:t,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=t,this},i.order=function(t){if(!this.noAssert&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!t,this},i.LE=function(t){return this.littleEndian=void 0===t||!!t,this},i.BE=function(t){return this.littleEndian=void 0!==t&&!t,this},i.prepend=function(t,i,n){"number"!=typeof i&&"string"==typeof i||(n=i,i=void 0);var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}t instanceof e||(t=e.wrap(t,i));var a=t.limit-t.offset;if(a<=0)return this;var r=a-n;if(r>0){var s=new ArrayBuffer(this.buffer.byteLength+r),c=new Uint8Array(s);c.set(this.view.subarray(n,this.buffer.byteLength),a),this.buffer=s,this.view=c,this.offset+=r,this.markedOffset>=0&&(this.markedOffset+=r),this.limit+=r,n+=r}else new Uint8Array(this.buffer);return this.view.set(t.view.subarray(t.offset,t.limit),n-a),t.offset=t.limit,o&&(this.offset-=a),this},i.prependTo=function(t,e){return t.prepend(this,e),this},i.printDebug=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},i.remaining=function(){return this.limit-this.offset},i.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},i.resize=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if((t|=0)<0)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t),i=new Uint8Array(e);i.set(this.view),this.buffer=e,this.view=i}return this},i.reverse=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e?this:(Array.prototype.reverse.call(this.view.subarray(t,e)),this)},i.skip=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.noAssert&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},i.slice=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i=this.clone();return i.offset=t,i.limit=e,i},i.toBuffer=function(t){var e=this.offset,i=this.limit;if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(!t&&0===e&&i===this.buffer.byteLength)return this.buffer;if(e===i)return o;var n=new ArrayBuffer(i-e);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(e,i),0),n},i.toArrayBuffer=i.toBuffer,i.toString=function(t,e,i){if(void 0===t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof t&&(i=e=t="utf8"),t){case"utf8":return this.toUTF8(e,i);case"base64":return this.toBase64(e,i);case"hex":return this.toHex(e,i);case"binary":return this.toBinary(e,i);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+t)}};var h=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],i=[],n=0,o=e.length;n<o;++n)i[e[n]]=n;return t.encode=function(t,i){for(var n,o;null!==(n=t());)i(e[n>>2&63]),o=(3&n)<<4,null!==(n=t())?(i(e[63&((o|=n>>4&15)|n>>4&15)]),o=(15&n)<<2,null!==(n=t())?(i(e[63&(o|n>>6&3)]),i(e[63&n])):(i(e[63&o]),i(61))):(i(e[63&o]),i(61),i(61))},t.decode=function(t,e){var n,o,a;function r(t){throw Error("Illegal character code: "+t)}for(;null!==(n=t());)if(void 0===(o=i[n])&&r(n),null!==(n=t())&&(void 0===(a=i[n])&&r(n),e(o<<2>>>0|(48&a)>>4),null!==(n=t()))){if(void 0===(o=i[n])){if(61===n)break;r(n)}if(e((15&a)<<4>>>0|(60&o)>>2),null!==(n=t())){if(void 0===(a=i[n])){if(61===n)break;r(n)}e((3&o)<<6>>>0|a)}}},t.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)},t}();i.toBase64=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),e|=0,(t|=0)<0||e>this.capacity||t>e)throw RangeError("begin, end");var i;return h.encode(function(){return t<e?this.view[t++]:null}.bind(this),i=s()),i()},e.fromBase64=function(t,i){if("string"!=typeof t)throw TypeError("str");var n=new e(t.length/4*3,i),o=0;return h.decode(r(t),function(t){n.view[o++]=t}),n.limit=o,n},e.btoa=function(t){return e.fromBinary(t).toBase64()},e.atob=function(t){return e.fromBase64(t).toBinary()},i.toBinary=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),e|=0,(t|=0)<0||e>this.capacity()||t>e)throw RangeError("begin, end");if(t===e)return"";for(var i=[],n=[];t<e;)i.push(this.view[t++]),i.length>=1024&&(n.push(String.fromCharCode.apply(String,i)),i=[]);return n.join("")+String.fromCharCode.apply(String,i)},e.fromBinary=function(t,i){if("string"!=typeof t)throw TypeError("str");for(var n,o=0,a=t.length,r=new e(a,i);o<a;){if((n=t.charCodeAt(o))>255)throw RangeError("illegal char code: "+n);r.view[o++]=n}return r.limit=a,r},i.toDebug=function(t){for(var e,i=-1,n=this.buffer.byteLength,o="",a="",r="";i<n;){if(-1!==i&&(o+=(e=this.view[i])<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(a+=e>32&&e<127?String.fromCharCode(e):".")),++i,t&&i>0&&i%16==0&&i!==n){for(;o.length<51;)o+=" ";r+=o+a+"\n",o=a=""}i===this.offset&&i===this.limit?o+=i===this.markedOffset?"!":"|":i===this.offset?o+=i===this.markedOffset?"[":"<":i===this.limit?o+=i===this.markedOffset?"]":">":o+=i===this.markedOffset?"'":t||0!==i&&i!==n?" ":""}if(t&&" "!==o){for(;o.length<51;)o+=" ";r+=o+a+"\n"}return t?r:o},e.fromDebug=function(t,i,n){for(var o,a,r=t.length,s=new e((r+1)/3|0,i,n),c=0,l=0,h=!1,u=!1,d=!1,p=!1,f=!1;c<r;){switch(o=t.charAt(c++)){case"!":if(!n){if(u||d||p){f=!0;break}u=d=p=!0}s.offset=s.markedOffset=s.limit=l,h=!1;break;case"|":if(!n){if(u||p){f=!0;break}u=p=!0}s.offset=s.limit=l,h=!1;break;case"[":if(!n){if(u||d){f=!0;break}u=d=!0}s.offset=s.markedOffset=l,h=!1;break;case"<":if(!n){if(u){f=!0;break}u=!0}s.offset=l,h=!1;break;case"]":if(!n){if(p||d){f=!0;break}p=d=!0}s.limit=s.markedOffset=l,h=!1;break;case">":if(!n){if(p){f=!0;break}p=!0}s.limit=l,h=!1;break;case"'":if(!n){if(d){f=!0;break}d=!0}s.markedOffset=l,h=!1;break;case" ":h=!1;break;default:if(!n&&h){f=!0;break}if(a=parseInt(o+t.charAt(c++),16),!n&&(isNaN(a)||a<0||a>255))throw TypeError("Illegal str: Not a debug encoded string");s.view[l++]=a,h=!0}if(f)throw TypeError("Illegal str: Invalid symbol at "+c)}if(!n){if(!u||!p)throw TypeError("Illegal str: Missing offset or limit");if(l<s.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+l+" < "+r)}return s},i.toHex=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.limit:e,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var i,n=new Array(e-t);t<e;)(i=this.view[t++])<16?n.push("0",i.toString(16)):n.push(i.toString(16));return n.join("")},e.fromHex=function(t,i,n){if(!n){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var o,a=t.length,r=new e(a/2|0,i),s=0,c=0;s<a;s+=2){if(o=parseInt(t.substring(s,s+2),16),!n&&(!isFinite(o)||o<0||o>255))throw TypeError("Illegal str: Contains non-hex characters");r.view[c++]=o}return r.limit=c,r};var u=function(){var t={MAX_CODEPOINT:1114111,encodeUTF8:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<128?e(127&i):i<2048?(e(i>>6&31|192),e(63&i|128)):i<65536?(e(i>>12&15|224),e(i>>6&63|128),e(63&i|128)):(e(i>>18&7|240),e(i>>12&63|128),e(i>>6&63|128),e(63&i|128)),i=null},decodeUTF8:function(t,e){for(var i,n,o,a,r=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(i=t());)if(0==(128&i))e(i);else if(192==(224&i))null===(n=t())&&r([i,n]),e((31&i)<<6|63&n);else if(224==(240&i))(null===(n=t())||null===(o=t()))&&r([i,n,o]),e((15&i)<<12|(63&n)<<6|63&o);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);(null===(n=t())||null===(o=t())||null===(a=t()))&&r([i,n,o,a]),e((7&i)<<18|(63&n)<<12|(63&o)<<6|63&a)}},UTF16toUTF8:function(t,e){for(var i,n=null;null!==(i=null!==n?n:t());)i>=55296&&i<=57343&&null!==(n=t())&&n>=56320&&n<=57343?(e(1024*(i-55296)+n-56320+65536),n=null):e(i);null!==n&&e(n)},UTF8toUTF16:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<=65535?e(i):(e(55296+((i-=65536)>>10)),e(i%1024+56320)),i=null},encodeUTF16toUTF8:function(e,i){t.UTF16toUTF8(e,function(e){t.encodeUTF8(e,i)})},decodeUTF8toUTF16:function(e,i){t.decodeUTF8(e,function(e){t.UTF8toUTF16(e,i)})},calculateCodePoint:function(t){return t<128?1:t<2048?2:t<65536?3:4},calculateUTF8:function(t){for(var e,i=0;null!==(e=t());)i+=e<128?1:e<2048?2:e<65536?3:4;return i},calculateUTF16asUTF8:function(e){var i=0,n=0;return t.UTF16toUTF8(e,function(t){++i,n+=t<128?1:t<2048?2:t<65536?3:4}),[i,n]}};return t}();return i.toUTF8=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;try{u.decodeUTF8toUTF16(function(){return t<e?this.view[t++]:null}.bind(this),i=s())}catch(i){if(t!==e)throw RangeError("Illegal range: Truncated data, "+t+" != "+e)}return i()},e.fromUTF8=function(t,i,n){if(!n&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var o=new e(u.calculateUTF16asUTF8(r(t),!0)[1],i,n),a=0;return u.encodeUTF16toUTF8(r(t),function(t){o.view[a++]=t}),o.limit=a,o},e}),cc._RF.pop()},{long:"long"}],index:[function(t,e,i){"use strict";cc._RF.push(e,"c1ee7YAhx5HIaZzYCm6B3iQ","index"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./arrays");i.arrays=n;var o=t("./Bag");i.Bag=o.default;var a=t("./BSTree");i.BSTree=a.default;var r=t("./BSTreeKV");i.BSTreeKV=r.default;var s=t("./Heap");i.Heap=s.default;var c=t("./LinkedDictionary");i.LinkedDictionary=c.default;var l=t("./MultiDictionary");i.MultiDictionary=l.default;var h=t("./FactoryDictionary");i.FactoryDictionary=h.default;var u=t("./FactoryDictionary");i.DefaultDictionary=u.default;var d=t("./Queue");i.Queue=d.default;var p=t("./PriorityQueue");i.PriorityQueue=p.default;var f=t("./Set");i.Set=f.default;var S=t("./Stack");i.Stack=S.default;var y=t("./MultiRootTree");i.MultiRootTree=y.default;var m=t("./util");i.util=m,cc._RF.pop()},{"./BSTree":"BSTree","./BSTreeKV":"BSTreeKV","./Bag":"Bag","./FactoryDictionary":"FactoryDictionary","./Heap":"Heap","./LinkedDictionary":"LinkedDictionary","./MultiDictionary":"MultiDictionary","./MultiRootTree":"MultiRootTree","./PriorityQueue":"PriorityQueue","./Queue":"Queue","./Set":"Set","./Stack":"Stack","./arrays":"arrays","./util":"util"}],long:[function(t,e,i){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0c7c2en/tNIwZ8/c3KsC6l7","long"),function(t,o){"object"==(void 0===i?"undefined":n(i))&&"object"==(void 0===e?"undefined":n(e))?e.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==(void 0===i?"undefined":n(i))?i.Long=o():t.Long=o()}("undefined"!=typeof self?self:void 0,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e){function i(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function n(t){return!0===(t&&t.__isLong__)}function o(t,e){var i,n,o;return e?(o=0<=(t>>>=0)&&t<256)&&(n=u[t])?n:(i=r(t,(0|t)<0?-1:0,!0),o&&(u[t]=i),i):(o=-128<=(t|=0)&&t<128)&&(n=h[t])?n:(i=r(t,t<0?-1:0,!1),o&&(h[t]=i),i)}function a(t,e){if(isNaN(t))return e?g:m;if(e){if(t<0)return g;if(t>=f)return A}else{if(t<=-S)return b;if(t+1>=S)return w}return t<0?a(-t,e).neg():r(t%p|0,t/p|0,e)}function r(t,e,n){return new i(t,e,n)}function s(t,e,i){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return m;if("number"==typeof e?(i=e,e=!1):e=!!e,(i=i||10)<2||36<i)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return s(t.substring(1),e,i).neg();for(var o=a(d(i,8)),r=m,c=0;c<t.length;c+=8){var l=Math.min(8,t.length-c),h=parseInt(t.substring(c,c+l),i);if(l<8){var u=a(d(i,l));r=r.mul(u).add(a(h))}else r=(r=r.mul(o)).add(a(h))}return r.unsigned=e,r}function c(t,e){return"number"==typeof t?a(t,e):"string"==typeof t?s(t,e):r(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}t.exports=i;var l=null;try{l=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=n;var h={},u={};i.fromInt=o,i.fromNumber=a,i.fromBits=r;var d=Math.pow;i.fromString=s,i.fromValue=c;var p=4294967296,f=p*p,S=f/2,y=o(1<<24),m=o(0);i.ZERO=m;var g=o(0,!0);i.UZERO=g;var C=o(1);i.ONE=C;var T=o(1,!0);i.UONE=T;var v=o(-1);i.NEG_ONE=v;var w=r(-1,2147483647,!1);i.MAX_VALUE=w;var A=r(-1,-1,!0);i.MAX_UNSIGNED_VALUE=A;var b=r(0,-2147483648,!1);i.MIN_VALUE=b;var _=i.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},_.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(b)){var e=a(t),i=this.div(e),n=i.mul(e).sub(this);return i.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var o=a(d(t,6),this.unsigned),r=this,s="";;){var c=r.div(o),l=(r.sub(c.mul(o)).toInt()>>>0).toString(t);if((r=c).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},_.isZero=function(){return 0===this.high&&0===this.low},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return 1==(1&this.low)},_.isEven=function(){return 0==(1&this.low)},_.equals=function(t){return n(t)||(t=c(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},_.eq=_.equals,_.notEquals=function(t){return!this.eq(t)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(t){return this.comp(t)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(t){return this.comp(t)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(t){return this.comp(t)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(t){return this.comp(t)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(t){if(n(t)||(t=c(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(C)},_.neg=_.negate,_.add=function(t){n(t)||(t=c(t));var e=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,s=t.high>>>16,l=65535&t.high,h=t.low>>>16,u=0,d=0,p=0,f=0;return p+=(f+=a+(65535&t.low))>>>16,d+=(p+=o+h)>>>16,u+=(d+=i+l)>>>16,u+=e+s,r((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},_.subtract=function(t){return n(t)||(t=c(t)),this.add(t.neg())},_.sub=_.subtract,_.multiply=function(t){if(this.isZero())return m;if(n(t)||(t=c(t)),l)return r(l.mul(this.low,this.high,t.low,t.high),l.get_high(),this.unsigned);if(t.isZero())return m;if(this.eq(b))return t.isOdd()?b:m;if(t.eq(b))return this.isOdd()?b:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(y)&&t.lt(y))return a(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,h=t.high>>>16,u=65535&t.high,d=t.low>>>16,p=65535&t.low,f=0,S=0,g=0,C=0;return g+=(C+=s*p)>>>16,S+=(g+=o*p)>>>16,g&=65535,S+=(g+=s*d)>>>16,f+=(S+=i*p)>>>16,S&=65535,f+=(S+=o*d)>>>16,S&=65535,f+=(S+=s*u)>>>16,f+=e*p+i*d+o*u+s*h,r((g&=65535)<<16|(C&=65535),(f&=65535)<<16|(S&=65535),this.unsigned)},_.mul=_.multiply,_.divide=function(t){if(n(t)||(t=c(t)),t.isZero())throw Error("division by zero");if(l)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?r((this.unsigned?l.div_u:l.div_s)(this.low,this.high,t.low,t.high),l.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:m;var e,i,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return g;if(t.gt(this.shru(1)))return T;o=g}else{if(this.eq(b))return t.eq(C)||t.eq(v)?b:t.eq(b)?C:(e=this.shr(1).div(t).shl(1)).eq(m)?t.isNegative()?C:v:(i=this.sub(t.mul(e)),o=e.add(i.div(t)));if(t.eq(b))return this.unsigned?g:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=m}for(i=this;i.gte(t);){e=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(e)/Math.LN2),h=s<=48?1:d(2,s-48),u=a(e),p=u.mul(t);p.isNegative()||p.gt(i);)p=(u=a(e-=h,this.unsigned)).mul(t);u.isZero()&&(u=C),o=o.add(u),i=i.sub(p)}return o},_.div=_.divide,_.modulo=function(t){return n(t)||(t=c(t)),l?r((this.unsigned?l.rem_u:l.rem_s)(this.low,this.high,t.low,t.high),l.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return r(~this.low,~this.high,this.unsigned)},_.and=function(t){return n(t)||(t=c(t)),r(this.low&t.low,this.high&t.high,this.unsigned)},_.or=function(t){return n(t)||(t=c(t)),r(this.low|t.low,this.high|t.high,this.unsigned)},_.xor=function(t){return n(t)||(t=c(t)),r(this.low^t.low,this.high^t.high,this.unsigned)},_.shiftLeft=function(t){return n(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?r(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):r(0,this.low<<t-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(t){return n(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?r(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):r(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(t){return n(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?r(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):r(32===t?this.high:this.high>>>t-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.rotateLeft=function(t){var e;return n(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?r(this.high,this.low,this.unsigned):t<32?(e=32-t,r(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(e=32-(t-=32),r(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},_.rotl=_.rotateLeft,_.rotateRight=function(t){var e;return n(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?r(this.high,this.low,this.unsigned):t<32?(e=32-t,r(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(e=32-(t-=32),r(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},_.rotr=_.rotateRight,_.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},_.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},_.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},i.fromBytes=function(t,e,n){return n?i.fromBytesLE(t,e):i.fromBytesBE(t,e)},i.fromBytesLE=function(t,e){return new i(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},i.fromBytesBE=function(t,e){return new i(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}}])}),cc._RF.pop()},{}],util:[function(t,e,i){"use strict";cc._RF.push(e,"daba6vov79GzZfK1IT39Am5","util"),Object.defineProperty(i,"__esModule",{value:!0});var n=Object.prototype.hasOwnProperty;function o(t){return"function"==typeof t}function a(t){return void 0===t}function r(t){return"[object String]"===Object.prototype.toString.call(t)}i.has=function(t,e){return n.call(t,e)},i.defaultCompare=function(t,e){return t<e?-1:t===e?0:1},i.defaultEquals=function(t,e){return t===e},i.defaultToString=function(t){return null===t?"COLLECTION_NULL":a(t)?"COLLECTION_UNDEFINED":r(t)?"$s"+t:"$o"+t.toString()},i.makeString=function(t,e){if(void 0===e&&(e=","),null===t)return"COLLECTION_NULL";if(a(t))return"COLLECTION_UNDEFINED";if(r(t))return t.toString();var n="{",o=!0;for(var s in t)i.has(t,s)&&(o?o=!1:n+=e,n=n+s+":"+t[s]);return n+"}"},i.isFunction=o,i.isUndefined=a,i.isString=r,i.reverseCompareFunction=function(t){return a(t)||!o(t)?function(t,e){return t<e?1:t===e?0:-1}:function(e,i){return-1*t(e,i)}},i.compareToEquals=function(t){return function(e,i){return 0===t(e,i)}},cc._RF.pop()},{}]},{},["BMFont","Layout","MouseEvents","PosPercentageLayout","ScreenTouchEvents","TableLayout","WidgetPercentage","bytebuffer","long","BSTree","BSTreeKV","Bag","Dictionary","FactoryDictionary","Heap","LinkedDictionary","LinkedList","LinkedListEx","MultiDictionary","MultiRootTree","PriorityQueue","Queue","Set","Stack","arrays","index","util","ScAction","ScActionBase","ScActionMgr","Cmd","CmdMgr","Table","TableLayoutCore","TableTypes","ScMath","DePacketor","MsgProcesser","Packet","ScNetTypes","Socket","SocketMgr","SocketTask","ScPool","ScPoolDict","ScPoolMgr","ScDesginAction","ScStateMachine","ScStateMachineTypes","GameTaskMgr","ScTaskTypes","Task","TaskMgr","TaskProcesser","TaskPump","Timer","ScTweener","ScTweenerAction","ScTweenerMgr","ScTweenerPreset","ScTweenerRun","ScTweenerSequence","ScTweenerTypes","ScTweenerUtils","ScObject","ScTypes","ScUtils","UniqueID","UniqueSingleMachineID","HttpHelp","MD5","ClientServerLinker","CardEffectAction","CardShakeAction","CardWobbleAction","FilpPaiAction","SoundAction","XiPaiAction","XiPaiDstPosAction","Card","CardAlgoTypes","CardsTransform","CardsTypeMatch","CardsAndCardsBind","CardsAndSlotsBind","CardsProcesserTypes","CardsViewer","Slot","SlotsUI","SlotsViewer","GameClient","PlayerDataUpdateCmd","RoomDataUpdateCmd","CardsTypeSpriteAsset","GameAudios","GameRes","CardPool","PrefabPool","Login","CmpCardsStageAction","OrganizeGameStageAction","SelectCardsStageAction","TableFaPaiAction","TableFaPaiAction2","WaitCmpCardsStageAction","WaitNextRoundGameAction","Player","BeFireAction","BeFireShakeAction","DisperseCardsAction","FanPaiAction","FireAction","GaiPaiAction","ReadyGameAction","ShowCardsAction","ShowCardsTypeAction","ShowSlotScoreAction","ShowTotalScoreAction","WholeFanPaiAction","AvatarBoxLayout","GunLayout","Score","SpecCardsTypeLayout","PlayerSeatViewer","Room","Scene","SceneSwitch","BgMask","MsgBox","GameEntry","CommonMsgProcesser","GameError","GameMsg","GameServer","GameServerTypes","GameServersDatas","AuthSignatureInfo","EnterOrLeaveGoldRoom","HeadInfo","InfoBase","LoginInfo","MatchingActionInfo","PlayGameInfo","PlayerInfo","PublicPlayerGameInfo","RoomInfo","ServerCardInfo","GameTypes","GameUtils"]);